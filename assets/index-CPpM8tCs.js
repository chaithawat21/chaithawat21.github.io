(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Bq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gz={exports:{}},r3={},Az={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA=Symbol.for("react.element"),Pq=Symbol.for("react.portal"),Rq=Symbol.for("react.fragment"),Dq=Symbol.for("react.strict_mode"),Lq=Symbol.for("react.profiler"),Fq=Symbol.for("react.provider"),Oq=Symbol.for("react.context"),Uq=Symbol.for("react.forward_ref"),zq=Symbol.for("react.suspense"),kq=Symbol.for("react.memo"),Nq=Symbol.for("react.lazy"),AB=Symbol.iterator;function Gq(n){return n===null||typeof n!="object"?null:(n=AB&&n[AB]||n["@@iterator"],typeof n=="function"?n:null)}var vz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yz=Object.assign,xz={};function Lm(n,e,t){this.props=n,this.context=e,this.refs=xz,this.updater=t||vz}Lm.prototype.isReactComponent={};Lm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Lm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function _z(){}_z.prototype=Lm.prototype;function gT(n,e,t){this.props=n,this.context=e,this.refs=xz,this.updater=t||vz}var AT=gT.prototype=new _z;AT.constructor=gT;yz(AT,Lm.prototype);AT.isPureReactComponent=!0;var vB=Array.isArray,Ez=Object.prototype.hasOwnProperty,vT={current:null},wz={key:!0,ref:!0,__self:!0,__source:!0};function Sz(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ez.call(e,i)&&!wz.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:SA,type:n,key:s,ref:o,props:r,_owner:vT.current}}function Hq(n,e){return{$$typeof:SA,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function yT(n){return typeof n=="object"&&n!==null&&n.$$typeof===SA}function Qq(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var yB=/\/+/g;function Kw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Qq(""+n.key):e.toString(36)}function Ax(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case SA:case Pq:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Kw(o,0):i,vB(r)?(t="",n!=null&&(t=n.replace(yB,"$&/")+"/"),Ax(r,e,t,"",function(c){return c})):r!=null&&(yT(r)&&(r=Hq(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(yB,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",vB(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Kw(s,a);o+=Ax(s,e,t,l,r)}else if(l=Gq(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Kw(s,a++),o+=Ax(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $v(n,e,t){if(n==null)return n;var i=[],r=0;return Ax(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Vq(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Cs={current:null},vx={transition:null},Wq={ReactCurrentDispatcher:Cs,ReactCurrentBatchConfig:vx,ReactCurrentOwner:vT};function Cz(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:$v,forEach:function(n,e,t){$v(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return $v(n,function(){e++}),e},toArray:function(n){return $v(n,function(e){return e})||[]},only:function(n){if(!yT(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Mn.Component=Lm;Mn.Fragment=Rq;Mn.Profiler=Lq;Mn.PureComponent=gT;Mn.StrictMode=Dq;Mn.Suspense=zq;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wq;Mn.act=Cz;Mn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=yz({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vT.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Ez.call(e,l)&&!wz.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:SA,type:n.type,key:r,ref:s,props:i,_owner:o}};Mn.createContext=function(n){return n={$$typeof:Oq,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Fq,_context:n},n.Consumer=n};Mn.createElement=Sz;Mn.createFactory=function(n){var e=Sz.bind(null,n);return e.type=n,e};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(n){return{$$typeof:Uq,render:n}};Mn.isValidElement=yT;Mn.lazy=function(n){return{$$typeof:Nq,_payload:{_status:-1,_result:n},_init:Vq}};Mn.memo=function(n,e){return{$$typeof:kq,type:n,compare:e===void 0?null:e}};Mn.startTransition=function(n){var e=vx.transition;vx.transition={};try{n()}finally{vx.transition=e}};Mn.unstable_act=Cz;Mn.useCallback=function(n,e){return Cs.current.useCallback(n,e)};Mn.useContext=function(n){return Cs.current.useContext(n)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(n){return Cs.current.useDeferredValue(n)};Mn.useEffect=function(n,e){return Cs.current.useEffect(n,e)};Mn.useId=function(){return Cs.current.useId()};Mn.useImperativeHandle=function(n,e,t){return Cs.current.useImperativeHandle(n,e,t)};Mn.useInsertionEffect=function(n,e){return Cs.current.useInsertionEffect(n,e)};Mn.useLayoutEffect=function(n,e){return Cs.current.useLayoutEffect(n,e)};Mn.useMemo=function(n,e){return Cs.current.useMemo(n,e)};Mn.useReducer=function(n,e,t){return Cs.current.useReducer(n,e,t)};Mn.useRef=function(n){return Cs.current.useRef(n)};Mn.useState=function(n){return Cs.current.useState(n)};Mn.useSyncExternalStore=function(n,e,t){return Cs.current.useSyncExternalStore(n,e,t)};Mn.useTransition=function(){return Cs.current.useTransition()};Mn.version="18.3.1";Az.exports=Mn;var w=Az.exports;const xl=Dm(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jq=w,Xq=Symbol.for("react.element"),Yq=Symbol.for("react.fragment"),qq=Object.prototype.hasOwnProperty,Kq=jq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jq={key:!0,ref:!0,__self:!0,__source:!0};function Mz(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)qq.call(e,i)&&!Jq.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Xq,type:n,key:s,ref:o,props:r,_owner:Kq.current}}r3.Fragment=Yq;r3.jsx=Mz;r3.jsxs=Mz;gz.exports=r3;var Ge=gz.exports,vM={},bz={exports:{}},_o={},Tz={exports:{}},Iz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,W){var V=O.length;O.push(W);e:for(;0<V;){var U=V-1>>>1,Y=O[U];if(0<r(Y,W))O[U]=W,O[V]=Y,V=U;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],V=O.pop();if(V!==W){O[0]=V;e:for(var U=0,Y=O.length,$=Y>>>1;U<$;){var N=2*(U+1)-1,Q=O[N],j=N+1,X=O[j];if(0>r(Q,V))j<Y&&0>r(X,Q)?(O[U]=X,O[j]=V,U=j):(O[U]=Q,O[N]=V,U=N);else if(j<Y&&0>r(X,V))O[U]=X,O[j]=V,U=j;else break e}}return W}function r(O,W){var V=O.sortIndex-W.sortIndex;return V!==0?V:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,m=!1,A=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function E(O){if(A=!1,v(O),!m)if(t(l)!==null)m=!0,K(S);else{var W=t(c);W!==null&&J(E,W.startTime-O)}}function S(O,W){m=!1,A&&(A=!1,p(b),b=-1),d=!0;var V=f;try{for(v(W),h=t(l);h!==null&&(!(h.expirationTime>W)||O&&!F());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var Y=U(h.expirationTime<=W);W=n.unstable_now(),typeof Y=="function"?h.callback=Y:h===t(l)&&i(l),v(W)}else i(l);h=t(l)}if(h!==null)var $=!0;else{var N=t(c);N!==null&&J(E,N.startTime-W),$=!1}return $}finally{h=null,f=V,d=!1}}var C=!1,M=null,b=-1,T=5,I=-1;function F(){return!(n.unstable_now()-I<T)}function R(){if(M!==null){var O=n.unstable_now();I=O;var W=!0;try{W=M(!0,O)}finally{W?z():(C=!1,M=null)}}else C=!1}var z;if(typeof g=="function")z=function(){g(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=R,z=function(){H.postMessage(null)}}else z=function(){y(R,0)};function K(O){M=O,C||(C=!0,z())}function J(O,W){b=y(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){m||d||(m=!0,K(S))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var V=f;f=W;try{return O()}finally{f=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=f;f=O;try{return W()}finally{f=V}},n.unstable_scheduleCallback=function(O,W,V){var U=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?U+V:U):V=U,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=V+Y,O={id:u++,callback:W,priorityLevel:O,startTime:V,expirationTime:Y,sortIndex:-1},V>U?(O.sortIndex=V,e(c,O),t(l)===null&&O===t(c)&&(A?(p(b),b=-1):A=!0,J(E,V-U))):(O.sortIndex=Y,e(l,O),m||d||(m=!0,K(S))),O},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(O){var W=f;return function(){var V=f;f=W;try{return O.apply(this,arguments)}finally{f=V}}}})(Iz);Tz.exports=Iz;var Zq=Tz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $q=w,Ao=Zq;function lt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bz=new Set,Rg={};function Lf(n,e){am(n,e),am(n+"Capture",e)}function am(n,e){for(Rg[n]=e,n=0;n<e.length;n++)Bz.add(e[n])}var yc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yM=Object.prototype.hasOwnProperty,eK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xB={},_B={};function tK(n){return yM.call(_B,n)?!0:yM.call(xB,n)?!1:eK.test(n)?_B[n]=!0:(xB[n]=!0,!1)}function nK(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function iK(n,e,t,i){if(e===null||typeof e>"u"||nK(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ms(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Xr[n]=new Ms(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Xr[e]=new Ms(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Xr[n]=new Ms(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Xr[n]=new Ms(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Xr[n]=new Ms(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Xr[n]=new Ms(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Xr[n]=new Ms(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Xr[n]=new Ms(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Xr[n]=new Ms(n,5,!1,n.toLowerCase(),null,!1,!1)});var xT=/[\-:]([a-z])/g;function _T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(xT,_T);Xr[e]=new Ms(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(xT,_T);Xr[e]=new Ms(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(xT,_T);Xr[e]=new Ms(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Xr[n]=new Ms(n,1,!1,n.toLowerCase(),null,!1,!1)});Xr.xlinkHref=new Ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Xr[n]=new Ms(n,1,!1,n.toLowerCase(),null,!0,!0)});function ET(n,e,t,i){var r=Xr.hasOwnProperty(e)?Xr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iK(e,t,r,i)&&(t=null),i||r===null?tK(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Tc=$q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ey=Symbol.for("react.element"),Ep=Symbol.for("react.portal"),wp=Symbol.for("react.fragment"),wT=Symbol.for("react.strict_mode"),xM=Symbol.for("react.profiler"),Pz=Symbol.for("react.provider"),Rz=Symbol.for("react.context"),ST=Symbol.for("react.forward_ref"),_M=Symbol.for("react.suspense"),EM=Symbol.for("react.suspense_list"),CT=Symbol.for("react.memo"),nu=Symbol.for("react.lazy"),Dz=Symbol.for("react.offscreen"),EB=Symbol.iterator;function _0(n){return n===null||typeof n!="object"?null:(n=EB&&n[EB]||n["@@iterator"],typeof n=="function"?n:null)}var Di=Object.assign,Jw;function O1(n){if(Jw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Jw=e&&e[1]||""}return`
`+Jw+n}var Zw=!1;function $w(n,e){if(!n||Zw)return"";Zw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?O1(n):""}function rK(n){switch(n.tag){case 5:return O1(n.type);case 16:return O1("Lazy");case 13:return O1("Suspense");case 19:return O1("SuspenseList");case 0:case 2:case 15:return n=$w(n.type,!1),n;case 11:return n=$w(n.type.render,!1),n;case 1:return n=$w(n.type,!0),n;default:return""}}function wM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case wp:return"Fragment";case Ep:return"Portal";case xM:return"Profiler";case wT:return"StrictMode";case _M:return"Suspense";case EM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Rz:return(n.displayName||"Context")+".Consumer";case Pz:return(n._context.displayName||"Context")+".Provider";case ST:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case CT:return e=n.displayName||null,e!==null?e:wM(n.type)||"Memo";case nu:e=n._payload,n=n._init;try{return wM(n(e))}catch{}}return null}function sK(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wM(e);case 8:return e===wT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ou(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Lz(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oK(n){var e=Lz(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ty(n){n._valueTracker||(n._valueTracker=oK(n))}function Fz(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Lz(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Kx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function SM(n,e){var t=e.checked;return Di({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function wB(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ou(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oz(n,e){e=e.checked,e!=null&&ET(n,"checked",e,!1)}function CM(n,e){Oz(n,e);var t=Ou(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?MM(n,e.type,t):e.hasOwnProperty("defaultValue")&&MM(n,e.type,Ou(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function SB(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function MM(n,e,t){(e!=="number"||Kx(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var U1=Array.isArray;function Vp(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ou(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function bM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(lt(91));return Di({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function CB(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(lt(92));if(U1(t)){if(1<t.length)throw Error(lt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ou(t)}}function Uz(n,e){var t=Ou(e.value),i=Ou(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function MB(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function zz(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?zz(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ny,kz=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ny=ny||document.createElement("div"),ny.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ny.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Dg(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var J1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aK=["Webkit","ms","Moz","O"];Object.keys(J1).forEach(function(n){aK.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),J1[e]=J1[n]})});function Nz(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||J1.hasOwnProperty(n)&&J1[n]?(""+e).trim():e+"px"}function Gz(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=Nz(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var lK=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IM(n,e){if(e){if(lK[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(lt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(lt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(lt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(lt(62))}}function BM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PM=null;function MT(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var RM=null,Wp=null,jp=null;function bB(n){if(n=bA(n)){if(typeof RM!="function")throw Error(lt(280));var e=n.stateNode;e&&(e=c3(e),RM(n.stateNode,n.type,e))}}function Hz(n){Wp?jp?jp.push(n):jp=[n]:Wp=n}function Qz(){if(Wp){var n=Wp,e=jp;if(jp=Wp=null,bB(n),e)for(n=0;n<e.length;n++)bB(e[n])}}function Vz(n,e){return n(e)}function Wz(){}var eS=!1;function jz(n,e,t){if(eS)return n(e,t);eS=!0;try{return Vz(n,e,t)}finally{eS=!1,(Wp!==null||jp!==null)&&(Wz(),Qz())}}function Lg(n,e){var t=n.stateNode;if(t===null)return null;var i=c3(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(lt(231,e,typeof t));return t}var DM=!1;if(yc)try{var E0={};Object.defineProperty(E0,"passive",{get:function(){DM=!0}}),window.addEventListener("test",E0,E0),window.removeEventListener("test",E0,E0)}catch{DM=!1}function cK(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Z1=!1,Jx=null,Zx=!1,LM=null,uK={onError:function(n){Z1=!0,Jx=n}};function hK(n,e,t,i,r,s,o,a,l){Z1=!1,Jx=null,cK.apply(uK,arguments)}function fK(n,e,t,i,r,s,o,a,l){if(hK.apply(this,arguments),Z1){if(Z1){var c=Jx;Z1=!1,Jx=null}else throw Error(lt(198));Zx||(Zx=!0,LM=c)}}function Ff(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Xz(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function TB(n){if(Ff(n)!==n)throw Error(lt(188))}function dK(n){var e=n.alternate;if(!e){if(e=Ff(n),e===null)throw Error(lt(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return TB(r),n;if(s===i)return TB(r),e;s=s.sibling}throw Error(lt(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(lt(189))}}if(t.alternate!==i)throw Error(lt(190))}if(t.tag!==3)throw Error(lt(188));return t.stateNode.current===t?n:e}function Yz(n){return n=dK(n),n!==null?qz(n):null}function qz(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qz(n);if(e!==null)return e;n=n.sibling}return null}var Kz=Ao.unstable_scheduleCallback,IB=Ao.unstable_cancelCallback,pK=Ao.unstable_shouldYield,mK=Ao.unstable_requestPaint,Ki=Ao.unstable_now,gK=Ao.unstable_getCurrentPriorityLevel,bT=Ao.unstable_ImmediatePriority,Jz=Ao.unstable_UserBlockingPriority,$x=Ao.unstable_NormalPriority,AK=Ao.unstable_LowPriority,Zz=Ao.unstable_IdlePriority,s3=null,_l=null;function vK(n){if(_l&&typeof _l.onCommitFiberRoot=="function")try{_l.onCommitFiberRoot(s3,n,void 0,(n.current.flags&128)===128)}catch{}}var Ua=Math.clz32?Math.clz32:_K,yK=Math.log,xK=Math.LN2;function _K(n){return n>>>=0,n===0?32:31-(yK(n)/xK|0)|0}var iy=64,ry=4194304;function z1(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function e_(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=z1(a):(s&=o,s!==0&&(i=z1(s)))}else o=t&~r,o!==0?i=z1(o):s!==0&&(i=z1(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Ua(e),r=1<<t,i|=n[t],e&=~r;return i}function EK(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wK(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ua(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=EK(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function FM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $z(){var n=iy;return iy<<=1,!(iy&4194240)&&(iy=64),n}function tS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function CA(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ua(e),n[e]=t}function SK(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Ua(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function TT(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Ua(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Kn=0;function ek(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var tk,IT,nk,ik,rk,OM=!1,sy=[],vu=null,yu=null,xu=null,Fg=new Map,Og=new Map,su=[],CK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BB(n,e){switch(n){case"focusin":case"focusout":vu=null;break;case"dragenter":case"dragleave":yu=null;break;case"mouseover":case"mouseout":xu=null;break;case"pointerover":case"pointerout":Fg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Og.delete(e.pointerId)}}function w0(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=bA(e),e!==null&&IT(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function MK(n,e,t,i,r){switch(e){case"focusin":return vu=w0(vu,n,e,t,i,r),!0;case"dragenter":return yu=w0(yu,n,e,t,i,r),!0;case"mouseover":return xu=w0(xu,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Fg.set(s,w0(Fg.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Og.set(s,w0(Og.get(s)||null,n,e,t,i,r)),!0}return!1}function sk(n){var e=qh(n.target);if(e!==null){var t=Ff(e);if(t!==null){if(e=t.tag,e===13){if(e=Xz(t),e!==null){n.blockedOn=e,rk(n.priority,function(){nk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=UM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);PM=i,t.target.dispatchEvent(i),PM=null}else return e=bA(t),e!==null&&IT(e),n.blockedOn=t,!1;e.shift()}return!0}function PB(n,e,t){yx(n)&&t.delete(e)}function bK(){OM=!1,vu!==null&&yx(vu)&&(vu=null),yu!==null&&yx(yu)&&(yu=null),xu!==null&&yx(xu)&&(xu=null),Fg.forEach(PB),Og.forEach(PB)}function S0(n,e){n.blockedOn===e&&(n.blockedOn=null,OM||(OM=!0,Ao.unstable_scheduleCallback(Ao.unstable_NormalPriority,bK)))}function Ug(n){function e(r){return S0(r,n)}if(0<sy.length){S0(sy[0],n);for(var t=1;t<sy.length;t++){var i=sy[t];i.blockedOn===n&&(i.blockedOn=null)}}for(vu!==null&&S0(vu,n),yu!==null&&S0(yu,n),xu!==null&&S0(xu,n),Fg.forEach(e),Og.forEach(e),t=0;t<su.length;t++)i=su[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<su.length&&(t=su[0],t.blockedOn===null);)sk(t),t.blockedOn===null&&su.shift()}var Xp=Tc.ReactCurrentBatchConfig,t_=!0;function TK(n,e,t,i){var r=Kn,s=Xp.transition;Xp.transition=null;try{Kn=1,BT(n,e,t,i)}finally{Kn=r,Xp.transition=s}}function IK(n,e,t,i){var r=Kn,s=Xp.transition;Xp.transition=null;try{Kn=4,BT(n,e,t,i)}finally{Kn=r,Xp.transition=s}}function BT(n,e,t,i){if(t_){var r=UM(n,e,t,i);if(r===null)hS(n,e,i,n_,t),BB(n,i);else if(MK(r,n,e,t,i))i.stopPropagation();else if(BB(n,i),e&4&&-1<CK.indexOf(n)){for(;r!==null;){var s=bA(r);if(s!==null&&tk(s),s=UM(n,e,t,i),s===null&&hS(n,e,i,n_,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else hS(n,e,i,null,t)}}var n_=null;function UM(n,e,t,i){if(n_=null,n=MT(i),n=qh(n),n!==null)if(e=Ff(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Xz(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return n_=n,null}function ok(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gK()){case bT:return 1;case Jz:return 4;case $x:case AK:return 16;case Zz:return 536870912;default:return 16}default:return 16}}var au=null,PT=null,xx=null;function ak(){if(xx)return xx;var n,e=PT,t=e.length,i,r="value"in au?au.value:au.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return xx=r.slice(n,1<i?1-i:void 0)}function _x(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function oy(){return!0}function RB(){return!1}function Eo(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?oy:RB,this.isPropagationStopped=RB,this}return Di(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=oy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=oy)},persist:function(){},isPersistent:oy}),e}var Fm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RT=Eo(Fm),MA=Di({},Fm,{view:0,detail:0}),BK=Eo(MA),nS,iS,C0,o3=Di({},MA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DT,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==C0&&(C0&&n.type==="mousemove"?(nS=n.screenX-C0.screenX,iS=n.screenY-C0.screenY):iS=nS=0,C0=n),nS)},movementY:function(n){return"movementY"in n?n.movementY:iS}}),DB=Eo(o3),PK=Di({},o3,{dataTransfer:0}),RK=Eo(PK),DK=Di({},MA,{relatedTarget:0}),rS=Eo(DK),LK=Di({},Fm,{animationName:0,elapsedTime:0,pseudoElement:0}),FK=Eo(LK),OK=Di({},Fm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),UK=Eo(OK),zK=Di({},Fm,{data:0}),LB=Eo(zK),kK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HK(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=GK[n])?!!e[n]:!1}function DT(){return HK}var QK=Di({},MA,{key:function(n){if(n.key){var e=kK[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=_x(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?NK[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DT,charCode:function(n){return n.type==="keypress"?_x(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_x(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),VK=Eo(QK),WK=Di({},o3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FB=Eo(WK),jK=Di({},MA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DT}),XK=Eo(jK),YK=Di({},Fm,{propertyName:0,elapsedTime:0,pseudoElement:0}),qK=Eo(YK),KK=Di({},o3,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),JK=Eo(KK),ZK=[9,13,27,32],LT=yc&&"CompositionEvent"in window,$1=null;yc&&"documentMode"in document&&($1=document.documentMode);var $K=yc&&"TextEvent"in window&&!$1,lk=yc&&(!LT||$1&&8<$1&&11>=$1),OB=" ",UB=!1;function ck(n,e){switch(n){case"keyup":return ZK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uk(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Sp=!1;function eJ(n,e){switch(n){case"compositionend":return uk(e);case"keypress":return e.which!==32?null:(UB=!0,OB);case"textInput":return n=e.data,n===OB&&UB?null:n;default:return null}}function tJ(n,e){if(Sp)return n==="compositionend"||!LT&&ck(n,e)?(n=ak(),xx=PT=au=null,Sp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lk&&e.locale!=="ko"?null:e.data;default:return null}}var nJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zB(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!nJ[n.type]:e==="textarea"}function hk(n,e,t,i){Hz(i),e=i_(e,"onChange"),0<e.length&&(t=new RT("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var eg=null,zg=null;function iJ(n){Ek(n,0)}function a3(n){var e=bp(n);if(Fz(e))return n}function rJ(n,e){if(n==="change")return e}var fk=!1;if(yc){var sS;if(yc){var oS="oninput"in document;if(!oS){var kB=document.createElement("div");kB.setAttribute("oninput","return;"),oS=typeof kB.oninput=="function"}sS=oS}else sS=!1;fk=sS&&(!document.documentMode||9<document.documentMode)}function NB(){eg&&(eg.detachEvent("onpropertychange",dk),zg=eg=null)}function dk(n){if(n.propertyName==="value"&&a3(zg)){var e=[];hk(e,zg,n,MT(n)),jz(iJ,e)}}function sJ(n,e,t){n==="focusin"?(NB(),eg=e,zg=t,eg.attachEvent("onpropertychange",dk)):n==="focusout"&&NB()}function oJ(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return a3(zg)}function aJ(n,e){if(n==="click")return a3(e)}function lJ(n,e){if(n==="input"||n==="change")return a3(e)}function cJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ha=typeof Object.is=="function"?Object.is:cJ;function kg(n,e){if(Ha(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!yM.call(e,r)||!Ha(n[r],e[r]))return!1}return!0}function GB(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function HB(n,e){var t=GB(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=GB(t)}}function pk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?pk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function mk(){for(var n=window,e=Kx();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Kx(n.document)}return e}function FT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uJ(n){var e=mk(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&pk(t.ownerDocument.documentElement,t)){if(i!==null&&FT(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=HB(t,s);var o=HB(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hJ=yc&&"documentMode"in document&&11>=document.documentMode,Cp=null,zM=null,tg=null,kM=!1;function QB(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;kM||Cp==null||Cp!==Kx(i)||(i=Cp,"selectionStart"in i&&FT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),tg&&kg(tg,i)||(tg=i,i=i_(zM,"onSelect"),0<i.length&&(e=new RT("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Cp)))}function ay(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Mp={animationend:ay("Animation","AnimationEnd"),animationiteration:ay("Animation","AnimationIteration"),animationstart:ay("Animation","AnimationStart"),transitionend:ay("Transition","TransitionEnd")},aS={},gk={};yc&&(gk=document.createElement("div").style,"AnimationEvent"in window||(delete Mp.animationend.animation,delete Mp.animationiteration.animation,delete Mp.animationstart.animation),"TransitionEvent"in window||delete Mp.transitionend.transition);function l3(n){if(aS[n])return aS[n];if(!Mp[n])return n;var e=Mp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in gk)return aS[n]=e[t];return n}var Ak=l3("animationend"),vk=l3("animationiteration"),yk=l3("animationstart"),xk=l3("transitionend"),_k=new Map,VB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yu(n,e){_k.set(n,e),Lf(e,[n])}for(var lS=0;lS<VB.length;lS++){var cS=VB[lS],fJ=cS.toLowerCase(),dJ=cS[0].toUpperCase()+cS.slice(1);Yu(fJ,"on"+dJ)}Yu(Ak,"onAnimationEnd");Yu(vk,"onAnimationIteration");Yu(yk,"onAnimationStart");Yu("dblclick","onDoubleClick");Yu("focusin","onFocus");Yu("focusout","onBlur");Yu(xk,"onTransitionEnd");am("onMouseEnter",["mouseout","mouseover"]);am("onMouseLeave",["mouseout","mouseover"]);am("onPointerEnter",["pointerout","pointerover"]);am("onPointerLeave",["pointerout","pointerover"]);Lf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var k1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(k1));function WB(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,fK(i,e,void 0,n),n.currentTarget=null}function Ek(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;WB(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;WB(r,a,c),s=l}}}if(Zx)throw n=LM,Zx=!1,LM=null,n}function di(n,e){var t=e[VM];t===void 0&&(t=e[VM]=new Set);var i=n+"__bubble";t.has(i)||(wk(e,n,2,!1),t.add(i))}function uS(n,e,t){var i=0;e&&(i|=4),wk(t,n,i,e)}var ly="_reactListening"+Math.random().toString(36).slice(2);function Ng(n){if(!n[ly]){n[ly]=!0,Bz.forEach(function(t){t!=="selectionchange"&&(pJ.has(t)||uS(t,!1,n),uS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ly]||(e[ly]=!0,uS("selectionchange",!1,e))}}function wk(n,e,t,i){switch(ok(e)){case 1:var r=TK;break;case 4:r=IK;break;default:r=BT}t=r.bind(null,e,t,n),r=void 0,!DM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function hS(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=qh(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}jz(function(){var c=s,u=MT(t),h=[];e:{var f=_k.get(n);if(f!==void 0){var d=RT,m=n;switch(n){case"keypress":if(_x(t)===0)break e;case"keydown":case"keyup":d=VK;break;case"focusin":m="focus",d=rS;break;case"focusout":m="blur",d=rS;break;case"beforeblur":case"afterblur":d=rS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=DB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=RK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=XK;break;case Ak:case vk:case yk:d=FK;break;case xk:d=qK;break;case"scroll":d=BK;break;case"wheel":d=JK;break;case"copy":case"cut":case"paste":d=UK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=FB}var A=(e&4)!==0,y=!A&&n==="scroll",p=A?f!==null?f+"Capture":null:f;A=[];for(var g=c,v;g!==null;){v=g;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,p!==null&&(E=Lg(g,p),E!=null&&A.push(Gg(g,E,v)))),y)break;g=g.return}0<A.length&&(f=new d(f,m,null,t,u),h.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",f&&t!==PM&&(m=t.relatedTarget||t.fromElement)&&(qh(m)||m[xc]))break e;if((d||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=t.relatedTarget||t.toElement,d=c,m=m?qh(m):null,m!==null&&(y=Ff(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=c),d!==m)){if(A=DB,E="onMouseLeave",p="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(A=FB,E="onPointerLeave",p="onPointerEnter",g="pointer"),y=d==null?f:bp(d),v=m==null?f:bp(m),f=new A(E,g+"leave",d,t,u),f.target=y,f.relatedTarget=v,E=null,qh(u)===c&&(A=new A(p,g+"enter",m,t,u),A.target=v,A.relatedTarget=y,E=A),y=E,d&&m)t:{for(A=d,p=m,g=0,v=A;v;v=rd(v))g++;for(v=0,E=p;E;E=rd(E))v++;for(;0<g-v;)A=rd(A),g--;for(;0<v-g;)p=rd(p),v--;for(;g--;){if(A===p||p!==null&&A===p.alternate)break t;A=rd(A),p=rd(p)}A=null}else A=null;d!==null&&jB(h,f,d,A,!1),m!==null&&y!==null&&jB(h,y,m,A,!0)}}e:{if(f=c?bp(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var S=rJ;else if(zB(f))if(fk)S=lJ;else{S=oJ;var C=sJ}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=aJ);if(S&&(S=S(n,c))){hk(h,S,t,u);break e}C&&C(n,f,c),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&MM(f,"number",f.value)}switch(C=c?bp(c):window,n){case"focusin":(zB(C)||C.contentEditable==="true")&&(Cp=C,zM=c,tg=null);break;case"focusout":tg=zM=Cp=null;break;case"mousedown":kM=!0;break;case"contextmenu":case"mouseup":case"dragend":kM=!1,QB(h,t,u);break;case"selectionchange":if(hJ)break;case"keydown":case"keyup":QB(h,t,u)}var M;if(LT)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Sp?ck(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(lk&&t.locale!=="ko"&&(Sp||b!=="onCompositionStart"?b==="onCompositionEnd"&&Sp&&(M=ak()):(au=u,PT="value"in au?au.value:au.textContent,Sp=!0)),C=i_(c,b),0<C.length&&(b=new LB(b,n,null,t,u),h.push({event:b,listeners:C}),M?b.data=M:(M=uk(t),M!==null&&(b.data=M)))),(M=$K?eJ(n,t):tJ(n,t))&&(c=i_(c,"onBeforeInput"),0<c.length&&(u=new LB("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=M))}Ek(h,e)})}function Gg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function i_(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Lg(n,t),s!=null&&i.unshift(Gg(n,s,r)),s=Lg(n,e),s!=null&&i.push(Gg(n,s,r))),n=n.return}return i}function rd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function jB(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Lg(t,s),l!=null&&o.unshift(Gg(t,l,a))):r||(l=Lg(t,s),l!=null&&o.push(Gg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var mJ=/\r\n?/g,gJ=/\u0000|\uFFFD/g;function XB(n){return(typeof n=="string"?n:""+n).replace(mJ,`
`).replace(gJ,"")}function cy(n,e,t){if(e=XB(e),XB(n)!==e&&t)throw Error(lt(425))}function r_(){}var NM=null,GM=null;function HM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var QM=typeof setTimeout=="function"?setTimeout:void 0,AJ=typeof clearTimeout=="function"?clearTimeout:void 0,YB=typeof Promise=="function"?Promise:void 0,vJ=typeof queueMicrotask=="function"?queueMicrotask:typeof YB<"u"?function(n){return YB.resolve(null).then(n).catch(yJ)}:QM;function yJ(n){setTimeout(function(){throw n})}function fS(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Ug(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Ug(e)}function _u(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function qB(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Om=Math.random().toString(36).slice(2),gl="__reactFiber$"+Om,Hg="__reactProps$"+Om,xc="__reactContainer$"+Om,VM="__reactEvents$"+Om,xJ="__reactListeners$"+Om,_J="__reactHandles$"+Om;function qh(n){var e=n[gl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xc]||t[gl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=qB(n);n!==null;){if(t=n[gl])return t;n=qB(n)}return e}n=t,t=n.parentNode}return null}function bA(n){return n=n[gl]||n[xc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bp(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(lt(33))}function c3(n){return n[Hg]||null}var WM=[],Tp=-1;function qu(n){return{current:n}}function mi(n){0>Tp||(n.current=WM[Tp],WM[Tp]=null,Tp--)}function ui(n,e){Tp++,WM[Tp]=n.current,n.current=e}var Uu={},ls=qu(Uu),js=qu(!1),Af=Uu;function lm(n,e){var t=n.type.contextTypes;if(!t)return Uu;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Xs(n){return n=n.childContextTypes,n!=null}function s_(){mi(js),mi(ls)}function KB(n,e,t){if(ls.current!==Uu)throw Error(lt(168));ui(ls,e),ui(js,t)}function Sk(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(lt(108,sK(n)||"Unknown",r));return Di({},t,i)}function o_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Uu,Af=ls.current,ui(ls,n),ui(js,js.current),!0}function JB(n,e,t){var i=n.stateNode;if(!i)throw Error(lt(169));t?(n=Sk(n,e,Af),i.__reactInternalMemoizedMergedChildContext=n,mi(js),mi(ls),ui(ls,n)):mi(js),ui(js,t)}var sc=null,u3=!1,dS=!1;function Ck(n){sc===null?sc=[n]:sc.push(n)}function EJ(n){u3=!0,Ck(n)}function Ku(){if(!dS&&sc!==null){dS=!0;var n=0,e=Kn;try{var t=sc;for(Kn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}sc=null,u3=!1}catch(r){throw sc!==null&&(sc=sc.slice(n+1)),Kz(bT,Ku),r}finally{Kn=e,dS=!1}}return null}var Ip=[],Bp=0,a_=null,l_=0,jo=[],Xo=0,vf=null,cc=1,uc="";function Gh(n,e){Ip[Bp++]=l_,Ip[Bp++]=a_,a_=n,l_=e}function Mk(n,e,t){jo[Xo++]=cc,jo[Xo++]=uc,jo[Xo++]=vf,vf=n;var i=cc;n=uc;var r=32-Ua(i)-1;i&=~(1<<r),t+=1;var s=32-Ua(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,cc=1<<32-Ua(e)+r|t<<r|i,uc=s+n}else cc=1<<s|t<<r|i,uc=n}function OT(n){n.return!==null&&(Gh(n,1),Mk(n,1,0))}function UT(n){for(;n===a_;)a_=Ip[--Bp],Ip[Bp]=null,l_=Ip[--Bp],Ip[Bp]=null;for(;n===vf;)vf=jo[--Xo],jo[Xo]=null,uc=jo[--Xo],jo[Xo]=null,cc=jo[--Xo],jo[Xo]=null}var mo=null,uo=null,wi=!1,Ba=null;function bk(n,e){var t=$o(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ZB(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,mo=n,uo=_u(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,mo=n,uo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=vf!==null?{id:cc,overflow:uc}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=$o(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,mo=n,uo=null,!0):!1;default:return!1}}function jM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function XM(n){if(wi){var e=uo;if(e){var t=e;if(!ZB(n,e)){if(jM(n))throw Error(lt(418));e=_u(t.nextSibling);var i=mo;e&&ZB(n,e)?bk(i,t):(n.flags=n.flags&-4097|2,wi=!1,mo=n)}}else{if(jM(n))throw Error(lt(418));n.flags=n.flags&-4097|2,wi=!1,mo=n}}}function $B(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mo=n}function uy(n){if(n!==mo)return!1;if(!wi)return $B(n),wi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!HM(n.type,n.memoizedProps)),e&&(e=uo)){if(jM(n))throw Tk(),Error(lt(418));for(;e;)bk(n,e),e=_u(e.nextSibling)}if($B(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(lt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){uo=_u(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}uo=null}}else uo=mo?_u(n.stateNode.nextSibling):null;return!0}function Tk(){for(var n=uo;n;)n=_u(n.nextSibling)}function cm(){uo=mo=null,wi=!1}function zT(n){Ba===null?Ba=[n]:Ba.push(n)}var wJ=Tc.ReactCurrentBatchConfig;function M0(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(lt(309));var i=t.stateNode}if(!i)throw Error(lt(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(lt(284));if(!t._owner)throw Error(lt(290,n))}return n}function hy(n,e){throw n=Object.prototype.toString.call(e),Error(lt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function eP(n){var e=n._init;return e(n._payload)}function Ik(n){function e(p,g){if(n){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function t(p,g){if(!n)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function i(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function r(p,g){return p=Cu(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,n?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return n&&p.alternate===null&&(p.flags|=2),p}function a(p,g,v,E){return g===null||g.tag!==6?(g=xS(v,p.mode,E),g.return=p,g):(g=r(g,v),g.return=p,g)}function l(p,g,v,E){var S=v.type;return S===wp?u(p,g,v.props.children,E,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===nu&&eP(S)===g.type)?(E=r(g,v.props),E.ref=M0(p,g,v),E.return=p,E):(E=Tx(v.type,v.key,v.props,null,p.mode,E),E.ref=M0(p,g,v),E.return=p,E)}function c(p,g,v,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=_S(v,p.mode,E),g.return=p,g):(g=r(g,v.children||[]),g.return=p,g)}function u(p,g,v,E,S){return g===null||g.tag!==7?(g=lf(v,p.mode,E,S),g.return=p,g):(g=r(g,v),g.return=p,g)}function h(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=xS(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ey:return v=Tx(g.type,g.key,g.props,null,p.mode,v),v.ref=M0(p,null,g),v.return=p,v;case Ep:return g=_S(g,p.mode,v),g.return=p,g;case nu:var E=g._init;return h(p,E(g._payload),v)}if(U1(g)||_0(g))return g=lf(g,p.mode,v,null),g.return=p,g;hy(p,g)}return null}function f(p,g,v,E){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(p,g,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ey:return v.key===S?l(p,g,v,E):null;case Ep:return v.key===S?c(p,g,v,E):null;case nu:return S=v._init,f(p,g,S(v._payload),E)}if(U1(v)||_0(v))return S!==null?null:u(p,g,v,E,null);hy(p,v)}return null}function d(p,g,v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(v)||null,a(g,p,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ey:return p=p.get(E.key===null?v:E.key)||null,l(g,p,E,S);case Ep:return p=p.get(E.key===null?v:E.key)||null,c(g,p,E,S);case nu:var C=E._init;return d(p,g,v,C(E._payload),S)}if(U1(E)||_0(E))return p=p.get(v)||null,u(g,p,E,S,null);hy(g,E)}return null}function m(p,g,v,E){for(var S=null,C=null,M=g,b=g=0,T=null;M!==null&&b<v.length;b++){M.index>b?(T=M,M=null):T=M.sibling;var I=f(p,M,v[b],E);if(I===null){M===null&&(M=T);break}n&&M&&I.alternate===null&&e(p,M),g=s(I,g,b),C===null?S=I:C.sibling=I,C=I,M=T}if(b===v.length)return t(p,M),wi&&Gh(p,b),S;if(M===null){for(;b<v.length;b++)M=h(p,v[b],E),M!==null&&(g=s(M,g,b),C===null?S=M:C.sibling=M,C=M);return wi&&Gh(p,b),S}for(M=i(p,M);b<v.length;b++)T=d(M,p,b,v[b],E),T!==null&&(n&&T.alternate!==null&&M.delete(T.key===null?b:T.key),g=s(T,g,b),C===null?S=T:C.sibling=T,C=T);return n&&M.forEach(function(F){return e(p,F)}),wi&&Gh(p,b),S}function A(p,g,v,E){var S=_0(v);if(typeof S!="function")throw Error(lt(150));if(v=S.call(v),v==null)throw Error(lt(151));for(var C=S=null,M=g,b=g=0,T=null,I=v.next();M!==null&&!I.done;b++,I=v.next()){M.index>b?(T=M,M=null):T=M.sibling;var F=f(p,M,I.value,E);if(F===null){M===null&&(M=T);break}n&&M&&F.alternate===null&&e(p,M),g=s(F,g,b),C===null?S=F:C.sibling=F,C=F,M=T}if(I.done)return t(p,M),wi&&Gh(p,b),S;if(M===null){for(;!I.done;b++,I=v.next())I=h(p,I.value,E),I!==null&&(g=s(I,g,b),C===null?S=I:C.sibling=I,C=I);return wi&&Gh(p,b),S}for(M=i(p,M);!I.done;b++,I=v.next())I=d(M,p,b,I.value,E),I!==null&&(n&&I.alternate!==null&&M.delete(I.key===null?b:I.key),g=s(I,g,b),C===null?S=I:C.sibling=I,C=I);return n&&M.forEach(function(R){return e(p,R)}),wi&&Gh(p,b),S}function y(p,g,v,E){if(typeof v=="object"&&v!==null&&v.type===wp&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ey:e:{for(var S=v.key,C=g;C!==null;){if(C.key===S){if(S=v.type,S===wp){if(C.tag===7){t(p,C.sibling),g=r(C,v.props.children),g.return=p,p=g;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===nu&&eP(S)===C.type){t(p,C.sibling),g=r(C,v.props),g.ref=M0(p,C,v),g.return=p,p=g;break e}t(p,C);break}else e(p,C);C=C.sibling}v.type===wp?(g=lf(v.props.children,p.mode,E,v.key),g.return=p,p=g):(E=Tx(v.type,v.key,v.props,null,p.mode,E),E.ref=M0(p,g,v),E.return=p,p=E)}return o(p);case Ep:e:{for(C=v.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){t(p,g.sibling),g=r(g,v.children||[]),g.return=p,p=g;break e}else{t(p,g);break}else e(p,g);g=g.sibling}g=_S(v,p.mode,E),g.return=p,p=g}return o(p);case nu:return C=v._init,y(p,g,C(v._payload),E)}if(U1(v))return m(p,g,v,E);if(_0(v))return A(p,g,v,E);hy(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(t(p,g.sibling),g=r(g,v),g.return=p,p=g):(t(p,g),g=xS(v,p.mode,E),g.return=p,p=g),o(p)):t(p,g)}return y}var um=Ik(!0),Bk=Ik(!1),c_=qu(null),u_=null,Pp=null,kT=null;function NT(){kT=Pp=u_=null}function GT(n){var e=c_.current;mi(c_),n._currentValue=e}function YM(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Yp(n,e){u_=n,kT=Pp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ns=!0),n.firstContext=null)}function aa(n){var e=n._currentValue;if(kT!==n)if(n={context:n,memoizedValue:e,next:null},Pp===null){if(u_===null)throw Error(lt(308));Pp=n,u_.dependencies={lanes:0,firstContext:n}}else Pp=Pp.next=n;return e}var Kh=null;function HT(n){Kh===null?Kh=[n]:Kh.push(n)}function Pk(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,HT(e)):(t.next=r.next,r.next=t),e.interleaved=t,_c(n,i)}function _c(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var iu=!1;function QT(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fc(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Eu(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,zn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,_c(n,t)}return r=i.interleaved,r===null?(e.next=e,HT(i)):(e.next=r.next,r.next=e),i.interleaved=e,_c(n,t)}function Ex(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,TT(n,t)}}function tP(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function h_(n,e,t,i){var r=n.updateQueue;iu=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,A=a;switch(f=e,d=t,A.tag){case 1:if(m=A.payload,typeof m=="function"){h=m.call(d,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=A.payload,f=typeof m=="function"?m.call(d,h,f):m,f==null)break e;h=Di({},h,f);break e;case 2:iu=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=h):u=u.next=d,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);xf|=o,n.lanes=o,n.memoizedState=h}}function nP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(lt(191,r));r.call(i)}}}var TA={},El=qu(TA),Qg=qu(TA),Vg=qu(TA);function Jh(n){if(n===TA)throw Error(lt(174));return n}function VT(n,e){switch(ui(Vg,e),ui(Qg,n),ui(El,TA),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:TM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=TM(e,n)}mi(El),ui(El,e)}function hm(){mi(El),mi(Qg),mi(Vg)}function Dk(n){Jh(Vg.current);var e=Jh(El.current),t=TM(e,n.type);e!==t&&(ui(Qg,n),ui(El,t))}function WT(n){Qg.current===n&&(mi(El),mi(Qg))}var Ti=qu(0);function f_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pS=[];function jT(){for(var n=0;n<pS.length;n++)pS[n]._workInProgressVersionPrimary=null;pS.length=0}var wx=Tc.ReactCurrentDispatcher,mS=Tc.ReactCurrentBatchConfig,yf=0,Pi=null,fr=null,Ir=null,d_=!1,ng=!1,Wg=0,SJ=0;function Zr(){throw Error(lt(321))}function XT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ha(n[t],e[t]))return!1;return!0}function YT(n,e,t,i,r,s){if(yf=s,Pi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wx.current=n===null||n.memoizedState===null?TJ:IJ,n=t(i,r),ng){s=0;do{if(ng=!1,Wg=0,25<=s)throw Error(lt(301));s+=1,Ir=fr=null,e.updateQueue=null,wx.current=BJ,n=t(i,r)}while(ng)}if(wx.current=p_,e=fr!==null&&fr.next!==null,yf=0,Ir=fr=Pi=null,d_=!1,e)throw Error(lt(300));return n}function qT(){var n=Wg!==0;return Wg=0,n}function ul(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?Pi.memoizedState=Ir=n:Ir=Ir.next=n,Ir}function la(){if(fr===null){var n=Pi.alternate;n=n!==null?n.memoizedState:null}else n=fr.next;var e=Ir===null?Pi.memoizedState:Ir.next;if(e!==null)Ir=e,fr=n;else{if(n===null)throw Error(lt(310));fr=n,n={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},Ir===null?Pi.memoizedState=Ir=n:Ir=Ir.next=n}return Ir}function jg(n,e){return typeof e=="function"?e(n):e}function gS(n){var e=la(),t=e.queue;if(t===null)throw Error(lt(311));t.lastRenderedReducer=n;var i=fr,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((yf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Pi.lanes|=u,xf|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ha(i,e.memoizedState)||(Ns=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Pi.lanes|=s,xf|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function AS(n){var e=la(),t=e.queue;if(t===null)throw Error(lt(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Ha(s,e.memoizedState)||(Ns=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function Lk(){}function Fk(n,e){var t=Pi,i=la(),r=e(),s=!Ha(i.memoizedState,r);if(s&&(i.memoizedState=r,Ns=!0),i=i.queue,KT(zk.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Ir!==null&&Ir.memoizedState.tag&1){if(t.flags|=2048,Xg(9,Uk.bind(null,t,i,r,e),void 0,null),Lr===null)throw Error(lt(349));yf&30||Ok(t,e,r)}return r}function Ok(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Pi.updateQueue,e===null?(e={lastEffect:null,stores:null},Pi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Uk(n,e,t,i){e.value=t,e.getSnapshot=i,kk(e)&&Nk(n)}function zk(n,e,t){return t(function(){kk(e)&&Nk(n)})}function kk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ha(n,t)}catch{return!0}}function Nk(n){var e=_c(n,1);e!==null&&za(e,n,1,-1)}function iP(n){var e=ul();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:n},e.queue=n,n=n.dispatch=bJ.bind(null,Pi,n),[e.memoizedState,n]}function Xg(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Pi.updateQueue,e===null?(e={lastEffect:null,stores:null},Pi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Gk(){return la().memoizedState}function Sx(n,e,t,i){var r=ul();Pi.flags|=n,r.memoizedState=Xg(1|e,t,void 0,i===void 0?null:i)}function h3(n,e,t,i){var r=la();i=i===void 0?null:i;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,i!==null&&XT(i,o.deps)){r.memoizedState=Xg(e,t,s,i);return}}Pi.flags|=n,r.memoizedState=Xg(1|e,t,s,i)}function rP(n,e){return Sx(8390656,8,n,e)}function KT(n,e){return h3(2048,8,n,e)}function Hk(n,e){return h3(4,2,n,e)}function Qk(n,e){return h3(4,4,n,e)}function Vk(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Wk(n,e,t){return t=t!=null?t.concat([n]):null,h3(4,4,Vk.bind(null,e,n),t)}function JT(){}function jk(n,e){var t=la();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&XT(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Xk(n,e){var t=la();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&XT(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Yk(n,e,t){return yf&21?(Ha(t,e)||(t=$z(),Pi.lanes|=t,xf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ns=!0),n.memoizedState=t)}function CJ(n,e){var t=Kn;Kn=t!==0&&4>t?t:4,n(!0);var i=mS.transition;mS.transition={};try{n(!1),e()}finally{Kn=t,mS.transition=i}}function qk(){return la().memoizedState}function MJ(n,e,t){var i=Su(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Kk(n))Jk(e,t);else if(t=Pk(n,e,t,i),t!==null){var r=ws();za(t,n,i,r),Zk(t,e,i)}}function bJ(n,e,t){var i=Su(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Kk(n))Jk(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Ha(a,o)){var l=e.interleaved;l===null?(r.next=r,HT(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=Pk(n,e,r,i),t!==null&&(r=ws(),za(t,n,i,r),Zk(t,e,i))}}function Kk(n){var e=n.alternate;return n===Pi||e!==null&&e===Pi}function Jk(n,e){ng=d_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Zk(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,TT(n,t)}}var p_={readContext:aa,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},TJ={readContext:aa,useCallback:function(n,e){return ul().memoizedState=[n,e===void 0?null:e],n},useContext:aa,useEffect:rP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Sx(4194308,4,Vk.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Sx(4194308,4,n,e)},useInsertionEffect:function(n,e){return Sx(4,2,n,e)},useMemo:function(n,e){var t=ul();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ul();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=MJ.bind(null,Pi,n),[i.memoizedState,n]},useRef:function(n){var e=ul();return n={current:n},e.memoizedState=n},useState:iP,useDebugValue:JT,useDeferredValue:function(n){return ul().memoizedState=n},useTransition:function(){var n=iP(!1),e=n[0];return n=CJ.bind(null,n[1]),ul().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Pi,r=ul();if(wi){if(t===void 0)throw Error(lt(407));t=t()}else{if(t=e(),Lr===null)throw Error(lt(349));yf&30||Ok(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,rP(zk.bind(null,i,s,n),[n]),i.flags|=2048,Xg(9,Uk.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=ul(),e=Lr.identifierPrefix;if(wi){var t=uc,i=cc;t=(i&~(1<<32-Ua(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Wg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=SJ++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},IJ={readContext:aa,useCallback:jk,useContext:aa,useEffect:KT,useImperativeHandle:Wk,useInsertionEffect:Hk,useLayoutEffect:Qk,useMemo:Xk,useReducer:gS,useRef:Gk,useState:function(){return gS(jg)},useDebugValue:JT,useDeferredValue:function(n){var e=la();return Yk(e,fr.memoizedState,n)},useTransition:function(){var n=gS(jg)[0],e=la().memoizedState;return[n,e]},useMutableSource:Lk,useSyncExternalStore:Fk,useId:qk,unstable_isNewReconciler:!1},BJ={readContext:aa,useCallback:jk,useContext:aa,useEffect:KT,useImperativeHandle:Wk,useInsertionEffect:Hk,useLayoutEffect:Qk,useMemo:Xk,useReducer:AS,useRef:Gk,useState:function(){return AS(jg)},useDebugValue:JT,useDeferredValue:function(n){var e=la();return fr===null?e.memoizedState=n:Yk(e,fr.memoizedState,n)},useTransition:function(){var n=AS(jg)[0],e=la().memoizedState;return[n,e]},useMutableSource:Lk,useSyncExternalStore:Fk,useId:qk,unstable_isNewReconciler:!1};function ba(n,e){if(n&&n.defaultProps){e=Di({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function qM(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Di({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var f3={isMounted:function(n){return(n=n._reactInternals)?Ff(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=ws(),r=Su(n),s=fc(i,r);s.payload=e,t!=null&&(s.callback=t),e=Eu(n,s,r),e!==null&&(za(e,n,r,i),Ex(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=ws(),r=Su(n),s=fc(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Eu(n,s,r),e!==null&&(za(e,n,r,i),Ex(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ws(),i=Su(n),r=fc(t,i);r.tag=2,e!=null&&(r.callback=e),e=Eu(n,r,i),e!==null&&(za(e,n,i,t),Ex(e,n,i))}};function sP(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!kg(t,i)||!kg(r,s):!0}function $k(n,e,t){var i=!1,r=Uu,s=e.contextType;return typeof s=="object"&&s!==null?s=aa(s):(r=Xs(e)?Af:ls.current,i=e.contextTypes,s=(i=i!=null)?lm(n,r):Uu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=f3,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function oP(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&f3.enqueueReplaceState(e,e.state,null)}function KM(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},QT(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=aa(s):(s=Xs(e)?Af:ls.current,r.context=lm(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qM(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&f3.enqueueReplaceState(r,r.state,null),h_(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function fm(n,e){try{var t="",i=e;do t+=rK(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function vS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function JM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var PJ=typeof WeakMap=="function"?WeakMap:Map;function eN(n,e,t){t=fc(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){g_||(g_=!0,a5=i),JM(n,e)},t}function tN(n,e,t){t=fc(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){JM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){JM(n,e),typeof i!="function"&&(wu===null?wu=new Set([this]):wu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function aP(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new PJ;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=WJ.bind(null,n,e,t),e.then(n,n))}function lP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function cP(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fc(-1,1),e.tag=2,Eu(t,e,1))),t.lanes|=1),n)}var RJ=Tc.ReactCurrentOwner,Ns=!1;function vs(n,e,t,i){e.child=n===null?Bk(e,null,t,i):um(e,n.child,t,i)}function uP(n,e,t,i,r){t=t.render;var s=e.ref;return Yp(e,r),i=YT(n,e,t,i,s,r),t=qT(),n!==null&&!Ns?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ec(n,e,r)):(wi&&t&&OT(e),e.flags|=1,vs(n,e,i,r),e.child)}function hP(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!sI(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,nN(n,e,s,i,r)):(n=Tx(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:kg,t(o,i)&&n.ref===e.ref)return Ec(n,e,r)}return e.flags|=1,n=Cu(s,i),n.ref=e.ref,n.return=e,e.child=n}function nN(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(kg(s,i)&&n.ref===e.ref)if(Ns=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ns=!0);else return e.lanes=n.lanes,Ec(n,e,r)}return ZM(n,e,t,i,r)}function iN(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ui(Dp,co),co|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ui(Dp,co),co|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,ui(Dp,co),co|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,ui(Dp,co),co|=i;return vs(n,e,r,t),e.child}function rN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function ZM(n,e,t,i,r){var s=Xs(t)?Af:ls.current;return s=lm(e,s),Yp(e,r),t=YT(n,e,t,i,s,r),i=qT(),n!==null&&!Ns?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ec(n,e,r)):(wi&&i&&OT(e),e.flags|=1,vs(n,e,t,r),e.child)}function fP(n,e,t,i,r){if(Xs(t)){var s=!0;o_(e)}else s=!1;if(Yp(e,r),e.stateNode===null)Cx(n,e),$k(e,t,i),KM(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=aa(c):(c=Xs(t)?Af:ls.current,c=lm(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&oP(e,o,i,c),iu=!1;var f=e.memoizedState;o.state=f,h_(e,i,o,r),l=e.memoizedState,a!==i||f!==l||js.current||iu?(typeof u=="function"&&(qM(e,t,u,i),l=e.memoizedState),(a=iu||sP(e,t,a,i,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Rk(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:ba(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=aa(l):(l=Xs(t)?Af:ls.current,l=lm(e,l));var d=t.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&oP(e,o,i,l),iu=!1,f=e.memoizedState,o.state=f,h_(e,i,o,r);var m=e.memoizedState;a!==h||f!==m||js.current||iu?(typeof d=="function"&&(qM(e,t,d,i),m=e.memoizedState),(c=iu||sP(e,t,c,i,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return $M(n,e,t,i,s,r)}function $M(n,e,t,i,r,s){rN(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&JB(e,t,!1),Ec(n,e,s);i=e.stateNode,RJ.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=um(e,n.child,null,s),e.child=um(e,null,a,s)):vs(n,e,a,s),e.memoizedState=i.state,r&&JB(e,t,!0),e.child}function sN(n){var e=n.stateNode;e.pendingContext?KB(n,e.pendingContext,e.pendingContext!==e.context):e.context&&KB(n,e.context,!1),VT(n,e.containerInfo)}function dP(n,e,t,i,r){return cm(),zT(r),e.flags|=256,vs(n,e,t,i),e.child}var e5={dehydrated:null,treeContext:null,retryLane:0};function t5(n){return{baseLanes:n,cachePool:null,transitions:null}}function oN(n,e,t){var i=e.pendingProps,r=Ti.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),ui(Ti,r&1),n===null)return XM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=m3(o,i,0,null),n=lf(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=t5(t),e.memoizedState=e5,n):ZT(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return DJ(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Cu(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Cu(a,s):(s=lf(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?t5(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=e5,i}return s=n.child,n=s.sibling,i=Cu(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function ZT(n,e){return e=m3({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function fy(n,e,t,i){return i!==null&&zT(i),um(e,n.child,null,t),n=ZT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function DJ(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=vS(Error(lt(422))),fy(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=m3({mode:"visible",children:i.children},r,0,null),s=lf(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&um(e,n.child,null,o),e.child.memoizedState=t5(o),e.memoizedState=e5,s);if(!(e.mode&1))return fy(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(lt(419)),i=vS(s,i,void 0),fy(n,e,o,i)}if(a=(o&n.childLanes)!==0,Ns||a){if(i=Lr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,_c(n,r),za(i,n,r,-1))}return rI(),i=vS(Error(lt(421))),fy(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=jJ.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,uo=_u(r.nextSibling),mo=e,wi=!0,Ba=null,n!==null&&(jo[Xo++]=cc,jo[Xo++]=uc,jo[Xo++]=vf,cc=n.id,uc=n.overflow,vf=e),e=ZT(e,i.children),e.flags|=4096,e)}function pP(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),YM(n.return,e,t)}function yS(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function aN(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(vs(n,e,i.children,t),i=Ti.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pP(n,t,e);else if(n.tag===19)pP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ui(Ti,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&f_(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),yS(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&f_(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}yS(e,!0,t,null,s);break;case"together":yS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ec(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(lt(153));if(e.child!==null){for(n=e.child,t=Cu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function LJ(n,e,t){switch(e.tag){case 3:sN(e),cm();break;case 5:Dk(e);break;case 1:Xs(e.type)&&o_(e);break;case 4:VT(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ui(c_,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ui(Ti,Ti.current&1),e.flags|=128,null):t&e.child.childLanes?oN(n,e,t):(ui(Ti,Ti.current&1),n=Ec(n,e,t),n!==null?n.sibling:null);ui(Ti,Ti.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return aN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ui(Ti,Ti.current),i)break;return null;case 22:case 23:return e.lanes=0,iN(n,e,t)}return Ec(n,e,t)}var lN,n5,cN,uN;lN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};n5=function(){};cN=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Jh(El.current);var s=null;switch(t){case"input":r=SM(n,r),i=SM(n,i),s=[];break;case"select":r=Di({},r,{value:void 0}),i=Di({},i,{value:void 0}),s=[];break;case"textarea":r=bM(n,r),i=bM(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=r_)}IM(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rg.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&di("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};uN=function(n,e,t,i){t!==i&&(e.flags|=4)};function b0(n,e){if(!wi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function $r(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function FJ(n,e,t){var i=e.pendingProps;switch(UT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(e),null;case 1:return Xs(e.type)&&s_(),$r(e),null;case 3:return i=e.stateNode,hm(),mi(js),mi(ls),jT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(uy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ba!==null&&(u5(Ba),Ba=null))),n5(n,e),$r(e),null;case 5:WT(e);var r=Jh(Vg.current);if(t=e.type,n!==null&&e.stateNode!=null)cN(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(lt(166));return $r(e),null}if(n=Jh(El.current),uy(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[gl]=e,i[Hg]=s,n=(e.mode&1)!==0,t){case"dialog":di("cancel",i),di("close",i);break;case"iframe":case"object":case"embed":di("load",i);break;case"video":case"audio":for(r=0;r<k1.length;r++)di(k1[r],i);break;case"source":di("error",i);break;case"img":case"image":case"link":di("error",i),di("load",i);break;case"details":di("toggle",i);break;case"input":wB(i,s),di("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},di("invalid",i);break;case"textarea":CB(i,s),di("invalid",i)}IM(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&cy(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&cy(i.textContent,a,n),r=["children",""+a]):Rg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&di("scroll",i)}switch(t){case"input":ty(i),SB(i,s,!0);break;case"textarea":ty(i),MB(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=r_)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zz(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[gl]=e,n[Hg]=i,lN(n,e,!1,!1),e.stateNode=n;e:{switch(o=BM(t,i),t){case"dialog":di("cancel",n),di("close",n),r=i;break;case"iframe":case"object":case"embed":di("load",n),r=i;break;case"video":case"audio":for(r=0;r<k1.length;r++)di(k1[r],n);r=i;break;case"source":di("error",n),r=i;break;case"img":case"image":case"link":di("error",n),di("load",n),r=i;break;case"details":di("toggle",n),r=i;break;case"input":wB(n,i),r=SM(n,i),di("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Di({},i,{value:void 0}),di("invalid",n);break;case"textarea":CB(n,i),r=bM(n,i),di("invalid",n);break;default:r=i}IM(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Gz(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kz(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Dg(n,l):typeof l=="number"&&Dg(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&di("scroll",n):l!=null&&ET(n,s,l,o))}switch(t){case"input":ty(n),SB(n,i,!1);break;case"textarea":ty(n),MB(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ou(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Vp(n,!!i.multiple,s,!1):i.defaultValue!=null&&Vp(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=r_)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $r(e),null;case 6:if(n&&e.stateNode!=null)uN(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(lt(166));if(t=Jh(Vg.current),Jh(El.current),uy(e)){if(i=e.stateNode,t=e.memoizedProps,i[gl]=e,(s=i.nodeValue!==t)&&(n=mo,n!==null))switch(n.tag){case 3:cy(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cy(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[gl]=e,e.stateNode=i}return $r(e),null;case 13:if(mi(Ti),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(wi&&uo!==null&&e.mode&1&&!(e.flags&128))Tk(),cm(),e.flags|=98560,s=!1;else if(s=uy(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(lt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(lt(317));s[gl]=e}else cm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$r(e),s=!1}else Ba!==null&&(u5(Ba),Ba=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ti.current&1?pr===0&&(pr=3):rI())),e.updateQueue!==null&&(e.flags|=4),$r(e),null);case 4:return hm(),n5(n,e),n===null&&Ng(e.stateNode.containerInfo),$r(e),null;case 10:return GT(e.type._context),$r(e),null;case 17:return Xs(e.type)&&s_(),$r(e),null;case 19:if(mi(Ti),s=e.memoizedState,s===null)return $r(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)b0(s,!1);else{if(pr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=f_(n),o!==null){for(e.flags|=128,b0(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ui(Ti,Ti.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ki()>dm&&(e.flags|=128,i=!0,b0(s,!1),e.lanes=4194304)}else{if(!i)if(n=f_(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),b0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wi)return $r(e),null}else 2*Ki()-s.renderingStartTime>dm&&t!==1073741824&&(e.flags|=128,i=!0,b0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ki(),e.sibling=null,t=Ti.current,ui(Ti,i?t&1|2:t&1),e):($r(e),null);case 22:case 23:return iI(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?co&1073741824&&($r(e),e.subtreeFlags&6&&(e.flags|=8192)):$r(e),null;case 24:return null;case 25:return null}throw Error(lt(156,e.tag))}function OJ(n,e){switch(UT(e),e.tag){case 1:return Xs(e.type)&&s_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return hm(),mi(js),mi(ls),jT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return WT(e),null;case 13:if(mi(Ti),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(lt(340));cm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return mi(Ti),null;case 4:return hm(),null;case 10:return GT(e.type._context),null;case 22:case 23:return iI(),null;case 24:return null;default:return null}}var dy=!1,rs=!1,UJ=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function Rp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ui(n,e,i)}else t.current=null}function i5(n,e,t){try{t()}catch(i){Ui(n,e,i)}}var mP=!1;function zJ(n,e){if(NM=t_,n=mk(),FT(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,f=null;t:for(;;){for(var d;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===n)break t;if(f===t&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(GM={focusedElem:n,selectionRange:t},t_=!1,Ct=e;Ct!==null;)if(e=Ct,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ct=n;else for(;Ct!==null;){e=Ct;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var A=m.memoizedProps,y=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?A:ba(e.type,A),y);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(E){Ui(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Ct=n;break}Ct=e.return}return m=mP,mP=!1,m}function ig(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&i5(e,t,s)}r=r.next}while(r!==i)}}function d3(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function r5(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function hN(n){var e=n.alternate;e!==null&&(n.alternate=null,hN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[gl],delete e[Hg],delete e[VM],delete e[xJ],delete e[_J])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fN(n){return n.tag===5||n.tag===3||n.tag===4}function gP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function s5(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=r_));else if(i!==4&&(n=n.child,n!==null))for(s5(n,e,t),n=n.sibling;n!==null;)s5(n,e,t),n=n.sibling}function o5(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(o5(n,e,t),n=n.sibling;n!==null;)o5(n,e,t),n=n.sibling}var Vr=null,Ia=!1;function Hc(n,e,t){for(t=t.child;t!==null;)dN(n,e,t),t=t.sibling}function dN(n,e,t){if(_l&&typeof _l.onCommitFiberUnmount=="function")try{_l.onCommitFiberUnmount(s3,t)}catch{}switch(t.tag){case 5:rs||Rp(t,e);case 6:var i=Vr,r=Ia;Vr=null,Hc(n,e,t),Vr=i,Ia=r,Vr!==null&&(Ia?(n=Vr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Vr.removeChild(t.stateNode));break;case 18:Vr!==null&&(Ia?(n=Vr,t=t.stateNode,n.nodeType===8?fS(n.parentNode,t):n.nodeType===1&&fS(n,t),Ug(n)):fS(Vr,t.stateNode));break;case 4:i=Vr,r=Ia,Vr=t.stateNode.containerInfo,Ia=!0,Hc(n,e,t),Vr=i,Ia=r;break;case 0:case 11:case 14:case 15:if(!rs&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&i5(t,e,o),r=r.next}while(r!==i)}Hc(n,e,t);break;case 1:if(!rs&&(Rp(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Ui(t,e,a)}Hc(n,e,t);break;case 21:Hc(n,e,t);break;case 22:t.mode&1?(rs=(i=rs)||t.memoizedState!==null,Hc(n,e,t),rs=i):Hc(n,e,t);break;default:Hc(n,e,t)}}function AP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new UJ),e.forEach(function(i){var r=XJ.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ma(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vr=a.stateNode,Ia=!1;break e;case 3:Vr=a.stateNode.containerInfo,Ia=!0;break e;case 4:Vr=a.stateNode.containerInfo,Ia=!0;break e}a=a.return}if(Vr===null)throw Error(lt(160));dN(s,o,r),Vr=null,Ia=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ui(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pN(e,n),e=e.sibling}function pN(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ma(e,n),tl(n),i&4){try{ig(3,n,n.return),d3(3,n)}catch(A){Ui(n,n.return,A)}try{ig(5,n,n.return)}catch(A){Ui(n,n.return,A)}}break;case 1:ma(e,n),tl(n),i&512&&t!==null&&Rp(t,t.return);break;case 5:if(ma(e,n),tl(n),i&512&&t!==null&&Rp(t,t.return),n.flags&32){var r=n.stateNode;try{Dg(r,"")}catch(A){Ui(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Oz(r,s),BM(a,o);var c=BM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Gz(r,h):u==="dangerouslySetInnerHTML"?kz(r,h):u==="children"?Dg(r,h):ET(r,u,h,c)}switch(a){case"input":CM(r,s);break;case"textarea":Uz(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Vp(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Vp(r,!!s.multiple,s.defaultValue,!0):Vp(r,!!s.multiple,s.multiple?[]:"",!1))}r[Hg]=s}catch(A){Ui(n,n.return,A)}}break;case 6:if(ma(e,n),tl(n),i&4){if(n.stateNode===null)throw Error(lt(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){Ui(n,n.return,A)}}break;case 3:if(ma(e,n),tl(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Ug(e.containerInfo)}catch(A){Ui(n,n.return,A)}break;case 4:ma(e,n),tl(n);break;case 13:ma(e,n),tl(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(tI=Ki())),i&4&&AP(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(rs=(c=rs)||u,ma(e,n),rs=c):ma(e,n),tl(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Ct=n,u=n.child;u!==null;){for(h=Ct=u;Ct!==null;){switch(f=Ct,d=f.child,f.tag){case 0:case 11:case 14:case 15:ig(4,f,f.return);break;case 1:Rp(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(A){Ui(i,t,A)}}break;case 5:Rp(f,f.return);break;case 22:if(f.memoizedState!==null){yP(h);continue}}d!==null?(d.return=f,Ct=d):yP(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nz("display",o))}catch(A){Ui(n,n.return,A)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(A){Ui(n,n.return,A)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ma(e,n),tl(n),i&4&&AP(n);break;case 21:break;default:ma(e,n),tl(n)}}function tl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(fN(t)){var i=t;break e}t=t.return}throw Error(lt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Dg(r,""),i.flags&=-33);var s=gP(n);o5(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=gP(n);s5(n,a,o);break;default:throw Error(lt(161))}}catch(l){Ui(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function kJ(n,e,t){Ct=n,mN(n)}function mN(n,e,t){for(var i=(n.mode&1)!==0;Ct!==null;){var r=Ct,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||dy;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||rs;a=dy;var c=rs;if(dy=o,(rs=l)&&!c)for(Ct=r;Ct!==null;)o=Ct,l=o.child,o.tag===22&&o.memoizedState!==null?xP(r):l!==null?(l.return=o,Ct=l):xP(r);for(;s!==null;)Ct=s,mN(s),s=s.sibling;Ct=r,dy=a,rs=c}vP(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ct=s):vP(n)}}function vP(n){for(;Ct!==null;){var e=Ct;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rs||d3(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!rs)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ba(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nP(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}nP(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ug(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}rs||e.flags&512&&r5(e)}catch(f){Ui(e,e.return,f)}}if(e===n){Ct=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ct=t;break}Ct=e.return}}function yP(n){for(;Ct!==null;){var e=Ct;if(e===n){Ct=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ct=t;break}Ct=e.return}}function xP(n){for(;Ct!==null;){var e=Ct;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{d3(4,e)}catch(l){Ui(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ui(e,r,l)}}var s=e.return;try{r5(e)}catch(l){Ui(e,s,l)}break;case 5:var o=e.return;try{r5(e)}catch(l){Ui(e,o,l)}}}catch(l){Ui(e,e.return,l)}if(e===n){Ct=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ct=a;break}Ct=e.return}}var NJ=Math.ceil,m_=Tc.ReactCurrentDispatcher,$T=Tc.ReactCurrentOwner,ra=Tc.ReactCurrentBatchConfig,zn=0,Lr=null,or=null,jr=0,co=0,Dp=qu(0),pr=0,Yg=null,xf=0,p3=0,eI=0,rg=null,ks=null,tI=0,dm=1/0,ec=null,g_=!1,a5=null,wu=null,py=!1,lu=null,A_=0,sg=0,l5=null,Mx=-1,bx=0;function ws(){return zn&6?Ki():Mx!==-1?Mx:Mx=Ki()}function Su(n){return n.mode&1?zn&2&&jr!==0?jr&-jr:wJ.transition!==null?(bx===0&&(bx=$z()),bx):(n=Kn,n!==0||(n=window.event,n=n===void 0?16:ok(n.type)),n):1}function za(n,e,t,i){if(50<sg)throw sg=0,l5=null,Error(lt(185));CA(n,t,i),(!(zn&2)||n!==Lr)&&(n===Lr&&(!(zn&2)&&(p3|=t),pr===4&&ou(n,jr)),Ys(n,i),t===1&&zn===0&&!(e.mode&1)&&(dm=Ki()+500,u3&&Ku()))}function Ys(n,e){var t=n.callbackNode;wK(n,e);var i=e_(n,n===Lr?jr:0);if(i===0)t!==null&&IB(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&IB(t),e===1)n.tag===0?EJ(_P.bind(null,n)):Ck(_P.bind(null,n)),vJ(function(){!(zn&6)&&Ku()}),t=null;else{switch(ek(i)){case 1:t=bT;break;case 4:t=Jz;break;case 16:t=$x;break;case 536870912:t=Zz;break;default:t=$x}t=wN(t,gN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function gN(n,e){if(Mx=-1,bx=0,zn&6)throw Error(lt(327));var t=n.callbackNode;if(qp()&&n.callbackNode!==t)return null;var i=e_(n,n===Lr?jr:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=v_(n,i);else{e=i;var r=zn;zn|=2;var s=vN();(Lr!==n||jr!==e)&&(ec=null,dm=Ki()+500,af(n,e));do try{QJ();break}catch(a){AN(n,a)}while(!0);NT(),m_.current=s,zn=r,or!==null?e=0:(Lr=null,jr=0,e=pr)}if(e!==0){if(e===2&&(r=FM(n),r!==0&&(i=r,e=c5(n,r))),e===1)throw t=Yg,af(n,0),ou(n,i),Ys(n,Ki()),t;if(e===6)ou(n,i);else{if(r=n.current.alternate,!(i&30)&&!GJ(r)&&(e=v_(n,i),e===2&&(s=FM(n),s!==0&&(i=s,e=c5(n,s))),e===1))throw t=Yg,af(n,0),ou(n,i),Ys(n,Ki()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(lt(345));case 2:Hh(n,ks,ec);break;case 3:if(ou(n,i),(i&130023424)===i&&(e=tI+500-Ki(),10<e)){if(e_(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){ws(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=QM(Hh.bind(null,n,ks,ec),e);break}Hh(n,ks,ec);break;case 4:if(ou(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Ua(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ki()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*NJ(i/1960))-i,10<i){n.timeoutHandle=QM(Hh.bind(null,n,ks,ec),i);break}Hh(n,ks,ec);break;case 5:Hh(n,ks,ec);break;default:throw Error(lt(329))}}}return Ys(n,Ki()),n.callbackNode===t?gN.bind(null,n):null}function c5(n,e){var t=rg;return n.current.memoizedState.isDehydrated&&(af(n,e).flags|=256),n=v_(n,e),n!==2&&(e=ks,ks=t,e!==null&&u5(e)),n}function u5(n){ks===null?ks=n:ks.push.apply(ks,n)}function GJ(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Ha(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ou(n,e){for(e&=~eI,e&=~p3,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ua(e),i=1<<t;n[t]=-1,e&=~i}}function _P(n){if(zn&6)throw Error(lt(327));qp();var e=e_(n,0);if(!(e&1))return Ys(n,Ki()),null;var t=v_(n,e);if(n.tag!==0&&t===2){var i=FM(n);i!==0&&(e=i,t=c5(n,i))}if(t===1)throw t=Yg,af(n,0),ou(n,e),Ys(n,Ki()),t;if(t===6)throw Error(lt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Hh(n,ks,ec),Ys(n,Ki()),null}function nI(n,e){var t=zn;zn|=1;try{return n(e)}finally{zn=t,zn===0&&(dm=Ki()+500,u3&&Ku())}}function _f(n){lu!==null&&lu.tag===0&&!(zn&6)&&qp();var e=zn;zn|=1;var t=ra.transition,i=Kn;try{if(ra.transition=null,Kn=1,n)return n()}finally{Kn=i,ra.transition=t,zn=e,!(zn&6)&&Ku()}}function iI(){co=Dp.current,mi(Dp)}function af(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,AJ(t)),or!==null)for(t=or.return;t!==null;){var i=t;switch(UT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&s_();break;case 3:hm(),mi(js),mi(ls),jT();break;case 5:WT(i);break;case 4:hm();break;case 13:mi(Ti);break;case 19:mi(Ti);break;case 10:GT(i.type._context);break;case 22:case 23:iI()}t=t.return}if(Lr=n,or=n=Cu(n.current,null),jr=co=e,pr=0,Yg=null,eI=p3=xf=0,ks=rg=null,Kh!==null){for(e=0;e<Kh.length;e++)if(t=Kh[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Kh=null}return n}function AN(n,e){do{var t=or;try{if(NT(),wx.current=p_,d_){for(var i=Pi.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}d_=!1}if(yf=0,Ir=fr=Pi=null,ng=!1,Wg=0,$T.current=null,t===null||t.return===null){pr=1,Yg=e,or=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=jr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=lP(o);if(d!==null){d.flags&=-257,cP(d,o,a,s,e),d.mode&1&&aP(s,c,e),e=d,l=c;var m=e.updateQueue;if(m===null){var A=new Set;A.add(l),e.updateQueue=A}else m.add(l);break e}else{if(!(e&1)){aP(s,c,e),rI();break e}l=Error(lt(426))}}else if(wi&&a.mode&1){var y=lP(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),cP(y,o,a,s,e),zT(fm(l,a));break e}}s=l=fm(l,a),pr!==4&&(pr=2),rg===null?rg=[s]:rg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=eN(s,l,e);tP(s,p);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(wu===null||!wu.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=tN(s,a,e);tP(s,E);break e}}s=s.return}while(s!==null)}xN(t)}catch(S){e=S,or===t&&t!==null&&(or=t=t.return);continue}break}while(!0)}function vN(){var n=m_.current;return m_.current=p_,n===null?p_:n}function rI(){(pr===0||pr===3||pr===2)&&(pr=4),Lr===null||!(xf&268435455)&&!(p3&268435455)||ou(Lr,jr)}function v_(n,e){var t=zn;zn|=2;var i=vN();(Lr!==n||jr!==e)&&(ec=null,af(n,e));do try{HJ();break}catch(r){AN(n,r)}while(!0);if(NT(),zn=t,m_.current=i,or!==null)throw Error(lt(261));return Lr=null,jr=0,pr}function HJ(){for(;or!==null;)yN(or)}function QJ(){for(;or!==null&&!pK();)yN(or)}function yN(n){var e=EN(n.alternate,n,co);n.memoizedProps=n.pendingProps,e===null?xN(n):or=e,$T.current=null}function xN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=OJ(t,e),t!==null){t.flags&=32767,or=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pr=6,or=null;return}}else if(t=FJ(t,e,co),t!==null){or=t;return}if(e=e.sibling,e!==null){or=e;return}or=e=n}while(e!==null);pr===0&&(pr=5)}function Hh(n,e,t){var i=Kn,r=ra.transition;try{ra.transition=null,Kn=1,VJ(n,e,t,i)}finally{ra.transition=r,Kn=i}return null}function VJ(n,e,t,i){do qp();while(lu!==null);if(zn&6)throw Error(lt(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(lt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(SK(n,s),n===Lr&&(or=Lr=null,jr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||py||(py=!0,wN($x,function(){return qp(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ra.transition,ra.transition=null;var o=Kn;Kn=1;var a=zn;zn|=4,$T.current=null,zJ(n,t),pN(t,n),uJ(GM),t_=!!NM,GM=NM=null,n.current=t,kJ(t),mK(),zn=a,Kn=o,ra.transition=s}else n.current=t;if(py&&(py=!1,lu=n,A_=r),s=n.pendingLanes,s===0&&(wu=null),vK(t.stateNode),Ys(n,Ki()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(g_)throw g_=!1,n=a5,a5=null,n;return A_&1&&n.tag!==0&&qp(),s=n.pendingLanes,s&1?n===l5?sg++:(sg=0,l5=n):sg=0,Ku(),null}function qp(){if(lu!==null){var n=ek(A_),e=ra.transition,t=Kn;try{if(ra.transition=null,Kn=16>n?16:n,lu===null)var i=!1;else{if(n=lu,lu=null,A_=0,zn&6)throw Error(lt(331));var r=zn;for(zn|=4,Ct=n.current;Ct!==null;){var s=Ct,o=s.child;if(Ct.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ct=c;Ct!==null;){var u=Ct;switch(u.tag){case 0:case 11:case 15:ig(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ct=h;else for(;Ct!==null;){u=Ct;var f=u.sibling,d=u.return;if(hN(u),u===c){Ct=null;break}if(f!==null){f.return=d,Ct=f;break}Ct=d}}}var m=s.alternate;if(m!==null){var A=m.child;if(A!==null){m.child=null;do{var y=A.sibling;A.sibling=null,A=y}while(A!==null)}}Ct=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ct=o;else e:for(;Ct!==null;){if(s=Ct,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ig(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Ct=p;break e}Ct=s.return}}var g=n.current;for(Ct=g;Ct!==null;){o=Ct;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ct=v;else e:for(o=g;Ct!==null;){if(a=Ct,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:d3(9,a)}}catch(S){Ui(a,a.return,S)}if(a===o){Ct=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ct=E;break e}Ct=a.return}}if(zn=r,Ku(),_l&&typeof _l.onPostCommitFiberRoot=="function")try{_l.onPostCommitFiberRoot(s3,n)}catch{}i=!0}return i}finally{Kn=t,ra.transition=e}}return!1}function EP(n,e,t){e=fm(t,e),e=eN(n,e,1),n=Eu(n,e,1),e=ws(),n!==null&&(CA(n,1,e),Ys(n,e))}function Ui(n,e,t){if(n.tag===3)EP(n,n,t);else for(;e!==null;){if(e.tag===3){EP(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wu===null||!wu.has(i))){n=fm(t,n),n=tN(e,n,1),e=Eu(e,n,1),n=ws(),e!==null&&(CA(e,1,n),Ys(e,n));break}}e=e.return}}function WJ(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=ws(),n.pingedLanes|=n.suspendedLanes&t,Lr===n&&(jr&t)===t&&(pr===4||pr===3&&(jr&130023424)===jr&&500>Ki()-tI?af(n,0):eI|=t),Ys(n,e)}function _N(n,e){e===0&&(n.mode&1?(e=ry,ry<<=1,!(ry&130023424)&&(ry=4194304)):e=1);var t=ws();n=_c(n,e),n!==null&&(CA(n,e,t),Ys(n,t))}function jJ(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),_N(n,t)}function XJ(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(lt(314))}i!==null&&i.delete(e),_N(n,t)}var EN;EN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||js.current)Ns=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ns=!1,LJ(n,e,t);Ns=!!(n.flags&131072)}else Ns=!1,wi&&e.flags&1048576&&Mk(e,l_,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Cx(n,e),n=e.pendingProps;var r=lm(e,ls.current);Yp(e,t),r=YT(null,e,i,n,r,t);var s=qT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xs(i)?(s=!0,o_(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,QT(e),r.updater=f3,e.stateNode=r,r._reactInternals=e,KM(e,i,n,t),e=$M(null,e,i,!0,s,t)):(e.tag=0,wi&&s&&OT(e),vs(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Cx(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=qJ(i),n=ba(i,n),r){case 0:e=ZM(null,e,i,n,t);break e;case 1:e=fP(null,e,i,n,t);break e;case 11:e=uP(null,e,i,n,t);break e;case 14:e=hP(null,e,i,ba(i.type,n),t);break e}throw Error(lt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ba(i,r),ZM(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ba(i,r),fP(n,e,i,r,t);case 3:e:{if(sN(e),n===null)throw Error(lt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Rk(n,e),h_(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=fm(Error(lt(423)),e),e=dP(n,e,i,t,r);break e}else if(i!==r){r=fm(Error(lt(424)),e),e=dP(n,e,i,t,r);break e}else for(uo=_u(e.stateNode.containerInfo.firstChild),mo=e,wi=!0,Ba=null,t=Bk(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cm(),i===r){e=Ec(n,e,t);break e}vs(n,e,i,t)}e=e.child}return e;case 5:return Dk(e),n===null&&XM(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,HM(i,r)?o=null:s!==null&&HM(i,s)&&(e.flags|=32),rN(n,e),vs(n,e,o,t),e.child;case 6:return n===null&&XM(e),null;case 13:return oN(n,e,t);case 4:return VT(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=um(e,null,i,t):vs(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ba(i,r),uP(n,e,i,r,t);case 7:return vs(n,e,e.pendingProps,t),e.child;case 8:return vs(n,e,e.pendingProps.children,t),e.child;case 12:return vs(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ui(c_,i._currentValue),i._currentValue=o,s!==null)if(Ha(s.value,o)){if(s.children===r.children&&!js.current){e=Ec(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=fc(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),YM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(lt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),YM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vs(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Yp(e,t),r=aa(r),i=i(r),e.flags|=1,vs(n,e,i,t),e.child;case 14:return i=e.type,r=ba(i,e.pendingProps),r=ba(i.type,r),hP(n,e,i,r,t);case 15:return nN(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ba(i,r),Cx(n,e),e.tag=1,Xs(i)?(n=!0,o_(e)):n=!1,Yp(e,t),$k(e,i,r),KM(e,i,r,t),$M(null,e,i,!0,n,t);case 19:return aN(n,e,t);case 22:return iN(n,e,t)}throw Error(lt(156,e.tag))};function wN(n,e){return Kz(n,e)}function YJ(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $o(n,e,t,i){return new YJ(n,e,t,i)}function sI(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qJ(n){if(typeof n=="function")return sI(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ST)return 11;if(n===CT)return 14}return 2}function Cu(n,e){var t=n.alternate;return t===null?(t=$o(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Tx(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")sI(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case wp:return lf(t.children,r,s,e);case wT:o=8,r|=8;break;case xM:return n=$o(12,t,e,r|2),n.elementType=xM,n.lanes=s,n;case _M:return n=$o(13,t,e,r),n.elementType=_M,n.lanes=s,n;case EM:return n=$o(19,t,e,r),n.elementType=EM,n.lanes=s,n;case Dz:return m3(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Pz:o=10;break e;case Rz:o=9;break e;case ST:o=11;break e;case CT:o=14;break e;case nu:o=16,i=null;break e}throw Error(lt(130,n==null?n:typeof n,""))}return e=$o(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function lf(n,e,t,i){return n=$o(7,n,i,e),n.lanes=t,n}function m3(n,e,t,i){return n=$o(22,n,i,e),n.elementType=Dz,n.lanes=t,n.stateNode={isHidden:!1},n}function xS(n,e,t){return n=$o(6,n,null,e),n.lanes=t,n}function _S(n,e,t){return e=$o(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KJ(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tS(0),this.expirationTimes=tS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tS(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function oI(n,e,t,i,r,s,o,a,l){return n=new KJ(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$o(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},QT(s),n}function JJ(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ep,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function SN(n){if(!n)return Uu;n=n._reactInternals;e:{if(Ff(n)!==n||n.tag!==1)throw Error(lt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(lt(171))}if(n.tag===1){var t=n.type;if(Xs(t))return Sk(n,t,e)}return e}function CN(n,e,t,i,r,s,o,a,l){return n=oI(t,i,!0,n,r,s,o,a,l),n.context=SN(null),t=n.current,i=ws(),r=Su(t),s=fc(i,r),s.callback=e??null,Eu(t,s,r),n.current.lanes=r,CA(n,r,i),Ys(n,i),n}function g3(n,e,t,i){var r=e.current,s=ws(),o=Su(r);return t=SN(t),e.context===null?e.context=t:e.pendingContext=t,e=fc(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Eu(r,e,o),n!==null&&(za(n,r,o,s),Ex(n,r,o)),o}function y_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function aI(n,e){wP(n,e),(n=n.alternate)&&wP(n,e)}function ZJ(){return null}var MN=typeof reportError=="function"?reportError:function(n){console.error(n)};function lI(n){this._internalRoot=n}A3.prototype.render=lI.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(lt(409));g3(n,e,null,null)};A3.prototype.unmount=lI.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;_f(function(){g3(null,n,null,null)}),e[xc]=null}};function A3(n){this._internalRoot=n}A3.prototype.unstable_scheduleHydration=function(n){if(n){var e=ik();n={blockedOn:null,target:n,priority:e};for(var t=0;t<su.length&&e!==0&&e<su[t].priority;t++);su.splice(t,0,n),t===0&&sk(n)}};function cI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function v3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function SP(){}function $J(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=y_(o);s.call(c)}}var o=CN(e,i,n,0,null,!1,!1,"",SP);return n._reactRootContainer=o,n[xc]=o.current,Ng(n.nodeType===8?n.parentNode:n),_f(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=y_(l);a.call(c)}}var l=oI(n,0,!1,null,null,!1,!1,"",SP);return n._reactRootContainer=l,n[xc]=l.current,Ng(n.nodeType===8?n.parentNode:n),_f(function(){g3(e,l,t,i)}),l}function y3(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=y_(o);a.call(l)}}g3(e,o,n,r)}else o=$J(t,e,n,r,i);return y_(o)}tk=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=z1(e.pendingLanes);t!==0&&(TT(e,t|1),Ys(e,Ki()),!(zn&6)&&(dm=Ki()+500,Ku()))}break;case 13:_f(function(){var i=_c(n,1);if(i!==null){var r=ws();za(i,n,1,r)}}),aI(n,1)}};IT=function(n){if(n.tag===13){var e=_c(n,134217728);if(e!==null){var t=ws();za(e,n,134217728,t)}aI(n,134217728)}};nk=function(n){if(n.tag===13){var e=Su(n),t=_c(n,e);if(t!==null){var i=ws();za(t,n,e,i)}aI(n,e)}};ik=function(){return Kn};rk=function(n,e){var t=Kn;try{return Kn=n,e()}finally{Kn=t}};RM=function(n,e,t){switch(e){case"input":if(CM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=c3(i);if(!r)throw Error(lt(90));Fz(i),CM(i,r)}}}break;case"textarea":Uz(n,t);break;case"select":e=t.value,e!=null&&Vp(n,!!t.multiple,e,!1)}};Vz=nI;Wz=_f;var eZ={usingClientEntryPoint:!1,Events:[bA,bp,c3,Hz,Qz,nI]},T0={findFiberByHostInstance:qh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tZ={bundleType:T0.bundleType,version:T0.version,rendererPackageName:T0.rendererPackageName,rendererConfig:T0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Yz(n),n===null?null:n.stateNode},findFiberByHostInstance:T0.findFiberByHostInstance||ZJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var my=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!my.isDisabled&&my.supportsFiber)try{s3=my.inject(tZ),_l=my}catch{}}_o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eZ;_o.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cI(e))throw Error(lt(200));return JJ(n,e,null,t)};_o.createRoot=function(n,e){if(!cI(n))throw Error(lt(299));var t=!1,i="",r=MN;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=oI(n,1,!1,null,null,t,!1,i,r),n[xc]=e.current,Ng(n.nodeType===8?n.parentNode:n),new lI(e)};_o.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(lt(188)):(n=Object.keys(n).join(","),Error(lt(268,n)));return n=Yz(e),n=n===null?null:n.stateNode,n};_o.flushSync=function(n){return _f(n)};_o.hydrate=function(n,e,t){if(!v3(e))throw Error(lt(200));return y3(null,n,e,!0,t)};_o.hydrateRoot=function(n,e,t){if(!cI(n))throw Error(lt(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=MN;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=CN(e,null,n,1,t??null,r,!1,s,o),n[xc]=e.current,Ng(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new A3(e)};_o.render=function(n,e,t){if(!v3(e))throw Error(lt(200));return y3(null,n,e,!1,t)};_o.unmountComponentAtNode=function(n){if(!v3(n))throw Error(lt(40));return n._reactRootContainer?(_f(function(){y3(null,null,n,!1,function(){n._reactRootContainer=null,n[xc]=null})}),!0):!1};_o.unstable_batchedUpdates=nI;_o.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!v3(t))throw Error(lt(200));if(n==null||n._reactInternals===void 0)throw Error(lt(38));return y3(n,e,t,!1,i)};_o.version="18.3.1-next-f1338f8080-20240426";function bN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bN)}catch(n){console.error(n)}}bN(),bz.exports=_o;var nZ=bz.exports,uI,CP=nZ;uI=vM.createRoot=CP.createRoot,vM.hydrateRoot=CP.hydrateRoot;const x3=w.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),_3=w.createContext({}),E3=w.createContext(null),hI=typeof window<"u",TN=hI?w.useLayoutEffect:w.useEffect,IN=w.createContext({strict:!1}),w3=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iZ="framerAppearId",BN="data-"+w3(iZ),rZ={skipAnimations:!1,useManualTiming:!1};function sZ(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const d=h&&i?e:t;return u&&s.add(c),d.has(c)||d.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],t.clear(),e.forEach(a),i=!1,r&&(r=!1,l.process(c))}};return l}const gy=["read","resolveKeyframes","update","preRender","render","postRender"],oZ=40;function PN(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=gy.reduce((p,g)=>(p[g]=sZ(s),p),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,d=()=>{const p=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(p-r.timestamp,oZ),1),r.timestamp=p,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),h.process(r),f.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(d))},m=()=>{t=!0,i=!0,r.isProcessing||n(d)};return{schedule:gy.reduce((p,g)=>{const v=o[g];return p[g]=(E,S=!1,C=!1)=>(t||m(),v.schedule(E,S,C)),p},{}),cancel:p=>{for(let g=0;g<gy.length;g++)o[gy[g]].cancel(p)},state:r,steps:o}}const{schedule:fI,cancel:y4e}=PN(queueMicrotask,!1);function Lp(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const RN=w.createContext({});let MP=!1;function aZ(n,e,t,i,r){const{visualElement:s}=w.useContext(_3),o=w.useContext(IN),a=w.useContext(E3),l=w.useContext(x3).reducedMotion,c=w.useRef();i=i||o.renderer,!c.current&&i&&(c.current=i(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=w.useContext(RN);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&cZ(c.current,t,r,h),w.useInsertionEffect(()=>{u&&u.update(t,a)});const f=w.useRef(!!(t[BN]&&!window.HandoffComplete));return TN(()=>{u&&(u.updateFeatures(),fI.render(u.render),f.current&&u.animationState&&u.animationState.animateChanges())}),w.useEffect(()=>{u&&(!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,MP||(MP=!0,queueMicrotask(lZ))))}),u}function lZ(){window.HandoffComplete=!0}function cZ(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:DN(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Lp(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function DN(n){if(n)return n.options.allowProjection!==!1?n.projection:DN(n.parent)}function uZ(n,e,t){return w.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Lp(t)&&(t.current=i))},[e])}function qg(n){return typeof n=="string"||Array.isArray(n)}function Kg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const dI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pI=["initial",...dI];function S3(n){return Kg(n.animate)||pI.some(e=>qg(n[e]))}function LN(n){return!!(S3(n)||n.variants)}function hZ(n,e){if(S3(n)){const{initial:t,animate:i}=n;return{initial:t===!1||qg(t)?t:void 0,animate:qg(i)?i:void 0}}return n.inherit!==!1?e:{}}function fZ(n){const{initial:e,animate:t}=hZ(n,w.useContext(_3));return w.useMemo(()=>({initial:e,animate:t}),[bP(e),bP(t)])}function bP(n){return Array.isArray(n)?n.join(" "):n}const TP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pm={};for(const n in TP)pm[n]={isEnabled:e=>TP[n].some(t=>!!e[t])};function dZ(n){for(const e in n)pm[e]={...pm[e],...n[e]}}const mI=w.createContext({}),pZ=Symbol.for("motionComponentSymbol"),as=n=>n;let h5=as;function mZ({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&dZ(n);function s(a,l){let c;const u={...w.useContext(x3),...a,layoutId:gZ(a)},{isStatic:h}=u,f=fZ(a),d=i(a,h);if(!h&&hI){AZ();const m=vZ(u);c=m.MeasureLayout,f.visualElement=aZ(r,d,u,e,m.ProjectionNode)}return Ge.jsxs(_3.Provider,{value:f,children:[c&&f.visualElement?Ge.jsx(c,{visualElement:f.visualElement,...u}):null,t(r,a,uZ(d,f.visualElement,l),d,h,f.visualElement)]})}const o=w.forwardRef(s);return o[pZ]=r,o}function gZ({layoutId:n}){const e=w.useContext(mI).id;return e&&n!==void 0?e+"-"+n:n}function AZ(n,e){w.useContext(IN).strict}function vZ(n){const{drag:e,layout:t}=pm;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function yZ(n){function e(i,r={}){return mZ(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const xZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gI(n){return typeof n!="string"||n.includes("-")?!1:!!(xZ.indexOf(n)>-1||/[A-Z]/u.test(n))}const x_={};function _Z(n){Object.assign(x_,n)}const IA=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ju=new Set(IA);function FN(n,{layout:e,layoutId:t}){return Ju.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!x_[n]||n==="opacity")}const Pr=n=>!!(n&&n.getVelocity),ON=(n,e)=>e&&typeof n=="number"?e.transform(n):n,zu=(n,e,t)=>t>e?e:t<n?n:t,Um={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},og={...Um,transform:n=>zu(0,1,n)},Ay={...Um,default:1},ag=n=>Math.round(n*1e5)/1e5,AI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,EZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,wZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function BA(n){return typeof n=="string"}function SZ(n){return n==null}const PA=n=>({test:e=>BA(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),$c=PA("deg"),wl=PA("%"),Jt=PA("px"),CZ=PA("vh"),MZ=PA("vw"),IP={...wl,parse:n=>wl.parse(n)/100,transform:n=>wl.transform(n*100)},BP={...Um,transform:Math.round},vI={borderWidth:Jt,borderTopWidth:Jt,borderRightWidth:Jt,borderBottomWidth:Jt,borderLeftWidth:Jt,borderRadius:Jt,radius:Jt,borderTopLeftRadius:Jt,borderTopRightRadius:Jt,borderBottomRightRadius:Jt,borderBottomLeftRadius:Jt,width:Jt,maxWidth:Jt,height:Jt,maxHeight:Jt,size:Jt,top:Jt,right:Jt,bottom:Jt,left:Jt,padding:Jt,paddingTop:Jt,paddingRight:Jt,paddingBottom:Jt,paddingLeft:Jt,margin:Jt,marginTop:Jt,marginRight:Jt,marginBottom:Jt,marginLeft:Jt,rotate:$c,rotateX:$c,rotateY:$c,rotateZ:$c,scale:Ay,scaleX:Ay,scaleY:Ay,scaleZ:Ay,skew:$c,skewX:$c,skewY:$c,distance:Jt,translateX:Jt,translateY:Jt,translateZ:Jt,x:Jt,y:Jt,z:Jt,perspective:Jt,transformPerspective:Jt,opacity:og,originX:IP,originY:IP,originZ:Jt,zIndex:BP,backgroundPositionX:Jt,backgroundPositionY:Jt,fillOpacity:og,strokeOpacity:og,numOctaves:BP},bZ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TZ=IA.length;function IZ(n,e,t){let i="",r=!0;for(let s=0;s<TZ;s++){const o=IA[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=ON(a,vI[o]);if(!l){r=!1;const u=bZ[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}const UN=n=>e=>typeof e=="string"&&e.startsWith(n),zN=UN("--"),BZ=UN("var(--"),yI=n=>BZ(n)?PZ.test(n.split("/*")[0].trim()):!1,PZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function xI(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ju.has(l)){o=!0;continue}else if(zN(l)){r[l]=c;continue}else{const u=ON(c,vI[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=IZ(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const _I=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kN(n,e,t){for(const i in e)!Pr(e[i])&&!FN(i,t)&&(n[i]=e[i])}function RZ({transformTemplate:n},e){return w.useMemo(()=>{const t=_I();return xI(t,e,n),Object.assign({},t.vars,t.style)},[e])}function DZ(n,e){const t=n.style||{},i={};return kN(i,t,n),Object.assign(i,RZ(n,e)),i}function LZ(n,e){const t={},i=DZ(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const FZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function __(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||FZ.has(n)}let NN=n=>!__(n);function OZ(n){n&&(NN=e=>e.startsWith("on")?!__(e):n(e))}try{OZ(require("@emotion/is-prop-valid").default)}catch{}function UZ(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(NN(r)||t===!0&&__(r)||!e&&!__(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function PP(n,e,t){return typeof n=="string"?n:Jt.transform(e+t*n)}function zZ(n,e,t){const i=PP(e,n.x,n.width),r=PP(t,n.y,n.height);return`${i} ${r}`}const kZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},NZ={offset:"strokeDashoffset",array:"strokeDasharray"};function GZ(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?kZ:NZ;n[s.offset]=Jt.transform(-i);const o=Jt.transform(e),a=Jt.transform(t);n[s.array]=`${o} ${a}`}function EI(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(xI(n,c,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:f,style:d,dimensions:m}=n;f.transform&&(m&&(d.transform=f.transform),delete f.transform),m&&(r!==void 0||s!==void 0||d.transform)&&(d.transformOrigin=zZ(m,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),t!==void 0&&(f.y=t),i!==void 0&&(f.scale=i),o!==void 0&&GZ(f,o,a,l,!1)}const GN=()=>({..._I(),attrs:{}}),wI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function HZ(n,e,t,i){const r=w.useMemo(()=>{const s=GN();return EI(s,e,wI(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};kN(s,n.style,n),r.style={...s,...r.style}}return r}function QZ(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(gI(t)?HZ:LZ)(i,s,o,t),c=UZ(i,typeof t=="string",n),u=t!==w.Fragment?{...c,...l,ref:r}:{},{children:h}=i,f=w.useMemo(()=>Pr(h)?h.get():h,[h]);return w.createElement(t,{...u,children:f})}}function HN(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const QN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VN(n,e,t,i){HN(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(QN.has(r)?r:w3(r),e.attrs[r])}function SI(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(Pr(r[o])||e.style&&Pr(e.style[o])||FN(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return t&&r&&typeof r.willChange=="string"&&(t.applyWillChange=!1),s}function WN(n,e,t){const i=SI(n,e,t);for(const r in n)if(Pr(n[r])||Pr(e[r])){const s=IA.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function RP(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function CI(n,e,t,i){if(typeof e=="function"){const[r,s]=RP(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=RP(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function C3(n){const e=w.useRef(null);return e.current===null&&(e.current=n()),e.current}const f5=n=>Array.isArray(n),VZ=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),WZ=n=>f5(n)?n[n.length-1]||0:n;function Ix(n){const e=Pr(n)?n.get():n;return VZ(e)?e.toValue():e}const jN=new Set(["opacity","clipPath","filter","transform"]);function XN(n){if(Ju.has(n))return"transform";if(jN.has(n))return w3(n)}function M3(n,e){n.indexOf(e)===-1&&n.push(e)}function RA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function jZ({applyWillChange:n=!1,scrapeMotionValuesFromProps:e,createRenderState:t,onMount:i},r,s,o,a){const l={latestValues:YZ(r,s,o,a?!1:n,e),renderState:t()};return i&&(l.mount=c=>i(r,c,l)),l}const YN=n=>(e,t)=>{const i=w.useContext(_3),r=w.useContext(E3),s=()=>jZ(n,e,i,r,t);return t?s():C3(s)};function XZ(n,e){const t=XN(e);t&&M3(n,t)}function DP(n,e,t){const i=Array.isArray(e)?e:[e];for(let r=0;r<i.length;r++){const s=CI(n,i[r]);if(s){const{transitionEnd:o,transition:a,...l}=s;t(l,o)}}}function YZ(n,e,t,i,r){var s;const o={},a=[],l=i&&((s=n.style)===null||s===void 0?void 0:s.willChange)===void 0,c=r(n,{});for(const y in c)o[y]=Ix(c[y]);let{initial:u,animate:h}=n;const f=S3(n),d=LN(n);e&&d&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let m=t?t.initial===!1:!1;m=m||u===!1;const A=m?h:u;return A&&typeof A!="boolean"&&!Kg(A)&&DP(n,A,(y,p)=>{for(const g in y){let v=y[g];if(Array.isArray(v)){const E=m?v.length-1:0;v=v[E]}v!==null&&(o[g]=v)}for(const g in p)o[g]=p[g]}),l&&(h&&u!==!1&&!Kg(h)&&DP(n,h,y=>{for(const p in y)XZ(a,p)}),a.length&&(o.willChange=a.join(","))),o}const{schedule:ei,cancel:wc,state:Wr,steps:ES}=PN(typeof requestAnimationFrame<"u"?requestAnimationFrame:as,!0),qZ={useVisualState:YN({scrapeMotionValuesFromProps:WN,createRenderState:GN,onMount:(n,e,{renderState:t,latestValues:i})=>{ei.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),ei.render(()=>{EI(t,i,wI(e.tagName),n.transformTemplate),VN(e,t)})}})},KZ={useVisualState:YN({applyWillChange:!0,scrapeMotionValuesFromProps:SI,createRenderState:_I})};function JZ(n,{forwardMotionProps:e=!1},t,i){return{...gI(n)?qZ:KZ,preloadedFeatures:t,useRender:QZ(e),createVisualElement:i,Component:n}}function hc(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const qN=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function b3(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const ZZ=n=>e=>qN(e)&&n(e,b3(e));function dc(n,e,t,i){return hc(n,e,ZZ(t),i)}const $Z=(n,e)=>t=>e(n(t)),pc=(...n)=>n.reduce($Z);function KN(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const LP=KN("dragHorizontal"),FP=KN("dragVertical");function JN(n){let e=!1;if(n==="y")e=FP();else if(n==="x")e=LP();else{const t=LP(),i=FP();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function ZN(){const n=JN(!0);return n?(n(),!1):!0}class Zu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function OP(n,e){const t=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(s,o)=>{if(s.pointerType==="touch"||ZN())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e);const l=a[i];l&&ei.postRender(()=>l(s,o))};return dc(n.current,t,r,{passive:!n.getProps()[i]})}class e$ extends Zu{mount(){this.unmount=pc(OP(this.node,!0),OP(this.node,!1))}unmount(){}}class t$ extends Zu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pc(hc(this.node.current,"focus",()=>this.onFocus()),hc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const $N=(n,e)=>e?n===e?!0:$N(n,e.parentElement):!1;function wS(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,b3(t))}class n$ extends Zu{constructor(){super(...arguments),this.removeStartListeners=as,this.removeEndListeners=as,this.removeAccessibleListeners=as,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=dc(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps(),f=!h&&!$N(this.node.current,a.target)?u:c;f&&ei.update(()=>f(a,l))},{passive:!(i.onTap||i.onPointerUp)}),o=dc(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=pc(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||wS("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&ei.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=hc(this.node.current,"keyup",o),wS("down",(a,l)=>{this.startPress(a,l)})},t=hc(this.node.current,"keydown",e),i=()=>{this.isPressing&&wS("cancel",(s,o)=>this.cancelPress(s,o))},r=hc(this.node.current,"blur",i);this.removeAccessibleListeners=pc(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&ei.postRender(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ZN()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&ei.postRender(()=>i(e,t))}mount(){const e=this.node.getProps(),t=dc(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=hc(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pc(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const d5=new WeakMap,SS=new WeakMap,i$=n=>{const e=d5.get(n.target);e&&e(n)},r$=n=>{n.forEach(i$)};function s$({root:n,...e}){const t=n||document;SS.has(t)||SS.set(t,{});const i=SS.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(r$,{root:n,...e})),i[r]}function o$(n,e,t){const i=s$(e);return d5.set(n,t),i.observe(n),()=>{d5.delete(n),i.unobserve(n)}}const a$={some:0,all:1};class l$ extends Zu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:a$[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return o$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(c$(e,t))&&this.startObserver()}unmount(){}}function c$({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const u$={inView:{Feature:l$},tap:{Feature:n$},focus:{Feature:t$},hover:{Feature:e$}};function eG(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function T3(n,e,t){const i=n.getProps();return CI(i,e,t!==void 0?t:i.custom,n)}const mc=n=>n*1e3,Sl=n=>n/1e3,h$={type:"spring",stiffness:500,damping:25,restSpeed:10},f$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),d$={type:"keyframes",duration:.8},p$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},m$=(n,{keyframes:e})=>e.length>2?d$:Ju.has(n)?n.startsWith("scale")?f$(e[1]):h$:p$;function g$({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function MI(n,e){return n[e]||n.default||n}const A$=n=>n!==null;function I3(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(A$),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}let Bx;function v$(){Bx=void 0}const Mu={now:()=>(Bx===void 0&&Mu.set(Wr.isProcessing||rZ.useManualTiming?Wr.timestamp:performance.now()),Bx),set:n=>{Bx=n,queueMicrotask(v$)}},tG=n=>/^0[^.\s]+$/u.test(n);function y$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||tG(n):!0}const nG=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),x$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _$(n){const e=x$.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function iG(n,e,t=1){const[i,r]=_$(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return nG(o)?parseFloat(o):o}return yI(r)?iG(r,e,t+1):r}const E$=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),UP=n=>n===Um||n===Jt,zP=(n,e)=>parseFloat(n.split(", ")[e]),kP=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return zP(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?zP(s[1],n):0}},w$=new Set(["x","y","z"]),S$=IA.filter(n=>!w$.has(n));function C$(n){const e=[];return S$.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const mm={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:kP(4,13),y:kP(5,14)};mm.translateX=mm.x;mm.translateY=mm.y;const rG=n=>e=>e.test(n),M$={test:n=>n==="auto",parse:n=>n},sG=[Um,Jt,wl,$c,MZ,CZ,M$],NP=n=>sG.find(rG(n)),cf=new Set;let p5=!1,m5=!1;function oG(){if(m5){const n=Array.from(cf).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=C$(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}m5=!1,p5=!1,cf.forEach(n=>n.complete()),cf.clear()}function aG(){cf.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(m5=!0)})}function b$(){aG(),oG()}class bI{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(cf.add(this),p5||(p5=!0,ei.read(aG),ei.resolveKeyframes(oG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),cf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,cf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const TI=(n,e)=>t=>!!(BA(t)&&wZ.test(t)&&t.startsWith(n)||e&&!SZ(t)&&Object.prototype.hasOwnProperty.call(t,e)),lG=(n,e,t)=>i=>{if(!BA(i))return i;const[r,s,o,a]=i.match(AI);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},T$=n=>zu(0,255,n),CS={...Um,transform:n=>Math.round(T$(n))},Zh={test:TI("rgb","red"),parse:lG("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+CS.transform(n)+", "+CS.transform(e)+", "+CS.transform(t)+", "+ag(og.transform(i))+")"};function I$(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const g5={test:TI("#"),parse:I$,transform:Zh.transform},Fp={test:TI("hsl","hue"),parse:lG("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+wl.transform(ag(e))+", "+wl.transform(ag(t))+", "+ag(og.transform(i))+")"},is={test:n=>Zh.test(n)||g5.test(n)||Fp.test(n),parse:n=>Zh.test(n)?Zh.parse(n):Fp.test(n)?Fp.parse(n):g5.parse(n),transform:n=>BA(n)?n:n.hasOwnProperty("red")?Zh.transform(n):Fp.transform(n)};function B$(n){var e,t;return isNaN(n)&&BA(n)&&(((e=n.match(AI))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(EZ))===null||t===void 0?void 0:t.length)||0)>0}const cG="number",uG="color",P$="var",R$="var(",GP="${}",D$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Jg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(D$,l=>(is.test(l)?(i.color.push(s),r.push(uG),t.push(is.parse(l))):l.startsWith(R$)?(i.var.push(s),r.push(P$),t.push(l)):(i.number.push(s),r.push(cG),t.push(parseFloat(l))),++s,GP)).split(GP);return{values:t,split:a,indexes:i,types:r}}function hG(n){return Jg(n).values}function fG(n){const{split:e,types:t}=Jg(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===cG?s+=ag(r[o]):a===uG?s+=is.transform(r[o]):s+=r[o]}return s}}const L$=n=>typeof n=="number"?0:n;function F$(n){const e=hG(n);return fG(n)(e.map(L$))}const ku={test:B$,parse:hG,createTransformer:fG,getAnimatableNone:F$},O$=new Set(["brightness","contrast","saturate","opacity"]);function U$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(AI)||[];if(!i)return n;const r=t.replace(i,"");let s=O$.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const z$=/\b([a-z-]*)\(.*?\)/gu,A5={...ku,getAnimatableNone:n=>{const e=n.match(z$);return e?e.map(U$).join(" "):n}},k$={...vI,color:is,backgroundColor:is,outlineColor:is,fill:is,stroke:is,borderColor:is,borderTopColor:is,borderRightColor:is,borderBottomColor:is,borderLeftColor:is,filter:A5,WebkitFilter:A5},II=n=>k$[n];function dG(n,e){let t=II(n);return t!==A5&&(t=ku),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const N$=new Set(["auto","none","0"]);function G$(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!N$.has(s)&&Jg(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=dG(t,r)}class pG extends bI{constructor(e,t,i,r){super(e,t,i,r,r==null?void 0:r.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),yI(c))){const u=iG(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!E$.has(i)||e.length!==2)return;const[r,s]=e,o=NP(r),a=NP(s);if(o!==a)if(UP(o)&&UP(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)y$(e[r])&&i.push(r);i.length&&G$(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mm[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=mm[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function mG(n){let e;return()=>(e===void 0&&(e=n()),e)}const HP=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ku.test(n)||n==="0")&&!n.startsWith("url("));function H$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Q$(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=HP(r,e),a=HP(s,e);return!o||!a?!1:H$(n)||t==="spring"&&i}class gG{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&b$(),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Q$(e,i,r,s))if(o)this.options.duration=0;else{l==null||l(I3(e,this.options,t)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function AG(n,e){return e?n*(1e3/e):0}const V$=5;function vG(n,e,t){const i=Math.max(e-V$,0);return AG(t-n(i),e-i)}const MS=.001,W$=.01,j$=10,X$=.05,Y$=1;function q$({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=zu(X$,Y$,o),n=zu(W$,j$,Sl(n)),o<1?(r=c=>{const u=c*o,h=u*n,f=u-t,d=v5(c,o),m=Math.exp(-h);return MS-f/d*m},s=c=>{const h=c*o*n,f=h*t+t,d=Math.pow(o,2)*Math.pow(c,2)*n,m=Math.exp(-h),A=v5(Math.pow(c,2),o);return(-r(c)+MS>0?-1:1)*((f-d)*m)/A}):(r=c=>{const u=Math.exp(-c*n),h=(c-t)*n+1;return-MS+u*h},s=c=>{const u=Math.exp(-c*n),h=(t-c)*(n*n);return u*h});const a=5/n,l=J$(r,s,a);if(n=mc(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const K$=12;function J$(n,e,t){let i=t;for(let r=1;r<K$;r++)i=i-n(i)/e(i);return i}function v5(n,e){return n*Math.sqrt(1-e*e)}const Z$=["duration","bounce"],$$=["stiffness","damping","mass"];function QP(n,e){return e.some(t=>n[t]!==void 0)}function eee(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!QP(n,$$)&&QP(n,Z$)){const t=q$(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function BI({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:f}=eee({...i,velocity:-Sl(i.velocity||0)}),d=h||0,m=l/(2*Math.sqrt(a*c)),A=s-r,y=Sl(Math.sqrt(a/c)),p=Math.abs(A)<5;t||(t=p?.01:2),e||(e=p?.005:.5);let g;if(m<1){const v=v5(y,m);g=E=>{const S=Math.exp(-m*y*E);return s-S*((d+m*y*A)/v*Math.sin(v*E)+A*Math.cos(v*E))}}else if(m===1)g=v=>s-Math.exp(-y*v)*(A+(d+y*A)*v);else{const v=y*Math.sqrt(m*m-1);g=E=>{const S=Math.exp(-m*y*E),C=Math.min(v*E,300);return s-S*((d+m*y*A)*Math.sinh(C)+v*A*Math.cosh(C))/v}}return{calculatedDuration:f&&u||null,next:v=>{const E=g(v);if(f)o.done=v>=u;else{let S=d;v!==0&&(m<1?S=vG(g,v,E):S=0);const C=Math.abs(S)<=t,M=Math.abs(s-E)<=e;o.done=C&&M}return o.value=o.done?s:E,o}}}function VP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=n[0],f={done:!1,value:h},d=b=>a!==void 0&&b<a||l!==void 0&&b>l,m=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let A=t*e;const y=h+A,p=o===void 0?y:o(y);p!==y&&(A=p-h);const g=b=>-A*Math.exp(-b/i),v=b=>p+g(b),E=b=>{const T=g(b),I=v(b);f.done=Math.abs(T)<=c,f.value=f.done?p:I};let S,C;const M=b=>{d(f.value)&&(S=b,C=BI({keyframes:[f.value,m(f.value)],velocity:vG(v,b,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return M(0),{calculatedDuration:null,next:b=>{let T=!1;return!C&&S===void 0&&(T=!0,E(b),M(b)),S!==void 0&&b>=S?C.next(b-S):(!T&&E(b),f)}}}const yG=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,tee=1e-7,nee=12;function iee(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=yG(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>tee&&++a<nee);return o}function DA(n,e,t,i){if(n===e&&t===i)return as;const r=s=>iee(s,0,1,n,t);return s=>s===0||s===1?s:yG(r(s),e,i)}const ree=DA(.42,0,1,1),see=DA(0,0,.58,1),xG=DA(.42,0,.58,1),_G=n=>Array.isArray(n)&&typeof n[0]!="number",EG=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,wG=n=>e=>1-n(1-e),PI=n=>1-Math.sin(Math.acos(n)),SG=wG(PI),oee=EG(PI),CG=DA(.33,1.53,.69,.99),RI=wG(CG),aee=EG(RI),lee=n=>(n*=2)<1?.5*RI(n):.5*(2-Math.pow(2,-10*(n-1))),WP={linear:as,easeIn:ree,easeInOut:xG,easeOut:see,circIn:PI,circInOut:oee,circOut:SG,backIn:RI,backInOut:aee,backOut:CG,anticipate:lee},jP=n=>{if(Array.isArray(n)){h5(n.length===4);const[e,t,i,r]=n;return DA(e,t,i,r)}else if(typeof n=="string")return h5(WP[n]!==void 0),WP[n];return n},gm=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Si=(n,e,t)=>n+(e-n)*t;function bS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function cee({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=bS(l,a,n+1/3),s=bS(l,a,n),o=bS(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function E_(n,e){return t=>t>0?e:n}const TS=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},uee=[g5,Zh,Fp],hee=n=>uee.find(e=>e.test(n));function XP(n){const e=hee(n);if(!e)return!1;let t=e.parse(n);return e===Fp&&(t=cee(t)),t}const YP=(n,e)=>{const t=XP(n),i=XP(e);if(!t||!i)return E_(n,e);const r={...t};return s=>(r.red=TS(t.red,i.red,s),r.green=TS(t.green,i.green,s),r.blue=TS(t.blue,i.blue,s),r.alpha=Si(t.alpha,i.alpha,s),Zh.transform(r))},y5=new Set(["none","hidden"]);function fee(n,e){return y5.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function dee(n,e){return t=>Si(n,e,t)}function DI(n){return typeof n=="number"?dee:typeof n=="string"?yI(n)?E_:is.test(n)?YP:gee:Array.isArray(n)?MG:typeof n=="object"?is.test(n)?YP:pee:E_}function MG(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>DI(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function pee(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=DI(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function mee(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const gee=(n,e)=>{const t=ku.createTransformer(e),i=Jg(n),r=Jg(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?y5.has(n)&&!r.values.length||y5.has(e)&&!i.values.length?fee(n,e):pc(MG(mee(i,r),r.values),t):E_(n,e)};function bG(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Si(n,e,t):DI(n)(n,e)}function Aee(n,e,t){const i=[],r=t||bG,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||as:e;a=pc(l,a)}i.push(a)}return i}function vee(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(h5(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Aee(e,i,r),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const h=gm(n[u],n[u+1],c);return o[u](h)};return t?c=>l(zu(n[0],n[s-1],c)):l}function TG(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=gm(0,e,i);n.push(Si(t,1,r))}}function IG(n){const e=[0];return TG(e,n.length-1),e}function yee(n,e){return n.map(t=>t*e)}function xee(n,e){return n.map(()=>e||xG).splice(0,n.length-1)}function w_({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=_G(i)?i.map(jP):jP(i),s={done:!1,value:e[0]},o=yee(t&&t.length===e.length?t:IG(e),n),a=vee(o,e,{ease:Array.isArray(r)?r:xee(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const x5=2e4;function BG(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<x5;)e+=t,i=n.next(e);return e>=x5?1/0:e}const _ee=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ei.update(e,!0),stop:()=>wc(e),now:()=>Wr.isProcessing?Wr.timestamp:Mu.now()}},Eee={decay:VP,inertia:VP,tween:w_,keyframes:w_,spring:BI},wee=n=>n/100;class LI extends gG{constructor({KeyframeResolver:e=bI,...t}){super(t),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:i,motionValue:r,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);i&&r&&r.owner?this.resolver=r.owner.resolveKeyframes(s,o,i,r):this.resolver=new e(s,o,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=Eee[t]||w_;let l,c;a!==w_&&typeof e[0]!="number"&&(l=pc(wee,bG(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=BG(u));const{calculatedDuration:h}=u,f=h+r,d=f*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:d}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:d,repeatType:m,repeatDelay:A,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,E=s;if(d){const b=Math.min(this.currentTime,u)/h;let T=Math.floor(b),I=b%1;!I&&b>=1&&(I=1),I===1&&T--,T=Math.min(T,d+1),!!(T%2)&&(m==="reverse"?(I=1-I,A&&(I-=A/h)):m==="mirror"&&(E=o)),v=zu(0,1,I)*h}const S=g?{done:!1,value:l[0]}:E.next(v);a&&(S.value=a(S.value));let{done:C}=S;!g&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return M&&r!==void 0&&(S.value=I3(l,this.options,r)),y&&y(S.value),M&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Sl(e.calculatedDuration):0}get time(){return Sl(this.currentTime)}set time(e){e=mc(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Sl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=_ee,onPlay:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=i),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const PG=n=>Array.isArray(n)&&typeof n[0]=="number";function RG(n){return!!(!n||typeof n=="string"&&n in FI||PG(n)||Array.isArray(n)&&n.every(RG))}const N1=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,FI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:N1([0,.65,.55,1]),circOut:N1([.55,0,1,.45]),backIn:N1([.31,.01,.66,-.59]),backOut:N1([.33,1.53,.69,.99])};function See(n){return DG(n)||FI.easeOut}function DG(n){if(n)return PG(n)?N1(n):Array.isArray(n)?n.map(See):FI[n]}function Cee(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=DG(a);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Mee=mG(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),S_=10,bee=2e4;function Tee(n){return n.type==="spring"||!RG(n.ease)}function Iee(n,e){const t=new LI({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<bee;)i=t.sample(s),r.push(i.value),s+=S_;return{times:void 0,keyframes:r,duration:s-S_,ease:"linear"}}class qP extends gG{constructor(e){super(e);const{name:t,motionValue:i,keyframes:r}=this.options;this.resolver=new pG(r,(s,o)=>this.onKeyframesResolved(s,o),t,i),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:c}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(Tee(this.options)){const{onComplete:h,onUpdate:f,motionValue:d,...m}=this.options,A=Iee(e,m);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,s=A.times,o=A.ease,a="keyframes"}const u=Cee(l.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return u.startTime=Mu.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;l.set(I3(e,this.options,t)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Sl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Sl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=mc(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return as;const{animation:i}=t;i.timeline=e,i.onfinish=null}return as}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,...f}=this.options,d=new LI({...f,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),m=mc(this.time);c.setWithVelocity(d.sample(m-S_).value,d.sample(m).value,S_)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return Mee()&&i&&jN.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}function Bee(n,e){let t;const i=()=>{const{currentTime:r}=e,o=(r===null?0:r.value)/100;t!==o&&n(o),t=o};return ei.update(i,!0),()=>wc(i)}const Pee=mG(()=>window.ScrollTimeline!==void 0);class OI{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e){const t=this.animations.map(i=>{if(Pee()&&i.attachTimeline)i.attachTimeline(e);else return i.pause(),Bee(r=>{i.time=i.duration*r},e)});return()=>{t.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const UI=(n,e,t,i={},r,s,o)=>a=>{const l=MI(i,n)||{},c=l.delay||i.delay||0;let{elapsed:u=0}=i;u=u-mc(c);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:d=>{e.set(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{a(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:n,motionValue:e,element:s?void 0:r};g$(l)||(h={...h,...m$(n,h)}),h.duration&&(h.duration=mc(h.duration)),h.repeatDelay&&(h.repeatDelay=mc(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const d=I3(h.keyframes,l);if(d!==void 0)return ei.update(()=>{h.onUpdate(d),h.onComplete()}),new OI([])}return!s&&qP.supports(h)?new qP(h):new LI(h)};class zI{constructor(){this.subscriptions=[]}add(e){return M3(this.subscriptions,e),()=>RA(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const KP=30,Ree=n=>!isNaN(parseFloat(n));class LG{constructor(e,t={}){this.version="11.3.21",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Mu.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Mu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ree(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zI);const i=this.events[e].add(t);return e==="change"?()=>{i(),ei.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>KP)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,KP);return AG(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Am(n,e){return new LG(n,e)}function Dee(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Am(t))}function Lee(n,e){const t=T3(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=WZ(s[o]);Dee(n,o,a)}}function FG(n){return n.getProps()[BN]}class Fee extends LG{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const t=XN(e);if(!t)return;const i=this.counts.get(t)||0;this.counts.set(t,i+1),i===0&&(this.output.push(t),this.update());let r=!1;return()=>{if(r)return;r=!0;const s=this.counts.get(t)-1;this.counts.set(t,s),s===0&&(RA(this.output,t),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function Oee(n){return!!(Pr(n)&&n.add)}function _5(n,e){var t;if(!n.applyWillChange)return;let i=n.getValue("willChange");if(!i&&!(!((t=n.props.style)===null||t===void 0)&&t.willChange)&&(i=new Fee("auto"),n.addValue("willChange",i)),Oee(i))return i.add(e)}function Uee({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function kI(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const h in l){const f=n.getValue(h,(s=n.latestValues[h])!==null&&s!==void 0?s:null),d=l[h];if(d===void 0||u&&Uee(u,h))continue;const m={delay:t,elapsed:0,...MI(o||{},h)};let A=!1;if(window.HandoffAppearAnimations){const p=FG(n);if(p){const g=window.HandoffAppearAnimations(p,h,f,ei);g!==null&&(m.elapsed=g,A=!0)}}f.start(UI(h,f,d,n.shouldReduceMotion&&Ju.has(h)?{type:!1}:m,n,A,_5(n,h)));const y=f.animation;y&&c.push(y)}return a&&Promise.all(c).then(()=>{ei.update(()=>{a&&Lee(n,a)})}),c}function E5(n,e,t={}){var i;const r=T3(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(kI(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return zee(n,e,u+c,h,f,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function zee(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(kee).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(E5(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function kee(n,e){return n.sortNodePosition(e)}function Nee(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>E5(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=E5(n,e,t);else{const r=typeof e=="function"?T3(n,e,t.custom):e;i=Promise.all(kI(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const Gee=[...dI].reverse(),Hee=dI.length;function Qee(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Nee(n,t,i)))}function Vee(n){let e=Qee(n),t=JP(),i=!0;const r=l=>(c,u)=>{var h;const f=T3(n,u,l==="exit"?(h=n.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:m,...A}=f;c={...c,...A,...m}}return c};function s(l){e=l(n)}function o(l){const c=n.getProps(),u=n.getVariantContext(!0)||{},h=[],f=new Set;let d={},m=1/0;for(let y=0;y<Hee;y++){const p=Gee[y],g=t[p],v=c[p]!==void 0?c[p]:u[p],E=qg(v),S=p===l?g.isActive:null;S===!1&&(m=y);let C=v===u[p]&&v!==c[p]&&E;if(C&&i&&n.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...d},!g.isActive&&S===null||!v&&!g.prevProp||Kg(v)||typeof v=="boolean")continue;let b=Wee(g.prevProp,v)||p===l&&g.isActive&&!C&&E||y>m&&E,T=!1;const I=Array.isArray(v)?v:[v];let F=I.reduce(r(p),{});S===!1&&(F={});const{prevResolvedValues:R={}}=g,z={...R,...F},L=H=>{b=!0,f.has(H)&&(T=!0,f.delete(H)),g.needsAnimating[H]=!0;const K=n.getValue(H);K&&(K.liveStyle=!1)};for(const H in z){const K=F[H],J=R[H];if(d.hasOwnProperty(H))continue;let O=!1;f5(K)&&f5(J)?O=!eG(K,J):O=K!==J,O?K!=null?L(H):f.add(H):K!==void 0&&f.has(H)?L(H):g.protectedKeys[H]=!0}g.prevProp=v,g.prevResolvedValues=F,g.isActive&&(d={...d,...F}),i&&n.blockInitialAnimation&&(b=!1),b&&(!C||T)&&h.push(...I.map(H=>({animation:H,options:{type:p}})))}if(f.size){const y={};f.forEach(p=>{const g=n.getBaseTarget(p),v=n.getValue(p);v&&(v.liveStyle=!0),y[p]=g??null}),h.push({animation:y})}let A=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(h):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(f=>{var d;return(d=f.animationState)===null||d===void 0?void 0:d.setActive(l,c)}),t[l].isActive=c;const h=o(l);for(const f in t)t[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=JP(),i=!0}}}function Wee(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!eG(e,n):!1}function _h(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JP(){return{animate:_h(!0),whileInView:_h(),whileHover:_h(),whileTap:_h(),whileDrag:_h(),whileFocus:_h(),exit:_h()}}class jee extends Zu{constructor(e){super(e),e.animationState||(e.animationState=Vee(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Xee=0;class Yee extends Zu{constructor(){super(...arguments),this.id=Xee++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const qee={animation:{Feature:jee},exit:{Feature:Yee}},ZP=(n,e)=>Math.abs(n-e);function Kee(n,e){const t=ZP(n.x,e.x),i=ZP(n.y,e.y);return Math.sqrt(t**2+i**2)}class OG{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=BS(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=Kee(h.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:m}=h,{timestamp:A}=Wr;this.history.push({...m,timestamp:A});const{onStart:y,onMove:p}=this.handlers;f||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=IS(f,this.transformPagePoint),ei.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:d,onSessionEnd:m,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=BS(h.type==="pointercancel"?this.lastMoveEventInfo:IS(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(h,y),m&&m(h,y)},!qN(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=b3(e),a=IS(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Wr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,BS(a,this.history)),this.removeListeners=pc(dc(this.contextWindow,"pointermove",this.handlePointerMove),dc(this.contextWindow,"pointerup",this.handlePointerUp),dc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wc(this.updatePoint)}}function IS(n,e){return e?{point:e(n.point)}:n}function $P(n,e){return{x:n.x-e.x,y:n.y-e.y}}function BS({point:n},e){return{point:n,delta:$P(n,UG(e)),offset:$P(n,Jee(e)),velocity:Zee(e,.1)}}function Jee(n){return n[0]}function UG(n){return n[n.length-1]}function Zee(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=UG(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>mc(e)));)t--;if(!i)return{x:0,y:0};const s=Sl(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const zG=1e-4,$ee=1-zG,ete=1+zG,kG=.01,tte=0-kG,nte=0+kG;function vo(n){return n.max-n.min}function ite(n,e,t){return Math.abs(n-e)<=t}function eR(n,e,t,i=.5){n.origin=i,n.originPoint=Si(e.min,e.max,n.origin),n.scale=vo(t)/vo(e),n.translate=Si(t.min,t.max,n.origin)-n.originPoint,(n.scale>=$ee&&n.scale<=ete||isNaN(n.scale))&&(n.scale=1),(n.translate>=tte&&n.translate<=nte||isNaN(n.translate))&&(n.translate=0)}function lg(n,e,t,i){eR(n.x,e.x,t.x,i?i.originX:void 0),eR(n.y,e.y,t.y,i?i.originY:void 0)}function tR(n,e,t){n.min=t.min+e.min,n.max=n.min+vo(e)}function rte(n,e,t){tR(n.x,e.x,t.x),tR(n.y,e.y,t.y)}function nR(n,e,t){n.min=e.min-t.min,n.max=n.min+vo(e)}function cg(n,e,t){nR(n.x,e.x,t.x),nR(n.y,e.y,t.y)}function ste(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Si(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Si(t,n,i.max):Math.min(n,t)),n}function iR(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function ote(n,{top:e,left:t,bottom:i,right:r}){return{x:iR(n.x,t,r),y:iR(n.y,e,i)}}function rR(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function ate(n,e){return{x:rR(n.x,e.x),y:rR(n.y,e.y)}}function lte(n,e){let t=.5;const i=vo(n),r=vo(e);return r>i?t=gm(e.min,e.max-i,n.min):i>r&&(t=gm(n.min,n.max-r,e.min)),zu(0,1,t)}function cte(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const w5=.35;function ute(n=w5){return n===!1?n=0:n===!0&&(n=w5),{x:sR(n,"left","right"),y:sR(n,"top","bottom")}}function sR(n,e,t){return{min:oR(n,e),max:oR(n,t)}}function oR(n,e){return typeof n=="number"?n:n[e]||0}const aR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Op=()=>({x:aR(),y:aR()}),lR=()=>({min:0,max:0}),Yi=()=>({x:lR(),y:lR()});function No(n){return[n("x"),n("y")]}function NG({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function hte({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function fte(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function PS(n){return n===void 0||n===1}function S5({scale:n,scaleX:e,scaleY:t}){return!PS(n)||!PS(e)||!PS(t)}function Qh(n){return S5(n)||GG(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function GG(n){return cR(n.x)||cR(n.y)}function cR(n){return n&&n!=="0%"}function C_(n,e,t){const i=n-t,r=e*i;return t+r}function uR(n,e,t,i,r){return r!==void 0&&(n=C_(n,r,i)),C_(n,t,i)+e}function C5(n,e=0,t=1,i,r){n.min=uR(n.min,e,t,i,r),n.max=uR(n.max,e,t,i,r)}function HG(n,{x:e,y:t}){C5(n.x,e.translate,e.scale,e.originPoint),C5(n.y,t.translate,t.scale,t.originPoint)}const hR=.999999999999,fR=1.0000000000001;function dte(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zp(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,HG(n,o)),i&&Qh(s.latestValues)&&zp(n,s.latestValues))}e.x<fR&&e.x>hR&&(e.x=1),e.y<fR&&e.y>hR&&(e.y=1)}function Up(n,e){n.min=n.min+e,n.max=n.max+e}function dR(n,e,t,i,r=.5){const s=Si(n.min,n.max,r);C5(n,e,t,s,i)}function zp(n,e){dR(n.x,e.x,e.scaleX,e.scale,e.originX),dR(n.y,e.y,e.scaleY,e.scale,e.originY)}function QG(n,e){return NG(fte(n.getBoundingClientRect(),e))}function pte(n,e,t){const i=QG(n,t),{scroll:r}=e;return r&&(Up(i.x,r.offset.x),Up(i.y,r.offset.y)),i}const VG=({current:n})=>n?n.ownerDocument.defaultView:null,mte=new WeakMap;class gte{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yi(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(b3(u,"page").point)},s=(u,h)=>{var f;const{drag:d,dragPropagation:m,onDragStart:A}=this.getProps();if(d&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=JN(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),No(p=>{let g=this.getAxisMotionValue(p).get()||0;if(wl.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const E=v.layout.layoutBox[p];E&&(g=vo(E)*(parseFloat(g)/100))}}this.originPoint[p]=g}),A&&ei.postRender(()=>A(u,h)),(f=this.removeWillChange)===null||f===void 0||f.call(this),this.removeWillChange=_5(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:d,onDirectionLock:m,onDrag:A}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=h;if(d&&this.currentDirection===null){this.currentDirection=Ate(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),A&&A(u,h)},a=(u,h)=>this.stop(u,h),l=()=>No(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new OG(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:VG(this.visualElement)})}stop(e,t){var i;(i=this.removeWillChange)===null||i===void 0||i.call(this);const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ei.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!vy(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=ste(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Lp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=ote(r.layoutBox,t):this.constraints=!1,this.elastic=ute(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&No(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=cte(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Lp(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=pte(i,r.root,this.visualElement.getTransformPagePoint());let o=ate(r.layout.layoutBox,s);if(t){const a=t(hte(o));this.hasMutatedConstraints=!!a,a&&(o=NG(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=No(u=>{if(!vy(u,t,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=r?200:1e6,d=r?40:1e7,m={type:"inertia",velocity:i?e[u]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(UI(e,i,0,t,this.visualElement,!1,_5(this.visualElement,e)))}stopAnimation(){No(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){No(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){No(t=>{const{drag:i}=this.getProps();if(!vy(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Si(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Lp(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};No(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=lte({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),No(o=>{if(!vy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Si(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;mte.set(this.visualElement,this);const e=this.visualElement.current,t=dc(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Lp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ei.read(i);const o=hc(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(No(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=w5,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function vy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Ate(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class vte extends Zu{constructor(e){super(e),this.removeGroupControls=as,this.removeListeners=as,this.controls=new gte(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||as}unmount(){this.removeGroupControls(),this.removeListeners()}}const pR=n=>(e,t)=>{n&&ei.postRender(()=>n(e,t))};class yte extends Zu{constructor(){super(...arguments),this.removePointerDownListener=as}onPointerDown(e){this.session=new OG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VG(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:pR(e),onStart:pR(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&ei.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=dc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function xte(){const n=w.useContext(E3);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=w.useId();w.useEffect(()=>i(r),[]);const s=w.useCallback(()=>t&&t(r),[r,t]);return!e&&t?[!1,s]:[!0]}const Px={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mR(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const I0={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Jt.test(n))n=parseFloat(n);else return n;const t=mR(n,e.target.x),i=mR(n,e.target.y);return`${t}% ${i}%`}},_te={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=ku.parse(n);if(r.length>5)return i;const s=ku.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Si(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class Ete extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;_Z(wte),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Px.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ei.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fI.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WG(n){const[e,t]=xte(),i=w.useContext(mI);return Ge.jsx(Ete,{...n,layoutGroup:i,switchLayoutGroup:w.useContext(RN),isPresent:e,safeToRemove:t})}const wte={borderRadius:{...I0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:I0,borderTopRightRadius:I0,borderBottomLeftRadius:I0,borderBottomRightRadius:I0,boxShadow:_te},jG=["TopLeft","TopRight","BottomLeft","BottomRight"],Ste=jG.length,gR=n=>typeof n=="string"?parseFloat(n):n,AR=n=>typeof n=="number"||Jt.test(n);function Cte(n,e,t,i,r,s){r?(n.opacity=Si(0,t.opacity!==void 0?t.opacity:1,Mte(i)),n.opacityExit=Si(e.opacity!==void 0?e.opacity:1,0,bte(i))):s&&(n.opacity=Si(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<Ste;o++){const a=`border${jG[o]}Radius`;let l=vR(e,a),c=vR(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||AR(l)===AR(c)?(n[a]=Math.max(Si(gR(l),gR(c),i),0),(wl.test(c)||wl.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Si(e.rotate||0,t.rotate||0,i))}function vR(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Mte=XG(0,.5,SG),bte=XG(.5,.95,as);function XG(n,e,t){return i=>i<n?0:i>e?1:t(gm(n,e,i))}function yR(n,e){n.min=e.min,n.max=e.max}function Ro(n,e){yR(n.x,e.x),yR(n.y,e.y)}function xR(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function _R(n,e,t,i,r){return n-=e,n=C_(n,1/t,i),r!==void 0&&(n=C_(n,1/r,i)),n}function Tte(n,e=0,t=1,i=.5,r,s=n,o=n){if(wl.test(e)&&(e=parseFloat(e),e=Si(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Si(s.min,s.max,i);n===s&&(a-=e),n.min=_R(n.min,e,t,a,r),n.max=_R(n.max,e,t,a,r)}function ER(n,e,[t,i,r],s,o){Tte(n,e[t],e[i],e[r],e.scale,s,o)}const Ite=["x","scaleX","originX"],Bte=["y","scaleY","originY"];function wR(n,e,t,i){ER(n.x,e,Ite,t?t.x:void 0,i?i.x:void 0),ER(n.y,e,Bte,t?t.y:void 0,i?i.y:void 0)}function SR(n){return n.translate===0&&n.scale===1}function YG(n){return SR(n.x)&&SR(n.y)}function CR(n,e){return n.min===e.min&&n.max===e.max}function Pte(n,e){return CR(n.x,e.x)&&CR(n.y,e.y)}function MR(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function qG(n,e){return MR(n.x,e.x)&&MR(n.y,e.y)}function bR(n){return vo(n.x)/vo(n.y)}function TR(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Rte{constructor(){this.members=[]}add(e){M3(this.members,e),e.scheduleRender()}remove(e){if(RA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dte(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:d,skewY:m}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),f&&(i+=`rotateY(${f}deg) `),d&&(i+=`skewX(${d}deg) `),m&&(i+=`skewY(${m}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Lte=(n,e)=>n.depth-e.depth;class Fte{constructor(){this.children=[],this.isDirty=!1}add(e){M3(this.children,e),this.isDirty=!0}remove(e){RA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Lte),this.isDirty=!1,this.children.forEach(e)}}function Ote(n,e){const t=Mu.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(wc(i),n(s-e))};return ei.read(i,!0),()=>wc(i)}function KG(n){return n instanceof SVGElement&&n.tagName!=="svg"}function NI(n,e,t){const i=Pr(n)?n:Am(n);return i.start(UI("",i,e,t)),i.animation}const Vh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},G1=typeof window<"u"&&window.MotionDebug!==void 0,RS=["","X","Y","Z"],Ute={visibility:"hidden"},IR=1e3;let zte=0;function DS(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function JG(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return!1;const{visualElement:e}=n.options;return e?FG(e)?!0:n.parent&&!n.parent.hasCheckedOptimisedAppear?JG(n.parent):!1:!1}function ZG({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=zte++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,G1&&(Vh.totalNodes=Vh.resolvedTargetDeltas=Vh.recalculatedProjection=0),this.nodes.forEach(Gte),this.nodes.forEach(jte),this.nodes.forEach(Xte),this.nodes.forEach(Hte),G1&&window.MotionDebug.record(Vh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fte)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zI),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=KG(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Ote(f,250),Px.hasAnimatedSinceResize&&(Px.hasAnimatedSinceResize=!1,this.nodes.forEach(PR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:d,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||u.getDefaultTransition()||Zte,{onLayoutAnimationStart:y,onLayoutAnimationComplete:p}=u.getProps(),g=!this.targetLayout||!qG(this.targetLayout,m)||d,v=!f&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const E={...MI(A,"layout"),onPlay:y,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||PR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Yte),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&JG(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BR);return}this.isUpdating||this.nodes.forEach(Vte),this.isUpdating=!1,this.nodes.forEach(Wte),this.nodes.forEach(kte),this.nodes.forEach(Nte),this.clearAllSnapshots();const a=Mu.now();Wr.delta=zu(0,1e3/60,a-Wr.timestamp),Wr.timestamp=a,Wr.isProcessing=!0,ES.update.process(Wr),ES.preRender.process(Wr),ES.render.process(Wr),Wr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Qte),this.sharedNodes.forEach(qte)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ei.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ei.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!YG(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Qh(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),$te(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Yi();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ene))){const{scroll:u}=this.root;u&&(Up(l.x,u.offset.x),Up(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Yi();if(Ro(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ro(l,o),Up(l.x,h.offset.x),Up(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Yi();Ro(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&zp(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Qh(u.latestValues)&&zp(l,u.latestValues)}return Qh(this.latestValues)&&zp(l,this.latestValues),l}removeTransform(o){const a=Yi();Ro(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Qh(c.latestValues))continue;S5(c.latestValues)&&c.updateSnapshot();const u=Yi(),h=c.measurePageBox();Ro(u,h),wR(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Qh(this.latestValues)&&wR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Wr.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yi(),this.relativeTargetOrigin=Yi(),cg(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),Ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Yi(),this.targetWithTransforms=Yi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ro(this.target,this.layout.layoutBox),HG(this.target,this.targetDelta)):Ro(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yi(),this.relativeTargetOrigin=Yi(),cg(this.relativeTargetOrigin,this.target,d.target),Ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}G1&&Vh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||S5(this.parent.latestValues)||GG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Wr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ro(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;dte(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Yi());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xR(this.prevProjectionDelta.x,this.projectionDelta.x),xR(this.prevProjectionDelta.y,this.projectionDelta.y)),lg(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!TR(this.projectionDelta.x,this.prevProjectionDelta.x)||!TR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),G1&&Vh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Op(),this.projectionDelta=Op(),this.projectionDeltaWithTransform=Op()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Op();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Yi(),d=l?l.source:void 0,m=this.layout?this.layout.source:void 0,A=d!==m,y=this.getStack(),p=!y||y.members.length<=1,g=!!(A&&!p&&this.options.crossfade===!0&&!this.path.some(Jte));this.animationProgress=0;let v;this.mixTargetDelta=E=>{const S=E/1e3;RR(h.x,o.x,S),RR(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cg(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Kte(this.relativeTarget,this.relativeTargetOrigin,f,S),v&&Pte(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Yi()),Ro(v,this.relativeTarget)),A&&(this.animationValues=u,Cte(u,c,this.latestValues,S,g,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ei.update(()=>{Px.hasAnimatedSinceResize=!0,this.currentAnimation=NI(0,IR,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&$G(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Yi();const h=vo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=vo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Ro(a,l),zp(a,u),lg(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rte),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&DS("z",o,c,this.animationValues);for(let u=0;u<RS.length;u++)DS(`rotate${RS[u]}`,o,c,this.animationValues),DS(`skew${RS[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ute;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ix(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=Ix(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Qh(this.latestValues)&&(A.transform=u?u({},""):"none",this.hasProjected=!1),A}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Dte(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:d,y:m}=this.projectionDelta;c.transformOrigin=`${d.origin*100}% ${m.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const A in x_){if(f[A]===void 0)continue;const{correct:y,applyTo:p}=x_[A],g=c.transform==="none"?f[A]:y(f[A],h);if(p){const v=p.length;for(let E=0;E<v;E++)c[p[E]]=g}else c[A]=g}return this.options.layoutId&&(c.pointerEvents=h===this?Ix(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(BR),this.root.sharedNodes.clear()}}}function kte(n){n.updateLayout()}function Nte(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?No(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],d=vo(f);f.min=i[h].min,f.max=f.min+d}):$G(s,t.layoutBox,i)&&No(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],d=vo(i[h]);f.max=f.min+d,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+d)});const a=Op();lg(a,i,t.layoutBox);const l=Op();o?lg(l,n.applyTransform(r,!0),t.measuredBox):lg(l,i,t.layoutBox);const c=!YG(a);let u=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:d}=h;if(f&&d){const m=Yi();cg(m,t.layoutBox,f.layoutBox);const A=Yi();cg(A,i,d.layoutBox),qG(m,A)||(u=!0),h.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=m,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Gte(n){G1&&Vh.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Hte(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Qte(n){n.clearSnapshot()}function BR(n){n.clearMeasurements()}function Vte(n){n.isLayoutDirty=!1}function Wte(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function PR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function jte(n){n.resolveTargetDelta()}function Xte(n){n.calcProjection()}function Yte(n){n.resetSkewAndRotation()}function qte(n){n.removeLeadSnapshot()}function RR(n,e,t){n.translate=Si(e.translate,0,t),n.scale=Si(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function DR(n,e,t,i){n.min=Si(e.min,t.min,i),n.max=Si(e.max,t.max,i)}function Kte(n,e,t,i){DR(n.x,e.x,t.x,i),DR(n.y,e.y,t.y,i)}function Jte(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Zte={duration:.45,ease:[.4,0,.1,1]},LR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),FR=LR("applewebkit/")&&!LR("chrome/")?Math.round:as;function OR(n){n.min=FR(n.min),n.max=FR(n.max)}function $te(n){OR(n.x),OR(n.y)}function $G(n,e,t){return n==="position"||n==="preserve-aspect"&&!ite(bR(e),bR(t),.2)}function ene(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const tne=ZG({attachResizeListener:(n,e)=>hc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),LS={current:void 0},eH=ZG({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!LS.current){const n=new tne({});n.mount(window),n.setOptions({layoutScroll:!0}),LS.current=n}return LS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),nne={pan:{Feature:yte},drag:{Feature:vte,ProjectionNode:eH,MeasureLayout:WG}},M5={current:null},tH={current:!1};function ine(){if(tH.current=!0,!!hI)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>M5.current=n.matches;n.addListener(e),e()}else M5.current=!1}function rne(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Pr(r))n.addValue(i,r);else if(Pr(s))n.addValue(i,Am(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Am(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Zg=new WeakMap,sne=[...sG,is,ku],one=n=>sne.find(rG(n)),UR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],ane=pI.length;class lne{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.resolveKeyframes=(f,d,m,A)=>new this.KeyframeResolver(f,d,m,A,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,ei.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=S3(t),this.isVariantNode=LN(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in h){const d=h[f];l[f]!==void 0&&Pr(d)&&d.set(l[f],!1)}}mount(e){this.current=e,Zg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),tH.current||ine(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:M5.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Zg.delete(this.current),this.projection&&this.projection.unmount(),wc(this.notifyUpdate),wc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){const i=Ju.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ei.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pm){const t=pm[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<UR.length;i++){const r=UR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=rne(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<ane;i++){const r=pI[i],s=this.props[r];(qg(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Am(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(nG(r)||tG(r))?r=parseFloat(r):!one(r)&&ku.test(t)&&(r=dG(e,t)),this.setBaseTarget(e,Pr(r)?r.get():r)),Pr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=CI(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Pr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new zI),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class nH extends lne{constructor(){super(...arguments),this.KeyframeResolver=pG}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function cne(n){return window.getComputedStyle(n)}class iH extends nH{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=HN}readValueFromInstance(e,t){if(Ju.has(t)){const i=II(t);return i&&i.default||0}else{const i=cne(e),r=(zN(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return QG(e,t)}build(e,t,i){xI(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return SI(e,t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class rH extends nH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ju.has(t)){const i=II(t);return i&&i.default||0}return t=QN.has(t)?t:w3(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return WN(e,t,i)}build(e,t,i){EI(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){VN(e,t,i,r)}mount(e){this.isSVGTag=wI(e.tagName),super.mount(e)}}const une=(n,e)=>gI(n)?new rH(e):new iH(e,{allowProjection:n!==w.Fragment}),hne={layout:{ProjectionNode:eH,MeasureLayout:WG}},fne={...qee,...u$,...nne,...hne},vm=yZ((n,e)=>JZ(n,e,fne,une));class dne extends w.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pne({children:n,isPresent:e}){const t=w.useId(),i=w.useRef(null),r=w.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=w.useContext(x3);return w.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),Ge.jsx(dne,{isPresent:e,childRef:i,sizeRef:r,children:w.cloneElement(n,{ref:i})})}const mne=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=C3(gne),l=w.useId(),c=w.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;i&&i()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?[Math.random()]:[t]);return w.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[t]),w.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=Ge.jsx(pne,{isPresent:t,children:n})),Ge.jsx(E3.Provider,{value:c,children:n})};function gne(){return new Map}const yy=n=>n.key||"";function zR(n){const e=[];return w.Children.forEach(n,t=>{w.isValidElement(t)&&e.push(t)}),e}const sH=({children:n,exitBeforeEnter:e,custom:t,initial:i=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=w.useMemo(()=>zR(n),[n]),l=a.map(yy),c=w.useRef(!0),u=w.useRef(a),h=C3(()=>new Map),[f,d]=w.useState(a),[m,A]=w.useState(a);TN(()=>{c.current=!1,u.current=a;for(let g=0;g<m.length;g++){const v=yy(m[g]);l.includes(v)?h.delete(v):h.get(v)!==!0&&h.set(v,!1)}},[m,l.length,l.join("-")]);const y=[];if(a!==f){let g=[...a];for(let v=0;v<m.length;v++){const E=m[v],S=yy(E);l.includes(S)||(g.splice(v,0,E),y.push(E))}o==="wait"&&y.length&&(g=y),A(zR(g)),d(a);return}const{forceRender:p}=w.useContext(mI);return Ge.jsx(Ge.Fragment,{children:m.map(g=>{const v=yy(g),E=a===m||l.includes(v),S=()=>{if(h.has(v))h.set(v,!0);else return;let C=!0;h.forEach(M=>{M||(C=!1)}),C&&(p==null||p(),A(u.current),r&&r())};return Ge.jsx(mne,{isPresent:E,initial:!c.current||i?void 0:!1,custom:E?void 0:t,presenceAffectsLayout:s,mode:o,onExitComplete:E?void 0:S,children:g},v)})})};function Ane(n){const e=C3(()=>Am(n)),{isStatic:t}=w.useContext(x3);if(t){const[,i]=w.useState(n);w.useEffect(()=>e.on("change",i),[])}return e}function oH(n,e,t){var i;if(typeof n=="string"){let r=document;t?((i=t[n])!==null&&i!==void 0||(t[n]=r.querySelectorAll(n)),n=t[n]):n=r.querySelectorAll(n)}else n instanceof Element&&(n=[n]);return Array.from(n||[])}function vne(n){return typeof n=="object"&&!Array.isArray(n)}function yne(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=KG(n)?new rH(e):new iH(e);t.mount(n),Zg.set(n,t)}function xne(n,e=100){const t=BI({keyframes:[0,e],...n}),i=Math.min(BG(t),x5);return{type:"keyframes",ease:r=>t.next(i*r).value/e,duration:Sl(i)}}function kR(n,e,t,i){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:(r=i.get(e))!==null&&r!==void 0?r:n}const _ne=(n,e,t)=>{const i=e-n;return((t-n)%i+i)%i+n};function Ene(n,e){return _G(n)?n[_ne(0,n.length,e)]:n}function wne(n,e,t){for(let i=0;i<n.length;i++){const r=n[i];r.at>e&&r.at<t&&(RA(n,r),i--)}}function Sne(n,e,t,i,r,s){wne(n,r,s);for(let o=0;o<e.length;o++)n.push({value:e[o],at:Si(r,s,i[o]),easing:Ene(t,o)})}function Cne(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const Mne="easeInOut";function bne(n,{defaultTransition:e={},...t}={},i){const r=e.duration||.3,s=new Map,o=new Map,a={},l=new Map;let c=0,u=0,h=0;for(let f=0;f<n.length;f++){const d=n[f];if(typeof d=="string"){l.set(d,u);continue}else if(!Array.isArray(d)){l.set(d.name,kR(u,d.at,c,l));continue}let[m,A,y={}]=d;y.at!==void 0&&(u=kR(u,y.at,c,l));let p=0;const g=(v,E,S,C=0,M=0)=>{const b=Tne(v),{delay:T=0,times:I=IG(b),type:F="keyframes",...R}=E;let{ease:z=e.ease||"easeOut",duration:L}=E;const H=typeof T=="function"?T(C,M):T,K=b.length;if(K<=2&&F==="spring"){let V=100;if(K===2&&Pne(b)){const $=b[1]-b[0];V=Math.abs($)}const U={...R};L!==void 0&&(U.duration=mc(L));const Y=xne(U,V);z=Y.ease,L=Y.duration}L??(L=r);const J=u+H,O=J+L;I.length===1&&I[0]===0&&(I[1]=1);const W=I.length-b.length;W>0&&TG(I,W),b.length===1&&b.unshift(null),Sne(S,b,z,I,J,O),p=Math.max(H+L,p),h=Math.max(O,h)};if(Pr(m)){const v=NR(m,o);g(A,y,GR("default",v))}else{const v=oH(m,i,a),E=v.length;for(let S=0;S<E;S++){A=A,y=y;const C=v[S],M=NR(C,o);for(const b in A)g(A[b],Ine(y,b),GR(b,M),S,E)}}c=u,u+=p}return o.forEach((f,d)=>{for(const m in f){const A=f[m];A.sort(Cne);const y=[],p=[],g=[];for(let E=0;E<A.length;E++){const{at:S,value:C,easing:M}=A[E];y.push(C),p.push(gm(0,h,S)),g.push(M||"easeOut")}p[0]!==0&&(p.unshift(0),y.unshift(y[0]),g.unshift(Mne)),p[p.length-1]!==1&&(p.push(1),y.push(null)),s.has(d)||s.set(d,{keyframes:{},transition:{}});const v=s.get(d);v.keyframes[m]=y,v.transition[m]={...e,duration:h,ease:g,times:p,...t}}}),s}function NR(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function GR(n,e){return e[n]||(e[n]=[]),e[n]}function Tne(n){return Array.isArray(n)?n:[n]}function Ine(n,e){return n[e]?{...n,...n[e]}:{...n}}const Bne=n=>typeof n=="number",Pne=n=>n.every(Bne);function aH(n,e,t,i){const r=oH(n),s=r.length,o=[];for(let a=0;a<s;a++){const l=r[a];Zg.has(l)||yne(l);const c=Zg.get(l),u={...t};typeof u.delay=="function"&&(u.delay=u.delay(a,s)),o.push(...kI(c,{...e,transition:u},{}))}return new OI(o)}const Rne=n=>Array.isArray(n)&&Array.isArray(n[0]);function Dne(n,e,t){const i=[];return bne(n,e,t).forEach(({keyframes:s,transition:o},a)=>{let l;Pr(a)?l=NI(a,s.default,o.default):l=aH(a,s,o),i.push(l)}),new OI(i)}const Lne=n=>{function e(t,i,r){let s;return Rne(t)?s=Dne(t,i,n):vne(i)?s=aH(t,i,r):s=NI(t,i,r),s}return e},HR=Lne(),Fne="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='-143%20145%20512%20512'%20xml:space='preserve'%3e%3cpath%20d='M113,145c-141.4,0-256,114.6-256,256s114.6,256,256,256s256-114.6,256-256S254.4,145,113,145z%20M41.4,508.1H-8.5V348.4h49.9%20V508.1z%20M15.1,328.4h-0.4c-18.1,0-29.8-12.2-29.8-27.7c0-15.8,12.1-27.7,30.5-27.7c18.4,0,29.7,11.9,30.1,27.7%20C45.6,316.1,33.9,328.4,15.1,328.4z%20M241,508.1h-56.6v-82.6c0-21.6-8.8-36.4-28.3-36.4c-14.9,0-23.2,10-27,19.6%20c-1.4,3.4-1.2,8.2-1.2,13.1v86.3H71.8c0,0,0.7-146.4,0-159.7h56.1v25.1c3.3-11,21.2-26.6,49.8-26.6c35.5,0,63.3,23,63.3,72.4V508.1z%20'/%3e%3c/svg%3e",One="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ctitle%3egithub%20[%23142]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-140.000000,%20-7559.000000)'%20fill='%23000000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M94,7399%20C99.523,7399%20104,7403.59%20104,7409.253%20C104,7413.782%20101.138,7417.624%2097.167,7418.981%20C96.66,7419.082%2096.48,7418.762%2096.48,7418.489%20C96.48,7418.151%2096.492,7417.047%2096.492,7415.675%20C96.492,7414.719%2096.172,7414.095%2095.813,7413.777%20C98.04,7413.523%20100.38,7412.656%20100.38,7408.718%20C100.38,7407.598%2099.992,7406.684%2099.35,7405.966%20C99.454,7405.707%2099.797,7404.664%2099.252,7403.252%20C99.252,7403.252%2098.414,7402.977%2096.505,7404.303%20C95.706,7404.076%2094.85,7403.962%2094,7403.958%20C93.15,7403.962%2092.295,7404.076%2091.497,7404.303%20C89.586,7402.977%2088.746,7403.252%2088.746,7403.252%20C88.203,7404.664%2088.546,7405.707%2088.649,7405.966%20C88.01,7406.684%2087.619,7407.598%2087.619,7408.718%20C87.619,7412.646%2089.954,7413.526%2092.175,7413.785%20C91.889,7414.041%2091.63,7414.493%2091.54,7415.156%20C90.97,7415.418%2089.522,7415.871%2088.63,7414.304%20C88.63,7414.304%2088.101,7413.319%2087.097,7413.247%20C87.097,7413.247%2086.122,7413.234%2087.029,7413.87%20C87.029,7413.87%2087.684,7414.185%2088.139,7415.37%20C88.139,7415.37%2088.726,7417.2%2091.508,7416.58%20C91.513,7417.437%2091.522,7418.245%2091.522,7418.489%20C91.522,7418.76%2091.338,7419.077%2090.839,7418.982%20C86.865,7417.627%2084,7413.783%2084,7409.253%20C84,7403.59%2088.478,7399%2094,7399'%20id='github-[%23142]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Une=({image:n,identifier:e,onClick:t})=>{const[i,r]=w.useState(!1);return Ge.jsxs(vm.div,{className:"card",onHoverStart:()=>r(!0),onHoverEnd:()=>r(!1),onClick:()=>t(e),children:[Ge.jsx(sH,{children:i&&Ge.jsx(vm.div,{className:"card-hover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}})}),Ge.jsx("img",{className:"card-image",src:n,alt:`Card ${n}`})]},e)},zne=({image:n,repo:e,liveSite:t,onClose:i})=>Ge.jsx("div",{className:"modal-backdrop",onClick:i,children:Ge.jsxs(vm.div,{className:"modal-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:r=>r.stopPropagation(),children:[Ge.jsx("img",{className:"modal-image",src:n,alt:"Card Image"}),Ge.jsxs("div",{className:"modal-button",children:[Ge.jsx("a",{className:"repo",href:e,target:"_blank",children:"REPOSITORY"}),Ge.jsx("a",{className:"liveSite",href:t,target:"_blank",children:"LIVE SITE"})]})]})}),kne="/assets/page01-_i52NTXt.png",Nne="/assets/page02-3iZgvJMC.png",Gne="/assets/page02a-BZ5MscDG.png",Hne="/assets/page03-N21N-0l8.png",Qne="/assets/page03a-DZeqzAvN.png",Vne="/assets/page03b-yWYDacrx.png",Wne="/assets/page04-B1PiRcYx.png",jne="/assets/page04a-C20uDXud.png",Xne="/assets/page05-CgplkAxJ.png",Yne="/assets/page06-CgpjeesY.png",qne="/assets/page07-DI6N5cMB.png",Kne="/assets/page08-CNWbb7rP.png",Jne="/assets/page08a-iddB0iNB.png",Zne="/assets/page08b-CReXSQuS.png",xy=[kne,Nne,Gne,Hne,Qne,Vne,Wne,jne,Xne,Yne,qne,Kne,Jne,Zne],$ne=({onClose:n})=>{const[e,t]=w.useState(0),i=()=>{t(s=>(s+1)%xy.length)},r=()=>{t(s=>(s-1+xy.length)%xy.length)};return Ge.jsx("div",{className:"modal-backdrop",onClick:n,children:Ge.jsxs(vm.div,{className:"modal-o2o-content",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:s=>s.stopPropagation(),children:[Ge.jsx("img",{className:"modal-image",src:xy[e],alt:"Page Image"}),Ge.jsxs("div",{className:"modal-controls",children:[Ge.jsx("button",{className:"modal-middle-button",onClick:r,children:"PREVIOUS"}),Ge.jsx("button",{className:"modal-middle-button",onClick:i,children:"NEXT"})]})]})})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ja="154",Yo={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lH=0,b5=1,cH=2,eie=3,uH=0,B3=1,ug=2,Ta=3,Ss=0,Ni=1,Vn=2,tie=2,sa=0,bu=1,M_=2,T5=3,I5=4,P3=5,jh=100,hH=101,fH=102,B5=103,P5=104,dH=200,R3=201,pH=202,mH=203,D3=204,GI=205,gH=206,AH=207,vH=208,yH=209,xH=210,_H=0,EH=1,wH=2,b_=3,SH=4,CH=5,MH=6,bH=7,LA=0,TH=1,IH=2,oa=0,BH=1,PH=2,RH=3,HI=4,DH=5,Nu=300,Ml=301,Gu=302,Hu=303,$g=304,zm=306,Fr=1e3,qn=1001,ym=1002,rn=1003,eA=1004,nie=1004,Kp=1005,iie=1005,Ut=1006,L3=1007,rie=1007,yo=1008,R5=1008,$n=1009,tA=1010,F3=1011,$u=1012,uf=1013,ss=1014,En=1015,Ln=1016,QI=1017,VI=1018,Tu=1020,LH=1021,Dn=1023,FH=1024,OH=1025,ka=1026,Ef=1027,ea=1028,O3=1029,cu=1030,FA=1031,wf=1033,hg=33776,Rx=33777,Dx=33778,fg=33779,T_=35840,D5=35841,I_=35842,L5=35843,WI=36196,B_=37492,P_=37496,R_=37808,F5=37809,O5=37810,U5=37811,nA=37812,z5=37813,k5=37814,N5=37815,G5=37816,H5=37817,Q5=37818,V5=37819,W5=37820,j5=37821,dg=36492,UH=36283,X5=36284,Y5=36285,q5=36286,zH=2200,kH=2201,NH=2202,xm=2300,Sf=2301,Lx=2302,$h=2400,ef=2401,iA=2402,U3=2500,jI=2501,GH=0,XI=1,D_=2,YI=3e3,Iu=3001,HH=3200,z3=3201,eh=0,QH=1,Bu="",un="srgb",Ks="srgb-linear",qI="display-p3",sie=0,hf=7680,Fx=7681,oie=7682,aie=7683,lie=34055,cie=34056,uie=5386,hie=512,fie=513,VH=514,die=515,pie=516,WH=517,mie=518,KI=519,jH=512,XH=513,YH=514,qH=515,KH=516,JH=517,ZH=518,$H=519,rA=35044,os=35048,gie=35040,Aie=35045,vie=35049,yie=35041,xie=35046,_ie=35050,Eie=35042,wie="100",K5="300 es",L_=1035,yl=2e3,sA=2001;let Or=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const es=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let QR=1234567;const ff=Math.PI/180,_m=180/Math.PI;function go(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(es[n&255]+es[n>>8&255]+es[n>>16&255]+es[n>>24&255]+"-"+es[e&255]+es[e>>8&255]+"-"+es[e>>16&15|64]+es[e>>24&255]+"-"+es[t&63|128]+es[t>>8&255]+"-"+es[t>>16&255]+es[t>>24&255]+es[i&255]+es[i>>8&255]+es[i>>16&255]+es[i>>24&255]).toLowerCase()}function ki(n,e,t){return Math.max(e,Math.min(t,n))}function JI(n,e){return(n%e+e)%e}function Sie(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Cie(n,e,t){return n!==e?(t-n)/(e-n):0}function pg(n,e,t){return(1-t)*n+t*e}function Mie(n,e,t,i){return pg(n,e,1-Math.exp(-t*i))}function bie(n,e=1){return e-Math.abs(JI(n,e*2)-e)}function Tie(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Iie(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Bie(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Pie(n,e){return n+Math.random()*(e-n)}function Rie(n){return n*(.5-Math.random())}function Die(n){n!==void 0&&(QR=n);let e=QR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Lie(n){return n*ff}function Fie(n){return n*_m}function J5(n){return(n&n-1)===0&&n!==0}function eQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function F_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Oie(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),h=s((e-i)/2),f=o((e-i)/2),d=s((i-e)/2),m=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*h,l*f,a*c);break;case"YZY":n.set(l*f,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*f,a*u,a*c);break;case"XZX":n.set(a*u,l*m,l*d,a*c);break;case"YXY":n.set(l*d,a*u,l*m,a*c);break;case"ZYZ":n.set(l*m,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ho(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function An(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Dt={DEG2RAD:ff,RAD2DEG:_m,generateUUID:go,clamp:ki,euclideanModulo:JI,mapLinear:Sie,inverseLerp:Cie,lerp:pg,damp:Mie,pingpong:bie,smoothstep:Tie,smootherstep:Iie,randInt:Bie,randFloat:Pie,randFloatSpread:Rie,seededRandom:Die,degToRad:Lie,radToDeg:Fie,isPowerOfTwo:J5,ceilPowerOfTwo:eQ,floorPowerOfTwo:F_,setQuaternionFromProperEuler:Oie,normalize:An,denormalize:ho};class Ee{constructor(e=0,t=0){Ee.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ki(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,t,i,r,s,o,a,l,c){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],f=i[2],d=i[5],m=i[8],A=r[0],y=r[3],p=r[6],g=r[1],v=r[4],E=r[7],S=r[2],C=r[5],M=r[8];return s[0]=o*A+a*g+l*S,s[3]=o*y+a*v+l*C,s[6]=o*p+a*E+l*M,s[1]=c*A+u*g+h*S,s[4]=c*y+u*v+h*C,s[7]=c*p+u*E+h*M,s[2]=f*A+d*g+m*S,s[5]=f*y+d*v+m*C,s[8]=f*p+d*E+m*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=a*l-u*s,d=c*s-o*l,m=t*h+i*f+r*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/m;return e[0]=h*A,e[1]=(r*c-u*i)*A,e[2]=(a*i-r*o)*A,e[3]=f*A,e[4]=(u*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=d*A,e[7]=(i*l-c*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(FS.makeScale(e,t)),this}rotate(e){return this.premultiply(FS.makeRotation(-e)),this}translate(e,t){return this.premultiply(FS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const FS=new Wt;function tQ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Uie={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kp(n,e){return new Uie[n](e)}function oA(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const VR={};function mg(n){n in VR||(VR[n]=!0,console.warn(n))}function Jp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function OS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const zie=new Wt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),kie=new Wt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Nie(n){return n.convertSRGBToLinear().applyMatrix3(kie)}function Gie(n){return n.applyMatrix3(zie).convertLinearToSRGB()}const Hie={[Ks]:n=>n,[un]:n=>n.convertSRGBToLinear(),[qI]:Nie},Qie={[Ks]:n=>n,[un]:n=>n.convertLinearToSRGB(),[qI]:Gie},zo={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Ks},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Hie[e],r=Qie[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let sd;class ZI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{sd===void 0&&(sd=oA("canvas")),sd.width=e.width,sd.height=e.height;const i=sd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=sd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=oA("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Jp(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Jp(t[i]/255)*255):t[i]=Jp(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vie=0;class tf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vie++}),this.uuid=go(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(US(r[o].image)):s.push(US(r[o]))}else s=US(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function US(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ZI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Wie=0,In=class Ox extends Or{constructor(e=Ox.DEFAULT_IMAGE,t=Ox.DEFAULT_MAPPING,i=qn,r=qn,s=Ut,o=yo,a=Dn,l=$n,c=Ox.DEFAULT_ANISOTROPY,u=Bu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wie++}),this.uuid=go(),this.name="",this.source=new tf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ee(0,0),this.repeat=new Ee(1,1),this.center=new Ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(mg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Iu?un:Bu),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Nu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Fr:e.x=e.x-Math.floor(e.x);break;case qn:e.x=e.x<0?0:1;break;case ym:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Fr:e.y=e.y-Math.floor(e.y);break;case qn:e.y=e.y<0?0:1;break;case ym:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return mg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===un?Iu:YI}set encoding(e){mg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Iu?un:Bu}};In.DEFAULT_IMAGE=null;In.DEFAULT_MAPPING=Nu;In.DEFAULT_ANISOTROPY=1;class Yt{constructor(e=0,t=0,i=0,r=1){Yt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],d=l[5],m=l[9],A=l[2],y=l[6],p=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-A)<.01&&Math.abs(m-y)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+A)<.1&&Math.abs(m+y)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,E=(d+1)/2,S=(p+1)/2,C=(u+f)/4,M=(h+A)/4,b=(m+y)/4;return v>E&&v>S?v<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(v),r=C/i,s=M/i):E>S?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=C/r,s=b/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=M/s,r=b/s),this.set(i,r,s,t),this}let g=Math.sqrt((y-m)*(y-m)+(h-A)*(h-A)+(f-u)*(f-u));return Math.abs(g)<.001&&(g=1),this.x=(y-m)/g,this.y=(h-A)/g,this.z=(f-u)/g,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rn extends Or{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(mg("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Iu?un:Bu),this.texture=new In(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Ut,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new tf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class k3 extends In{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=rn,this.minFilter=rn,this.wrapR=qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jie extends Rn{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new k3(null,e,t,i),this.texture.isRenderTargetTexture=!0}}let $I=class extends In{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=rn,this.minFilter=rn,this.wrapR=qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class Xie extends Rn{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new $I(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Yie extends Rn{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class St{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const f=s[o+0],d=s[o+1],m=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=A;return}if(h!==A||l!==f||c!==d||u!==m){let y=1-a;const p=l*f+c*d+u*m+h*A,g=p>=0?1:-1,v=1-p*p;if(v>Number.EPSILON){const S=Math.sqrt(v),C=Math.atan2(S,p*g);y=Math.sin(y*C)/S,a=Math.sin(a*C)/S}const E=a*g;if(l=l*y+f*E,c=c*y+d*E,u=u*y+m*E,h=h*y+A*E,y===1-a){const S=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=S,c*=S,u*=S,h*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],f=s[o+1],d=s[o+2],m=s[o+3];return e[t]=a*m+u*h+l*d-c*f,e[t+1]=l*m+u*f+c*h-a*d,e[t+2]=c*m+u*d+a*f-l*h,e[t+3]=u*m-a*h-l*f-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),f=l(i/2),d=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=f*u*h+c*d*m,this._y=c*d*h-f*u*m,this._z=c*u*m+f*d*h,this._w=c*u*h-f*d*m;break;case"YXZ":this._x=f*u*h+c*d*m,this._y=c*d*h-f*u*m,this._z=c*u*m-f*d*h,this._w=c*u*h+f*d*m;break;case"ZXY":this._x=f*u*h-c*d*m,this._y=c*d*h+f*u*m,this._z=c*u*m+f*d*h,this._w=c*u*h-f*d*m;break;case"ZYX":this._x=f*u*h-c*d*m,this._y=c*d*h+f*u*m,this._z=c*u*m-f*d*h,this._w=c*u*h+f*d*m;break;case"YZX":this._x=f*u*h+c*d*m,this._y=c*d*h+f*u*m,this._z=c*u*m-f*d*h,this._w=c*u*h-f*d*m;break;case"XZY":this._x=f*u*h-c*d*m,this._y=c*d*h-f*u*m,this._z=c*u*m+f*d*h,this._w=c*u*h+f*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],f=i+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>h){const d=2*Math.sqrt(1+i-a-h);this._w=(u-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>h){const d=2*Math.sqrt(1+a-i-h);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+h-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ki(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class D{constructor(e=0,t=0,i=0){D.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(WR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(WR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,h=l*r+s*i-o*t,f=-s*t-o*i-a*r;return this.x=c*l+f*-s+u*-a-h*-o,this.y=u*l+f*-o+h*-s-c*-a,this.z=h*l+f*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return zS.copy(this).projectOnVector(e),this.sub(zS)}reflect(e){return this.sub(zS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ki(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const zS=new D,WR=new St;class Bn{constructor(e=new D(1/0,1/0,1/0),t=new D(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Gl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Gl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Gl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),od.copy(e.boundingBox),od.applyMatrix4(e.matrixWorld),this.union(od);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Gl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Gl)}else r.boundingBox===null&&r.computeBoundingBox(),od.copy(r.boundingBox),od.applyMatrix4(e.matrixWorld),this.union(od)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Gl),Gl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(B0),_y.subVectors(this.max,B0),ad.subVectors(e.a,B0),ld.subVectors(e.b,B0),cd.subVectors(e.c,B0),Qc.subVectors(ld,ad),Vc.subVectors(cd,ld),Eh.subVectors(ad,cd);let t=[0,-Qc.z,Qc.y,0,-Vc.z,Vc.y,0,-Eh.z,Eh.y,Qc.z,0,-Qc.x,Vc.z,0,-Vc.x,Eh.z,0,-Eh.x,-Qc.y,Qc.x,0,-Vc.y,Vc.x,0,-Eh.y,Eh.x,0];return!kS(t,ad,ld,cd,_y)||(t=[1,0,0,0,1,0,0,0,1],!kS(t,ad,ld,cd,_y))?!1:(Ey.crossVectors(Qc,Vc),t=[Ey.x,Ey.y,Ey.z],kS(t,ad,ld,cd,_y))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Gl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Gl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Nl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Nl=[new D,new D,new D,new D,new D,new D,new D,new D],Gl=new D,od=new Bn,ad=new D,ld=new D,cd=new D,Qc=new D,Vc=new D,Eh=new D,B0=new D,_y=new D,Ey=new D,wh=new D;function kS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){wh.fromArray(n,s);const a=r.x*Math.abs(wh.x)+r.y*Math.abs(wh.y)+r.z*Math.abs(wh.z),l=e.dot(wh),c=t.dot(wh),u=i.dot(wh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const qie=new Bn,P0=new D,NS=new D;let vi=class{constructor(e=new D,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):qie.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;P0.subVectors(e,this.center);const t=P0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(P0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(NS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(P0.copy(e.center).add(NS)),this.expandByPoint(P0.copy(e.center).sub(NS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Hl=new D,GS=new D,wy=new D,Wc=new D,HS=new D,Sy=new D,QS=new D;class ha{constructor(e=new D,t=new D(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Hl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Hl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Hl.copy(this.origin).addScaledVector(this.direction,t),Hl.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){GS.copy(e).add(t).multiplyScalar(.5),wy.copy(t).sub(e).normalize(),Wc.copy(this.origin).sub(GS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(wy),a=Wc.dot(this.direction),l=-Wc.dot(wy),c=Wc.lengthSq(),u=Math.abs(1-o*o);let h,f,d,m;if(u>0)if(h=o*l-a,f=o*a-l,m=s*u,h>=0)if(f>=-m)if(f<=m){const A=1/u;h*=A,f*=A,d=h*(h+o*f+2*a)+f*(o*h+f+2*l)+c}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;else f<=-m?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c):f<=m?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+c):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(GS).addScaledVector(wy,f),d}intersectSphere(e,t){Hl.subVectors(e.center,this.origin);const i=Hl.dot(this.direction),r=Hl.dot(Hl)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Hl)!==null}intersectTriangle(e,t,i,r,s){HS.subVectors(t,e),Sy.subVectors(i,e),QS.crossVectors(HS,Sy);let o=this.direction.dot(QS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Wc.subVectors(this.origin,e);const l=a*this.direction.dot(Sy.crossVectors(Wc,Sy));if(l<0)return null;const c=a*this.direction.dot(HS.cross(Wc));if(c<0||l+c>o)return null;const u=-a*Wc.dot(QS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Oe{constructor(e,t,i,r,s,o,a,l,c,u,h,f,d,m,A,y){Oe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,h,f,d,m,A,y)}set(e,t,i,r,s,o,a,l,c,u,h,f,d,m,A,y){const p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=r,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=h,p[14]=f,p[3]=d,p[7]=m,p[11]=A,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Oe().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ud.setFromMatrixColumn(e,0).length(),s=1/ud.setFromMatrixColumn(e,1).length(),o=1/ud.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,d=o*h,m=a*u,A=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=d+m*c,t[5]=f-A*c,t[9]=-a*l,t[2]=A-f*c,t[6]=m+d*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,d=l*h,m=c*u,A=c*h;t[0]=f+A*a,t[4]=m*a-d,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=d*a-m,t[6]=A+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,d=l*h,m=c*u,A=c*h;t[0]=f-A*a,t[4]=-o*h,t[8]=m+d*a,t[1]=d+m*a,t[5]=o*u,t[9]=A-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,d=o*h,m=a*u,A=a*h;t[0]=l*u,t[4]=m*c-d,t[8]=f*c+A,t[1]=l*h,t[5]=A*c+f,t[9]=d*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*c,m=a*l,A=a*c;t[0]=l*u,t[4]=A-f*h,t[8]=m*h+d,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=d*h+m,t[10]=f-A*h}else if(e.order==="XZY"){const f=o*l,d=o*c,m=a*l,A=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=f*h+A,t[5]=o*u,t[9]=d*h-m,t[2]=m*h-d,t[6]=a*u,t[10]=A*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Kie,e,Jie)}lookAt(e,t,i){const r=this.elements;return oo.subVectors(e,t),oo.lengthSq()===0&&(oo.z=1),oo.normalize(),jc.crossVectors(i,oo),jc.lengthSq()===0&&(Math.abs(i.z)===1?oo.x+=1e-4:oo.z+=1e-4,oo.normalize(),jc.crossVectors(i,oo)),jc.normalize(),Cy.crossVectors(oo,jc),r[0]=jc.x,r[4]=Cy.x,r[8]=oo.x,r[1]=jc.y,r[5]=Cy.y,r[9]=oo.y,r[2]=jc.z,r[6]=Cy.z,r[10]=oo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],f=i[9],d=i[13],m=i[2],A=i[6],y=i[10],p=i[14],g=i[3],v=i[7],E=i[11],S=i[15],C=r[0],M=r[4],b=r[8],T=r[12],I=r[1],F=r[5],R=r[9],z=r[13],L=r[2],H=r[6],K=r[10],J=r[14],O=r[3],W=r[7],V=r[11],U=r[15];return s[0]=o*C+a*I+l*L+c*O,s[4]=o*M+a*F+l*H+c*W,s[8]=o*b+a*R+l*K+c*V,s[12]=o*T+a*z+l*J+c*U,s[1]=u*C+h*I+f*L+d*O,s[5]=u*M+h*F+f*H+d*W,s[9]=u*b+h*R+f*K+d*V,s[13]=u*T+h*z+f*J+d*U,s[2]=m*C+A*I+y*L+p*O,s[6]=m*M+A*F+y*H+p*W,s[10]=m*b+A*R+y*K+p*V,s[14]=m*T+A*z+y*J+p*U,s[3]=g*C+v*I+E*L+S*O,s[7]=g*M+v*F+E*H+S*W,s[11]=g*b+v*R+E*K+S*V,s[15]=g*T+v*z+E*J+S*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],d=e[14],m=e[3],A=e[7],y=e[11],p=e[15];return m*(+s*l*h-r*c*h-s*a*f+i*c*f+r*a*d-i*l*d)+A*(+t*l*d-t*c*f+s*o*f-r*o*d+r*c*u-s*l*u)+y*(+t*c*h-t*a*d-s*o*h+i*o*d+s*a*u-i*c*u)+p*(-r*a*u-t*l*h+t*a*f+r*o*h-i*o*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],m=e[12],A=e[13],y=e[14],p=e[15],g=h*y*c-A*f*c+A*l*d-a*y*d-h*l*p+a*f*p,v=m*f*c-u*y*c-m*l*d+o*y*d+u*l*p-o*f*p,E=u*A*c-m*h*c+m*a*d-o*A*d-u*a*p+o*h*p,S=m*h*l-u*A*l-m*a*f+o*A*f+u*a*y-o*h*y,C=t*g+i*v+r*E+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=g*M,e[1]=(A*f*s-h*y*s-A*r*d+i*y*d+h*r*p-i*f*p)*M,e[2]=(a*y*s-A*l*s+A*r*c-i*y*c-a*r*p+i*l*p)*M,e[3]=(h*l*s-a*f*s-h*r*c+i*f*c+a*r*d-i*l*d)*M,e[4]=v*M,e[5]=(u*y*s-m*f*s+m*r*d-t*y*d-u*r*p+t*f*p)*M,e[6]=(m*l*s-o*y*s-m*r*c+t*y*c+o*r*p-t*l*p)*M,e[7]=(o*f*s-u*l*s+u*r*c-t*f*c-o*r*d+t*l*d)*M,e[8]=E*M,e[9]=(m*h*s-u*A*s-m*i*d+t*A*d+u*i*p-t*h*p)*M,e[10]=(o*A*s-m*a*s+m*i*c-t*A*c-o*i*p+t*a*p)*M,e[11]=(u*a*s-o*h*s-u*i*c+t*h*c+o*i*d-t*a*d)*M,e[12]=S*M,e[13]=(u*A*r-m*h*r+m*i*f-t*A*f-u*i*y+t*h*y)*M,e[14]=(m*a*r-o*A*r-m*i*l+t*A*l+o*i*y-t*a*y)*M,e[15]=(o*h*r-u*a*r+u*i*l-t*h*l-o*i*f+t*a*f)*M,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,f=s*c,d=s*u,m=s*h,A=o*u,y=o*h,p=a*h,g=l*c,v=l*u,E=l*h,S=i.x,C=i.y,M=i.z;return r[0]=(1-(A+p))*S,r[1]=(d+E)*S,r[2]=(m-v)*S,r[3]=0,r[4]=(d-E)*C,r[5]=(1-(f+p))*C,r[6]=(y+g)*C,r[7]=0,r[8]=(m+v)*M,r[9]=(y-g)*M,r[10]=(1-(f+A))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ud.set(r[0],r[1],r[2]).length();const o=ud.set(r[4],r[5],r[6]).length(),a=ud.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ga.copy(this);const c=1/s,u=1/o,h=1/a;return ga.elements[0]*=c,ga.elements[1]*=c,ga.elements[2]*=c,ga.elements[4]*=u,ga.elements[5]*=u,ga.elements[6]*=u,ga.elements[8]*=h,ga.elements[9]*=h,ga.elements[10]*=h,t.setFromRotationMatrix(ga),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=yl){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),h=(t+e)/(t-e),f=(i+r)/(i-r);let d,m;if(a===yl)d=-(o+s)/(o-s),m=-2*o*s/(o-s);else if(a===sA)d=-o/(o-s),m=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=yl){const l=this.elements,c=1/(t-e),u=1/(i-r),h=1/(o-s),f=(t+e)*c,d=(i+r)*u;let m,A;if(a===yl)m=(o+s)*h,A=-2*h;else if(a===sA)m=s*h,A=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=A,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const ud=new D,ga=new Oe,Kie=new D(0,0,0),Jie=new D(1,1,1),jc=new D,Cy=new D,oo=new D,jR=new Oe,XR=new St;class Rr{constructor(e=0,t=0,i=0,r=Rr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(ki(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ki(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(ki(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ki(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ki(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-ki(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return jR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return XR.setFromEuler(this),this.setFromQuaternion(XR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Rr.DEFAULT_ORDER="XYZ";class df{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Zie=0;const YR=new D,hd=new St,Ql=new Oe,My=new D,R0=new D,$ie=new D,ere=new St,qR=new D(1,0,0),KR=new D(0,1,0),JR=new D(0,0,1),tre={type:"added"},ZR={type:"removed"};class kt extends Or{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Zie++}),this.uuid=go(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kt.DEFAULT_UP.clone();const e=new D,t=new Rr,i=new St,r=new D(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Oe},normalMatrix:{value:new Wt}}),this.matrix=new Oe,this.matrixWorld=new Oe,this.matrixAutoUpdate=kt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new df,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return hd.setFromAxisAngle(e,t),this.quaternion.multiply(hd),this}rotateOnWorldAxis(e,t){return hd.setFromAxisAngle(e,t),this.quaternion.premultiply(hd),this}rotateX(e){return this.rotateOnAxis(qR,e)}rotateY(e){return this.rotateOnAxis(KR,e)}rotateZ(e){return this.rotateOnAxis(JR,e)}translateOnAxis(e,t){return YR.copy(e).applyQuaternion(this.quaternion),this.position.add(YR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(qR,e)}translateY(e){return this.translateOnAxis(KR,e)}translateZ(e){return this.translateOnAxis(JR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ql.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?My.copy(e):My.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),R0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ql.lookAt(R0,My,this.up):Ql.lookAt(My,R0,this.up),this.quaternion.setFromRotationMatrix(Ql),r&&(Ql.extractRotation(r.matrixWorld),hd.setFromRotationMatrix(Ql),this.quaternion.premultiply(hd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tre)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ZR)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(ZR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ql.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ql.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ql),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R0,e,$ie),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R0,ere,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations),m=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),d.length>0&&(i.animations=d),m.length>0&&(i.nodes=m)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}kt.DEFAULT_UP=new D(0,1,0);kt.DEFAULT_MATRIX_AUTO_UPDATE=!0;kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Aa=new D,Vl=new D,VS=new D,Wl=new D,fd=new D,dd=new D,$R=new D,WS=new D,jS=new D,XS=new D;let by=!1;class rr{constructor(e=new D,t=new D,i=new D){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Aa.subVectors(e,t),r.cross(Aa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Aa.subVectors(r,t),Vl.subVectors(i,t),VS.subVectors(e,t);const o=Aa.dot(Aa),a=Aa.dot(Vl),l=Aa.dot(VS),c=Vl.dot(Vl),u=Vl.dot(VS),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const f=1/h,d=(c*l-a*u)*f,m=(o*u-a*l)*f;return s.set(1-d-m,m,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Wl),Wl.x>=0&&Wl.y>=0&&Wl.x+Wl.y<=1}static getUV(e,t,i,r,s,o,a,l){return by===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),by=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Wl),l.setScalar(0),l.addScaledVector(s,Wl.x),l.addScaledVector(o,Wl.y),l.addScaledVector(a,Wl.z),l}static isFrontFacing(e,t,i,r){return Aa.subVectors(i,t),Vl.subVectors(e,t),Aa.cross(Vl).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Aa.subVectors(this.c,this.b),Vl.subVectors(this.a,this.b),Aa.cross(Vl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return by===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),by=!0),rr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return rr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return rr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;fd.subVectors(r,i),dd.subVectors(s,i),WS.subVectors(e,i);const l=fd.dot(WS),c=dd.dot(WS);if(l<=0&&c<=0)return t.copy(i);jS.subVectors(e,r);const u=fd.dot(jS),h=dd.dot(jS);if(u>=0&&h<=u)return t.copy(r);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(fd,o);XS.subVectors(e,s);const d=fd.dot(XS),m=dd.dot(XS);if(m>=0&&d<=m)return t.copy(s);const A=d*c-l*m;if(A<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(dd,a);const y=u*m-d*h;if(y<=0&&h-u>=0&&d-m>=0)return $R.subVectors(s,r),a=(h-u)/(h-u+(d-m)),t.copy(r).addScaledVector($R,a);const p=1/(y+A+f);return o=A*p,a=f*p,t.copy(i).addScaledVector(fd,o).addScaledVector(dd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let nre=0;class Ji extends Or{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:nre++}),this.uuid=go(),this.name="",this.type="Material",this.blending=bu,this.side=Ss,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=D3,this.blendDst=GI,this.blendEquation=jh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=b_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=KI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hf,this.stencilZFail=hf,this.stencilZPass=hf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==bu&&(i.blending=this.blending),this.side!==Ss&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const nQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},va={h:0,s:0,l:0},Ty={h:0,s:0,l:0};function YS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class We{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=un){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zo.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=zo.workingColorSpace){return this.r=e,this.g=t,this.b=i,zo.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=zo.workingColorSpace){if(e=JI(e,1),t=ki(t,0,1),i=ki(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=YS(o,s,e+1/3),this.g=YS(o,s,e),this.b=YS(o,s,e-1/3)}return zo.toWorkingColorSpace(this,r),this}setStyle(e,t=un){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=un){const i=nQ[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jp(e.r),this.g=Jp(e.g),this.b=Jp(e.b),this}copyLinearToSRGB(e){return this.r=OS(e.r),this.g=OS(e.g),this.b=OS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=un){return zo.fromWorkingColorSpace(ts.copy(this),e),Math.round(ki(ts.r*255,0,255))*65536+Math.round(ki(ts.g*255,0,255))*256+Math.round(ki(ts.b*255,0,255))}getHexString(e=un){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zo.workingColorSpace){zo.fromWorkingColorSpace(ts.copy(this),t);const i=ts.r,r=ts.g,s=ts.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=zo.workingColorSpace){return zo.fromWorkingColorSpace(ts.copy(this),t),e.r=ts.r,e.g=ts.g,e.b=ts.b,e}getStyle(e=un){zo.fromWorkingColorSpace(ts.copy(this),e);const t=ts.r,i=ts.g,r=ts.b;return e!==un?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(va),va.h+=e,va.s+=t,va.l+=i,this.setHSL(va.h,va.s,va.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(va),e.getHSL(Ty);const i=pg(va.h,Ty.h,t),r=pg(va.s,Ty.s,t),s=pg(va.l,Ty.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ts=new We;We.NAMES=nQ;class mr extends Ji{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=LA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ac=ire();function ire(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Us(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ki(n,-65504,65504),ac.floatView[0]=n;const e=ac.uint32View[0],t=e>>23&511;return ac.baseTable[t]+((e&8388607)>>ac.shiftTable[t])}function H1(n){const e=n>>10;return ac.uint32View[0]=ac.mantissaTable[ac.offsetTable[e]+(n&1023)]+ac.exponentTable[e],ac.floatView[0]}const La={toHalfFloat:Us,fromHalfFloat:H1},tr=new D,Iy=new Ee;class zt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=rA,this.updateRange={offset:0,count:-1},this.gpuType=En,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Iy.fromBufferAttribute(this,t),Iy.applyMatrix3(e),this.setXY(t,Iy.x,Iy.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix3(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix4(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.applyNormalMatrix(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)tr.fromBufferAttribute(this,t),tr.transformDirection(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ho(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ho(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ho(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ho(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array),s=An(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==rA&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class rre extends zt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class sre extends zt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ore extends zt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class are extends zt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class N3 extends zt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class lre extends zt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class e6 extends zt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class cre extends zt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=H1(this.array[e*this.itemSize]);return this.normalized&&(t=ho(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=Us(t),this}getY(e){let t=H1(this.array[e*this.itemSize+1]);return this.normalized&&(t=ho(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=Us(t),this}getZ(e){let t=H1(this.array[e*this.itemSize+2]);return this.normalized&&(t=ho(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=Us(t),this}getW(e){let t=H1(this.array[e*this.itemSize+3]);return this.normalized&&(t=ho(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=Us(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(i),this.array[e+2]=Us(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array),s=An(s,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(i),this.array[e+2]=Us(r),this.array[e+3]=Us(s),this}}class ft extends zt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class ure extends zt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let hre=0;const Do=new Oe,qS=new kt,pd=new D,ao=new Bn,D0=new Bn,Mr=new D;class It extends Or{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hre++}),this.uuid=go(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tQ(e)?e6:N3)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Wt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Do.makeRotationFromQuaternion(e),this.applyMatrix4(Do),this}rotateX(e){return Do.makeRotationX(e),this.applyMatrix4(Do),this}rotateY(e){return Do.makeRotationY(e),this.applyMatrix4(Do),this}rotateZ(e){return Do.makeRotationZ(e),this.applyMatrix4(Do),this}translate(e,t,i){return Do.makeTranslation(e,t,i),this.applyMatrix4(Do),this}scale(e,t,i){return Do.makeScale(e,t,i),this.applyMatrix4(Do),this}lookAt(e){return qS.lookAt(e),qS.updateMatrix(),this.applyMatrix4(qS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pd).negate(),this.translate(pd.x,pd.y,pd.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ft(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ao.setFromBufferAttribute(s),this.morphTargetsRelative?(Mr.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(Mr),Mr.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(Mr)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new D,1/0);return}if(e){const i=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];D0.setFromBufferAttribute(a),this.morphTargetsRelative?(Mr.addVectors(ao.min,D0.min),ao.expandByPoint(Mr),Mr.addVectors(ao.max,D0.max),ao.expandByPoint(Mr)):(ao.expandByPoint(D0.min),ao.expandByPoint(D0.max))}ao.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Mr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Mr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Mr.fromBufferAttribute(a,c),l&&(pd.fromBufferAttribute(e,c),Mr.add(pd)),r=Math.max(r,i.distanceToSquared(Mr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let I=0;I<a;I++)c[I]=new D,u[I]=new D;const h=new D,f=new D,d=new D,m=new Ee,A=new Ee,y=new Ee,p=new D,g=new D;function v(I,F,R){h.fromArray(r,I*3),f.fromArray(r,F*3),d.fromArray(r,R*3),m.fromArray(o,I*2),A.fromArray(o,F*2),y.fromArray(o,R*2),f.sub(h),d.sub(h),A.sub(m),y.sub(m);const z=1/(A.x*y.y-y.x*A.y);isFinite(z)&&(p.copy(f).multiplyScalar(y.y).addScaledVector(d,-A.y).multiplyScalar(z),g.copy(d).multiplyScalar(A.x).addScaledVector(f,-y.x).multiplyScalar(z),c[I].add(p),c[F].add(p),c[R].add(p),u[I].add(g),u[F].add(g),u[R].add(g))}let E=this.groups;E.length===0&&(E=[{start:0,count:i.length}]);for(let I=0,F=E.length;I<F;++I){const R=E[I],z=R.start,L=R.count;for(let H=z,K=z+L;H<K;H+=3)v(i[H+0],i[H+1],i[H+2])}const S=new D,C=new D,M=new D,b=new D;function T(I){M.fromArray(s,I*3),b.copy(M);const F=c[I];S.copy(F),S.sub(M.multiplyScalar(M.dot(F))).normalize(),C.crossVectors(b,F);const z=C.dot(u[I])<0?-1:1;l[I*4]=S.x,l[I*4+1]=S.y,l[I*4+2]=S.z,l[I*4+3]=z}for(let I=0,F=E.length;I<F;++I){const R=E[I],z=R.start,L=R.count;for(let H=z,K=z+L;H<K;H+=3)T(i[H+0]),T(i[H+1]),T(i[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new zt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,d=i.count;f<d;f++)i.setXYZ(f,0,0,0);const r=new D,s=new D,o=new D,a=new D,l=new D,c=new D,u=new D,h=new D;if(e)for(let f=0,d=e.count;f<d;f+=3){const m=e.getX(f+0),A=e.getX(f+1),y=e.getX(f+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,y),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,A),c.fromBufferAttribute(i,y),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Mr.fromBufferAttribute(e,t),Mr.normalize(),e.setXYZ(t,Mr.x,Mr.y,Mr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,f=new c.constructor(l.length*u);let d=0,m=0;for(let A=0,y=l.length;A<y;A++){a.isInterleavedBufferAttribute?d=l[A]*a.data.stride+a.offset:d=l[A]*u;for(let p=0;p<u;p++)f[m++]=c[d++]}return new zt(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new It,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const f=c[u],d=e(f,i);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,d=h.length;f<d;f++)u.push(h[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const e7=new Oe,Sh=new ha,By=new vi,t7=new D,md=new D,gd=new D,Ad=new D,KS=new D,Py=new D,Ry=new Ee,Dy=new Ee,Ly=new Ee,n7=new D,i7=new D,r7=new D,Fy=new D,Oy=new D;class ct extends kt{constructor(e=new It,t=new mr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Py.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(KS.fromBufferAttribute(h,e),o?Py.addScaledVector(KS,u):Py.addScaledVector(KS.sub(t),u))}t.add(Py)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),By.copy(i.boundingSphere),By.applyMatrix4(s),Sh.copy(e.ray).recast(e.near),!(By.containsPoint(Sh.origin)===!1&&(Sh.intersectSphere(By,t7)===null||Sh.origin.distanceToSquared(t7)>(e.far-e.near)**2))&&(e7.copy(s).invert(),Sh.copy(e.ray).applyMatrix4(e7),!(i.boundingBox!==null&&Sh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Sh)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,f=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,A=f.length;m<A;m++){const y=f[m],p=o[y.materialIndex],g=Math.max(y.start,d.start),v=Math.min(a.count,Math.min(y.start+y.count,d.start+d.count));for(let E=g,S=v;E<S;E+=3){const C=a.getX(E),M=a.getX(E+1),b=a.getX(E+2);r=Uy(this,p,e,i,c,u,h,C,M,b),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const m=Math.max(0,d.start),A=Math.min(a.count,d.start+d.count);for(let y=m,p=A;y<p;y+=3){const g=a.getX(y),v=a.getX(y+1),E=a.getX(y+2);r=Uy(this,o,e,i,c,u,h,g,v,E),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,A=f.length;m<A;m++){const y=f[m],p=o[y.materialIndex],g=Math.max(y.start,d.start),v=Math.min(l.count,Math.min(y.start+y.count,d.start+d.count));for(let E=g,S=v;E<S;E+=3){const C=E,M=E+1,b=E+2;r=Uy(this,p,e,i,c,u,h,C,M,b),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const m=Math.max(0,d.start),A=Math.min(l.count,d.start+d.count);for(let y=m,p=A;y<p;y+=3){const g=y,v=y+1,E=y+2;r=Uy(this,o,e,i,c,u,h,g,v,E),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}}function fre(n,e,t,i,r,s,o,a){let l;if(e.side===Ni?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ss,a),l===null)return null;Oy.copy(a),Oy.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Oy);return c<t.near||c>t.far?null:{distance:c,point:Oy.clone(),object:n}}function Uy(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,md),n.getVertexPosition(l,gd),n.getVertexPosition(c,Ad);const u=fre(n,e,t,i,md,gd,Ad,Fy);if(u){r&&(Ry.fromBufferAttribute(r,a),Dy.fromBufferAttribute(r,l),Ly.fromBufferAttribute(r,c),u.uv=rr.getInterpolation(Fy,md,gd,Ad,Ry,Dy,Ly,new Ee)),s&&(Ry.fromBufferAttribute(s,a),Dy.fromBufferAttribute(s,l),Ly.fromBufferAttribute(s,c),u.uv1=rr.getInterpolation(Fy,md,gd,Ad,Ry,Dy,Ly,new Ee),u.uv2=u.uv1),o&&(n7.fromBufferAttribute(o,a),i7.fromBufferAttribute(o,l),r7.fromBufferAttribute(o,c),u.normal=rr.getInterpolation(Fy,md,gd,Ad,n7,i7,r7,new D),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new D,materialIndex:0};rr.getNormal(md,gd,Ad,h.normal),u.face=h}return u}class ys extends It{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let f=0,d=0;m("z","y","x",-1,-1,i,t,e,o,s,0),m("z","y","x",1,-1,i,t,-e,o,s,1),m("x","z","y",1,1,e,i,t,r,o,2),m("x","z","y",1,-1,e,i,-t,r,o,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ft(c,3)),this.setAttribute("normal",new ft(u,3)),this.setAttribute("uv",new ft(h,2));function m(A,y,p,g,v,E,S,C,M,b,T){const I=E/M,F=S/b,R=E/2,z=S/2,L=C/2,H=M+1,K=b+1;let J=0,O=0;const W=new D;for(let V=0;V<K;V++){const U=V*F-z;for(let Y=0;Y<H;Y++){const $=Y*I-R;W[A]=$*g,W[y]=U*v,W[p]=L,c.push(W.x,W.y,W.z),W[A]=0,W[y]=0,W[p]=C>0?1:-1,u.push(W.x,W.y,W.z),h.push(Y/M),h.push(1-V/b),J+=1}}for(let V=0;V<b;V++)for(let U=0;U<M;U++){const Y=f+U+H*V,$=f+U+H*(V+1),N=f+(U+1)+H*(V+1),Q=f+(U+1)+H*V;l.push(Y,$,Q),l.push($,N,Q),O+=6}a.addGroup(d,O,T),d+=O,f+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ys(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Em(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function As(n){const e={};for(let t=0;t<n.length;t++){const i=Em(n[t]);for(const r in i)e[r]=i[r]}return e}function dre(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function iQ(n){return n.getRenderTarget()===null?n.outputColorSpace:Ks}const ca={clone:Em,merge:As};var pre=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mre=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fn extends Ji{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pre,this.fragmentShader=mre,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Em(e.uniforms),this.uniformsGroups=dre(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class th extends kt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Oe,this.projectionMatrix=new Oe,this.projectionMatrixInverse=new Oe,this.coordinateSystem=yl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let on=class extends th{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_m*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ff*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _m*2*Math.atan(Math.tan(ff*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ff*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const vd=-90,yd=1;let G3=class extends kt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new on(vd,yd,e,t);r.layers=this.layers,this.add(r);const s=new on(vd,yd,e,t);s.layers=this.layers,this.add(s);const o=new on(vd,yd,e,t);o.layers=this.layers,this.add(o);const a=new on(vd,yd,e,t);a.layers=this.layers,this.add(a);const l=new on(vd,yd,e,t);l.layers=this.layers,this.add(l);const c=new on(vd,yd,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===yl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===sA)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,f=e.xr.enabled;e.toneMapping=oa,e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}},OA=class extends In{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ml,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};class km extends Rn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(mg("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Iu?un:Bu),this.texture=new OA(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ut}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ys(5,5,5),s=new Fn({name:"CubemapFromEquirect",uniforms:Em(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ni,blending:sa});s.uniforms.tEquirect.value=t;const o=new ct(r,s),a=t.minFilter;return t.minFilter===yo&&(t.minFilter=Ut),new G3(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const JS=new D,gre=new D,Are=new Wt;let Br=class{constructor(e=new D(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=JS.subVectors(i,t).cross(gre.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(JS),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Are.getNormalMatrix(e),r=this.coplanarPoint(JS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Ch=new vi,zy=new D;class Nm{constructor(e=new Br,t=new Br,i=new Br,r=new Br,s=new Br,o=new Br){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=yl){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],f=r[7],d=r[8],m=r[9],A=r[10],y=r[11],p=r[12],g=r[13],v=r[14],E=r[15];if(i[0].setComponents(l-s,f-c,y-d,E-p).normalize(),i[1].setComponents(l+s,f+c,y+d,E+p).normalize(),i[2].setComponents(l+o,f+u,y+m,E+g).normalize(),i[3].setComponents(l-o,f-u,y-m,E-g).normalize(),i[4].setComponents(l-a,f-h,y-A,E-v).normalize(),t===yl)i[5].setComponents(l+a,f+h,y+A,E+v).normalize();else if(t===sA)i[5].setComponents(a,h,A,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ch.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ch.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ch)}intersectsSprite(e){return Ch.center.set(0,0,0),Ch.radius=.7071067811865476,Ch.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ch)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(zy.x=r.normal.x>0?e.max.x:e.min.x,zy.y=r.normal.y>0?e.max.y:e.min.y,zy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function rQ(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function vre(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const h=c.array,f=c.usage,d=n.createBuffer();n.bindBuffer(u,d),n.bufferData(u,h,f),c.onUploadCallback();let m;if(h instanceof Float32Array)m=n.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)m=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)m=n.SHORT;else if(h instanceof Uint32Array)m=n.UNSIGNED_INT;else if(h instanceof Int32Array)m=n.INT;else if(h instanceof Int8Array)m=n.BYTE;else if(h instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:m,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const f=u.array,d=u.updateRange;n.bindBuffer(h,c),d.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h===void 0?i.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class dr extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,f=t/l,d=[],m=[],A=[],y=[];for(let p=0;p<u;p++){const g=p*f-o;for(let v=0;v<c;v++){const E=v*h-s;m.push(E,-g,0),A.push(0,0,1),y.push(v/a),y.push(1-p/l)}}for(let p=0;p<l;p++)for(let g=0;g<a;g++){const v=g+c*p,E=g+c*(p+1),S=g+1+c*(p+1),C=g+1+c*p;d.push(v,E,C),d.push(E,S,C)}this.setIndex(d),this.setAttribute("position",new ft(m,3)),this.setAttribute("normal",new ft(A,3)),this.setAttribute("uv",new ft(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dr(e.width,e.height,e.widthSegments,e.heightSegments)}}var yre=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,xre=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,_re=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ere=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wre=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Sre=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cre=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Mre=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bre=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Tre=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ire=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Bre=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Pre=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Rre=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Dre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Lre=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Fre=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ore=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ure=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zre=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kre=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Nre=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Gre=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hre=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qre=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Vre=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Wre=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jre=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Xre="gl_FragColor = linearToOutputTexel( gl_FragColor );",Yre=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Kre=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jre=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$re=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ese=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,tse=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,nse=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ise=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,rse=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sse=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,ose=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ase=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lse=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cse=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,use=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hse=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fse=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dse=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,pse=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,mse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,gse=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ase=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vse=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,xse=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_se=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ese=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,wse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Sse=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,Cse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Mse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bse=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tse=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ise=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Bse=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Rse=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Dse=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Lse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Fse=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ose=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Use=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zse=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kse=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Nse=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Gse=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Hse=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qse=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Vse=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Wse=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jse=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Xse=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Yse=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qse=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Kse=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Jse=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zse=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$se=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,eoe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,toe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,noe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ioe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,roe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,soe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ooe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,aoe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,loe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,coe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,uoe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hoe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,foe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,doe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,poe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,moe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const goe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Aoe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,voe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yoe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xoe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_oe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Eoe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,woe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Soe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Coe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Moe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,boe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Toe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ioe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Boe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Poe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Roe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Doe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Loe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Foe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ooe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Uoe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zoe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,koe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Noe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Goe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hoe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qoe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Voe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Woe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,joe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xoe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yoe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qoe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xt={alphahash_fragment:yre,alphahash_pars_fragment:xre,alphamap_fragment:_re,alphamap_pars_fragment:Ere,alphatest_fragment:wre,alphatest_pars_fragment:Sre,aomap_fragment:Cre,aomap_pars_fragment:Mre,begin_vertex:bre,beginnormal_vertex:Tre,bsdfs:Ire,iridescence_fragment:Bre,bumpmap_pars_fragment:Pre,clipping_planes_fragment:Rre,clipping_planes_pars_fragment:Dre,clipping_planes_pars_vertex:Lre,clipping_planes_vertex:Fre,color_fragment:Ore,color_pars_fragment:Ure,color_pars_vertex:zre,color_vertex:kre,common:Nre,cube_uv_reflection_fragment:Gre,defaultnormal_vertex:Hre,displacementmap_pars_vertex:Qre,displacementmap_vertex:Vre,emissivemap_fragment:Wre,emissivemap_pars_fragment:jre,colorspace_fragment:Xre,colorspace_pars_fragment:Yre,envmap_fragment:qre,envmap_common_pars_fragment:Kre,envmap_pars_fragment:Jre,envmap_pars_vertex:Zre,envmap_physical_pars_fragment:use,envmap_vertex:$re,fog_vertex:ese,fog_pars_vertex:tse,fog_fragment:nse,fog_pars_fragment:ise,gradientmap_pars_fragment:rse,lightmap_fragment:sse,lightmap_pars_fragment:ose,lights_lambert_fragment:ase,lights_lambert_pars_fragment:lse,lights_pars_begin:cse,lights_toon_fragment:hse,lights_toon_pars_fragment:fse,lights_phong_fragment:dse,lights_phong_pars_fragment:pse,lights_physical_fragment:mse,lights_physical_pars_fragment:gse,lights_fragment_begin:Ase,lights_fragment_maps:vse,lights_fragment_end:yse,logdepthbuf_fragment:xse,logdepthbuf_pars_fragment:_se,logdepthbuf_pars_vertex:Ese,logdepthbuf_vertex:wse,map_fragment:Sse,map_pars_fragment:Cse,map_particle_fragment:Mse,map_particle_pars_fragment:bse,metalnessmap_fragment:Tse,metalnessmap_pars_fragment:Ise,morphcolor_vertex:Bse,morphnormal_vertex:Pse,morphtarget_pars_vertex:Rse,morphtarget_vertex:Dse,normal_fragment_begin:Lse,normal_fragment_maps:Fse,normal_pars_fragment:Ose,normal_pars_vertex:Use,normal_vertex:zse,normalmap_pars_fragment:kse,clearcoat_normal_fragment_begin:Nse,clearcoat_normal_fragment_maps:Gse,clearcoat_pars_fragment:Hse,iridescence_pars_fragment:Qse,opaque_fragment:Vse,packing:Wse,premultiplied_alpha_fragment:jse,project_vertex:Xse,dithering_fragment:Yse,dithering_pars_fragment:qse,roughnessmap_fragment:Kse,roughnessmap_pars_fragment:Jse,shadowmap_pars_fragment:Zse,shadowmap_pars_vertex:$se,shadowmap_vertex:eoe,shadowmask_pars_fragment:toe,skinbase_vertex:noe,skinning_pars_vertex:ioe,skinning_vertex:roe,skinnormal_vertex:soe,specularmap_fragment:ooe,specularmap_pars_fragment:aoe,tonemapping_fragment:loe,tonemapping_pars_fragment:coe,transmission_fragment:uoe,transmission_pars_fragment:hoe,uv_pars_fragment:foe,uv_pars_vertex:doe,uv_vertex:poe,worldpos_vertex:moe,background_vert:goe,background_frag:Aoe,backgroundCube_vert:voe,backgroundCube_frag:yoe,cube_vert:xoe,cube_frag:_oe,depth_vert:Eoe,depth_frag:woe,distanceRGBA_vert:Soe,distanceRGBA_frag:Coe,equirect_vert:Moe,equirect_frag:boe,linedashed_vert:Toe,linedashed_frag:Ioe,meshbasic_vert:Boe,meshbasic_frag:Poe,meshlambert_vert:Roe,meshlambert_frag:Doe,meshmatcap_vert:Loe,meshmatcap_frag:Foe,meshnormal_vert:Ooe,meshnormal_frag:Uoe,meshphong_vert:zoe,meshphong_frag:koe,meshphysical_vert:Noe,meshphysical_frag:Goe,meshtoon_vert:Hoe,meshtoon_frag:Qoe,points_vert:Voe,points_frag:Woe,shadow_vert:joe,shadow_frag:Xoe,sprite_vert:Yoe,sprite_frag:qoe},gt={common:{diffuse:{value:new We(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new We(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new We(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new We(16777215)},opacity:{value:1},center:{value:new Ee(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},Pa={basic:{uniforms:As([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.fog]),vertexShader:Xt.meshbasic_vert,fragmentShader:Xt.meshbasic_frag},lambert:{uniforms:As([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new We(0)}}]),vertexShader:Xt.meshlambert_vert,fragmentShader:Xt.meshlambert_frag},phong:{uniforms:As([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:Xt.meshphong_vert,fragmentShader:Xt.meshphong_frag},standard:{uniforms:As([gt.common,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.roughnessmap,gt.metalnessmap,gt.fog,gt.lights,{emissive:{value:new We(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag},toon:{uniforms:As([gt.common,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.gradientmap,gt.fog,gt.lights,{emissive:{value:new We(0)}}]),vertexShader:Xt.meshtoon_vert,fragmentShader:Xt.meshtoon_frag},matcap:{uniforms:As([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,{matcap:{value:null}}]),vertexShader:Xt.meshmatcap_vert,fragmentShader:Xt.meshmatcap_frag},points:{uniforms:As([gt.points,gt.fog]),vertexShader:Xt.points_vert,fragmentShader:Xt.points_frag},dashed:{uniforms:As([gt.common,gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xt.linedashed_vert,fragmentShader:Xt.linedashed_frag},depth:{uniforms:As([gt.common,gt.displacementmap]),vertexShader:Xt.depth_vert,fragmentShader:Xt.depth_frag},normal:{uniforms:As([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,{opacity:{value:1}}]),vertexShader:Xt.meshnormal_vert,fragmentShader:Xt.meshnormal_frag},sprite:{uniforms:As([gt.sprite,gt.fog]),vertexShader:Xt.sprite_vert,fragmentShader:Xt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xt.background_vert,fragmentShader:Xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xt.backgroundCube_vert,fragmentShader:Xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xt.cube_vert,fragmentShader:Xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xt.equirect_vert,fragmentShader:Xt.equirect_frag},distanceRGBA:{uniforms:As([gt.common,gt.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xt.distanceRGBA_vert,fragmentShader:Xt.distanceRGBA_frag},shadow:{uniforms:As([gt.lights,gt.fog,{color:{value:new We(0)},opacity:{value:1}}]),vertexShader:Xt.shadow_vert,fragmentShader:Xt.shadow_frag}};Pa.physical={uniforms:As([Pa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Ee(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new We(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new We(0)},specularColor:{value:new We(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new Ee},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:Xt.meshphysical_vert,fragmentShader:Xt.meshphysical_frag};const ky={r:0,b:0,g:0};function Koe(n,e,t,i,r,s,o){const a=new We(0);let l=s===!0?0:1,c,u,h=null,f=0,d=null;function m(y,p){let g=!1,v=p.isScene===!0?p.background:null;switch(v&&v.isTexture&&(v=(p.backgroundBlurriness>0?t:e).get(v)),v===null?A(a,l):v&&v.isColor&&(A(v,1),g=!0),n.xr.getEnvironmentBlendMode()){case"opaque":g=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),g=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),g=!0;break}(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===zm)?(u===void 0&&(u=new ct(new ys(1,1,1),new Fn({name:"BackgroundCubeMaterial",uniforms:Em(Pa.backgroundCube.uniforms),vertexShader:Pa.backgroundCube.vertexShader,fragmentShader:Pa.backgroundCube.fragmentShader,side:Ni,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,M,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=v.colorSpace!==un,(h!==v||f!==v.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,h=v,f=v.version,d=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(c===void 0&&(c=new ct(new dr(2,2),new Fn({name:"BackgroundMaterial",uniforms:Em(Pa.background.uniforms),vertexShader:Pa.background.vertexShader,fragmentShader:Pa.background.fragmentShader,side:Ss,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=v,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=v.colorSpace!==un,v.matrixAutoUpdate===!0&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),(h!==v||f!==v.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,h=v,f=v.version,d=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function A(y,p){y.getRGB(ky,iQ(n)),i.buffers.color.setClear(ky.r,ky.g,ky.b,p,o)}return{getClearColor:function(){return a},setClearColor:function(y,p=1){a.set(y),l=p,A(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,A(a,l)},render:m}}function Joe(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=y(null);let c=l,u=!1;function h(L,H,K,J,O){let W=!1;if(o){const V=A(J,K,H);c!==V&&(c=V,d(c.object)),W=p(L,J,K,O),W&&g(L,J,K,O)}else{const V=H.wireframe===!0;(c.geometry!==J.id||c.program!==K.id||c.wireframe!==V)&&(c.geometry=J.id,c.program=K.id,c.wireframe=V,W=!0)}O!==null&&t.update(O,n.ELEMENT_ARRAY_BUFFER),(W||u)&&(u=!1,b(L,H,K,J),O!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(O).buffer))}function f(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(L){return i.isWebGL2?n.bindVertexArray(L):s.bindVertexArrayOES(L)}function m(L){return i.isWebGL2?n.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function A(L,H,K){const J=K.wireframe===!0;let O=a[L.id];O===void 0&&(O={},a[L.id]=O);let W=O[H.id];W===void 0&&(W={},O[H.id]=W);let V=W[J];return V===void 0&&(V=y(f()),W[J]=V),V}function y(L){const H=[],K=[],J=[];for(let O=0;O<r;O++)H[O]=0,K[O]=0,J[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:K,attributeDivisors:J,object:L,attributes:{},index:null}}function p(L,H,K,J){const O=c.attributes,W=H.attributes;let V=0;const U=K.getAttributes();for(const Y in U)if(U[Y].location>=0){const N=O[Y];let Q=W[Y];if(Q===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor)),N===void 0||N.attribute!==Q||Q&&N.data!==Q.data)return!0;V++}return c.attributesNum!==V||c.index!==J}function g(L,H,K,J){const O={},W=H.attributes;let V=0;const U=K.getAttributes();for(const Y in U)if(U[Y].location>=0){let N=W[Y];N===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&(N=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&(N=L.instanceColor));const Q={};Q.attribute=N,N&&N.data&&(Q.data=N.data),O[Y]=Q,V++}c.attributes=O,c.attributesNum=V,c.index=J}function v(){const L=c.newAttributes;for(let H=0,K=L.length;H<K;H++)L[H]=0}function E(L){S(L,0)}function S(L,H){const K=c.newAttributes,J=c.enabledAttributes,O=c.attributeDivisors;K[L]=1,J[L]===0&&(n.enableVertexAttribArray(L),J[L]=1),O[L]!==H&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,H),O[L]=H)}function C(){const L=c.newAttributes,H=c.enabledAttributes;for(let K=0,J=H.length;K<J;K++)H[K]!==L[K]&&(n.disableVertexAttribArray(K),H[K]=0)}function M(L,H,K,J,O,W,V){V===!0?n.vertexAttribIPointer(L,H,K,O,W):n.vertexAttribPointer(L,H,K,J,O,W)}function b(L,H,K,J){if(i.isWebGL2===!1&&(L.isInstancedMesh||J.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;v();const O=J.attributes,W=K.getAttributes(),V=H.defaultAttributeValues;for(const U in W){const Y=W[U];if(Y.location>=0){let $=O[U];if($===void 0&&(U==="instanceMatrix"&&L.instanceMatrix&&($=L.instanceMatrix),U==="instanceColor"&&L.instanceColor&&($=L.instanceColor)),$!==void 0){const N=$.normalized,Q=$.itemSize,j=t.get($);if(j===void 0)continue;const X=j.buffer,se=j.type,ve=j.bytesPerElement,de=i.isWebGL2===!0&&(se===n.INT||se===n.UNSIGNED_INT||$.gpuType===uf);if($.isInterleavedBufferAttribute){const he=$.data,te=he.stride,xe=$.offset;if(he.isInstancedInterleavedBuffer){for(let ce=0;ce<Y.locationSize;ce++)S(Y.location+ce,he.meshPerAttribute);L.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let ce=0;ce<Y.locationSize;ce++)E(Y.location+ce);n.bindBuffer(n.ARRAY_BUFFER,X);for(let ce=0;ce<Y.locationSize;ce++)M(Y.location+ce,Q/Y.locationSize,se,N,te*ve,(xe+Q/Y.locationSize*ce)*ve,de)}else{if($.isInstancedBufferAttribute){for(let he=0;he<Y.locationSize;he++)S(Y.location+he,$.meshPerAttribute);L.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let he=0;he<Y.locationSize;he++)E(Y.location+he);n.bindBuffer(n.ARRAY_BUFFER,X);for(let he=0;he<Y.locationSize;he++)M(Y.location+he,Q/Y.locationSize,se,N,Q*ve,Q/Y.locationSize*he*ve,de)}}else if(V!==void 0){const N=V[U];if(N!==void 0)switch(N.length){case 2:n.vertexAttrib2fv(Y.location,N);break;case 3:n.vertexAttrib3fv(Y.location,N);break;case 4:n.vertexAttrib4fv(Y.location,N);break;default:n.vertexAttrib1fv(Y.location,N)}}}}C()}function T(){R();for(const L in a){const H=a[L];for(const K in H){const J=H[K];for(const O in J)m(J[O].object),delete J[O];delete H[K]}delete a[L]}}function I(L){if(a[L.id]===void 0)return;const H=a[L.id];for(const K in H){const J=H[K];for(const O in J)m(J[O].object),delete J[O];delete H[K]}delete a[L.id]}function F(L){for(const H in a){const K=a[H];if(K[L.id]===void 0)continue;const J=K[L.id];for(const O in J)m(J[O].object),delete J[O];delete K[L.id]}}function R(){z(),u=!0,c!==l&&(c=l,d(c.object))}function z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:R,resetDefaultState:z,dispose:T,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:v,enableAttribute:E,disableUnusedAttributes:C}}function Zoe(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let f,d;if(r)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,c,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function $oe(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),p=n.getParameter(n.MAX_VARYING_VECTORS),g=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),v=f>0,E=o||e.has("OES_texture_float"),S=v&&E,C=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:m,maxAttributes:A,maxVertexUniforms:y,maxVaryings:p,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:E,floatVertexTextures:S,maxSamples:C}}function eae(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Br,a=new Wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||i!==0||r;return r=f,i=h.length,d},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=u(h,f,0)},this.setState=function(h,f,d){const m=h.clippingPlanes,A=h.clipIntersection,y=h.clipShadows,p=n.get(h);if(!r||m===null||m.length===0||s&&!y)s?u(null):c();else{const g=s?0:i,v=g*4;let E=p.clippingState||null;l.value=E,E=u(m,f,v,d);for(let S=0;S!==v;++S)E[S]=t[S];p.clippingState=E,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=g}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,d,m){const A=h!==null?h.length:0;let y=null;if(A!==0){if(y=l.value,m!==!0||y===null){const p=d+A*4,g=f.matrixWorldInverse;a.getNormalMatrix(g),(y===null||y.length<p)&&(y=new Float32Array(p));for(let v=0,E=d;v!==A;++v,E+=4)o.copy(h[v]).applyMatrix4(g,a),o.normal.toArray(y,E),y[E+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,y}}function tae(n){let e=new WeakMap;function t(o,a){return a===Hu?o.mapping=Ml:a===$g&&(o.mapping=Gu),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Hu||a===$g)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new km(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let Qn=class extends th{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Np=4,s7=[.125,.215,.35,.446,.526,.582],Xh=20,ZS=new Qn,o7=new We;let $S=null;const Wh=(1+Math.sqrt(5))/2,xd=1/Wh,a7=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,Wh,xd),new D(0,Wh,-xd),new D(xd,0,Wh),new D(-xd,0,Wh),new D(Wh,xd,0),new D(-Wh,xd,0)];class Z5{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){$S=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=u7(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=c7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget($S),e.scissorTest=!1,Ny(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ml||e.mapping===Gu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),$S=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ut,minFilter:Ut,generateMipmaps:!1,type:Ln,format:Dn,colorSpace:Ks,depthBuffer:!1},r=l7(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=l7(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=nae(s)),this._blurMaterial=iae(s,e,t)}return r}_compileMaterial(e){const t=new ct(this._lodPlanes[0],e);this._renderer.compile(t,ZS)}_sceneToCubeUV(e,t,i,r){const a=new on(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(o7),u.toneMapping=oa,u.autoClear=!1;const d=new mr({name:"PMREM.Background",side:Ni,depthWrite:!1,depthTest:!1}),m=new ct(new ys,d);let A=!1;const y=e.background;y?y.isColor&&(d.color.copy(y),e.background=null,A=!0):(d.color.copy(o7),A=!0);for(let p=0;p<6;p++){const g=p%3;g===0?(a.up.set(0,l[p],0),a.lookAt(c[p],0,0)):g===1?(a.up.set(0,0,l[p]),a.lookAt(0,c[p],0)):(a.up.set(0,l[p],0),a.lookAt(0,0,c[p]));const v=this._cubeSize;Ny(r,g*v,p>2?v:0,v,v),u.setRenderTarget(r),A&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=f,u.autoClear=h,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ml||e.mapping===Gu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=u7()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=c7());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ct(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Ny(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,ZS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=a7[(r-1)%a7.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new ct(this._lodPlanes[r],c),f=c.uniforms,d=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Xh-1),A=s/m,y=isFinite(s)?1+Math.floor(u*A):Xh;y>Xh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Xh}`);const p=[];let g=0;for(let M=0;M<Xh;++M){const b=M/A,T=Math.exp(-b*b/2);p.push(T),M===0?g+=T:M<y&&(g+=2*T)}for(let M=0;M<p.length;M++)p[M]=p[M]/g;f.envMap.value=e.texture,f.samples.value=y,f.weights.value=p,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:v}=this;f.dTheta.value=m,f.mipInt.value=v-i;const E=this._sizeLods[r],S=3*E*(r>v-Np?r-v+Np:0),C=4*(this._cubeSize-E);Ny(t,S,C,3*E,2*E),l.setRenderTarget(t),l.render(h,ZS)}}function nae(n){const e=[],t=[],i=[];let r=n;const s=n-Np+1+s7.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Np?l=s7[o-n+Np-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],d=6,m=6,A=3,y=2,p=1,g=new Float32Array(A*m*d),v=new Float32Array(y*m*d),E=new Float32Array(p*m*d);for(let C=0;C<d;C++){const M=C%3*2/3-1,b=C>2?0:-1,T=[M,b,0,M+2/3,b,0,M+2/3,b+1,0,M,b,0,M+2/3,b+1,0,M,b+1,0];g.set(T,A*m*C),v.set(f,y*m*C);const I=[C,C,C,C,C,C];E.set(I,p*m*C)}const S=new It;S.setAttribute("position",new zt(g,A)),S.setAttribute("uv",new zt(v,y)),S.setAttribute("faceIndex",new zt(E,p)),e.push(S),r>Np&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function l7(n,e,t){const i=new Rn(n,e,t);return i.texture.mapping=zm,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ny(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function iae(n,e,t){const i=new Float32Array(Xh),r=new D(0,1,0);return new Fn({name:"SphericalGaussianBlur",defines:{n:Xh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:t6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function c7(){return new Fn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:t6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function u7(){return new Fn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:t6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function t6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rae(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Hu||l===$g,u=l===Ml||l===Gu;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new Z5(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&r(h)){t===null&&(t=new Z5(n));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function sae(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function oae(n,e,t,i){const r={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);for(const m in f.morphAttributes){const A=f.morphAttributes[m];for(let y=0,p=A.length;y<p;y++)e.remove(A[y])}f.removeEventListener("dispose",o),delete r[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const m in f)e.update(f[m],n.ARRAY_BUFFER);const d=h.morphAttributes;for(const m in d){const A=d[m];for(let y=0,p=A.length;y<p;y++)e.update(A[y],n.ARRAY_BUFFER)}}function c(h){const f=[],d=h.index,m=h.attributes.position;let A=0;if(d!==null){const g=d.array;A=d.version;for(let v=0,E=g.length;v<E;v+=3){const S=g[v+0],C=g[v+1],M=g[v+2];f.push(S,C,C,M,M,S)}}else{const g=m.array;A=m.version;for(let v=0,E=g.length/3-1;v<E;v+=3){const S=v+0,C=v+1,M=v+2;f.push(S,C,C,M,M,S)}}const y=new(tQ(f)?e6:N3)(f,1);y.version=A;const p=s.get(h);p&&e.remove(p),s.set(h,y)}function u(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function aae(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}let a,l;function c(f){a=f.type,l=f.bytesPerElement}function u(f,d){n.drawElements(s,d,a,f*l),t.update(d,s,1)}function h(f,d,m){if(m===0)return;let A,y;if(r)A=n,y="drawElementsInstanced";else if(A=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[y](s,d,a,f*l,m),t.update(d,s,m)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function lae(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function cae(n,e){return n[0]-e[0]}function uae(n,e){return Math.abs(e[1])-Math.abs(n[1])}function hae(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Yt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=d!==void 0?d.length:0;let A=s.get(u);if(A===void 0||A.count!==m){let L=function(){R.dispose(),s.delete(u),u.removeEventListener("dispose",L)};A!==void 0&&A.texture.dispose();const g=u.morphAttributes.position!==void 0,v=u.morphAttributes.normal!==void 0,E=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],M=u.morphAttributes.color||[];let b=0;g===!0&&(b=1),v===!0&&(b=2),E===!0&&(b=3);let T=u.attributes.position.count*b,I=1;T>e.maxTextureSize&&(I=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const F=new Float32Array(T*I*4*m),R=new k3(F,T,I,m);R.type=En,R.needsUpdate=!0;const z=b*4;for(let H=0;H<m;H++){const K=S[H],J=C[H],O=M[H],W=T*I*4*H;for(let V=0;V<K.count;V++){const U=V*z;g===!0&&(o.fromBufferAttribute(K,V),F[W+U+0]=o.x,F[W+U+1]=o.y,F[W+U+2]=o.z,F[W+U+3]=0),v===!0&&(o.fromBufferAttribute(J,V),F[W+U+4]=o.x,F[W+U+5]=o.y,F[W+U+6]=o.z,F[W+U+7]=0),E===!0&&(o.fromBufferAttribute(O,V),F[W+U+8]=o.x,F[W+U+9]=o.y,F[W+U+10]=o.z,F[W+U+11]=O.itemSize===4?o.w:1)}}A={count:m,texture:R,size:new Ee(T,I)},s.set(u,A),u.addEventListener("dispose",L)}let y=0;for(let g=0;g<f.length;g++)y+=f[g];const p=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",p),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",A.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",A.size)}else{const d=f===void 0?0:f.length;let m=i[u.id];if(m===void 0||m.length!==d){m=[];for(let v=0;v<d;v++)m[v]=[v,0];i[u.id]=m}for(let v=0;v<d;v++){const E=m[v];E[0]=v,E[1]=f[v]}m.sort(uae);for(let v=0;v<8;v++)v<d&&m[v][1]?(a[v][0]=m[v][0],a[v][1]=m[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(cae);const A=u.morphAttributes.position,y=u.morphAttributes.normal;let p=0;for(let v=0;v<8;v++){const E=a[v],S=E[0],C=E[1];S!==Number.MAX_SAFE_INTEGER&&C?(A&&u.getAttribute("morphTarget"+v)!==A[S]&&u.setAttribute("morphTarget"+v,A[S]),y&&u.getAttribute("morphNormal"+v)!==y[S]&&u.setAttribute("morphNormal"+v,y[S]),r[v]=C,p+=C):(A&&u.hasAttribute("morphTarget"+v)===!0&&u.deleteAttribute("morphTarget"+v),y&&u.hasAttribute("morphNormal"+v)===!0&&u.deleteAttribute("morphNormal"+v),r[v]=0)}const g=u.morphTargetsRelative?1:1-p;h.getUniforms().setValue(n,"morphTargetBaseInfluence",g),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function fae(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const sQ=new In,oQ=new k3,aQ=new $I,lQ=new OA,h7=[],f7=[],d7=new Float32Array(16),p7=new Float32Array(9),m7=new Float32Array(4);function Gm(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=h7[r];if(s===void 0&&(s=new Float32Array(r),h7[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ar(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function vr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function H3(n,e){let t=f7[e];t===void 0&&(t=new Int32Array(e),f7[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function dae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function pae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ar(t,e))return;n.uniform2fv(this.addr,e),vr(t,e)}}function mae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ar(t,e))return;n.uniform3fv(this.addr,e),vr(t,e)}}function gae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ar(t,e))return;n.uniform4fv(this.addr,e),vr(t,e)}}function Aae(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ar(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vr(t,e)}else{if(Ar(t,i))return;m7.set(i),n.uniformMatrix2fv(this.addr,!1,m7),vr(t,i)}}function vae(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ar(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vr(t,e)}else{if(Ar(t,i))return;p7.set(i),n.uniformMatrix3fv(this.addr,!1,p7),vr(t,i)}}function yae(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ar(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vr(t,e)}else{if(Ar(t,i))return;d7.set(i),n.uniformMatrix4fv(this.addr,!1,d7),vr(t,i)}}function xae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _ae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ar(t,e))return;n.uniform2iv(this.addr,e),vr(t,e)}}function Eae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ar(t,e))return;n.uniform3iv(this.addr,e),vr(t,e)}}function wae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ar(t,e))return;n.uniform4iv(this.addr,e),vr(t,e)}}function Sae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Cae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ar(t,e))return;n.uniform2uiv(this.addr,e),vr(t,e)}}function Mae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ar(t,e))return;n.uniform3uiv(this.addr,e),vr(t,e)}}function bae(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ar(t,e))return;n.uniform4uiv(this.addr,e),vr(t,e)}}function Tae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||sQ,r)}function Iae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||aQ,r)}function Bae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||lQ,r)}function Pae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||oQ,r)}function Rae(n){switch(n){case 5126:return dae;case 35664:return pae;case 35665:return mae;case 35666:return gae;case 35674:return Aae;case 35675:return vae;case 35676:return yae;case 5124:case 35670:return xae;case 35667:case 35671:return _ae;case 35668:case 35672:return Eae;case 35669:case 35673:return wae;case 5125:return Sae;case 36294:return Cae;case 36295:return Mae;case 36296:return bae;case 35678:case 36198:case 36298:case 36306:case 35682:return Tae;case 35679:case 36299:case 36307:return Iae;case 35680:case 36300:case 36308:case 36293:return Bae;case 36289:case 36303:case 36311:case 36292:return Pae}}function Dae(n,e){n.uniform1fv(this.addr,e)}function Lae(n,e){const t=Gm(e,this.size,2);n.uniform2fv(this.addr,t)}function Fae(n,e){const t=Gm(e,this.size,3);n.uniform3fv(this.addr,t)}function Oae(n,e){const t=Gm(e,this.size,4);n.uniform4fv(this.addr,t)}function Uae(n,e){const t=Gm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zae(n,e){const t=Gm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function kae(n,e){const t=Gm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Nae(n,e){n.uniform1iv(this.addr,e)}function Gae(n,e){n.uniform2iv(this.addr,e)}function Hae(n,e){n.uniform3iv(this.addr,e)}function Qae(n,e){n.uniform4iv(this.addr,e)}function Vae(n,e){n.uniform1uiv(this.addr,e)}function Wae(n,e){n.uniform2uiv(this.addr,e)}function jae(n,e){n.uniform3uiv(this.addr,e)}function Xae(n,e){n.uniform4uiv(this.addr,e)}function Yae(n,e,t){const i=this.cache,r=e.length,s=H3(t,r);Ar(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||sQ,s[o])}function qae(n,e,t){const i=this.cache,r=e.length,s=H3(t,r);Ar(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||aQ,s[o])}function Kae(n,e,t){const i=this.cache,r=e.length,s=H3(t,r);Ar(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||lQ,s[o])}function Jae(n,e,t){const i=this.cache,r=e.length,s=H3(t,r);Ar(i,s)||(n.uniform1iv(this.addr,s),vr(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||oQ,s[o])}function Zae(n){switch(n){case 5126:return Dae;case 35664:return Lae;case 35665:return Fae;case 35666:return Oae;case 35674:return Uae;case 35675:return zae;case 35676:return kae;case 5124:case 35670:return Nae;case 35667:case 35671:return Gae;case 35668:case 35672:return Hae;case 35669:case 35673:return Qae;case 5125:return Vae;case 36294:return Wae;case 36295:return jae;case 36296:return Xae;case 35678:case 36198:case 36298:case 36306:case 35682:return Yae;case 35679:case 36299:case 36307:return qae;case 35680:case 36300:case 36308:case 36293:return Kae;case 36289:case 36303:case 36311:case 36292:return Jae}}class $ae{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Rae(t.type)}}class ele{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Zae(t.type)}}class tle{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const eC=/(\w+)(\])?(\[|\.)?/g;function g7(n,e){n.seq.push(e),n.map[e.id]=e}function nle(n,e,t){const i=n.name,r=i.length;for(eC.lastIndex=0;;){const s=eC.exec(i),o=eC.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){g7(t,c===void 0?new $ae(a,n,e):new ele(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new tle(a),g7(t,h)),t=h}}}class Ux{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);nle(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function A7(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let ile=0;function rle(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function sle(n){switch(n){case Ks:return["Linear","( value )"];case un:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function v7(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+rle(n.getShaderSource(e),o)}else return r}function ole(n,e){const t=sle(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function ale(n,e){let t;switch(e){case BH:t="Linear";break;case PH:t="Reinhard";break;case RH:t="OptimizedCineon";break;case HI:t="ACESFilmic";break;case DH:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lle(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Q1).join(`
`)}function cle(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function ule(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Q1(n){return n!==""}function y7(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function x7(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hle=/^[ \t]*#include +<([\w\d./]+)>/gm;function $5(n){return n.replace(hle,dle)}const fle=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function dle(n,e){let t=Xt[e];if(t===void 0){const i=fle.get(e);if(i!==void 0)t=Xt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return $5(t)}const ple=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _7(n){return n.replace(ple,mle)}function mle(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function E7(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gle(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===B3?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ug?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ta&&(e="SHADOWMAP_TYPE_VSM"),e}function Ale(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ml:case Gu:e="ENVMAP_TYPE_CUBE";break;case zm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vle(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Gu:e="ENVMAP_MODE_REFRACTION";break}return e}function yle(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case LA:e="ENVMAP_BLENDING_MULTIPLY";break;case TH:e="ENVMAP_BLENDING_MIX";break;case IH:e="ENVMAP_BLENDING_ADD";break}return e}function xle(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function _le(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=gle(t),c=Ale(t),u=vle(t),h=yle(t),f=xle(t),d=t.isWebGL2?"":lle(t),m=cle(s),A=r.createProgram();let y,p,g=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Q1).join(`
`),y.length>0&&(y+=`
`),p=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Q1).join(`
`),p.length>0&&(p+=`
`)):(y=[E7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Q1).join(`
`),p=[d,E7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==oa?"#define TONE_MAPPING":"",t.toneMapping!==oa?Xt.tonemapping_pars_fragment:"",t.toneMapping!==oa?ale("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xt.colorspace_pars_fragment,ole("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Q1).join(`
`)),o=$5(o),o=y7(o,t),o=x7(o,t),a=$5(a),a=y7(a,t),a=x7(a,t),o=_7(o),a=_7(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,p=["#define varying in",t.glslVersion===K5?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===K5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const v=g+y+o,E=g+p+a,S=A7(r,r.VERTEX_SHADER,v),C=A7(r,r.FRAGMENT_SHADER,E);if(r.attachShader(A,S),r.attachShader(A,C),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A),n.debug.checkShaderErrors){const T=r.getProgramInfoLog(A).trim(),I=r.getShaderInfoLog(S).trim(),F=r.getShaderInfoLog(C).trim();let R=!0,z=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(R=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,S,C);else{const L=v7(r,S,"vertex"),H=v7(r,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+L+`
`+H)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(I===""||F==="")&&(z=!1);z&&(this.diagnostics={runnable:R,programLog:T,vertexShader:{log:I,prefix:y},fragmentShader:{log:F,prefix:p}})}r.deleteShader(S),r.deleteShader(C);let M;this.getUniforms=function(){return M===void 0&&(M=new Ux(r,A)),M};let b;return this.getAttributes=function(){return b===void 0&&(b=ule(r,A)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ile++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=S,this.fragmentShader=C,this}let Ele=0;class wle{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Sle(e),t.set(e,i)),i}}class Sle{constructor(e){this.id=Ele++,this.code=e,this.usedTimes=0}}function Cle(n,e,t,i,r,s,o){const a=new df,l=new wle,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.vertexTextures;let d=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(T){return T===0?"uv":`uv${T}`}function y(T,I,F,R,z){const L=R.fog,H=z.geometry,K=T.isMeshStandardMaterial?R.environment:null,J=(T.isMeshStandardMaterial?t:e).get(T.envMap||K),O=J&&J.mapping===zm?J.image.height:null,W=m[T.type];T.precision!==null&&(d=r.getMaxPrecision(T.precision),d!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",d,"instead."));const V=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,U=V!==void 0?V.length:0;let Y=0;H.morphAttributes.position!==void 0&&(Y=1),H.morphAttributes.normal!==void 0&&(Y=2),H.morphAttributes.color!==void 0&&(Y=3);let $,N,Q,j;if(W){const Tt=Pa[W];$=Tt.vertexShader,N=Tt.fragmentShader}else $=T.vertexShader,N=T.fragmentShader,l.update(T),Q=l.getVertexShaderID(T),j=l.getFragmentShaderID(T);const X=n.getRenderTarget(),se=z.isInstancedMesh===!0,ve=!!T.map,de=!!T.matcap,he=!!J,te=!!T.aoMap,xe=!!T.lightMap,ce=!!T.bumpMap,me=!!T.normalMap,ye=!!T.displacementMap,Me=!!T.emissiveMap,oe=!!T.metalnessMap,ne=!!T.roughnessMap,we=T.anisotropy>0,be=T.clearcoat>0,st=T.iridescence>0,re=T.sheen>0,Z=T.transmission>0,ge=we&&!!T.anisotropyMap,Fe=be&&!!T.clearcoatMap,Ce=be&&!!T.clearcoatNormalMap,Le=be&&!!T.clearcoatRoughnessMap,Qe=st&&!!T.iridescenceMap,He=st&&!!T.iridescenceThicknessMap,De=re&&!!T.sheenColorMap,at=re&&!!T.sheenRoughnessMap,tt=!!T.specularMap,et=!!T.specularColorMap,le=!!T.specularIntensityMap,Re=Z&&!!T.transmissionMap,qe=Z&&!!T.thicknessMap,it=!!T.gradientMap,Ae=!!T.alphaMap,_e=T.alphaTest>0,Ie=!!T.alphaHash,rt=!!T.extensions,nt=!!H.attributes.uv1,pt=!!H.attributes.uv2,Pt=!!H.attributes.uv3;return{isWebGL2:u,shaderID:W,shaderType:T.type,shaderName:T.name,vertexShader:$,fragmentShader:N,defines:T.defines,customVertexShaderID:Q,customFragmentShaderID:j,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:d,instancing:se,instancingColor:se&&z.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:X===null?n.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:Ks,map:ve,matcap:de,envMap:he,envMapMode:he&&J.mapping,envMapCubeUVHeight:O,aoMap:te,lightMap:xe,bumpMap:ce,normalMap:me,displacementMap:f&&ye,emissiveMap:Me,normalMapObjectSpace:me&&T.normalMapType===QH,normalMapTangentSpace:me&&T.normalMapType===eh,metalnessMap:oe,roughnessMap:ne,anisotropy:we,anisotropyMap:ge,clearcoat:be,clearcoatMap:Fe,clearcoatNormalMap:Ce,clearcoatRoughnessMap:Le,iridescence:st,iridescenceMap:Qe,iridescenceThicknessMap:He,sheen:re,sheenColorMap:De,sheenRoughnessMap:at,specularMap:tt,specularColorMap:et,specularIntensityMap:le,transmission:Z,transmissionMap:Re,thicknessMap:qe,gradientMap:it,opaque:T.transparent===!1&&T.blending===bu,alphaMap:Ae,alphaTest:_e,alphaHash:Ie,combine:T.combine,mapUv:ve&&A(T.map.channel),aoMapUv:te&&A(T.aoMap.channel),lightMapUv:xe&&A(T.lightMap.channel),bumpMapUv:ce&&A(T.bumpMap.channel),normalMapUv:me&&A(T.normalMap.channel),displacementMapUv:ye&&A(T.displacementMap.channel),emissiveMapUv:Me&&A(T.emissiveMap.channel),metalnessMapUv:oe&&A(T.metalnessMap.channel),roughnessMapUv:ne&&A(T.roughnessMap.channel),anisotropyMapUv:ge&&A(T.anisotropyMap.channel),clearcoatMapUv:Fe&&A(T.clearcoatMap.channel),clearcoatNormalMapUv:Ce&&A(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&A(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Qe&&A(T.iridescenceMap.channel),iridescenceThicknessMapUv:He&&A(T.iridescenceThicknessMap.channel),sheenColorMapUv:De&&A(T.sheenColorMap.channel),sheenRoughnessMapUv:at&&A(T.sheenRoughnessMap.channel),specularMapUv:tt&&A(T.specularMap.channel),specularColorMapUv:et&&A(T.specularColorMap.channel),specularIntensityMapUv:le&&A(T.specularIntensityMap.channel),transmissionMapUv:Re&&A(T.transmissionMap.channel),thicknessMapUv:qe&&A(T.thicknessMap.channel),alphaMapUv:Ae&&A(T.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(me||we),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUv1s:nt,vertexUv2s:pt,vertexUv3s:Pt,pointsUvs:z.isPoints===!0&&!!H.attributes.uv&&(ve||Ae),fog:!!L,useFog:T.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:z.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:Y,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:oa,useLegacyLights:n.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Vn,flipSided:T.side===Ni,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:rt&&T.extensions.derivatives===!0,extensionFragDepth:rt&&T.extensions.fragDepth===!0,extensionDrawBuffers:rt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:rt&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function p(T){const I=[];if(T.shaderID?I.push(T.shaderID):(I.push(T.customVertexShaderID),I.push(T.customFragmentShaderID)),T.defines!==void 0)for(const F in T.defines)I.push(F),I.push(T.defines[F]);return T.isRawShaderMaterial===!1&&(g(I,T),v(I,T),I.push(n.outputColorSpace)),I.push(T.customProgramCacheKey),I.join()}function g(T,I){T.push(I.precision),T.push(I.outputColorSpace),T.push(I.envMapMode),T.push(I.envMapCubeUVHeight),T.push(I.mapUv),T.push(I.alphaMapUv),T.push(I.lightMapUv),T.push(I.aoMapUv),T.push(I.bumpMapUv),T.push(I.normalMapUv),T.push(I.displacementMapUv),T.push(I.emissiveMapUv),T.push(I.metalnessMapUv),T.push(I.roughnessMapUv),T.push(I.anisotropyMapUv),T.push(I.clearcoatMapUv),T.push(I.clearcoatNormalMapUv),T.push(I.clearcoatRoughnessMapUv),T.push(I.iridescenceMapUv),T.push(I.iridescenceThicknessMapUv),T.push(I.sheenColorMapUv),T.push(I.sheenRoughnessMapUv),T.push(I.specularMapUv),T.push(I.specularColorMapUv),T.push(I.specularIntensityMapUv),T.push(I.transmissionMapUv),T.push(I.thicknessMapUv),T.push(I.combine),T.push(I.fogExp2),T.push(I.sizeAttenuation),T.push(I.morphTargetsCount),T.push(I.morphAttributeCount),T.push(I.numDirLights),T.push(I.numPointLights),T.push(I.numSpotLights),T.push(I.numSpotLightMaps),T.push(I.numHemiLights),T.push(I.numRectAreaLights),T.push(I.numDirLightShadows),T.push(I.numPointLightShadows),T.push(I.numSpotLightShadows),T.push(I.numSpotLightShadowsWithMaps),T.push(I.shadowMapType),T.push(I.toneMapping),T.push(I.numClippingPlanes),T.push(I.numClipIntersection),T.push(I.depthPacking)}function v(T,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),T.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),T.push(a.mask)}function E(T){const I=m[T.type];let F;if(I){const R=Pa[I];F=ca.clone(R.uniforms)}else F=T.uniforms;return F}function S(T,I){let F;for(let R=0,z=c.length;R<z;R++){const L=c[R];if(L.cacheKey===I){F=L,++F.usedTimes;break}}return F===void 0&&(F=new _le(n,I,T,s),c.push(F)),F}function C(T){if(--T.usedTimes===0){const I=c.indexOf(T);c[I]=c[c.length-1],c.pop(),T.destroy()}}function M(T){l.remove(T)}function b(){l.dispose()}return{getParameters:y,getProgramCacheKey:p,getUniforms:E,acquireProgram:S,releaseProgram:C,releaseShaderCache:M,programs:c,dispose:b}}function Mle(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function ble(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function w7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function S7(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,f,d,m,A,y){let p=n[e];return p===void 0?(p={id:h.id,object:h,geometry:f,material:d,groupOrder:m,renderOrder:h.renderOrder,z:A,group:y},n[e]=p):(p.id=h.id,p.object=h,p.geometry=f,p.material=d,p.groupOrder=m,p.renderOrder=h.renderOrder,p.z=A,p.group=y),e++,p}function a(h,f,d,m,A,y){const p=o(h,f,d,m,A,y);d.transmission>0?i.push(p):d.transparent===!0?r.push(p):t.push(p)}function l(h,f,d,m,A,y){const p=o(h,f,d,m,A,y);d.transmission>0?i.unshift(p):d.transparent===!0?r.unshift(p):t.unshift(p)}function c(h,f){t.length>1&&t.sort(h||ble),i.length>1&&i.sort(f||w7),r.length>1&&r.sort(f||w7)}function u(){for(let h=e,f=n.length;h<f;h++){const d=n[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Tle(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new S7,n.set(i,[o])):r>=s.length?(o=new S7,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ile(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new D,color:new We};break;case"SpotLight":t={position:new D,direction:new D,color:new We,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new D,color:new We,distance:0,decay:0};break;case"HemisphereLight":t={direction:new D,skyColor:new We,groundColor:new We};break;case"RectAreaLight":t={color:new We,position:new D,halfWidth:new D,halfHeight:new D};break}return n[e.id]=t,t}}}function Ble(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Ple=0;function Rle(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Dle(n,e){const t=new Ile,i=Ble(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new D);const s=new D,o=new Oe,a=new Oe;function l(u,h){let f=0,d=0,m=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let A=0,y=0,p=0,g=0,v=0,E=0,S=0,C=0,M=0,b=0;u.sort(Rle);const T=h===!0?Math.PI:1;for(let F=0,R=u.length;F<R;F++){const z=u[F],L=z.color,H=z.intensity,K=z.distance,J=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)f+=L.r*H*T,d+=L.g*H*T,m+=L.b*H*T;else if(z.isLightProbe)for(let O=0;O<9;O++)r.probe[O].addScaledVector(z.sh.coefficients[O],H);else if(z.isDirectionalLight){const O=t.get(z);if(O.color.copy(z.color).multiplyScalar(z.intensity*T),z.castShadow){const W=z.shadow,V=i.get(z);V.shadowBias=W.bias,V.shadowNormalBias=W.normalBias,V.shadowRadius=W.radius,V.shadowMapSize=W.mapSize,r.directionalShadow[A]=V,r.directionalShadowMap[A]=J,r.directionalShadowMatrix[A]=z.shadow.matrix,E++}r.directional[A]=O,A++}else if(z.isSpotLight){const O=t.get(z);O.position.setFromMatrixPosition(z.matrixWorld),O.color.copy(L).multiplyScalar(H*T),O.distance=K,O.coneCos=Math.cos(z.angle),O.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),O.decay=z.decay,r.spot[p]=O;const W=z.shadow;if(z.map&&(r.spotLightMap[M]=z.map,M++,W.updateMatrices(z),z.castShadow&&b++),r.spotLightMatrix[p]=W.matrix,z.castShadow){const V=i.get(z);V.shadowBias=W.bias,V.shadowNormalBias=W.normalBias,V.shadowRadius=W.radius,V.shadowMapSize=W.mapSize,r.spotShadow[p]=V,r.spotShadowMap[p]=J,C++}p++}else if(z.isRectAreaLight){const O=t.get(z);O.color.copy(L).multiplyScalar(H),O.halfWidth.set(z.width*.5,0,0),O.halfHeight.set(0,z.height*.5,0),r.rectArea[g]=O,g++}else if(z.isPointLight){const O=t.get(z);if(O.color.copy(z.color).multiplyScalar(z.intensity*T),O.distance=z.distance,O.decay=z.decay,z.castShadow){const W=z.shadow,V=i.get(z);V.shadowBias=W.bias,V.shadowNormalBias=W.normalBias,V.shadowRadius=W.radius,V.shadowMapSize=W.mapSize,V.shadowCameraNear=W.camera.near,V.shadowCameraFar=W.camera.far,r.pointShadow[y]=V,r.pointShadowMap[y]=J,r.pointShadowMatrix[y]=z.shadow.matrix,S++}r.point[y]=O,y++}else if(z.isHemisphereLight){const O=t.get(z);O.skyColor.copy(z.color).multiplyScalar(H*T),O.groundColor.copy(z.groundColor).multiplyScalar(H*T),r.hemi[v]=O,v++}}g>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=gt.LTC_FLOAT_1,r.rectAreaLTC2=gt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=gt.LTC_HALF_1,r.rectAreaLTC2=gt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=d,r.ambient[2]=m;const I=r.hash;(I.directionalLength!==A||I.pointLength!==y||I.spotLength!==p||I.rectAreaLength!==g||I.hemiLength!==v||I.numDirectionalShadows!==E||I.numPointShadows!==S||I.numSpotShadows!==C||I.numSpotMaps!==M)&&(r.directional.length=A,r.spot.length=p,r.rectArea.length=g,r.point.length=y,r.hemi.length=v,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=C+M-b,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=b,I.directionalLength=A,I.pointLength=y,I.spotLength=p,I.rectAreaLength=g,I.hemiLength=v,I.numDirectionalShadows=E,I.numPointShadows=S,I.numSpotShadows=C,I.numSpotMaps=M,r.version=Ple++)}function c(u,h){let f=0,d=0,m=0,A=0,y=0;const p=h.matrixWorldInverse;for(let g=0,v=u.length;g<v;g++){const E=u[g];if(E.isDirectionalLight){const S=r.directional[f];S.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(p),f++}else if(E.isSpotLight){const S=r.spot[m];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(p),S.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(p),m++}else if(E.isRectAreaLight){const S=r.rectArea[A];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(p),a.identity(),o.copy(E.matrixWorld),o.premultiply(p),a.extractRotation(o),S.halfWidth.set(E.width*.5,0,0),S.halfHeight.set(0,E.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),A++}else if(E.isPointLight){const S=r.point[d];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(p),d++}else if(E.isHemisphereLight){const S=r.hemi[y];S.direction.setFromMatrixPosition(E.matrixWorld),S.direction.transformDirection(p),y++}}}return{setup:l,setupView:c,state:r}}function C7(n,e){const t=new Dle(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){t.setup(i,h)}function c(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Lle(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new C7(n,e),t.set(s,[l])):o>=a.length?(l=new C7(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class UA extends Ji{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=HH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Q3 extends Ji{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Fle=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ole=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ule(n,e,t){let i=new Nm;const r=new Ee,s=new Ee,o=new Yt,a=new UA({depthPacking:z3}),l=new Q3,c={},u=t.maxTextureSize,h={[Ss]:Ni,[Ni]:Ss,[Vn]:Vn},f=new Fn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ee},radius:{value:4}},vertexShader:Fle,fragmentShader:Ole}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const m=new It;m.setAttribute("position",new zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new ct(m,f),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=B3;let p=this.type;this.render=function(S,C,M){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||S.length===0)return;const b=n.getRenderTarget(),T=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),F=n.state;F.setBlending(sa),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const R=p!==Ta&&this.type===Ta,z=p===Ta&&this.type!==Ta;for(let L=0,H=S.length;L<H;L++){const K=S[L],J=K.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;r.copy(J.mapSize);const O=J.getFrameExtents();if(r.multiply(O),s.copy(J.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/O.x),r.x=s.x*O.x,J.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/O.y),r.y=s.y*O.y,J.mapSize.y=s.y)),J.map===null||R===!0||z===!0){const V=this.type!==Ta?{minFilter:rn,magFilter:rn}:{};J.map!==null&&J.map.dispose(),J.map=new Rn(r.x,r.y,V),J.map.texture.name=K.name+".shadowMap",J.camera.updateProjectionMatrix()}n.setRenderTarget(J.map),n.clear();const W=J.getViewportCount();for(let V=0;V<W;V++){const U=J.getViewport(V);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),F.viewport(o),J.updateMatrices(K,V),i=J.getFrustum(),E(C,M,J.camera,K,this.type)}J.isPointLightShadow!==!0&&this.type===Ta&&g(J,M),J.needsUpdate=!1}p=this.type,y.needsUpdate=!1,n.setRenderTarget(b,T,I)};function g(S,C){const M=e.update(A);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,d.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Rn(r.x,r.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,M,f,A,null),d.uniforms.shadow_pass.value=S.mapPass.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,M,d,A,null)}function v(S,C,M,b){let T=null;const I=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(I!==void 0)T=I;else if(T=M.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const F=T.uuid,R=C.uuid;let z=c[F];z===void 0&&(z={},c[F]=z);let L=z[R];L===void 0&&(L=T.clone(),z[R]=L),T=L}if(T.visible=C.visible,T.wireframe=C.wireframe,b===Ta?T.side=C.shadowSide!==null?C.shadowSide:C.side:T.side=C.shadowSide!==null?C.shadowSide:h[C.side],T.alphaMap=C.alphaMap,T.alphaTest=C.alphaTest,T.map=C.map,T.clipShadows=C.clipShadows,T.clippingPlanes=C.clippingPlanes,T.clipIntersection=C.clipIntersection,T.displacementMap=C.displacementMap,T.displacementScale=C.displacementScale,T.displacementBias=C.displacementBias,T.wireframeLinewidth=C.wireframeLinewidth,T.linewidth=C.linewidth,M.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const F=n.properties.get(T);F.light=M}return T}function E(S,C,M,b,T){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&T===Ta)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,S.matrixWorld);const R=e.update(S),z=S.material;if(Array.isArray(z)){const L=R.groups;for(let H=0,K=L.length;H<K;H++){const J=L[H],O=z[J.materialIndex];if(O&&O.visible){const W=v(S,O,b,T);n.renderBufferDirect(M,null,R,W,S,J)}}}else if(z.visible){const L=v(S,z,b,T);n.renderBufferDirect(M,null,R,L,S,null)}}const F=S.children;for(let R=0,z=F.length;R<z;R++)E(F[R],C,M,b,T)}}function zle(n,e,t){const i=t.isWebGL2;function r(){let Ae=!1;const _e=new Yt;let Ie=null;const rt=new Yt(0,0,0,0);return{setMask:function(nt){Ie!==nt&&!Ae&&(n.colorMask(nt,nt,nt,nt),Ie=nt)},setLocked:function(nt){Ae=nt},setClear:function(nt,pt,Pt,Qt,Tt){Tt===!0&&(nt*=Qt,pt*=Qt,Pt*=Qt),_e.set(nt,pt,Pt,Qt),rt.equals(_e)===!1&&(n.clearColor(nt,pt,Pt,Qt),rt.copy(_e))},reset:function(){Ae=!1,Ie=null,rt.set(-1,0,0,0)}}}function s(){let Ae=!1,_e=null,Ie=null,rt=null;return{setTest:function(nt){nt?X(n.DEPTH_TEST):se(n.DEPTH_TEST)},setMask:function(nt){_e!==nt&&!Ae&&(n.depthMask(nt),_e=nt)},setFunc:function(nt){if(Ie!==nt){switch(nt){case _H:n.depthFunc(n.NEVER);break;case EH:n.depthFunc(n.ALWAYS);break;case wH:n.depthFunc(n.LESS);break;case b_:n.depthFunc(n.LEQUAL);break;case SH:n.depthFunc(n.EQUAL);break;case CH:n.depthFunc(n.GEQUAL);break;case MH:n.depthFunc(n.GREATER);break;case bH:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ie=nt}},setLocked:function(nt){Ae=nt},setClear:function(nt){rt!==nt&&(n.clearDepth(nt),rt=nt)},reset:function(){Ae=!1,_e=null,Ie=null,rt=null}}}function o(){let Ae=!1,_e=null,Ie=null,rt=null,nt=null,pt=null,Pt=null,Qt=null,Tt=null;return{setTest:function(Lt){Ae||(Lt?X(n.STENCIL_TEST):se(n.STENCIL_TEST))},setMask:function(Lt){_e!==Lt&&!Ae&&(n.stencilMask(Lt),_e=Lt)},setFunc:function(Lt,bn,Tn){(Ie!==Lt||rt!==bn||nt!==Tn)&&(n.stencilFunc(Lt,bn,Tn),Ie=Lt,rt=bn,nt=Tn)},setOp:function(Lt,bn,Tn){(pt!==Lt||Pt!==bn||Qt!==Tn)&&(n.stencilOp(Lt,bn,Tn),pt=Lt,Pt=bn,Qt=Tn)},setLocked:function(Lt){Ae=Lt},setClear:function(Lt){Tt!==Lt&&(n.clearStencil(Lt),Tt=Lt)},reset:function(){Ae=!1,_e=null,Ie=null,rt=null,nt=null,pt=null,Pt=null,Qt=null,Tt=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,h=new WeakMap;let f={},d={},m=new WeakMap,A=[],y=null,p=!1,g=null,v=null,E=null,S=null,C=null,M=null,b=null,T=!1,I=null,F=null,R=null,z=null,L=null;const H=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,J=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(O)[1]),K=J>=1):O.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),K=J>=2);let W=null,V={};const U=n.getParameter(n.SCISSOR_BOX),Y=n.getParameter(n.VIEWPORT),$=new Yt().fromArray(U),N=new Yt().fromArray(Y);function Q(Ae,_e,Ie,rt){const nt=new Uint8Array(4),pt=n.createTexture();n.bindTexture(Ae,pt),n.texParameteri(Ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Pt=0;Pt<Ie;Pt++)i&&(Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY)?n.texImage3D(_e,0,n.RGBA,1,1,rt,0,n.RGBA,n.UNSIGNED_BYTE,nt):n.texImage2D(_e+Pt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,nt);return pt}const j={};j[n.TEXTURE_2D]=Q(n.TEXTURE_2D,n.TEXTURE_2D,1),j[n.TEXTURE_CUBE_MAP]=Q(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(j[n.TEXTURE_2D_ARRAY]=Q(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),j[n.TEXTURE_3D]=Q(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),X(n.DEPTH_TEST),l.setFunc(b_),ye(!1),Me(b5),X(n.CULL_FACE),ce(sa);function X(Ae){f[Ae]!==!0&&(n.enable(Ae),f[Ae]=!0)}function se(Ae){f[Ae]!==!1&&(n.disable(Ae),f[Ae]=!1)}function ve(Ae,_e){return d[Ae]!==_e?(n.bindFramebuffer(Ae,_e),d[Ae]=_e,i&&(Ae===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=_e),Ae===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=_e)),!0):!1}function de(Ae,_e){let Ie=A,rt=!1;if(Ae)if(Ie=m.get(_e),Ie===void 0&&(Ie=[],m.set(_e,Ie)),Ae.isWebGLMultipleRenderTargets){const nt=Ae.texture;if(Ie.length!==nt.length||Ie[0]!==n.COLOR_ATTACHMENT0){for(let pt=0,Pt=nt.length;pt<Pt;pt++)Ie[pt]=n.COLOR_ATTACHMENT0+pt;Ie.length=nt.length,rt=!0}}else Ie[0]!==n.COLOR_ATTACHMENT0&&(Ie[0]=n.COLOR_ATTACHMENT0,rt=!0);else Ie[0]!==n.BACK&&(Ie[0]=n.BACK,rt=!0);rt&&(t.isWebGL2?n.drawBuffers(Ie):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ie))}function he(Ae){return y!==Ae?(n.useProgram(Ae),y=Ae,!0):!1}const te={[jh]:n.FUNC_ADD,[hH]:n.FUNC_SUBTRACT,[fH]:n.FUNC_REVERSE_SUBTRACT};if(i)te[B5]=n.MIN,te[P5]=n.MAX;else{const Ae=e.get("EXT_blend_minmax");Ae!==null&&(te[B5]=Ae.MIN_EXT,te[P5]=Ae.MAX_EXT)}const xe={[dH]:n.ZERO,[R3]:n.ONE,[pH]:n.SRC_COLOR,[D3]:n.SRC_ALPHA,[xH]:n.SRC_ALPHA_SATURATE,[vH]:n.DST_COLOR,[gH]:n.DST_ALPHA,[mH]:n.ONE_MINUS_SRC_COLOR,[GI]:n.ONE_MINUS_SRC_ALPHA,[yH]:n.ONE_MINUS_DST_COLOR,[AH]:n.ONE_MINUS_DST_ALPHA};function ce(Ae,_e,Ie,rt,nt,pt,Pt,Qt){if(Ae===sa){p===!0&&(se(n.BLEND),p=!1);return}if(p===!1&&(X(n.BLEND),p=!0),Ae!==P3){if(Ae!==g||Qt!==T){if((v!==jh||C!==jh)&&(n.blendEquation(n.FUNC_ADD),v=jh,C=jh),Qt)switch(Ae){case bu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case M_:n.blendFunc(n.ONE,n.ONE);break;case T5:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case I5:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case bu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case M_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case T5:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case I5:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}E=null,S=null,M=null,b=null,g=Ae,T=Qt}return}nt=nt||_e,pt=pt||Ie,Pt=Pt||rt,(_e!==v||nt!==C)&&(n.blendEquationSeparate(te[_e],te[nt]),v=_e,C=nt),(Ie!==E||rt!==S||pt!==M||Pt!==b)&&(n.blendFuncSeparate(xe[Ie],xe[rt],xe[pt],xe[Pt]),E=Ie,S=rt,M=pt,b=Pt),g=Ae,T=!1}function me(Ae,_e){Ae.side===Vn?se(n.CULL_FACE):X(n.CULL_FACE);let Ie=Ae.side===Ni;_e&&(Ie=!Ie),ye(Ie),Ae.blending===bu&&Ae.transparent===!1?ce(sa):ce(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.premultipliedAlpha),l.setFunc(Ae.depthFunc),l.setTest(Ae.depthTest),l.setMask(Ae.depthWrite),a.setMask(Ae.colorWrite);const rt=Ae.stencilWrite;c.setTest(rt),rt&&(c.setMask(Ae.stencilWriteMask),c.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),c.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),ne(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?X(n.SAMPLE_ALPHA_TO_COVERAGE):se(n.SAMPLE_ALPHA_TO_COVERAGE)}function ye(Ae){I!==Ae&&(Ae?n.frontFace(n.CW):n.frontFace(n.CCW),I=Ae)}function Me(Ae){Ae!==lH?(X(n.CULL_FACE),Ae!==F&&(Ae===b5?n.cullFace(n.BACK):Ae===cH?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):se(n.CULL_FACE),F=Ae}function oe(Ae){Ae!==R&&(K&&n.lineWidth(Ae),R=Ae)}function ne(Ae,_e,Ie){Ae?(X(n.POLYGON_OFFSET_FILL),(z!==_e||L!==Ie)&&(n.polygonOffset(_e,Ie),z=_e,L=Ie)):se(n.POLYGON_OFFSET_FILL)}function we(Ae){Ae?X(n.SCISSOR_TEST):se(n.SCISSOR_TEST)}function be(Ae){Ae===void 0&&(Ae=n.TEXTURE0+H-1),W!==Ae&&(n.activeTexture(Ae),W=Ae)}function st(Ae,_e,Ie){Ie===void 0&&(W===null?Ie=n.TEXTURE0+H-1:Ie=W);let rt=V[Ie];rt===void 0&&(rt={type:void 0,texture:void 0},V[Ie]=rt),(rt.type!==Ae||rt.texture!==_e)&&(W!==Ie&&(n.activeTexture(Ie),W=Ie),n.bindTexture(Ae,_e||j[Ae]),rt.type=Ae,rt.texture=_e)}function re(){const Ae=V[W];Ae!==void 0&&Ae.type!==void 0&&(n.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function Z(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ge(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ce(){try{n.texSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Le(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Qe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function He(){try{n.texStorage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function De(){try{n.texStorage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function at(){try{n.texImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function tt(){try{n.texImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function et(Ae){$.equals(Ae)===!1&&(n.scissor(Ae.x,Ae.y,Ae.z,Ae.w),$.copy(Ae))}function le(Ae){N.equals(Ae)===!1&&(n.viewport(Ae.x,Ae.y,Ae.z,Ae.w),N.copy(Ae))}function Re(Ae,_e){let Ie=h.get(_e);Ie===void 0&&(Ie=new WeakMap,h.set(_e,Ie));let rt=Ie.get(Ae);rt===void 0&&(rt=n.getUniformBlockIndex(_e,Ae.name),Ie.set(Ae,rt))}function qe(Ae,_e){const rt=h.get(_e).get(Ae);u.get(_e)!==rt&&(n.uniformBlockBinding(_e,rt,Ae.__bindingPointIndex),u.set(_e,rt))}function it(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},W=null,V={},d={},m=new WeakMap,A=[],y=null,p=!1,g=null,v=null,E=null,S=null,C=null,M=null,b=null,T=!1,I=null,F=null,R=null,z=null,L=null,$.set(0,0,n.canvas.width,n.canvas.height),N.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:X,disable:se,bindFramebuffer:ve,drawBuffers:de,useProgram:he,setBlending:ce,setMaterial:me,setFlipSided:ye,setCullFace:Me,setLineWidth:oe,setPolygonOffset:ne,setScissorTest:we,activeTexture:be,bindTexture:st,unbindTexture:re,compressedTexImage2D:Z,compressedTexImage3D:ge,texImage2D:at,texImage3D:tt,updateUBOMapping:Re,uniformBlockBinding:qe,texStorage2D:He,texStorage3D:De,texSubImage2D:Fe,texSubImage3D:Ce,compressedTexSubImage2D:Le,compressedTexSubImage3D:Qe,scissor:et,viewport:le,reset:it}}function kle(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let A;const y=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(re,Z){return p?new OffscreenCanvas(re,Z):oA("canvas")}function v(re,Z,ge,Fe){let Ce=1;if((re.width>Fe||re.height>Fe)&&(Ce=Fe/Math.max(re.width,re.height)),Ce<1||Z===!0)if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap){const Le=Z?F_:Math.floor,Qe=Le(Ce*re.width),He=Le(Ce*re.height);A===void 0&&(A=g(Qe,He));const De=ge?g(Qe,He):A;return De.width=Qe,De.height=He,De.getContext("2d").drawImage(re,0,0,Qe,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+re.width+"x"+re.height+") to ("+Qe+"x"+He+")."),De}else return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+re.width+"x"+re.height+")."),re;return re}function E(re){return J5(re.width)&&J5(re.height)}function S(re){return a?!1:re.wrapS!==qn||re.wrapT!==qn||re.minFilter!==rn&&re.minFilter!==Ut}function C(re,Z){return re.generateMipmaps&&Z&&re.minFilter!==rn&&re.minFilter!==Ut}function M(re){n.generateMipmap(re)}function b(re,Z,ge,Fe,Ce=!1){if(a===!1)return Z;if(re!==null){if(n[re]!==void 0)return n[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let Le=Z;return Z===n.RED&&(ge===n.FLOAT&&(Le=n.R32F),ge===n.HALF_FLOAT&&(Le=n.R16F),ge===n.UNSIGNED_BYTE&&(Le=n.R8)),Z===n.RG&&(ge===n.FLOAT&&(Le=n.RG32F),ge===n.HALF_FLOAT&&(Le=n.RG16F),ge===n.UNSIGNED_BYTE&&(Le=n.RG8)),Z===n.RGBA&&(ge===n.FLOAT&&(Le=n.RGBA32F),ge===n.HALF_FLOAT&&(Le=n.RGBA16F),ge===n.UNSIGNED_BYTE&&(Le=Fe===un&&Ce===!1?n.SRGB8_ALPHA8:n.RGBA8),ge===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),ge===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)),(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function T(re,Z,ge){return C(re,ge)===!0||re.isFramebufferTexture&&re.minFilter!==rn&&re.minFilter!==Ut?Math.log2(Math.max(Z.width,Z.height))+1:re.mipmaps!==void 0&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?Z.mipmaps.length:1}function I(re){return re===rn||re===eA||re===Kp?n.NEAREST:n.LINEAR}function F(re){const Z=re.target;Z.removeEventListener("dispose",F),z(Z),Z.isVideoTexture&&m.delete(Z)}function R(re){const Z=re.target;Z.removeEventListener("dispose",R),H(Z)}function z(re){const Z=i.get(re);if(Z.__webglInit===void 0)return;const ge=re.source,Fe=y.get(ge);if(Fe){const Ce=Fe[Z.__cacheKey];Ce.usedTimes--,Ce.usedTimes===0&&L(re),Object.keys(Fe).length===0&&y.delete(ge)}i.remove(re)}function L(re){const Z=i.get(re);n.deleteTexture(Z.__webglTexture);const ge=re.source,Fe=y.get(ge);delete Fe[Z.__cacheKey],o.memory.textures--}function H(re){const Z=re.texture,ge=i.get(re),Fe=i.get(Z);if(Fe.__webglTexture!==void 0&&(n.deleteTexture(Fe.__webglTexture),o.memory.textures--),re.depthTexture&&re.depthTexture.dispose(),re.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)n.deleteFramebuffer(ge.__webglFramebuffer[Ce]),ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer[Ce]);else{if(n.deleteFramebuffer(ge.__webglFramebuffer),ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let Ce=0;Ce<ge.__webglColorRenderbuffer.length;Ce++)ge.__webglColorRenderbuffer[Ce]&&n.deleteRenderbuffer(ge.__webglColorRenderbuffer[Ce]);ge.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(re.isWebGLMultipleRenderTargets)for(let Ce=0,Le=Z.length;Ce<Le;Ce++){const Qe=i.get(Z[Ce]);Qe.__webglTexture&&(n.deleteTexture(Qe.__webglTexture),o.memory.textures--),i.remove(Z[Ce])}i.remove(Z),i.remove(re)}let K=0;function J(){K=0}function O(){const re=K;return re>=l&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+l),K+=1,re}function W(re){const Z=[];return Z.push(re.wrapS),Z.push(re.wrapT),Z.push(re.wrapR||0),Z.push(re.magFilter),Z.push(re.minFilter),Z.push(re.anisotropy),Z.push(re.internalFormat),Z.push(re.format),Z.push(re.type),Z.push(re.generateMipmaps),Z.push(re.premultiplyAlpha),Z.push(re.flipY),Z.push(re.unpackAlignment),Z.push(re.colorSpace),Z.join()}function V(re,Z){const ge=i.get(re);if(re.isVideoTexture&&be(re),re.isRenderTargetTexture===!1&&re.version>0&&ge.__version!==re.version){const Fe=re.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve(ge,re,Z);return}}t.bindTexture(n.TEXTURE_2D,ge.__webglTexture,n.TEXTURE0+Z)}function U(re,Z){const ge=i.get(re);if(re.version>0&&ge.__version!==re.version){ve(ge,re,Z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ge.__webglTexture,n.TEXTURE0+Z)}function Y(re,Z){const ge=i.get(re);if(re.version>0&&ge.__version!==re.version){ve(ge,re,Z);return}t.bindTexture(n.TEXTURE_3D,ge.__webglTexture,n.TEXTURE0+Z)}function $(re,Z){const ge=i.get(re);if(re.version>0&&ge.__version!==re.version){de(ge,re,Z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture,n.TEXTURE0+Z)}const N={[Fr]:n.REPEAT,[qn]:n.CLAMP_TO_EDGE,[ym]:n.MIRRORED_REPEAT},Q={[rn]:n.NEAREST,[eA]:n.NEAREST_MIPMAP_NEAREST,[Kp]:n.NEAREST_MIPMAP_LINEAR,[Ut]:n.LINEAR,[L3]:n.LINEAR_MIPMAP_NEAREST,[yo]:n.LINEAR_MIPMAP_LINEAR},j={[jH]:n.NEVER,[$H]:n.ALWAYS,[XH]:n.LESS,[qH]:n.LEQUAL,[YH]:n.EQUAL,[ZH]:n.GEQUAL,[KH]:n.GREATER,[JH]:n.NOTEQUAL};function X(re,Z,ge){if(ge?(n.texParameteri(re,n.TEXTURE_WRAP_S,N[Z.wrapS]),n.texParameteri(re,n.TEXTURE_WRAP_T,N[Z.wrapT]),(re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY)&&n.texParameteri(re,n.TEXTURE_WRAP_R,N[Z.wrapR]),n.texParameteri(re,n.TEXTURE_MAG_FILTER,Q[Z.magFilter]),n.texParameteri(re,n.TEXTURE_MIN_FILTER,Q[Z.minFilter])):(n.texParameteri(re,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(re,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY)&&n.texParameteri(re,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(Z.wrapS!==qn||Z.wrapT!==qn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(re,n.TEXTURE_MAG_FILTER,I(Z.magFilter)),n.texParameteri(re,n.TEXTURE_MIN_FILTER,I(Z.minFilter)),Z.minFilter!==rn&&Z.minFilter!==Ut&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Z.compareFunction&&(n.texParameteri(re,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(re,n.TEXTURE_COMPARE_FUNC,j[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Fe=e.get("EXT_texture_filter_anisotropic");if(Z.magFilter===rn||Z.minFilter!==Kp&&Z.minFilter!==yo||Z.type===En&&e.has("OES_texture_float_linear")===!1||a===!1&&Z.type===Ln&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||i.get(Z).__currentAnisotropy)&&(n.texParameterf(re,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy)}}function se(re,Z){let ge=!1;re.__webglInit===void 0&&(re.__webglInit=!0,Z.addEventListener("dispose",F));const Fe=Z.source;let Ce=y.get(Fe);Ce===void 0&&(Ce={},y.set(Fe,Ce));const Le=W(Z);if(Le!==re.__cacheKey){Ce[Le]===void 0&&(Ce[Le]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ge=!0),Ce[Le].usedTimes++;const Qe=Ce[re.__cacheKey];Qe!==void 0&&(Ce[re.__cacheKey].usedTimes--,Qe.usedTimes===0&&L(Z)),re.__cacheKey=Le,re.__webglTexture=Ce[Le].texture}return ge}function ve(re,Z,ge){let Fe=n.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Fe=n.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Fe=n.TEXTURE_3D);const Ce=se(re,Z),Le=Z.source;t.bindTexture(Fe,re.__webglTexture,n.TEXTURE0+ge);const Qe=i.get(Le);if(Le.version!==Qe.__version||Ce===!0){t.activeTexture(n.TEXTURE0+ge),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const He=S(Z)&&E(Z.image)===!1;let De=v(Z.image,He,!1,u);De=st(Z,De);const at=E(De)||a,tt=s.convert(Z.format,Z.colorSpace);let et=s.convert(Z.type),le=b(Z.internalFormat,tt,et,Z.colorSpace);X(Fe,Z,at);let Re;const qe=Z.mipmaps,it=a&&Z.isVideoTexture!==!0,Ae=Qe.__version===void 0||Ce===!0,_e=T(Z,De,at);if(Z.isDepthTexture)le=n.DEPTH_COMPONENT,a?Z.type===En?le=n.DEPTH_COMPONENT32F:Z.type===ss?le=n.DEPTH_COMPONENT24:Z.type===Tu?le=n.DEPTH24_STENCIL8:le=n.DEPTH_COMPONENT16:Z.type===En&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===ka&&le===n.DEPTH_COMPONENT&&Z.type!==$u&&Z.type!==ss&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=ss,et=s.convert(Z.type)),Z.format===Ef&&le===n.DEPTH_COMPONENT&&(le=n.DEPTH_STENCIL,Z.type!==Tu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=Tu,et=s.convert(Z.type))),Ae&&(it?t.texStorage2D(n.TEXTURE_2D,1,le,De.width,De.height):t.texImage2D(n.TEXTURE_2D,0,le,De.width,De.height,0,tt,et,null));else if(Z.isDataTexture)if(qe.length>0&&at){it&&Ae&&t.texStorage2D(n.TEXTURE_2D,_e,le,qe[0].width,qe[0].height);for(let Ie=0,rt=qe.length;Ie<rt;Ie++)Re=qe[Ie],it?t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,Re.width,Re.height,tt,et,Re.data):t.texImage2D(n.TEXTURE_2D,Ie,le,Re.width,Re.height,0,tt,et,Re.data);Z.generateMipmaps=!1}else it?(Ae&&t.texStorage2D(n.TEXTURE_2D,_e,le,De.width,De.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,De.width,De.height,tt,et,De.data)):t.texImage2D(n.TEXTURE_2D,0,le,De.width,De.height,0,tt,et,De.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){it&&Ae&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,le,qe[0].width,qe[0].height,De.depth);for(let Ie=0,rt=qe.length;Ie<rt;Ie++)Re=qe[Ie],Z.format!==Dn?tt!==null?it?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,0,Re.width,Re.height,De.depth,tt,Re.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ie,le,Re.width,Re.height,De.depth,0,Re.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):it?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,0,Re.width,Re.height,De.depth,tt,et,Re.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ie,le,Re.width,Re.height,De.depth,0,tt,et,Re.data)}else{it&&Ae&&t.texStorage2D(n.TEXTURE_2D,_e,le,qe[0].width,qe[0].height);for(let Ie=0,rt=qe.length;Ie<rt;Ie++)Re=qe[Ie],Z.format!==Dn?tt!==null?it?t.compressedTexSubImage2D(n.TEXTURE_2D,Ie,0,0,Re.width,Re.height,tt,Re.data):t.compressedTexImage2D(n.TEXTURE_2D,Ie,le,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):it?t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,Re.width,Re.height,tt,et,Re.data):t.texImage2D(n.TEXTURE_2D,Ie,le,Re.width,Re.height,0,tt,et,Re.data)}else if(Z.isDataArrayTexture)it?(Ae&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,le,De.width,De.height,De.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,De.width,De.height,De.depth,tt,et,De.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,le,De.width,De.height,De.depth,0,tt,et,De.data);else if(Z.isData3DTexture)it?(Ae&&t.texStorage3D(n.TEXTURE_3D,_e,le,De.width,De.height,De.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,De.width,De.height,De.depth,tt,et,De.data)):t.texImage3D(n.TEXTURE_3D,0,le,De.width,De.height,De.depth,0,tt,et,De.data);else if(Z.isFramebufferTexture){if(Ae)if(it)t.texStorage2D(n.TEXTURE_2D,_e,le,De.width,De.height);else{let Ie=De.width,rt=De.height;for(let nt=0;nt<_e;nt++)t.texImage2D(n.TEXTURE_2D,nt,le,Ie,rt,0,tt,et,null),Ie>>=1,rt>>=1}}else if(qe.length>0&&at){it&&Ae&&t.texStorage2D(n.TEXTURE_2D,_e,le,qe[0].width,qe[0].height);for(let Ie=0,rt=qe.length;Ie<rt;Ie++)Re=qe[Ie],it?t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,tt,et,Re):t.texImage2D(n.TEXTURE_2D,Ie,le,tt,et,Re);Z.generateMipmaps=!1}else it?(Ae&&t.texStorage2D(n.TEXTURE_2D,_e,le,De.width,De.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,tt,et,De)):t.texImage2D(n.TEXTURE_2D,0,le,tt,et,De);C(Z,at)&&M(Fe),Qe.__version=Le.version,Z.onUpdate&&Z.onUpdate(Z)}re.__version=Z.version}function de(re,Z,ge){if(Z.image.length!==6)return;const Fe=se(re,Z),Ce=Z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+ge);const Le=i.get(Ce);if(Ce.version!==Le.__version||Fe===!0){t.activeTexture(n.TEXTURE0+ge),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Qe=Z.isCompressedTexture||Z.image[0].isCompressedTexture,He=Z.image[0]&&Z.image[0].isDataTexture,De=[];for(let Ie=0;Ie<6;Ie++)!Qe&&!He?De[Ie]=v(Z.image[Ie],!1,!0,c):De[Ie]=He?Z.image[Ie].image:Z.image[Ie],De[Ie]=st(Z,De[Ie]);const at=De[0],tt=E(at)||a,et=s.convert(Z.format,Z.colorSpace),le=s.convert(Z.type),Re=b(Z.internalFormat,et,le,Z.colorSpace),qe=a&&Z.isVideoTexture!==!0,it=Le.__version===void 0||Fe===!0;let Ae=T(Z,at,tt);X(n.TEXTURE_CUBE_MAP,Z,tt);let _e;if(Qe){qe&&it&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ae,Re,at.width,at.height);for(let Ie=0;Ie<6;Ie++){_e=De[Ie].mipmaps;for(let rt=0;rt<_e.length;rt++){const nt=_e[rt];Z.format!==Dn?et!==null?qe?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt,0,0,nt.width,nt.height,et,nt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt,Re,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt,0,0,nt.width,nt.height,et,le,nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt,Re,nt.width,nt.height,0,et,le,nt.data)}}}else{_e=Z.mipmaps,qe&&it&&(_e.length>0&&Ae++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ae,Re,De[0].width,De[0].height));for(let Ie=0;Ie<6;Ie++)if(He){qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,De[Ie].width,De[Ie].height,et,le,De[Ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Re,De[Ie].width,De[Ie].height,0,et,le,De[Ie].data);for(let rt=0;rt<_e.length;rt++){const pt=_e[rt].image[Ie].image;qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt+1,0,0,pt.width,pt.height,et,le,pt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt+1,Re,pt.width,pt.height,0,et,le,pt.data)}}else{qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,et,le,De[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Re,et,le,De[Ie]);for(let rt=0;rt<_e.length;rt++){const nt=_e[rt];qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt+1,0,0,et,le,nt.image[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,rt+1,Re,et,le,nt.image[Ie])}}}C(Z,tt)&&M(n.TEXTURE_CUBE_MAP),Le.__version=Ce.version,Z.onUpdate&&Z.onUpdate(Z)}re.__version=Z.version}function he(re,Z,ge,Fe,Ce){const Le=s.convert(ge.format,ge.colorSpace),Qe=s.convert(ge.type),He=b(ge.internalFormat,Le,Qe,ge.colorSpace);i.get(Z).__hasExternalTextures||(Ce===n.TEXTURE_3D||Ce===n.TEXTURE_2D_ARRAY?t.texImage3D(Ce,0,He,Z.width,Z.height,Z.depth,0,Le,Qe,null):t.texImage2D(Ce,0,He,Z.width,Z.height,0,Le,Qe,null)),t.bindFramebuffer(n.FRAMEBUFFER,re),we(Z)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Fe,Ce,i.get(ge).__webglTexture,0,ne(Z)):(Ce===n.TEXTURE_2D||Ce>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ce<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Fe,Ce,i.get(ge).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function te(re,Z,ge){if(n.bindRenderbuffer(n.RENDERBUFFER,re),Z.depthBuffer&&!Z.stencilBuffer){let Fe=n.DEPTH_COMPONENT16;if(ge||we(Z)){const Ce=Z.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===En?Fe=n.DEPTH_COMPONENT32F:Ce.type===ss&&(Fe=n.DEPTH_COMPONENT24));const Le=ne(Z);we(Z)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Le,Fe,Z.width,Z.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,Fe,Z.width,Z.height)}else n.renderbufferStorage(n.RENDERBUFFER,Fe,Z.width,Z.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,re)}else if(Z.depthBuffer&&Z.stencilBuffer){const Fe=ne(Z);ge&&we(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,n.DEPTH24_STENCIL8,Z.width,Z.height):we(Z)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,n.DEPTH24_STENCIL8,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,re)}else{const Fe=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let Ce=0;Ce<Fe.length;Ce++){const Le=Fe[Ce],Qe=s.convert(Le.format,Le.colorSpace),He=s.convert(Le.type),De=b(Le.internalFormat,Qe,He,Le.colorSpace),at=ne(Z);ge&&we(Z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,at,De,Z.width,Z.height):we(Z)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,at,De,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,De,Z.width,Z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(re,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,re),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),V(Z.depthTexture,0);const Fe=i.get(Z.depthTexture).__webglTexture,Ce=ne(Z);if(Z.depthTexture.format===ka)we(Z)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Fe,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Fe,0);else if(Z.depthTexture.format===Ef)we(Z)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Fe,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Fe,0);else throw new Error("Unknown depthTexture format")}function ce(re){const Z=i.get(re),ge=re.isWebGLCubeRenderTarget===!0;if(re.depthTexture&&!Z.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");xe(Z.__webglFramebuffer,re)}else if(ge){Z.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[Fe]),Z.__webglDepthbuffer[Fe]=n.createRenderbuffer(),te(Z.__webglDepthbuffer[Fe],re,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer=n.createRenderbuffer(),te(Z.__webglDepthbuffer,re,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(re,Z,ge){const Fe=i.get(re);Z!==void 0&&he(Fe.__webglFramebuffer,re,re.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),ge!==void 0&&ce(re)}function ye(re){const Z=re.texture,ge=i.get(re),Fe=i.get(Z);re.addEventListener("dispose",R),re.isWebGLMultipleRenderTargets!==!0&&(Fe.__webglTexture===void 0&&(Fe.__webglTexture=n.createTexture()),Fe.__version=Z.version,o.memory.textures++);const Ce=re.isWebGLCubeRenderTarget===!0,Le=re.isWebGLMultipleRenderTargets===!0,Qe=E(re)||a;if(Ce){ge.__webglFramebuffer=[];for(let He=0;He<6;He++)ge.__webglFramebuffer[He]=n.createFramebuffer()}else{if(ge.__webglFramebuffer=n.createFramebuffer(),Le)if(r.drawBuffers){const He=re.texture;for(let De=0,at=He.length;De<at;De++){const tt=i.get(He[De]);tt.__webglTexture===void 0&&(tt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&re.samples>0&&we(re)===!1){const He=Le?Z:[Z];ge.__webglMultisampledFramebuffer=n.createFramebuffer(),ge.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ge.__webglMultisampledFramebuffer);for(let De=0;De<He.length;De++){const at=He[De];ge.__webglColorRenderbuffer[De]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ge.__webglColorRenderbuffer[De]);const tt=s.convert(at.format,at.colorSpace),et=s.convert(at.type),le=b(at.internalFormat,tt,et,at.colorSpace,re.isXRRenderTarget===!0),Re=ne(re);n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,le,re.width,re.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+De,n.RENDERBUFFER,ge.__webglColorRenderbuffer[De])}n.bindRenderbuffer(n.RENDERBUFFER,null),re.depthBuffer&&(ge.__webglDepthRenderbuffer=n.createRenderbuffer(),te(ge.__webglDepthRenderbuffer,re,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ce){t.bindTexture(n.TEXTURE_CUBE_MAP,Fe.__webglTexture),X(n.TEXTURE_CUBE_MAP,Z,Qe);for(let He=0;He<6;He++)he(ge.__webglFramebuffer[He],re,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He);C(Z,Qe)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Le){const He=re.texture;for(let De=0,at=He.length;De<at;De++){const tt=He[De],et=i.get(tt);t.bindTexture(n.TEXTURE_2D,et.__webglTexture),X(n.TEXTURE_2D,tt,Qe),he(ge.__webglFramebuffer,re,tt,n.COLOR_ATTACHMENT0+De,n.TEXTURE_2D),C(tt,Qe)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let He=n.TEXTURE_2D;(re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(a?He=re.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(He,Fe.__webglTexture),X(He,Z,Qe),he(ge.__webglFramebuffer,re,Z,n.COLOR_ATTACHMENT0,He),C(Z,Qe)&&M(He),t.unbindTexture()}re.depthBuffer&&ce(re)}function Me(re){const Z=E(re)||a,ge=re.isWebGLMultipleRenderTargets===!0?re.texture:[re.texture];for(let Fe=0,Ce=ge.length;Fe<Ce;Fe++){const Le=ge[Fe];if(C(Le,Z)){const Qe=re.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,He=i.get(Le).__webglTexture;t.bindTexture(Qe,He),M(Qe),t.unbindTexture()}}}function oe(re){if(a&&re.samples>0&&we(re)===!1){const Z=re.isWebGLMultipleRenderTargets?re.texture:[re.texture],ge=re.width,Fe=re.height;let Ce=n.COLOR_BUFFER_BIT;const Le=[],Qe=re.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=i.get(re),De=re.isWebGLMultipleRenderTargets===!0;if(De)for(let at=0;at<Z.length;at++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let at=0;at<Z.length;at++){Le.push(n.COLOR_ATTACHMENT0+at),re.depthBuffer&&Le.push(Qe);const tt=He.__ignoreDepthValues!==void 0?He.__ignoreDepthValues:!1;if(tt===!1&&(re.depthBuffer&&(Ce|=n.DEPTH_BUFFER_BIT),re.stencilBuffer&&(Ce|=n.STENCIL_BUFFER_BIT)),De&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[at]),tt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Qe])),De){const et=i.get(Z[at]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,et,0)}n.blitFramebuffer(0,0,ge,Fe,0,0,ge,Fe,Ce,n.NEAREST),d&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Le)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),De)for(let at=0;at<Z.length;at++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,He.__webglColorRenderbuffer[at]);const tt=i.get(Z[at]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,tt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}}function ne(re){return Math.min(h,re.samples)}function we(re){const Z=i.get(re);return a&&re.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function be(re){const Z=o.render.frame;m.get(re)!==Z&&(m.set(re,Z),re.update())}function st(re,Z){const ge=re.colorSpace,Fe=re.format,Ce=re.type;return re.isCompressedTexture===!0||re.format===L_||ge!==Ks&&ge!==Bu&&(ge===un?a===!1?e.has("EXT_sRGB")===!0&&Fe===Dn?(re.format=L_,re.minFilter=Ut,re.generateMipmaps=!1):Z=ZI.sRGBToLinear(Z):(Fe!==Dn||Ce!==$n)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ge)),Z}this.allocateTextureUnit=O,this.resetTextureUnits=J,this.setTexture2D=V,this.setTexture2DArray=U,this.setTexture3D=Y,this.setTextureCube=$,this.rebindTextures=me,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=oe,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=he,this.useMultisampledRTT=we}function cQ(n,e,t){const i=t.isWebGL2;function r(s,o=Bu){let a;if(s===$n)return n.UNSIGNED_BYTE;if(s===QI)return n.UNSIGNED_SHORT_4_4_4_4;if(s===VI)return n.UNSIGNED_SHORT_5_5_5_1;if(s===tA)return n.BYTE;if(s===F3)return n.SHORT;if(s===$u)return n.UNSIGNED_SHORT;if(s===uf)return n.INT;if(s===ss)return n.UNSIGNED_INT;if(s===En)return n.FLOAT;if(s===Ln)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===LH)return n.ALPHA;if(s===Dn)return n.RGBA;if(s===FH)return n.LUMINANCE;if(s===OH)return n.LUMINANCE_ALPHA;if(s===ka)return n.DEPTH_COMPONENT;if(s===Ef)return n.DEPTH_STENCIL;if(s===L_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===ea)return n.RED;if(s===O3)return n.RED_INTEGER;if(s===cu)return n.RG;if(s===FA)return n.RG_INTEGER;if(s===wf)return n.RGBA_INTEGER;if(s===hg||s===Rx||s===Dx||s===fg)if(o===un)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===hg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Rx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Dx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===fg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===hg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Rx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Dx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===fg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===T_||s===D5||s===I_||s===L5)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===T_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===D5)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===I_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===L5)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===WI)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===B_||s===P_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===B_)return o===un?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===P_)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===R_||s===F5||s===O5||s===U5||s===nA||s===z5||s===k5||s===N5||s===G5||s===H5||s===Q5||s===V5||s===W5||s===j5)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===R_)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===F5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===O5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===U5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===nA)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===z5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===k5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===N5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===G5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===H5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Q5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===V5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===W5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===j5)return o===un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===dg)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===dg)return o===un?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===UH||s===X5||s===Y5||s===q5)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===dg)return a.COMPRESSED_RED_RGTC1_EXT;if(s===X5)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Y5)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===q5)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Tu?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class uQ extends on{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Gs extends kt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Nle={type:"move"};class tC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const A of e.hand.values()){const y=t.getJointPose(A,i),p=this._getHandJoint(c,A);y!==null&&(p.matrix.fromArray(y.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=y.radius),p.visible=y!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),d=.02,m=.005;c.inputState.pinching&&f>d+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=d-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Nle)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Gs;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Hm extends In{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:ka,u!==ka&&u!==Ef)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===ka&&(i=ss),i===void 0&&u===Ef&&(i=Tu),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:rn,this.minFilter=l!==void 0?l:rn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Gle extends Or{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,f=null,d=null,m=null;const A=t.getContextAttributes();let y=null,p=null;const g=[],v=[],E=new on;E.layers.enable(1),E.viewport=new Yt;const S=new on;S.layers.enable(2),S.viewport=new Yt;const C=[E,S],M=new uQ;M.layers.enable(1),M.layers.enable(2);let b=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let Y=g[U];return Y===void 0&&(Y=new tC,g[U]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(U){let Y=g[U];return Y===void 0&&(Y=new tC,g[U]=Y),Y.getGripSpace()},this.getHand=function(U){let Y=g[U];return Y===void 0&&(Y=new tC,g[U]=Y),Y.getHandSpace()};function I(U){const Y=v.indexOf(U.inputSource);if(Y===-1)return;const $=g[Y];$!==void 0&&($.update(U.inputSource,U.frame,c||o),$.dispatchEvent({type:U.type,data:U.inputSource}))}function F(){r.removeEventListener("select",I),r.removeEventListener("selectstart",I),r.removeEventListener("selectend",I),r.removeEventListener("squeeze",I),r.removeEventListener("squeezestart",I),r.removeEventListener("squeezeend",I),r.removeEventListener("end",F),r.removeEventListener("inputsourceschange",R);for(let U=0;U<g.length;U++){const Y=v[U];Y!==null&&(v[U]=null,g[U].disconnect(Y))}b=null,T=null,e.setRenderTarget(y),d=null,f=null,h=null,r=null,p=null,V.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){s=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(U){c=U},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(U){if(r=U,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",I),r.addEventListener("selectstart",I),r.addEventListener("selectend",I),r.addEventListener("squeeze",I),r.addEventListener("squeezestart",I),r.addEventListener("squeezeend",I),r.addEventListener("end",F),r.addEventListener("inputsourceschange",R),A.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Y={antialias:r.renderState.layers===void 0?A.antialias:!0,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,Y),r.updateRenderState({baseLayer:d}),p=new Rn(d.framebufferWidth,d.framebufferHeight,{format:Dn,type:$n,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let Y=null,$=null,N=null;A.depth&&(N=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Y=A.stencil?Ef:ka,$=A.stencil?Tu:ss);const Q={colorFormat:t.RGBA8,depthFormat:N,scaleFactor:s};h=new XRWebGLBinding(r,t),f=h.createProjectionLayer(Q),r.updateRenderState({layers:[f]}),p=new Rn(f.textureWidth,f.textureHeight,{format:Dn,type:$n,depthTexture:new Hm(f.textureWidth,f.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0});const j=e.properties.get(p);j.__ignoreDepthValues=f.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),V.setContext(r),V.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function R(U){for(let Y=0;Y<U.removed.length;Y++){const $=U.removed[Y],N=v.indexOf($);N>=0&&(v[N]=null,g[N].disconnect($))}for(let Y=0;Y<U.added.length;Y++){const $=U.added[Y];let N=v.indexOf($);if(N===-1){for(let j=0;j<g.length;j++)if(j>=v.length){v.push($),N=j;break}else if(v[j]===null){v[j]=$,N=j;break}if(N===-1)break}const Q=g[N];Q&&Q.connect($)}}const z=new D,L=new D;function H(U,Y,$){z.setFromMatrixPosition(Y.matrixWorld),L.setFromMatrixPosition($.matrixWorld);const N=z.distanceTo(L),Q=Y.projectionMatrix.elements,j=$.projectionMatrix.elements,X=Q[14]/(Q[10]-1),se=Q[14]/(Q[10]+1),ve=(Q[9]+1)/Q[5],de=(Q[9]-1)/Q[5],he=(Q[8]-1)/Q[0],te=(j[8]+1)/j[0],xe=X*he,ce=X*te,me=N/(-he+te),ye=me*-he;Y.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(ye),U.translateZ(me),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert();const Me=X+me,oe=se+me,ne=xe-ye,we=ce+(N-ye),be=ve*se/oe*Me,st=de*se/oe*Me;U.projectionMatrix.makePerspective(ne,we,be,st,Me,oe),U.projectionMatrixInverse.copy(U.projectionMatrix).invert()}function K(U,Y){Y===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(Y.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(r===null)return;M.near=S.near=E.near=U.near,M.far=S.far=E.far=U.far,(b!==M.near||T!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),b=M.near,T=M.far);const Y=U.parent,$=M.cameras;K(M,Y);for(let N=0;N<$.length;N++)K($[N],Y);$.length===2?H(M,E,S):M.projectionMatrix.copy(E.projectionMatrix),J(U,M,Y)};function J(U,Y,$){$===null?U.matrix.copy(Y.matrixWorld):(U.matrix.copy($.matrixWorld),U.matrix.invert(),U.matrix.multiply(Y.matrixWorld)),U.matrix.decompose(U.position,U.quaternion,U.scale),U.updateMatrixWorld(!0);const N=U.children;for(let Q=0,j=N.length;Q<j;Q++)N[Q].updateMatrixWorld(!0);U.projectionMatrix.copy(Y.projectionMatrix),U.projectionMatrixInverse.copy(Y.projectionMatrixInverse),U.isPerspectiveCamera&&(U.fov=_m*2*Math.atan(1/U.projectionMatrix.elements[5]),U.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(U){l=U,f!==null&&(f.fixedFoveation=U),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=U)};let O=null;function W(U,Y){if(u=Y.getViewerPose(c||o),m=Y,u!==null){const $=u.views;d!==null&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));let N=!1;$.length!==M.cameras.length&&(M.cameras.length=0,N=!0);for(let Q=0;Q<$.length;Q++){const j=$[Q];let X=null;if(d!==null)X=d.getViewport(j);else{const ve=h.getViewSubImage(f,j);X=ve.viewport,Q===0&&(e.setRenderTargetTextures(p,ve.colorTexture,f.ignoreDepthValues?void 0:ve.depthStencilTexture),e.setRenderTarget(p))}let se=C[Q];se===void 0&&(se=new on,se.layers.enable(Q),se.viewport=new Yt,C[Q]=se),se.matrix.fromArray(j.transform.matrix),se.matrix.decompose(se.position,se.quaternion,se.scale),se.projectionMatrix.fromArray(j.projectionMatrix),se.projectionMatrixInverse.copy(se.projectionMatrix).invert(),se.viewport.set(X.x,X.y,X.width,X.height),Q===0&&(M.matrix.copy(se.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),N===!0&&M.cameras.push(se)}}for(let $=0;$<g.length;$++){const N=v[$],Q=g[$];N!==null&&Q!==void 0&&Q.update(N,Y,c||o)}O&&O(U,Y),Y.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Y}),m=null}const V=new rQ;V.setAnimationLoop(W),this.setAnimationLoop=function(U){O=U},this.dispose=function(){}}}function Hle(n,e){function t(y,p){y.matrixAutoUpdate===!0&&y.updateMatrix(),p.value.copy(y.matrix)}function i(y,p){p.color.getRGB(y.fogColor.value,iQ(n)),p.isFog?(y.fogNear.value=p.near,y.fogFar.value=p.far):p.isFogExp2&&(y.fogDensity.value=p.density)}function r(y,p,g,v,E){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(y,p):p.isMeshToonMaterial?(s(y,p),h(y,p)):p.isMeshPhongMaterial?(s(y,p),u(y,p)):p.isMeshStandardMaterial?(s(y,p),f(y,p),p.isMeshPhysicalMaterial&&d(y,p,E)):p.isMeshMatcapMaterial?(s(y,p),m(y,p)):p.isMeshDepthMaterial?s(y,p):p.isMeshDistanceMaterial?(s(y,p),A(y,p)):p.isMeshNormalMaterial?s(y,p):p.isLineBasicMaterial?(o(y,p),p.isLineDashedMaterial&&a(y,p)):p.isPointsMaterial?l(y,p,g,v):p.isSpriteMaterial?c(y,p):p.isShadowMaterial?(y.color.value.copy(p.color),y.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(y,p){y.opacity.value=p.opacity,p.color&&y.diffuse.value.copy(p.color),p.emissive&&y.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(y.map.value=p.map,t(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.bumpMap&&(y.bumpMap.value=p.bumpMap,t(p.bumpMap,y.bumpMapTransform),y.bumpScale.value=p.bumpScale,p.side===Ni&&(y.bumpScale.value*=-1)),p.normalMap&&(y.normalMap.value=p.normalMap,t(p.normalMap,y.normalMapTransform),y.normalScale.value.copy(p.normalScale),p.side===Ni&&y.normalScale.value.negate()),p.displacementMap&&(y.displacementMap.value=p.displacementMap,t(p.displacementMap,y.displacementMapTransform),y.displacementScale.value=p.displacementScale,y.displacementBias.value=p.displacementBias),p.emissiveMap&&(y.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,y.emissiveMapTransform)),p.specularMap&&(y.specularMap.value=p.specularMap,t(p.specularMap,y.specularMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest);const g=e.get(p).envMap;if(g&&(y.envMap.value=g,y.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=p.reflectivity,y.ior.value=p.ior,y.refractionRatio.value=p.refractionRatio),p.lightMap){y.lightMap.value=p.lightMap;const v=n.useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=p.lightMapIntensity*v,t(p.lightMap,y.lightMapTransform)}p.aoMap&&(y.aoMap.value=p.aoMap,y.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,y.aoMapTransform))}function o(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,p.map&&(y.map.value=p.map,t(p.map,y.mapTransform))}function a(y,p){y.dashSize.value=p.dashSize,y.totalSize.value=p.dashSize+p.gapSize,y.scale.value=p.scale}function l(y,p,g,v){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.size.value=p.size*g,y.scale.value=v*.5,p.map&&(y.map.value=p.map,t(p.map,y.uvTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function c(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.rotation.value=p.rotation,p.map&&(y.map.value=p.map,t(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,t(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function u(y,p){y.specular.value.copy(p.specular),y.shininess.value=Math.max(p.shininess,1e-4)}function h(y,p){p.gradientMap&&(y.gradientMap.value=p.gradientMap)}function f(y,p){y.metalness.value=p.metalness,p.metalnessMap&&(y.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,y.metalnessMapTransform)),y.roughness.value=p.roughness,p.roughnessMap&&(y.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,y.roughnessMapTransform)),e.get(p).envMap&&(y.envMapIntensity.value=p.envMapIntensity)}function d(y,p,g){y.ior.value=p.ior,p.sheen>0&&(y.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),y.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(y.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,y.sheenColorMapTransform)),p.sheenRoughnessMap&&(y.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,y.sheenRoughnessMapTransform))),p.clearcoat>0&&(y.clearcoat.value=p.clearcoat,y.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(y.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,y.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(y.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===Ni&&y.clearcoatNormalScale.value.negate())),p.iridescence>0&&(y.iridescence.value=p.iridescence,y.iridescenceIOR.value=p.iridescenceIOR,y.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(y.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,y.iridescenceMapTransform)),p.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),p.transmission>0&&(y.transmission.value=p.transmission,y.transmissionSamplerMap.value=g.texture,y.transmissionSamplerSize.value.set(g.width,g.height),p.transmissionMap&&(y.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,y.transmissionMapTransform)),y.thickness.value=p.thickness,p.thicknessMap&&(y.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=p.attenuationDistance,y.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(y.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(y.anisotropyMap.value=p.anisotropyMap,t(p.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=p.specularIntensity,y.specularColor.value.copy(p.specularColor),p.specularColorMap&&(y.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,y.specularColorMapTransform)),p.specularIntensityMap&&(y.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,p){p.matcap&&(y.matcap.value=p.matcap)}function A(y,p){const g=e.get(p).light;y.referencePosition.value.setFromMatrixPosition(g.matrixWorld),y.nearDistance.value=g.shadow.camera.near,y.farDistance.value=g.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Qle(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(g,v){const E=v.program;i.uniformBlockBinding(g,E)}function c(g,v){let E=r[g.id];E===void 0&&(m(g),E=u(g),r[g.id]=E,g.addEventListener("dispose",y));const S=v.program;i.updateUBOMapping(g,S);const C=e.render.frame;s[g.id]!==C&&(f(g),s[g.id]=C)}function u(g){const v=h();g.__bindingPointIndex=v;const E=n.createBuffer(),S=g.__size,C=g.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,S,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,E),E}function h(){for(let g=0;g<a;g++)if(o.indexOf(g)===-1)return o.push(g),g;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(g){const v=r[g.id],E=g.uniforms,S=g.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let C=0,M=E.length;C<M;C++){const b=E[C];if(d(b,C,S)===!0){const T=b.__offset,I=Array.isArray(b.value)?b.value:[b.value];let F=0;for(let R=0;R<I.length;R++){const z=I[R],L=A(z);typeof z=="number"?(b.__data[0]=z,n.bufferSubData(n.UNIFORM_BUFFER,T+F,b.__data)):z.isMatrix3?(b.__data[0]=z.elements[0],b.__data[1]=z.elements[1],b.__data[2]=z.elements[2],b.__data[3]=z.elements[0],b.__data[4]=z.elements[3],b.__data[5]=z.elements[4],b.__data[6]=z.elements[5],b.__data[7]=z.elements[0],b.__data[8]=z.elements[6],b.__data[9]=z.elements[7],b.__data[10]=z.elements[8],b.__data[11]=z.elements[0]):(z.toArray(b.__data,F),F+=L.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,b.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(g,v,E){const S=g.value;if(E[v]===void 0){if(typeof S=="number")E[v]=S;else{const C=Array.isArray(S)?S:[S],M=[];for(let b=0;b<C.length;b++)M.push(C[b].clone());E[v]=M}return!0}else if(typeof S=="number"){if(E[v]!==S)return E[v]=S,!0}else{const C=Array.isArray(E[v])?E[v]:[E[v]],M=Array.isArray(S)?S:[S];for(let b=0;b<C.length;b++){const T=C[b];if(T.equals(M[b])===!1)return T.copy(M[b]),!0}}return!1}function m(g){const v=g.uniforms;let E=0;const S=16;let C=0;for(let M=0,b=v.length;M<b;M++){const T=v[M],I={boundary:0,storage:0},F=Array.isArray(T.value)?T.value:[T.value];for(let R=0,z=F.length;R<z;R++){const L=F[R],H=A(L);I.boundary+=H.boundary,I.storage+=H.storage}if(T.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=E,M>0){C=E%S;const R=S-C;C!==0&&R-I.boundary<0&&(E+=S-C,T.__offset=E)}E+=I.storage}return C=E%S,C>0&&(E+=S-C),g.__size=E,g.__cache={},this}function A(g){const v={boundary:0,storage:0};return typeof g=="number"?(v.boundary=4,v.storage=4):g.isVector2?(v.boundary=8,v.storage=8):g.isVector3||g.isColor?(v.boundary=16,v.storage=12):g.isVector4?(v.boundary=16,v.storage=16):g.isMatrix3?(v.boundary=48,v.storage=48):g.isMatrix4?(v.boundary=64,v.storage=64):g.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",g),v}function y(g){const v=g.target;v.removeEventListener("dispose",y);const E=o.indexOf(v.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[v.id]),delete r[v.id],delete s[v.id]}function p(){for(const g in r)n.deleteBuffer(r[g]);o=[],r={},s={}}return{bind:l,update:c,dispose:p}}function Vle(){const n=oA("canvas");return n.style.display="block",n}class V3{constructor(e={}){const{canvas:t=Vle(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;i!==null?f=i.getContextAttributes().alpha:f=o;const d=new Uint32Array(4),m=new Int32Array(4);let A=null,y=null;const p=[],g=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=un,this.useLegacyLights=!0,this.toneMapping=oa,this.toneMappingExposure=1;const v=this;let E=!1,S=0,C=0,M=null,b=-1,T=null;const I=new Yt,F=new Yt;let R=null;const z=new We(0);let L=0,H=t.width,K=t.height,J=1,O=null,W=null;const V=new Yt(0,0,H,K),U=new Yt(0,0,H,K);let Y=!1;const $=new Nm;let N=!1,Q=!1,j=null;const X=new Oe,se=new Ee,ve=new D,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function he(){return M===null?J:1}let te=i;function xe(G,ie){for(let ue=0;ue<G.length;ue++){const ae=G[ue],pe=t.getContext(ae,ie);if(pe!==null)return pe}return null}try{const G={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ja}`),t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",Ie,!1),t.addEventListener("webglcontextcreationerror",rt,!1),te===null){const ie=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ie.shift(),te=xe(ie,G),te===null)throw xe(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&te instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let ce,me,ye,Me,oe,ne,we,be,st,re,Z,ge,Fe,Ce,Le,Qe,He,De,at,tt,et,le,Re,qe;function it(){ce=new sae(te),me=new $oe(te,ce,e),ce.init(me),le=new cQ(te,ce,me),ye=new zle(te,ce,me),Me=new lae(te),oe=new Mle,ne=new kle(te,ce,ye,oe,me,le,Me),we=new tae(v),be=new rae(v),st=new vre(te,me),Re=new Joe(te,ce,st,me),re=new oae(te,st,Me,Re),Z=new fae(te,re,st,Me),at=new hae(te,me,ne),Qe=new eae(oe),ge=new Cle(v,we,be,ce,me,Re,Qe),Fe=new Hle(v,oe),Ce=new Tle,Le=new Lle(ce,me),De=new Koe(v,we,be,ye,Z,f,l),He=new Ule(v,Z,me),qe=new Qle(te,Me,me,ye),tt=new Zoe(te,ce,Me,me),et=new aae(te,ce,Me,me),Me.programs=ge.programs,v.capabilities=me,v.extensions=ce,v.properties=oe,v.renderLists=Ce,v.shadowMap=He,v.state=ye,v.info=Me}it();const Ae=new Gle(v,te);this.xr=Ae,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const G=ce.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=ce.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(G){G!==void 0&&(J=G,this.setSize(H,K,!1))},this.getSize=function(G){return G.set(H,K)},this.setSize=function(G,ie,ue=!0){if(Ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=G,K=ie,t.width=Math.floor(G*J),t.height=Math.floor(ie*J),ue===!0&&(t.style.width=G+"px",t.style.height=ie+"px"),this.setViewport(0,0,G,ie)},this.getDrawingBufferSize=function(G){return G.set(H*J,K*J).floor()},this.setDrawingBufferSize=function(G,ie,ue){H=G,K=ie,J=ue,t.width=Math.floor(G*ue),t.height=Math.floor(ie*ue),this.setViewport(0,0,G,ie)},this.getCurrentViewport=function(G){return G.copy(I)},this.getViewport=function(G){return G.copy(V)},this.setViewport=function(G,ie,ue,ae){G.isVector4?V.set(G.x,G.y,G.z,G.w):V.set(G,ie,ue,ae),ye.viewport(I.copy(V).multiplyScalar(J).floor())},this.getScissor=function(G){return G.copy(U)},this.setScissor=function(G,ie,ue,ae){G.isVector4?U.set(G.x,G.y,G.z,G.w):U.set(G,ie,ue,ae),ye.scissor(F.copy(U).multiplyScalar(J).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(G){ye.setScissorTest(Y=G)},this.setOpaqueSort=function(G){O=G},this.setTransparentSort=function(G){W=G},this.getClearColor=function(G){return G.copy(De.getClearColor())},this.setClearColor=function(){De.setClearColor.apply(De,arguments)},this.getClearAlpha=function(){return De.getClearAlpha()},this.setClearAlpha=function(){De.setClearAlpha.apply(De,arguments)},this.clear=function(G=!0,ie=!0,ue=!0){let ae=0;if(G){let pe=!1;if(M!==null){const Ue=M.texture.format;pe=Ue===wf||Ue===FA||Ue===O3}if(pe){const Ue=M.texture.type,ke=Ue===$n||Ue===ss||Ue===$u||Ue===Tu||Ue===QI||Ue===VI,je=De.getClearColor(),Xe=De.getClearAlpha(),$e=je.r,Be=je.g,xt=je.b;ke?(d[0]=$e,d[1]=Be,d[2]=xt,d[3]=Xe,te.clearBufferuiv(te.COLOR,0,d)):(m[0]=$e,m[1]=Be,m[2]=xt,m[3]=Xe,te.clearBufferiv(te.COLOR,0,m))}else ae|=te.COLOR_BUFFER_BIT}ie&&(ae|=te.DEPTH_BUFFER_BIT),ue&&(ae|=te.STENCIL_BUFFER_BIT),te.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",Ie,!1),t.removeEventListener("webglcontextcreationerror",rt,!1),Ce.dispose(),Le.dispose(),oe.dispose(),we.dispose(),be.dispose(),Z.dispose(),Re.dispose(),qe.dispose(),ge.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",Lt),Ae.removeEventListener("sessionend",bn),j&&(j.dispose(),j=null),Tn.stop()};function _e(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const G=Me.autoReset,ie=He.enabled,ue=He.autoUpdate,ae=He.needsUpdate,pe=He.type;it(),Me.autoReset=G,He.enabled=ie,He.autoUpdate=ue,He.needsUpdate=ae,He.type=pe}function rt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function nt(G){const ie=G.target;ie.removeEventListener("dispose",nt),pt(ie)}function pt(G){Pt(G),oe.remove(G)}function Pt(G){const ie=oe.get(G).programs;ie!==void 0&&(ie.forEach(function(ue){ge.releaseProgram(ue)}),G.isShaderMaterial&&ge.releaseShaderCache(G))}this.renderBufferDirect=function(G,ie,ue,ae,pe,Ue){ie===null&&(ie=de);const ke=pe.isMesh&&pe.matrixWorld.determinant()<0,je=Li(G,ie,ue,ae,pe);ye.setMaterial(ae,ke);let Xe=ue.index,$e=1;ae.wireframe===!0&&(Xe=re.getWireframeAttribute(ue),$e=2);const Be=ue.drawRange,xt=ue.attributes.position;let dt=Be.start*$e,ht=(Be.start+Be.count)*$e;Ue!==null&&(dt=Math.max(dt,Ue.start*$e),ht=Math.min(ht,(Ue.start+Ue.count)*$e)),Xe!==null?(dt=Math.max(dt,0),ht=Math.min(ht,Xe.count)):xt!=null&&(dt=Math.max(dt,0),ht=Math.min(ht,xt.count));const Bt=ht-dt;if(Bt<0||Bt===1/0)return;Re.setup(pe,ae,je,ue,Xe);let Nt,Rt=tt;if(Xe!==null&&(Nt=st.get(Xe),Rt=et,Rt.setIndex(Nt)),pe.isMesh)ae.wireframe===!0?(ye.setLineWidth(ae.wireframeLinewidth*he()),Rt.setMode(te.LINES)):Rt.setMode(te.TRIANGLES);else if(pe.isLine){let _t=ae.linewidth;_t===void 0&&(_t=1),ye.setLineWidth(_t*he()),pe.isLineSegments?Rt.setMode(te.LINES):pe.isLineLoop?Rt.setMode(te.LINE_LOOP):Rt.setMode(te.LINE_STRIP)}else pe.isPoints?Rt.setMode(te.POINTS):pe.isSprite&&Rt.setMode(te.TRIANGLES);if(pe.isInstancedMesh)Rt.renderInstances(dt,Bt,pe.count);else if(ue.isInstancedBufferGeometry){const _t=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,Ht=Math.min(ue.instanceCount,_t);Rt.renderInstances(dt,Bt,Ht)}else Rt.render(dt,Bt)},this.compile=function(G,ie){function ue(ae,pe,Ue){ae.transparent===!0&&ae.side===Vn&&ae.forceSinglePass===!1?(ae.side=Ni,ae.needsUpdate=!0,yi(ae,pe,Ue),ae.side=Ss,ae.needsUpdate=!0,yi(ae,pe,Ue),ae.side=Vn):yi(ae,pe,Ue)}y=Le.get(G),y.init(),g.push(y),G.traverseVisible(function(ae){ae.isLight&&ae.layers.test(ie.layers)&&(y.pushLight(ae),ae.castShadow&&y.pushShadow(ae))}),y.setupLights(v.useLegacyLights),G.traverse(function(ae){const pe=ae.material;if(pe)if(Array.isArray(pe))for(let Ue=0;Ue<pe.length;Ue++){const ke=pe[Ue];ue(ke,G,ae)}else ue(pe,G,ae)}),g.pop(),y=null};let Qt=null;function Tt(G){Qt&&Qt(G)}function Lt(){Tn.stop()}function bn(){Tn.start()}const Tn=new rQ;Tn.setAnimationLoop(Tt),typeof self<"u"&&Tn.setContext(self),this.setAnimationLoop=function(G){Qt=G,Ae.setAnimationLoop(G),G===null?Tn.stop():Tn.start()},Ae.addEventListener("sessionstart",Lt),Ae.addEventListener("sessionend",bn),this.render=function(G,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),Ae.enabled===!0&&Ae.isPresenting===!0&&(Ae.cameraAutoUpdate===!0&&Ae.updateCamera(ie),ie=Ae.getCamera()),G.isScene===!0&&G.onBeforeRender(v,G,ie,M),y=Le.get(G,g.length),y.init(),g.push(y),X.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),$.setFromProjectionMatrix(X),Q=this.localClippingEnabled,N=Qe.init(this.clippingPlanes,Q),A=Ce.get(G,p.length),A.init(),p.push(A),oi(G,ie,0,v.sortObjects),A.finish(),v.sortObjects===!0&&A.sort(O,W),this.info.render.frame++,N===!0&&Qe.beginShadows();const ue=y.state.shadowsArray;if(He.render(ue,G,ie),N===!0&&Qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),De.render(A,G),y.setupLights(v.useLegacyLights),ie.isArrayCamera){const ae=ie.cameras;for(let pe=0,Ue=ae.length;pe<Ue;pe++){const ke=ae[pe];xr(A,G,ke,ke.viewport)}}else xr(A,G,ie);M!==null&&(ne.updateMultisampleRenderTarget(M),ne.updateRenderTargetMipmap(M)),G.isScene===!0&&G.onAfterRender(v,G,ie),Re.resetDefaultState(),b=-1,T=null,g.pop(),g.length>0?y=g[g.length-1]:y=null,p.pop(),p.length>0?A=p[p.length-1]:A=null};function oi(G,ie,ue,ae){if(G.visible===!1)return;if(G.layers.test(ie.layers)){if(G.isGroup)ue=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ie);else if(G.isLight)y.pushLight(G),G.castShadow&&y.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||$.intersectsSprite(G)){ae&&ve.setFromMatrixPosition(G.matrixWorld).applyMatrix4(X);const ke=Z.update(G),je=G.material;je.visible&&A.push(G,ke,je,ue,ve.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||$.intersectsObject(G))){const ke=Z.update(G),je=G.material;if(ae&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),ve.copy(G.boundingSphere.center)):(ke.boundingSphere===null&&ke.computeBoundingSphere(),ve.copy(ke.boundingSphere.center)),ve.applyMatrix4(G.matrixWorld).applyMatrix4(X)),Array.isArray(je)){const Xe=ke.groups;for(let $e=0,Be=Xe.length;$e<Be;$e++){const xt=Xe[$e],dt=je[xt.materialIndex];dt&&dt.visible&&A.push(G,ke,dt,ue,ve.z,xt)}}else je.visible&&A.push(G,ke,je,ue,ve.z,null)}}const Ue=G.children;for(let ke=0,je=Ue.length;ke<je;ke++)oi(Ue[ke],ie,ue,ae)}function xr(G,ie,ue,ae){const pe=G.opaque,Ue=G.transmissive,ke=G.transparent;y.setupLightsView(ue),N===!0&&Qe.setGlobalState(v.clippingPlanes,ue),Ue.length>0&&_r(pe,Ue,ie,ue),ae&&ye.viewport(I.copy(ae)),pe.length>0&&Zi(pe,ie,ue),Ue.length>0&&Zi(Ue,ie,ue),ke.length>0&&Zi(ke,ie,ue),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function _r(G,ie,ue,ae){const pe=me.isWebGL2;j===null&&(j=new Rn(1,1,{generateMipmaps:!0,type:ce.has("EXT_color_buffer_half_float")?Ln:$n,minFilter:yo,samples:pe?4:0})),v.getDrawingBufferSize(se),pe?j.setSize(se.x,se.y):j.setSize(F_(se.x),F_(se.y));const Ue=v.getRenderTarget();v.setRenderTarget(j),v.getClearColor(z),L=v.getClearAlpha(),L<1&&v.setClearColor(16777215,.5),v.clear();const ke=v.toneMapping;v.toneMapping=oa,Zi(G,ue,ae),ne.updateMultisampleRenderTarget(j),ne.updateRenderTargetMipmap(j);let je=!1;for(let Xe=0,$e=ie.length;Xe<$e;Xe++){const Be=ie[Xe],xt=Be.object,dt=Be.geometry,ht=Be.material,Bt=Be.group;if(ht.side===Vn&&xt.layers.test(ae.layers)){const Nt=ht.side;ht.side=Ni,ht.needsUpdate=!0,lr(xt,ue,ae,dt,ht,Bt),ht.side=Nt,ht.needsUpdate=!0,je=!0}}je===!0&&(ne.updateMultisampleRenderTarget(j),ne.updateRenderTargetMipmap(j)),v.setRenderTarget(Ue),v.setClearColor(z,L),v.toneMapping=ke}function Zi(G,ie,ue){const ae=ie.isScene===!0?ie.overrideMaterial:null;for(let pe=0,Ue=G.length;pe<Ue;pe++){const ke=G[pe],je=ke.object,Xe=ke.geometry,$e=ae===null?ke.material:ae,Be=ke.group;je.layers.test(ue.layers)&&lr(je,ie,ue,Xe,$e,Be)}}function lr(G,ie,ue,ae,pe,Ue){G.onBeforeRender(v,ie,ue,ae,pe,Ue),G.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),pe.onBeforeRender(v,ie,ue,ae,G,Ue),pe.transparent===!0&&pe.side===Vn&&pe.forceSinglePass===!1?(pe.side=Ni,pe.needsUpdate=!0,v.renderBufferDirect(ue,ie,ae,pe,G,Ue),pe.side=Ss,pe.needsUpdate=!0,v.renderBufferDirect(ue,ie,ae,pe,G,Ue),pe.side=Vn):v.renderBufferDirect(ue,ie,ae,pe,G,Ue),G.onAfterRender(v,ie,ue,ae,pe,Ue)}function yi(G,ie,ue){ie.isScene!==!0&&(ie=de);const ae=oe.get(G),pe=y.state.lights,Ue=y.state.shadowsArray,ke=pe.state.version,je=ge.getParameters(G,pe.state,Ue,ie,ue),Xe=ge.getProgramCacheKey(je);let $e=ae.programs;ae.environment=G.isMeshStandardMaterial?ie.environment:null,ae.fog=ie.fog,ae.envMap=(G.isMeshStandardMaterial?be:we).get(G.envMap||ae.environment),$e===void 0&&(G.addEventListener("dispose",nt),$e=new Map,ae.programs=$e);let Be=$e.get(Xe);if(Be!==void 0){if(ae.currentProgram===Be&&ae.lightsStateVersion===ke)return qt(G,je),Be}else je.uniforms=ge.getUniforms(G),G.onBuild(ue,je,v),G.onBeforeCompile(je,v),Be=ge.acquireProgram(je,Xe),$e.set(Xe,Be),ae.uniforms=je.uniforms;const xt=ae.uniforms;(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(xt.clippingPlanes=Qe.uniform),qt(G,je),ae.needsLights=ee(G),ae.lightsStateVersion=ke,ae.needsLights&&(xt.ambientLightColor.value=pe.state.ambient,xt.lightProbe.value=pe.state.probe,xt.directionalLights.value=pe.state.directional,xt.directionalLightShadows.value=pe.state.directionalShadow,xt.spotLights.value=pe.state.spot,xt.spotLightShadows.value=pe.state.spotShadow,xt.rectAreaLights.value=pe.state.rectArea,xt.ltc_1.value=pe.state.rectAreaLTC1,xt.ltc_2.value=pe.state.rectAreaLTC2,xt.pointLights.value=pe.state.point,xt.pointLightShadows.value=pe.state.pointShadow,xt.hemisphereLights.value=pe.state.hemi,xt.directionalShadowMap.value=pe.state.directionalShadowMap,xt.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,xt.spotShadowMap.value=pe.state.spotShadowMap,xt.spotLightMatrix.value=pe.state.spotLightMatrix,xt.spotLightMap.value=pe.state.spotLightMap,xt.pointShadowMap.value=pe.state.pointShadowMap,xt.pointShadowMatrix.value=pe.state.pointShadowMatrix);const dt=Be.getUniforms(),ht=Ux.seqWithValue(dt.seq,xt);return ae.currentProgram=Be,ae.uniformsList=ht,Be}function qt(G,ie){const ue=oe.get(G);ue.outputColorSpace=ie.outputColorSpace,ue.instancing=ie.instancing,ue.skinning=ie.skinning,ue.morphTargets=ie.morphTargets,ue.morphNormals=ie.morphNormals,ue.morphColors=ie.morphColors,ue.morphTargetsCount=ie.morphTargetsCount,ue.numClippingPlanes=ie.numClippingPlanes,ue.numIntersection=ie.numClipIntersection,ue.vertexAlphas=ie.vertexAlphas,ue.vertexTangents=ie.vertexTangents,ue.toneMapping=ie.toneMapping}function Li(G,ie,ue,ae,pe){ie.isScene!==!0&&(ie=de),ne.resetTextureUnits();const Ue=ie.fog,ke=ae.isMeshStandardMaterial?ie.environment:null,je=M===null?v.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Ks,Xe=(ae.isMeshStandardMaterial?be:we).get(ae.envMap||ke),$e=ae.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,Be=!!ue.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),xt=!!ue.morphAttributes.position,dt=!!ue.morphAttributes.normal,ht=!!ue.morphAttributes.color,Bt=ae.toneMapped?v.toneMapping:oa,Nt=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Rt=Nt!==void 0?Nt.length:0,_t=oe.get(ae),Ht=y.state.lights;if(N===!0&&(Q===!0||G!==T)){const en=G===T&&ae.id===b;Qe.setState(ae,G,en)}let bt=!1;ae.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==Ht.state.version||_t.outputColorSpace!==je||pe.isInstancedMesh&&_t.instancing===!1||!pe.isInstancedMesh&&_t.instancing===!0||pe.isSkinnedMesh&&_t.skinning===!1||!pe.isSkinnedMesh&&_t.skinning===!0||_t.envMap!==Xe||ae.fog===!0&&_t.fog!==Ue||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==Qe.numPlanes||_t.numIntersection!==Qe.numIntersection)||_t.vertexAlphas!==$e||_t.vertexTangents!==Be||_t.morphTargets!==xt||_t.morphNormals!==dt||_t.morphColors!==ht||_t.toneMapping!==Bt||me.isWebGL2===!0&&_t.morphTargetsCount!==Rt)&&(bt=!0):(bt=!0,_t.__version=ae.version);let $t=_t.currentProgram;bt===!0&&($t=yi(ae,ie,pe));let On=!1,Kt=!1,Un=!1;const yn=$t.getUniforms(),kn=_t.uniforms;if(ye.useProgram($t.program)&&(On=!0,Kt=!0,Un=!0),ae.id!==b&&(b=ae.id,Kt=!0),On||T!==G){if(yn.setValue(te,"projectionMatrix",G.projectionMatrix),me.logarithmicDepthBuffer&&yn.setValue(te,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),T!==G&&(T=G,Kt=!0,Un=!0),ae.isShaderMaterial||ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshStandardMaterial||ae.envMap){const en=yn.map.cameraPosition;en!==void 0&&en.setValue(te,ve.setFromMatrixPosition(G.matrixWorld))}(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&yn.setValue(te,"isOrthographic",G.isOrthographicCamera===!0),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial||ae.isShadowMaterial||pe.isSkinnedMesh)&&yn.setValue(te,"viewMatrix",G.matrixWorldInverse)}if(pe.isSkinnedMesh){yn.setOptional(te,pe,"bindMatrix"),yn.setOptional(te,pe,"bindMatrixInverse");const en=pe.skeleton;en&&(me.floatVertexTextures?(en.boneTexture===null&&en.computeBoneTexture(),yn.setValue(te,"boneTexture",en.boneTexture,ne),yn.setValue(te,"boneTextureSize",en.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Jn=ue.morphAttributes;if((Jn.position!==void 0||Jn.normal!==void 0||Jn.color!==void 0&&me.isWebGL2===!0)&&at.update(pe,ue,$t),(Kt||_t.receiveShadow!==pe.receiveShadow)&&(_t.receiveShadow=pe.receiveShadow,yn.setValue(te,"receiveShadow",pe.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(kn.envMap.value=Xe,kn.flipEnvMap.value=Xe.isCubeTexture&&Xe.isRenderTargetTexture===!1?-1:1),Kt&&(yn.setValue(te,"toneMappingExposure",v.toneMappingExposure),_t.needsLights&&Js(kn,Un),Ue&&ae.fog===!0&&Fe.refreshFogUniforms(kn,Ue),Fe.refreshMaterialUniforms(kn,ae,J,K,j),Ux.upload(te,_t.uniformsList,kn,ne)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(Ux.upload(te,_t.uniformsList,kn,ne),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&yn.setValue(te,"center",pe.center),yn.setValue(te,"modelViewMatrix",pe.modelViewMatrix),yn.setValue(te,"normalMatrix",pe.normalMatrix),yn.setValue(te,"modelMatrix",pe.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const en=ae.uniformsGroups;for(let ti=0,Pn=en.length;ti<Pn;ti++)if(me.isWebGL2){const sn=en[ti];qe.update(sn,$t),qe.bind(sn,$t)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return $t}function Js(G,ie){G.ambientLightColor.needsUpdate=ie,G.lightProbe.needsUpdate=ie,G.directionalLights.needsUpdate=ie,G.directionalLightShadows.needsUpdate=ie,G.pointLights.needsUpdate=ie,G.pointLightShadows.needsUpdate=ie,G.spotLights.needsUpdate=ie,G.spotLightShadows.needsUpdate=ie,G.rectAreaLights.needsUpdate=ie,G.hemisphereLights.needsUpdate=ie}function ee(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(G,ie,ue){oe.get(G.texture).__webglTexture=ie,oe.get(G.depthTexture).__webglTexture=ue;const ae=oe.get(G);ae.__hasExternalTextures=!0,ae.__hasExternalTextures&&(ae.__autoAllocateDepthBuffer=ue===void 0,ae.__autoAllocateDepthBuffer||ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ie){const ue=oe.get(G);ue.__webglFramebuffer=ie,ue.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(G,ie=0,ue=0){M=G,S=ie,C=ue;let ae=!0,pe=null,Ue=!1,ke=!1;if(G){const Xe=oe.get(G);Xe.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(te.FRAMEBUFFER,null),ae=!1):Xe.__webglFramebuffer===void 0?ne.setupRenderTarget(G):Xe.__hasExternalTextures&&ne.rebindTextures(G,oe.get(G.texture).__webglTexture,oe.get(G.depthTexture).__webglTexture);const $e=G.texture;($e.isData3DTexture||$e.isDataArrayTexture||$e.isCompressedArrayTexture)&&(ke=!0);const Be=oe.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(pe=Be[ie],Ue=!0):me.isWebGL2&&G.samples>0&&ne.useMultisampledRTT(G)===!1?pe=oe.get(G).__webglMultisampledFramebuffer:pe=Be,I.copy(G.viewport),F.copy(G.scissor),R=G.scissorTest}else I.copy(V).multiplyScalar(J).floor(),F.copy(U).multiplyScalar(J).floor(),R=Y;if(ye.bindFramebuffer(te.FRAMEBUFFER,pe)&&me.drawBuffers&&ae&&ye.drawBuffers(G,pe),ye.viewport(I),ye.scissor(F),ye.setScissorTest(R),Ue){const Xe=oe.get(G.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Xe.__webglTexture,ue)}else if(ke){const Xe=oe.get(G.texture),$e=ie||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,Xe.__webglTexture,ue||0,$e)}b=-1},this.readRenderTargetPixels=function(G,ie,ue,ae,pe,Ue,ke){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=oe.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&ke!==void 0&&(je=je[ke]),je){ye.bindFramebuffer(te.FRAMEBUFFER,je);try{const Xe=G.texture,$e=Xe.format,Be=Xe.type;if($e!==Dn&&le.convert($e)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const xt=Be===Ln&&(ce.has("EXT_color_buffer_half_float")||me.isWebGL2&&ce.has("EXT_color_buffer_float"));if(Be!==$n&&le.convert(Be)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Be===En&&(me.isWebGL2||ce.has("OES_texture_float")||ce.has("WEBGL_color_buffer_float")))&&!xt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=G.width-ae&&ue>=0&&ue<=G.height-pe&&te.readPixels(ie,ue,ae,pe,le.convert($e),le.convert(Be),Ue)}finally{const Xe=M!==null?oe.get(M).__webglFramebuffer:null;ye.bindFramebuffer(te.FRAMEBUFFER,Xe)}}},this.copyFramebufferToTexture=function(G,ie,ue=0){const ae=Math.pow(2,-ue),pe=Math.floor(ie.image.width*ae),Ue=Math.floor(ie.image.height*ae);ne.setTexture2D(ie,0),te.copyTexSubImage2D(te.TEXTURE_2D,ue,0,0,G.x,G.y,pe,Ue),ye.unbindTexture()},this.copyTextureToTexture=function(G,ie,ue,ae=0){const pe=ie.image.width,Ue=ie.image.height,ke=le.convert(ue.format),je=le.convert(ue.type);ne.setTexture2D(ue,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,ue.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,ue.unpackAlignment),ie.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,ae,G.x,G.y,pe,Ue,ke,je,ie.image.data):ie.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,ae,G.x,G.y,ie.mipmaps[0].width,ie.mipmaps[0].height,ke,ie.mipmaps[0].data):te.texSubImage2D(te.TEXTURE_2D,ae,G.x,G.y,ke,je,ie.image),ae===0&&ue.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(G,ie,ue,ae,pe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ue=G.max.x-G.min.x+1,ke=G.max.y-G.min.y+1,je=G.max.z-G.min.z+1,Xe=le.convert(ae.format),$e=le.convert(ae.type);let Be;if(ae.isData3DTexture)ne.setTexture3D(ae,0),Be=te.TEXTURE_3D;else if(ae.isDataArrayTexture)ne.setTexture2DArray(ae,0),Be=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,ae.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,ae.unpackAlignment);const xt=te.getParameter(te.UNPACK_ROW_LENGTH),dt=te.getParameter(te.UNPACK_IMAGE_HEIGHT),ht=te.getParameter(te.UNPACK_SKIP_PIXELS),Bt=te.getParameter(te.UNPACK_SKIP_ROWS),Nt=te.getParameter(te.UNPACK_SKIP_IMAGES),Rt=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,Rt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Rt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,G.min.x),te.pixelStorei(te.UNPACK_SKIP_ROWS,G.min.y),te.pixelStorei(te.UNPACK_SKIP_IMAGES,G.min.z),ue.isDataTexture||ue.isData3DTexture?te.texSubImage3D(Be,pe,ie.x,ie.y,ie.z,Ue,ke,je,Xe,$e,Rt.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(Be,pe,ie.x,ie.y,ie.z,Ue,ke,je,Xe,Rt.data)):te.texSubImage3D(Be,pe,ie.x,ie.y,ie.z,Ue,ke,je,Xe,$e,Rt),te.pixelStorei(te.UNPACK_ROW_LENGTH,xt),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,dt),te.pixelStorei(te.UNPACK_SKIP_PIXELS,ht),te.pixelStorei(te.UNPACK_SKIP_ROWS,Bt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Nt),pe===0&&ae.generateMipmaps&&te.generateMipmap(Be),ye.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?ne.setTextureCube(G,0):G.isData3DTexture?ne.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ne.setTexture2DArray(G,0):ne.setTexture2D(G,0),ye.unbindTexture()},this.resetState=function(){S=0,C=0,M=null,ye.reset(),Re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yl}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===un?Iu:YI}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Iu?un:Ks}}class hQ extends V3{}hQ.prototype.isWebGL1Renderer=!0;class W3{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new We(e),this.density=t}clone(){return new W3(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class j3{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new We(e),this.near=t,this.far=i}clone(){return new j3(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class xo extends kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class zA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=rA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=go()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=go()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=go()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ms=new D;class Hs{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ms.fromBufferAttribute(this,t),ms.applyMatrix4(e),this.setXYZ(t,ms.x,ms.y,ms.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ms.fromBufferAttribute(this,t),ms.applyNormalMatrix(e),this.setXYZ(t,ms.x,ms.y,ms.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ms.fromBufferAttribute(this,t),ms.transformDirection(e),this.setXYZ(t,ms.x,ms.y,ms.z);return this}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ho(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ho(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ho(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ho(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),i=An(i,this.array),r=An(r,this.array),s=An(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new zt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Hs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class n6 extends Ji{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new We(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _d;const L0=new D,Ed=new D,wd=new D,Sd=new Ee,F0=new Ee,fQ=new Oe,Gy=new D,O0=new D,Hy=new D,M7=new Ee,nC=new Ee,b7=new Ee;class dQ extends kt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",_d===void 0){_d=new It;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new zA(t,5);_d.setIndex([0,1,2,0,2,3]),_d.setAttribute("position",new Hs(i,3,0,!1)),_d.setAttribute("uv",new Hs(i,2,3,!1))}this.geometry=_d,this.material=e!==void 0?e:new n6,this.center=new Ee(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ed.setFromMatrixScale(this.matrixWorld),fQ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ed.multiplyScalar(-wd.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Qy(Gy.set(-.5,-.5,0),wd,o,Ed,r,s),Qy(O0.set(.5,-.5,0),wd,o,Ed,r,s),Qy(Hy.set(.5,.5,0),wd,o,Ed,r,s),M7.set(0,0),nC.set(1,0),b7.set(1,1);let a=e.ray.intersectTriangle(Gy,O0,Hy,!1,L0);if(a===null&&(Qy(O0.set(-.5,.5,0),wd,o,Ed,r,s),nC.set(0,1),a=e.ray.intersectTriangle(Gy,Hy,O0,!1,L0),a===null))return;const l=e.ray.origin.distanceTo(L0);l<e.near||l>e.far||t.push({distance:l,point:L0.clone(),uv:rr.getInterpolation(L0,Gy,O0,Hy,M7,nC,b7,new Ee),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Qy(n,e,t,i,r,s){Sd.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(F0.x=s*Sd.x-r*Sd.y,F0.y=r*Sd.x+s*Sd.y):F0.copy(Sd),n.copy(e),n.x+=F0.x,n.y+=F0.y,n.applyMatrix4(fQ)}const Vy=new D,T7=new D;class pQ extends kt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Vy.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Vy);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Vy.setFromMatrixPosition(e.matrixWorld),T7.setFromMatrixPosition(this.matrixWorld);const i=Vy.distanceTo(T7)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const I7=new D,B7=new Yt,P7=new Yt,Wle=new D,R7=new Oe,Cd=new D,iC=new vi,D7=new Oe,rC=new ha;class kA extends ct{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Oe,this.bindMatrixInverse=new Oe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Bn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Cd.fromBufferAttribute(t,i),this.applyBoneTransform(i,Cd),this.boundingBox.expandByPoint(Cd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new vi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Cd.fromBufferAttribute(t,i),this.applyBoneTransform(i,Cd),this.boundingSphere.expandByPoint(Cd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),iC.copy(this.boundingSphere),iC.applyMatrix4(r),e.ray.intersectsSphere(iC)!==!1&&(D7.copy(r).invert(),rC.copy(e.ray).applyMatrix4(D7),!(this.boundingBox!==null&&rC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,rC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;B7.fromBufferAttribute(r.attributes.skinIndex,e),P7.fromBufferAttribute(r.attributes.skinWeight,e),I7.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=P7.getComponent(s);if(o!==0){const a=B7.getComponent(s);R7.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Wle.copy(I7).applyMatrix4(R7),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class wm extends kt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qs extends In{constructor(e=null,t=1,i=1,r,s,o,a,l,c=rn,u=rn,h,f){super(null,o,a,l,c,u,r,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const L7=new Oe,jle=new Oe;class Qm{constructor(e=[],t=[]){this.uuid=go(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Oe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Oe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:jle;L7.multiplyMatrices(a,t[s]),L7.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Qm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=eQ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new qs(t,e,e,Dn,En);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new wm),this.bones.push(o),this.boneInverses.push(new Oe().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Qa extends zt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Md=new Oe,F7=new Oe,Wy=[],O7=new Bn,Xle=new Oe,U0=new ct,z0=new vi;class NA extends ct{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Qa(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Xle)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Bn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Md),O7.copy(e.boundingBox).applyMatrix4(Md),this.boundingBox.union(O7)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new vi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Md),z0.copy(e.boundingSphere).applyMatrix4(Md),this.boundingSphere.union(z0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(U0.geometry=this.geometry,U0.material=this.material,U0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),z0.copy(this.boundingSphere),z0.applyMatrix4(i),e.ray.intersectsSphere(z0)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Md),F7.multiplyMatrices(i,Md),U0.matrixWorld=F7,U0.raycast(e,Wy);for(let o=0,a=Wy.length;o<a;o++){const l=Wy[o];l.instanceId=s,l.object=this,t.push(l)}Wy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Qa(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Gi extends Ji{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new We(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const U7=new D,z7=new D,k7=new Oe,sC=new ha,jy=new vi;let cn=class extends kt{constructor(e=new It,t=new Gi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)U7.fromBufferAttribute(t,r-1),z7.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=U7.distanceTo(z7);e.setAttribute("lineDistance",new ft(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),jy.copy(i.boundingSphere),jy.applyMatrix4(r),jy.radius+=s,e.ray.intersectsSphere(jy)===!1)return;k7.copy(r).invert(),sC.copy(e.ray).applyMatrix4(k7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new D,u=new D,h=new D,f=new D,d=this.isLineSegments?2:1,m=i.index,y=i.attributes.position;if(m!==null){const p=Math.max(0,o.start),g=Math.min(m.count,o.start+o.count);for(let v=p,E=g-1;v<E;v+=d){const S=m.getX(v),C=m.getX(v+1);if(c.fromBufferAttribute(y,S),u.fromBufferAttribute(y,C),sC.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(f);b<e.near||b>e.far||t.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,o.start),g=Math.min(y.count,o.start+o.count);for(let v=p,E=g-1;v<E;v+=d){if(c.fromBufferAttribute(y,v),u.fromBufferAttribute(y,v+1),sC.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||t.push({distance:C,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const N7=new D,G7=new D;class Xa extends cn{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)N7.fromBufferAttribute(t,r),G7.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+N7.distanceTo(G7);e.setAttribute("lineDistance",new ft(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class i6 extends cn{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class GA extends Ji{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new We(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const H7=new Oe,eb=new ha,Xy=new vi,Yy=new D;let r6=class extends kt{constructor(e=new It,t=new GA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Xy.copy(i.boundingSphere),Xy.applyMatrix4(r),Xy.radius+=s,e.ray.intersectsSphere(Xy)===!1)return;H7.copy(r).invert(),eb.copy(e.ray).applyMatrix4(H7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(c!==null){const f=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let m=f,A=d;m<A;m++){const y=c.getX(m);Yy.fromBufferAttribute(h,y),Q7(Yy,y,l,r,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(h.count,o.start+o.count);for(let m=f,A=d;m<A;m++)Yy.fromBufferAttribute(h,m),Q7(Yy,m,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function Q7(n,e,t,i,r,s,o){const a=eb.distanceSqToPoint(n);if(a<t){const l=new D;eb.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}let mQ=class extends In{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ut,this.magFilter=s!==void 0?s:Ut,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};class Yle extends In{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=rn,this.minFilter=rn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Of extends In{constructor(e,t,i,r,s,o,a,l,c,u,h,f){super(null,o,a,l,c,u,r,s,h,f),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}let qle=class extends Of{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qn}};class X3 extends In{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],f=i[r+1]-u,d=(o-u)/f;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ee:new D);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new D,r=[],s=[],o=[],a=new D,l=new Oe;for(let d=0;d<=e;d++){const m=d/e;r[d]=this.getTangentAt(m,new D)}s[0]=new D,o[0]=new D;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),f<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(ki(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,m))}o[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(ki(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],d*m)),o[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class pf extends fa{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Ee,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=c-this.aY;l=f*u-d*h+this.aX,c=f*h+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class gQ extends pf{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function s6(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+h)+(l-a)/h;f*=u,d*=u,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const qy=new D,oC=new s6,aC=new s6,lC=new s6;class Y3 extends fa{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new D){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(qy.subVectors(r[0],r[1]).add(r[0]),c=qy);const h=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(qy.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=qy),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(h),d),A=Math.pow(h.distanceToSquared(f),d),y=Math.pow(f.distanceToSquared(u),d);A<1e-4&&(A=1),m<1e-4&&(m=A),y<1e-4&&(y=A),oC.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,m,A,y),aC.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,m,A,y),lC.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,m,A,y)}else this.curveType==="catmullrom"&&(oC.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),aC.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),lC.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return i.set(oC.calc(l),aC.calc(l),lC.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new D().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function V7(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function Kle(n,e){const t=1-n;return t*t*e}function Jle(n,e){return 2*(1-n)*n*e}function Zle(n,e){return n*n*e}function gg(n,e,t,i){return Kle(n,e)+Jle(n,t)+Zle(n,i)}function $le(n,e){const t=1-n;return t*t*t*e}function ece(n,e){const t=1-n;return 3*t*t*n*e}function tce(n,e){return 3*(1-n)*n*n*e}function nce(n,e){return n*n*n*e}function Ag(n,e,t,i,r){return $le(n,e)+ece(n,t)+tce(n,i)+nce(n,r)}class o6 extends fa{constructor(e=new Ee,t=new Ee,i=new Ee,r=new Ee){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ag(e,r.x,s.x,o.x,a.x),Ag(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class a6 extends fa{constructor(e=new D,t=new D,i=new D,r=new D){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new D){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Ag(e,r.x,s.x,o.x,a.x),Ag(e,r.y,s.y,o.y,a.y),Ag(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class q3 extends fa{constructor(e=new Ee,t=new Ee){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ee){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AQ extends fa{constructor(e=new D,t=new D){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new D){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new D){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class l6 extends fa{constructor(e=new Ee,t=new Ee,i=new Ee){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gg(e,r.x,s.x,o.x),gg(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class K3 extends fa{constructor(e=new D,t=new D,i=new D){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new D){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gg(e,r.x,s.x,o.x),gg(e,r.y,s.y,o.y),gg(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class c6 extends fa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ee){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(V7(a,l.x,c.x,u.x,h.x),V7(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ee().fromArray(r))}return this}}var u6=Object.freeze({__proto__:null,ArcCurve:gQ,CatmullRomCurve3:Y3,CubicBezierCurve:o6,CubicBezierCurve3:a6,EllipseCurve:pf,LineCurve:q3,LineCurve3:AQ,QuadraticBezierCurve:l6,QuadraticBezierCurve3:K3,SplineCurve:c6});class h6 extends fa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new q3(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new u6[r.type]().fromJSON(r))}return this}}class Pu extends h6{constructor(e){super(),this.type="Path",this.currentPoint=new Ee,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new q3(this.currentPoint.clone(),new Ee(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new l6(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new o6(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r),new Ee(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new c6(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new pf(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class HA extends It{constructor(e=[new Ee(0,-.5),new Ee(.5,0),new Ee(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=ki(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,h=new D,f=new Ee,d=new D,m=new D,A=new D;let y=0,p=0;for(let g=0;g<=e.length-1;g++)switch(g){case 0:y=e[g+1].x-e[g].x,p=e[g+1].y-e[g].y,d.x=p*1,d.y=-y,d.z=p*0,A.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:y=e[g+1].x-e[g].x,p=e[g+1].y-e[g].y,d.x=p*1,d.y=-y,d.z=p*0,m.copy(d),d.x+=A.x,d.y+=A.y,d.z+=A.z,d.normalize(),l.push(d.x,d.y,d.z),A.copy(m)}for(let g=0;g<=t;g++){const v=i+g*u*r,E=Math.sin(v),S=Math.cos(v);for(let C=0;C<=e.length-1;C++){h.x=e[C].x*E,h.y=e[C].y,h.z=e[C].x*S,o.push(h.x,h.y,h.z),f.x=g/t,f.y=C/(e.length-1),a.push(f.x,f.y);const M=l[3*C+0]*E,b=l[3*C+1],T=l[3*C+0]*S;c.push(M,b,T)}}for(let g=0;g<t;g++)for(let v=0;v<e.length-1;v++){const E=v+g*e.length,S=E,C=E+e.length,M=E+e.length+1,b=E+1;s.push(S,C,b),s.push(M,b,C)}this.setIndex(s),this.setAttribute("position",new ft(o,3)),this.setAttribute("uv",new ft(a,2)),this.setAttribute("normal",new ft(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HA(e.points,e.segments,e.phiStart,e.phiLength)}}class J3 extends HA{constructor(e=1,t=1,i=4,r=8){const s=new Pu;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new J3(e.radius,e.length,e.capSegments,e.radialSegments)}}class Z3 extends It{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new D,u=new Ee;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const d=i+h/t*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new ft(o,3)),this.setAttribute("normal",new ft(a,3)),this.setAttribute("uv",new ft(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z3(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Tr extends It{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],d=[];let m=0;const A=[],y=i/2;let p=0;g(),o===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new ft(h,3)),this.setAttribute("normal",new ft(f,3)),this.setAttribute("uv",new ft(d,2));function g(){const E=new D,S=new D;let C=0;const M=(t-e)/i;for(let b=0;b<=s;b++){const T=[],I=b/s,F=I*(t-e)+e;for(let R=0;R<=r;R++){const z=R/r,L=z*l+a,H=Math.sin(L),K=Math.cos(L);S.x=F*H,S.y=-I*i+y,S.z=F*K,h.push(S.x,S.y,S.z),E.set(H,M,K).normalize(),f.push(E.x,E.y,E.z),d.push(z,1-I),T.push(m++)}A.push(T)}for(let b=0;b<r;b++)for(let T=0;T<s;T++){const I=A[T][b],F=A[T+1][b],R=A[T+1][b+1],z=A[T][b+1];u.push(I,F,z),u.push(F,R,z),C+=6}c.addGroup(p,C,0),p+=C}function v(E){const S=m,C=new Ee,M=new D;let b=0;const T=E===!0?e:t,I=E===!0?1:-1;for(let R=1;R<=r;R++)h.push(0,y*I,0),f.push(0,I,0),d.push(.5,.5),m++;const F=m;for(let R=0;R<=r;R++){const L=R/r*l+a,H=Math.cos(L),K=Math.sin(L);M.x=T*K,M.y=y*I,M.z=T*H,h.push(M.x,M.y,M.z),f.push(0,I,0),C.x=H*.5+.5,C.y=K*.5*I+.5,d.push(C.x,C.y),m++}for(let R=0;R<r;R++){const z=S+R,L=F+R;E===!0?u.push(L,L+1,z):u.push(L+1,L,z),b+=3}c.addGroup(p,b,E===!0?1:2),p+=b}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $3 extends Tr{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new $3(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nh extends It{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new ft(s,3)),this.setAttribute("normal",new ft(s.slice(),3)),this.setAttribute("uv",new ft(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(g){const v=new D,E=new D,S=new D;for(let C=0;C<t.length;C+=3)d(t[C+0],v),d(t[C+1],E),d(t[C+2],S),l(v,E,S,g)}function l(g,v,E,S){const C=S+1,M=[];for(let b=0;b<=C;b++){M[b]=[];const T=g.clone().lerp(E,b/C),I=v.clone().lerp(E,b/C),F=C-b;for(let R=0;R<=F;R++)R===0&&b===C?M[b][R]=T:M[b][R]=T.clone().lerp(I,R/F)}for(let b=0;b<C;b++)for(let T=0;T<2*(C-b)-1;T++){const I=Math.floor(T/2);T%2===0?(f(M[b][I+1]),f(M[b+1][I]),f(M[b][I])):(f(M[b][I+1]),f(M[b+1][I+1]),f(M[b+1][I]))}}function c(g){const v=new D;for(let E=0;E<s.length;E+=3)v.x=s[E+0],v.y=s[E+1],v.z=s[E+2],v.normalize().multiplyScalar(g),s[E+0]=v.x,s[E+1]=v.y,s[E+2]=v.z}function u(){const g=new D;for(let v=0;v<s.length;v+=3){g.x=s[v+0],g.y=s[v+1],g.z=s[v+2];const E=y(g)/2/Math.PI+.5,S=p(g)/Math.PI+.5;o.push(E,1-S)}m(),h()}function h(){for(let g=0;g<o.length;g+=6){const v=o[g+0],E=o[g+2],S=o[g+4],C=Math.max(v,E,S),M=Math.min(v,E,S);C>.9&&M<.1&&(v<.2&&(o[g+0]+=1),E<.2&&(o[g+2]+=1),S<.2&&(o[g+4]+=1))}}function f(g){s.push(g.x,g.y,g.z)}function d(g,v){const E=g*3;v.x=e[E+0],v.y=e[E+1],v.z=e[E+2]}function m(){const g=new D,v=new D,E=new D,S=new D,C=new Ee,M=new Ee,b=new Ee;for(let T=0,I=0;T<s.length;T+=9,I+=6){g.set(s[T+0],s[T+1],s[T+2]),v.set(s[T+3],s[T+4],s[T+5]),E.set(s[T+6],s[T+7],s[T+8]),C.set(o[I+0],o[I+1]),M.set(o[I+2],o[I+3]),b.set(o[I+4],o[I+5]),S.copy(g).add(v).add(E).divideScalar(3);const F=y(S);A(C,I+0,g,F),A(M,I+2,v,F),A(b,I+4,E,F)}}function A(g,v,E,S){S<0&&g.x===1&&(o[v]=g.x-1),E.x===0&&E.z===0&&(o[v]=S/2/Math.PI+.5)}function y(g){return Math.atan2(g.z,-g.x)}function p(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nh(e.vertices,e.indices,e.radius,e.details)}}class eE extends nh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eE(e.radius,e.detail)}}const Ky=new D,Jy=new D,cC=new D,Zy=new rr;class f6 extends It{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(ff*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),f={},d=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:A,b:y,c:p}=Zy;if(A.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),p.fromBufferAttribute(a,c[2]),Zy.getNormal(cC),h[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,h[1]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,h[2]=`${Math.round(p.x*r)},${Math.round(p.y*r)},${Math.round(p.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let g=0;g<3;g++){const v=(g+1)%3,E=h[g],S=h[v],C=Zy[u[g]],M=Zy[u[v]],b=`${E}_${S}`,T=`${S}_${E}`;T in f&&f[T]?(cC.dot(f[T].normal)<=s&&(d.push(C.x,C.y,C.z),d.push(M.x,M.y,M.z)),f[T]=null):b in f||(f[b]={index0:c[g],index1:c[v],normal:cC.clone()})}}for(const m in f)if(f[m]){const{index0:A,index1:y}=f[m];Ky.fromBufferAttribute(a,A),Jy.fromBufferAttribute(a,y),d.push(Ky.x,Ky.y,Ky.z),d.push(Jy.x,Jy.y,Jy.z)}this.setAttribute("position",new ft(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let gc=class extends Pu{constructor(e){super(e),this.uuid=go(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Pu().fromJSON(r))}return this}};const ice={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=vQ(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,f,d;if(i&&(s=lce(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<r;m+=t)h=n[m],f=n[m+1],h<a&&(a=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);d=Math.max(c-a,u-l),d=d!==0?32767/d:0}return aA(s,o,t,a,l,d,0),o}};function vQ(n,e,t,i,r){let s,o;if(r===yce(n,e,t,i)>0)for(s=e;s<t;s+=i)o=W7(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=W7(s,n[s],n[s+1],o);return o&&tE(o,o.next)&&(cA(o),o=o.next),o}function Cf(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(tE(t,t.next)||Ii(t.prev,t,t.next)===0)){if(cA(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function aA(n,e,t,i,r,s,o){if(!n)return;!o&&s&&dce(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?sce(n,i,r,s):rce(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),cA(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=oce(Cf(n),e,t),aA(n,e,t,i,r,s,2)):o===2&&ace(n,e,t,i,r,s):aA(Cf(n),e,t,i,r,s,1);break}}}function rce(n){const e=n.prev,t=n,i=n.next;if(Ii(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,f=r>s?r>o?r:o:s>o?s:o,d=a>l?a>c?a:c:l>c?l:c;let m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=f&&m.y>=h&&m.y<=d&&Gp(r,a,s,l,o,c,m.x,m.y)&&Ii(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function sce(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Ii(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,h=s.y,f=o.y,d=a<l?a<c?a:c:l<c?l:c,m=u<h?u<f?u:f:h<f?h:f,A=a>l?a>c?a:c:l>c?l:c,y=u>h?u>f?u:f:h>f?h:f,p=tb(d,m,e,t,i),g=tb(A,y,e,t,i);let v=n.prevZ,E=n.nextZ;for(;v&&v.z>=p&&E&&E.z<=g;){if(v.x>=d&&v.x<=A&&v.y>=m&&v.y<=y&&v!==r&&v!==o&&Gp(a,u,l,h,c,f,v.x,v.y)&&Ii(v.prev,v,v.next)>=0||(v=v.prevZ,E.x>=d&&E.x<=A&&E.y>=m&&E.y<=y&&E!==r&&E!==o&&Gp(a,u,l,h,c,f,E.x,E.y)&&Ii(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;v&&v.z>=p;){if(v.x>=d&&v.x<=A&&v.y>=m&&v.y<=y&&v!==r&&v!==o&&Gp(a,u,l,h,c,f,v.x,v.y)&&Ii(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;E&&E.z<=g;){if(E.x>=d&&E.x<=A&&E.y>=m&&E.y<=y&&E!==r&&E!==o&&Gp(a,u,l,h,c,f,E.x,E.y)&&Ii(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function oce(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!tE(r,s)&&yQ(r,i,i.next,s)&&lA(r,s)&&lA(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),cA(i),cA(i.next),i=n=s),i=i.next}while(i!==n);return Cf(i)}function ace(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&gce(o,a)){let l=xQ(o,a);o=Cf(o,o.next),l=Cf(l,l.next),aA(o,e,t,i,r,s,0),aA(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function lce(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=vQ(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(mce(c));for(r.sort(cce),s=0;s<r.length;s++)t=uce(r[s],t);return t}function cce(n,e){return n.x-e.x}function uce(n,e){const t=hce(n,e);if(!t)return e;const i=xQ(t,n);return Cf(i,i.next),Cf(t,t.next)}function hce(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const f=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>i&&(i=f,r=t.x<t.next.x?t:t.next,f===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Gp(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),lA(t,n)&&(h<u||h===u&&(t.x>r.x||t.x===r.x&&fce(r,t)))&&(r=t,u=h)),t=t.next;while(t!==a);return r}function fce(n,e){return Ii(n.prev,n,e.prev)<0&&Ii(e.next,n,n.next)<0}function dce(n,e,t,i){let r=n;do r.z===0&&(r.z=tb(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,pce(r)}function pce(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function tb(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function mce(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Gp(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function gce(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Ace(n,e)&&(lA(n,e)&&lA(e,n)&&vce(n,e)&&(Ii(n.prev,n,e.prev)||Ii(n,e.prev,e))||tE(n,e)&&Ii(n.prev,n,n.next)>0&&Ii(e.prev,e,e.next)>0)}function Ii(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function tE(n,e){return n.x===e.x&&n.y===e.y}function yQ(n,e,t,i){const r=e2(Ii(n,e,t)),s=e2(Ii(n,e,i)),o=e2(Ii(t,i,n)),a=e2(Ii(t,i,e));return!!(r!==s&&o!==a||r===0&&$y(n,t,e)||s===0&&$y(n,i,e)||o===0&&$y(t,n,i)||a===0&&$y(t,e,i))}function $y(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function e2(n){return n>0?1:n<0?-1:0}function Ace(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&yQ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function lA(n,e){return Ii(n.prev,n,n.next)<0?Ii(n,e,n.next)>=0&&Ii(n,n.prev,e)>=0:Ii(n,e,n.prev)<0||Ii(n,n.next,e)<0}function vce(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function xQ(n,e){const t=new nb(n.i,n.x,n.y),i=new nb(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function W7(n,e,t,i){const r=new nb(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function cA(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function nb(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yce(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Na{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Na.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];j7(e),X7(i,e);let o=e.length;t.forEach(j7);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,X7(i,t[l]);const a=ice.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function j7(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function X7(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class QA extends It{constructor(e=new gc([new Ee(.5,.5),new Ee(-.5,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ft(r,3)),this.setAttribute("uv",new ft(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:d-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const p=t.extrudePath,g=t.UVGenerator!==void 0?t.UVGenerator:xce;let v,E=!1,S,C,M,b;p&&(v=p.getSpacedPoints(u),E=!0,f=!1,S=p.computeFrenetFrames(u,!1),C=new D,M=new D,b=new D),f||(y=0,d=0,m=0,A=0);const T=a.extractPoints(c);let I=T.shape;const F=T.holes;if(!Na.isClockWise(I)){I=I.reverse();for(let te=0,xe=F.length;te<xe;te++){const ce=F[te];Na.isClockWise(ce)&&(F[te]=ce.reverse())}}const z=Na.triangulateShape(I,F),L=I;for(let te=0,xe=F.length;te<xe;te++){const ce=F[te];I=I.concat(ce)}function H(te,xe,ce){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),te.clone().addScaledVector(xe,ce)}const K=I.length,J=z.length;function O(te,xe,ce){let me,ye,Me;const oe=te.x-xe.x,ne=te.y-xe.y,we=ce.x-te.x,be=ce.y-te.y,st=oe*oe+ne*ne,re=oe*be-ne*we;if(Math.abs(re)>Number.EPSILON){const Z=Math.sqrt(st),ge=Math.sqrt(we*we+be*be),Fe=xe.x-ne/Z,Ce=xe.y+oe/Z,Le=ce.x-be/ge,Qe=ce.y+we/ge,He=((Le-Fe)*be-(Qe-Ce)*we)/(oe*be-ne*we);me=Fe+oe*He-te.x,ye=Ce+ne*He-te.y;const De=me*me+ye*ye;if(De<=2)return new Ee(me,ye);Me=Math.sqrt(De/2)}else{let Z=!1;oe>Number.EPSILON?we>Number.EPSILON&&(Z=!0):oe<-Number.EPSILON?we<-Number.EPSILON&&(Z=!0):Math.sign(ne)===Math.sign(be)&&(Z=!0),Z?(me=-ne,ye=oe,Me=Math.sqrt(st)):(me=oe,ye=ne,Me=Math.sqrt(st/2))}return new Ee(me/Me,ye/Me)}const W=[];for(let te=0,xe=L.length,ce=xe-1,me=te+1;te<xe;te++,ce++,me++)ce===xe&&(ce=0),me===xe&&(me=0),W[te]=O(L[te],L[ce],L[me]);const V=[];let U,Y=W.concat();for(let te=0,xe=F.length;te<xe;te++){const ce=F[te];U=[];for(let me=0,ye=ce.length,Me=ye-1,oe=me+1;me<ye;me++,Me++,oe++)Me===ye&&(Me=0),oe===ye&&(oe=0),U[me]=O(ce[me],ce[Me],ce[oe]);V.push(U),Y=Y.concat(U)}for(let te=0;te<y;te++){const xe=te/y,ce=d*Math.cos(xe*Math.PI/2),me=m*Math.sin(xe*Math.PI/2)+A;for(let ye=0,Me=L.length;ye<Me;ye++){const oe=H(L[ye],W[ye],me);X(oe.x,oe.y,-ce)}for(let ye=0,Me=F.length;ye<Me;ye++){const oe=F[ye];U=V[ye];for(let ne=0,we=oe.length;ne<we;ne++){const be=H(oe[ne],U[ne],me);X(be.x,be.y,-ce)}}}const $=m+A;for(let te=0;te<K;te++){const xe=f?H(I[te],Y[te],$):I[te];E?(M.copy(S.normals[0]).multiplyScalar(xe.x),C.copy(S.binormals[0]).multiplyScalar(xe.y),b.copy(v[0]).add(M).add(C),X(b.x,b.y,b.z)):X(xe.x,xe.y,0)}for(let te=1;te<=u;te++)for(let xe=0;xe<K;xe++){const ce=f?H(I[xe],Y[xe],$):I[xe];E?(M.copy(S.normals[te]).multiplyScalar(ce.x),C.copy(S.binormals[te]).multiplyScalar(ce.y),b.copy(v[te]).add(M).add(C),X(b.x,b.y,b.z)):X(ce.x,ce.y,h/u*te)}for(let te=y-1;te>=0;te--){const xe=te/y,ce=d*Math.cos(xe*Math.PI/2),me=m*Math.sin(xe*Math.PI/2)+A;for(let ye=0,Me=L.length;ye<Me;ye++){const oe=H(L[ye],W[ye],me);X(oe.x,oe.y,h+ce)}for(let ye=0,Me=F.length;ye<Me;ye++){const oe=F[ye];U=V[ye];for(let ne=0,we=oe.length;ne<we;ne++){const be=H(oe[ne],U[ne],me);E?X(be.x,be.y+v[u-1].y,v[u-1].x+ce):X(be.x,be.y,h+ce)}}}N(),Q();function N(){const te=r.length/3;if(f){let xe=0,ce=K*xe;for(let me=0;me<J;me++){const ye=z[me];se(ye[2]+ce,ye[1]+ce,ye[0]+ce)}xe=u+y*2,ce=K*xe;for(let me=0;me<J;me++){const ye=z[me];se(ye[0]+ce,ye[1]+ce,ye[2]+ce)}}else{for(let xe=0;xe<J;xe++){const ce=z[xe];se(ce[2],ce[1],ce[0])}for(let xe=0;xe<J;xe++){const ce=z[xe];se(ce[0]+K*u,ce[1]+K*u,ce[2]+K*u)}}i.addGroup(te,r.length/3-te,0)}function Q(){const te=r.length/3;let xe=0;j(L,xe),xe+=L.length;for(let ce=0,me=F.length;ce<me;ce++){const ye=F[ce];j(ye,xe),xe+=ye.length}i.addGroup(te,r.length/3-te,1)}function j(te,xe){let ce=te.length;for(;--ce>=0;){const me=ce;let ye=ce-1;ye<0&&(ye=te.length-1);for(let Me=0,oe=u+y*2;Me<oe;Me++){const ne=K*Me,we=K*(Me+1),be=xe+me+ne,st=xe+ye+ne,re=xe+ye+we,Z=xe+me+we;ve(be,st,re,Z)}}}function X(te,xe,ce){l.push(te),l.push(xe),l.push(ce)}function se(te,xe,ce){de(te),de(xe),de(ce);const me=r.length/3,ye=g.generateTopUV(i,r,me-3,me-2,me-1);he(ye[0]),he(ye[1]),he(ye[2])}function ve(te,xe,ce,me){de(te),de(xe),de(me),de(xe),de(ce),de(me);const ye=r.length/3,Me=g.generateSideWallUV(i,r,ye-6,ye-3,ye-2,ye-1);he(Me[0]),he(Me[1]),he(Me[3]),he(Me[1]),he(Me[2]),he(Me[3])}function de(te){r.push(l[te*3+0]),r.push(l[te*3+1]),r.push(l[te*3+2])}function he(te){s.push(te.x),s.push(te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return _ce(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new u6[r.type]().fromJSON(r)),new QA(i,e.options)}}const xce={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ee(s,o),new Ee(a,l),new Ee(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],f=e[r*3],d=e[r*3+1],m=e[r*3+2],A=e[s*3],y=e[s*3+1],p=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ee(o,1-l),new Ee(c,1-h),new Ee(f,1-m),new Ee(A,1-p)]:[new Ee(a,1-l),new Ee(u,1-h),new Ee(d,1-m),new Ee(y,1-p)]}};function _ce(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class VA extends nh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new VA(e.radius,e.detail)}}class Qo extends nh{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qo(e.radius,e.detail)}}class nE extends It{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let h=e;const f=(t-e)/r,d=new D,m=new Ee;for(let A=0;A<=r;A++){for(let y=0;y<=i;y++){const p=s+y/i*o;d.x=h*Math.cos(p),d.y=h*Math.sin(p),l.push(d.x,d.y,d.z),c.push(0,0,1),m.x=(d.x/t+1)/2,m.y=(d.y/t+1)/2,u.push(m.x,m.y)}h+=f}for(let A=0;A<r;A++){const y=A*(i+1);for(let p=0;p<i;p++){const g=p+y,v=g,E=g+i+1,S=g+i+2,C=g+1;a.push(v,E,C),a.push(E,S,C)}}this.setIndex(a),this.setAttribute("position",new ft(l,3)),this.setAttribute("normal",new ft(c,3)),this.setAttribute("uv",new ft(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class iE extends It{constructor(e=new gc([new Ee(0,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ft(r,3)),this.setAttribute("normal",new ft(s,3)),this.setAttribute("uv",new ft(o,2));function c(u){const h=r.length/3,f=u.extractPoints(t);let d=f.shape;const m=f.holes;Na.isClockWise(d)===!1&&(d=d.reverse());for(let y=0,p=m.length;y<p;y++){const g=m[y];Na.isClockWise(g)===!0&&(m[y]=g.reverse())}const A=Na.triangulateShape(d,m);for(let y=0,p=m.length;y<p;y++){const g=m[y];d=d.concat(g)}for(let y=0,p=d.length;y<p;y++){const g=d[y];r.push(g.x,g.y,0),s.push(0,0,1),o.push(g.x,g.y)}for(let y=0,p=A.length;y<p;y++){const g=A[y],v=g[0]+h,E=g[1]+h,S=g[2]+h;i.push(v,E,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Ece(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new iE(i,e.curveSegments)}}function Ece(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Uf extends It{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new D,f=new D,d=[],m=[],A=[],y=[];for(let p=0;p<=i;p++){const g=[],v=p/i;let E=0;p===0&&o===0?E=.5/t:p===i&&l===Math.PI&&(E=-.5/t);for(let S=0;S<=t;S++){const C=S/t;h.x=-e*Math.cos(r+C*s)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(r+C*s)*Math.sin(o+v*a),m.push(h.x,h.y,h.z),f.copy(h).normalize(),A.push(f.x,f.y,f.z),y.push(C+E,1-v),g.push(c++)}u.push(g)}for(let p=0;p<i;p++)for(let g=0;g<t;g++){const v=u[p][g+1],E=u[p][g],S=u[p+1][g],C=u[p+1][g+1];(p!==0||o>0)&&d.push(v,E,C),(p!==i-1||l<Math.PI)&&d.push(E,S,C)}this.setIndex(d),this.setAttribute("position",new ft(m,3)),this.setAttribute("normal",new ft(A,3)),this.setAttribute("uv",new ft(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class rE extends nh{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rE(e.radius,e.detail)}}class uu extends It{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new D,h=new D,f=new D;for(let d=0;d<=i;d++)for(let m=0;m<=r;m++){const A=m/r*s,y=d/i*Math.PI*2;h.x=(e+t*Math.cos(y))*Math.cos(A),h.y=(e+t*Math.cos(y))*Math.sin(A),h.z=t*Math.sin(y),a.push(h.x,h.y,h.z),u.x=e*Math.cos(A),u.y=e*Math.sin(A),f.subVectors(h,u).normalize(),l.push(f.x,f.y,f.z),c.push(m/r),c.push(d/i)}for(let d=1;d<=i;d++)for(let m=1;m<=r;m++){const A=(r+1)*d+m-1,y=(r+1)*(d-1)+m-1,p=(r+1)*(d-1)+m,g=(r+1)*d+m;o.push(A,y,g),o.push(y,p,g)}this.setIndex(o),this.setAttribute("position",new ft(a,3)),this.setAttribute("normal",new ft(l,3)),this.setAttribute("uv",new ft(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class sE extends It{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],h=new D,f=new D,d=new D,m=new D,A=new D,y=new D,p=new D;for(let v=0;v<=i;++v){const E=v/i*s*Math.PI*2;g(E,s,o,e,d),g(E+.01,s,o,e,m),y.subVectors(m,d),p.addVectors(m,d),A.crossVectors(y,p),p.crossVectors(A,y),A.normalize(),p.normalize();for(let S=0;S<=r;++S){const C=S/r*Math.PI*2,M=-t*Math.cos(C),b=t*Math.sin(C);h.x=d.x+(M*p.x+b*A.x),h.y=d.y+(M*p.y+b*A.y),h.z=d.z+(M*p.z+b*A.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),c.push(f.x,f.y,f.z),u.push(v/i),u.push(S/r)}}for(let v=1;v<=i;v++)for(let E=1;E<=r;E++){const S=(r+1)*(v-1)+(E-1),C=(r+1)*v+(E-1),M=(r+1)*v+E,b=(r+1)*(v-1)+E;a.push(S,C,b),a.push(C,M,b)}this.setIndex(a),this.setAttribute("position",new ft(l,3)),this.setAttribute("normal",new ft(c,3)),this.setAttribute("uv",new ft(u,2));function g(v,E,S,C,M){const b=Math.cos(v),T=Math.sin(v),I=S/E*v,F=Math.cos(I);M.x=C*(2+F)*.5*b,M.y=C*(2+F)*T*.5,M.z=C*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class oE extends It{constructor(e=new K3(new D(-1,-1,0),new D(-1,1,0),new D(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new D,l=new D,c=new Ee;let u=new D;const h=[],f=[],d=[],m=[];A(),this.setIndex(m),this.setAttribute("position",new ft(h,3)),this.setAttribute("normal",new ft(f,3)),this.setAttribute("uv",new ft(d,2));function A(){for(let v=0;v<t;v++)y(v);y(s===!1?t:0),g(),p()}function y(v){u=e.getPointAt(v/t,u);const E=o.normals[v],S=o.binormals[v];for(let C=0;C<=r;C++){const M=C/r*Math.PI*2,b=Math.sin(M),T=-Math.cos(M);l.x=T*E.x+b*S.x,l.y=T*E.y+b*S.y,l.z=T*E.z+b*S.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,h.push(a.x,a.y,a.z)}}function p(){for(let v=1;v<=t;v++)for(let E=1;E<=r;E++){const S=(r+1)*(v-1)+(E-1),C=(r+1)*v+(E-1),M=(r+1)*v+E,b=(r+1)*(v-1)+E;m.push(S,C,b),m.push(C,M,b)}}function g(){for(let v=0;v<=t;v++)for(let E=0;E<=r;E++)c.x=v/t,c.y=E/r,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new oE(new u6[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class d6 extends It{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new D,s=new D;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],f=h.start,d=h.count;for(let m=f,A=f+d;m<A;m+=3)for(let y=0;y<3;y++){const p=a.getX(m+y),g=a.getX(m+(y+1)%3);r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,g),Y7(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),Y7(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ft(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Y7(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var q7=Object.freeze({__proto__:null,BoxGeometry:ys,CapsuleGeometry:J3,CircleGeometry:Z3,ConeGeometry:$3,CylinderGeometry:Tr,DodecahedronGeometry:eE,EdgesGeometry:f6,ExtrudeGeometry:QA,IcosahedronGeometry:VA,LatheGeometry:HA,OctahedronGeometry:Qo,PlaneGeometry:dr,PolyhedronGeometry:nh,RingGeometry:nE,ShapeGeometry:iE,SphereGeometry:Uf,TetrahedronGeometry:rE,TorusGeometry:uu,TorusKnotGeometry:sE,TubeGeometry:oE,WireframeGeometry:d6});class _Q extends Ji{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new We(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class EQ extends Fn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zf extends Ji{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new We(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eh,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bs extends zf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ee(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ki(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new We(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new We(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new We(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class vg extends Ji{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new We(16777215),this.specular=new We(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eh,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=LA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wQ extends Ji{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new We(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eh,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class p6 extends Ji{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eh,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class WA extends Ji{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new We(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eh,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=LA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SQ extends Ji{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new We(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eh,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class CQ extends Gi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ho(n,e,t){return m6(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function nf(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function m6(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function MQ(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function ib(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function g6(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function wce(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],f=[];for(let d=0;d<c.times.length;++d){const m=c.times[d]*r;if(!(m<t||m>=i)){h.push(c.times[d]);for(let A=0;A<u;++A)f.push(c.values[d*u+A])}}h.length!==0&&(c.times=nf(h,c.times.constructor),c.values=nf(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Sce(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const m=a.times.length-1;let A;if(s<=a.times[0]){const p=u,g=h-u;A=Ho(a.values,p,g)}else if(s>=a.times[m]){const p=m*h+u,g=p+h-u;A=Ho(a.values,p,g)}else{const p=a.createInterpolant(),g=u,v=h-u;p.evaluate(s),A=Ho(p.resultBuffer,g,v)}l==="quaternion"&&new St().fromArray(A).normalize().conjugate().toArray(A);const y=c.times.length;for(let p=0;p<y;++p){const g=p*d+f;if(l==="quaternion")St.multiplyQuaternionsFlat(c.values,g,A,0,c.values,g);else{const v=d-f*2;for(let E=0;E<v;++E)c.values[g+E]-=A[E]}}}return n.blendMode=jI,n}const Cce={arraySlice:Ho,convertArray:nf,isTypedArray:m6,getKeyframeOrder:MQ,sortedArray:ib,flattenJSON:g6,subclip:wce,makeClipAdditive:Sce};class Vm{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class bQ extends Vm{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:$h,endingEnd:$h}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case ef:s=e,a=2*t-i;break;case iA:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case ef:o=e,l=2*i-t;break;case iA:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,m=(i-t)/(r-t),A=m*m,y=A*m,p=-f*y+2*f*A-f*m,g=(1+f)*y+(-1.5-2*f)*A+(-.5+f)*m+1,v=(-1-d)*y+(1.5+d)*A+.5*m,E=d*y-d*A;for(let S=0;S!==a;++S)s[S]=p*o[u+S]+g*o[c+S]+v*o[l+S]+E*o[h+S];return s}}class A6 extends Vm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),h=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*h+o[l+f]*u;return s}}class TQ extends Vm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ya{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nf(t,this.TimeBufferType),this.values=nf(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:nf(e.times,Array),values:nf(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new TQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new A6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bQ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xm:t=this.InterpolantFactoryMethodDiscrete;break;case Sf:t=this.InterpolantFactoryMethodLinear;break;case Lx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xm;case this.InterpolantFactoryMethodLinear:return Sf;case this.InterpolantFactoryMethodSmooth:return Lx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ho(i,s,o),this.values=Ho(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&m6(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Ho(this.times),t=Ho(this.values),i=this.getValueSize(),r=this.getInterpolation()===Lx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const h=a*i,f=h-i,d=h+i;for(let m=0;m!==i;++m){const A=t[h+m];if(A!==t[f+m]||A!==t[d+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,f=o*i;for(let d=0;d!==i;++d)t[f+d]=t[h+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Ho(e,0,o),this.values=Ho(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Ho(this.times,0),t=Ho(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ya.prototype.TimeBufferType=Float32Array;Ya.prototype.ValueBufferType=Float32Array;Ya.prototype.DefaultInterpolation=Sf;class kf extends Ya{}kf.prototype.ValueTypeName="bool";kf.prototype.ValueBufferType=Array;kf.prototype.DefaultInterpolation=xm;kf.prototype.InterpolantFactoryMethodLinear=void 0;kf.prototype.InterpolantFactoryMethodSmooth=void 0;class v6 extends Ya{}v6.prototype.ValueTypeName="color";class Qu extends Ya{}Qu.prototype.ValueTypeName="number";class IQ extends Vm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)St.slerpFlat(s,0,o,c-a,o,c,l);return s}}class bl extends Ya{InterpolantFactoryMethodLinear(e){return new IQ(this.times,this.values,this.getValueSize(),e)}}bl.prototype.ValueTypeName="quaternion";bl.prototype.DefaultInterpolation=Sf;bl.prototype.InterpolantFactoryMethodSmooth=void 0;class Nf extends Ya{}Nf.prototype.ValueTypeName="string";Nf.prototype.ValueBufferType=Array;Nf.prototype.DefaultInterpolation=xm;Nf.prototype.InterpolantFactoryMethodLinear=void 0;Nf.prototype.InterpolantFactoryMethodSmooth=void 0;class Sc extends Ya{}Sc.prototype.ValueTypeName="vector";class Vu{constructor(e,t=-1,i,r=U3){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=go(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(bce(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ya.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=MQ(l);l=ib(l,1,u),c=ib(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Qu(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let f=r[h];f||(r[h]=f=[]),f.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,f,d,m,A){if(d.length!==0){const y=[],p=[];g6(d,y,p,m),y.length!==0&&A.push(new h(f,y,p))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let m;for(m=0;m<f.length;m++)if(f[m].morphTargets)for(let A=0;A<f[m].morphTargets.length;A++)d[f[m].morphTargets[A]]=-1;for(const A in d){const y=[],p=[];for(let g=0;g!==f[m].morphTargets.length;++g){const v=f[m];y.push(v.time),p.push(v.morphTarget===A?1:0)}r.push(new Qu(".morphTargetInfluence["+A+"]",y,p))}l=d.length*o}else{const d=".bones["+t[h].name+"]";i(Sc,d+".position",f,"pos",r),i(bl,d+".quaternion",f,"rot",r),i(Sc,d+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Mce(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qu;case"vector":case"vector2":case"vector3":case"vector4":return Sc;case"color":return v6;case"quaternion":return bl;case"bool":case"boolean":return kf;case"string":return Nf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function bce(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Mce(n.type);if(n.times===void 0){const t=[],i=[];g6(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Mf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class aE{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=c.length;h<f;h+=2){const d=c[h],m=c[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return m}return null}}}const hu=new aE;let Hi=class{constructor(e){this.manager=e!==void 0?e:hu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Hi.DEFAULT_MATERIAL_NAME="__DEFAULT";const jl={};class Tce extends Error{constructor(e,t){super(e),this.response=t}}class Ri extends Hi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Mf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(jl[e]!==void 0){jl[e].push({onLoad:t,onProgress:i,onError:r});return}jl[e]=[],jl[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=jl[e],h=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),d=f?parseInt(f):0,m=d!==0;let A=0;const y=new ReadableStream({start(p){g();function g(){h.read().then(({done:v,value:E})=>{if(v)p.close();else{A+=E.byteLength;const S=new ProgressEvent("progress",{lengthComputable:m,loaded:A,total:d});for(let C=0,M=u.length;C<M;C++){const b=u[C];b.onProgress&&b.onProgress(S)}p.enqueue(E),g()}})}}});return new Response(y)}else throw new Tce(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return c.arrayBuffer().then(m=>d.decode(m))}}}).then(c=>{Mf.add(e,c);const u=jl[e];delete jl[e];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=jl[e];if(u===void 0)throw this.manager.itemError(e),c;delete jl[e];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ice extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ri(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Vu.parse(e[i]);t.push(r)}return t}}class Bce extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Of,l=new Ri(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(f){const d=s.parse(f,!0);o[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(a.minFilter=Ut),a.image=o,a.format=d.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)u(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let m=0;m<d;m++){o[m]={mipmaps:[]};for(let A=0;A<f.mipmapCount;A++)o[m].mipmaps.push(f.mipmaps[m*f.mipmapCount+A]),o[m].format=f.format,o[m].width=f.width,o[m].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Ut),a.format=f.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class uA extends Hi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=oA("img");function l(){u(),Mf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class lE extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=new OA;s.colorSpace=un;const o=new uA(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class cE extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new qs,a=new Ri(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:qn,o.wrapT=c.wrapT!==void 0?c.wrapT:qn,o.magFilter=c.magFilter!==void 0?c.magFilter:Ut,o.minFilter=c.minFilter!==void 0?c.minFilter:Ut,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=yo),c.mipmapCount===1&&(o.minFilter=Ut),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class Tl extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=new In,o=new uA(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ih extends kt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new We(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class BQ extends ih{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new We(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const uC=new Oe,K7=new D,J7=new D;class y6{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ee(512,512),this.map=null,this.mapPass=null,this.matrix=new Oe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Nm,this._frameExtents=new Ee(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;K7.setFromMatrixPosition(e.matrixWorld),t.position.copy(K7),J7.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(J7),t.updateMatrixWorld(),uC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(uC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}let Pce=class extends y6{constructor(){super(new on(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=_m*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},uE=class extends ih{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.target=new kt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Pce}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const Z7=new Oe,k0=new D,hC=new D;class Rce extends y6{constructor(){super(new on(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ee(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),k0.setFromMatrixPosition(e.matrixWorld),i.position.copy(k0),hC.copy(i.position),hC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(hC),i.updateMatrixWorld(),r.makeTranslation(-k0.x,-k0.y,-k0.z),Z7.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z7)}}class hA extends ih{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Rce}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Dce extends y6{constructor(){super(new Qn(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class hE extends ih{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.target=new kt,this.shadow=new Dce}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class x6 extends ih{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class PQ extends ih{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class RQ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new D)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class fE extends ih{constructor(e=new RQ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class dE extends Hi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ri(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=dE.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new We().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new We().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ee().fromArray(o.value);break;case"v3":r.uniforms[s].value=new D().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Yt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Wt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Oe().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ee().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ee().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:_Q,SpriteMaterial:n6,RawShaderMaterial:EQ,ShaderMaterial:Fn,PointsMaterial:GA,MeshPhysicalMaterial:bs,MeshStandardMaterial:zf,MeshPhongMaterial:vg,MeshToonMaterial:wQ,MeshNormalMaterial:p6,MeshLambertMaterial:WA,MeshDepthMaterial:UA,MeshDistanceMaterial:Q3,MeshBasicMaterial:mr,MeshMatcapMaterial:SQ,LineDashedMaterial:CQ,LineBasicMaterial:Gi,Material:Ji};return new t[e]}}class Ac{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class jA extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class DQ extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ri(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(d,m){if(t[m]!==void 0)return t[m];const y=d.interleavedBuffers[m],p=s(d,y.buffer),g=kp(y.type,p),v=new zA(g,y.stride);return v.uuid=y.uuid,t[m]=v,v}function s(d,m){if(i[m]!==void 0)return i[m];const y=d.arrayBuffers[m],p=new Uint32Array(y).buffer;return i[m]=p,p}const o=e.isInstancedBufferGeometry?new jA:new It,a=e.data.index;if(a!==void 0){const d=kp(a.type,a.array);o.setIndex(new zt(d,1))}const l=e.data.attributes;for(const d in l){const m=l[d];let A;if(m.isInterleavedBufferAttribute){const y=r(e.data,m.data);A=new Hs(y,m.itemSize,m.offset,m.normalized)}else{const y=kp(m.type,m.array),p=m.isInstancedBufferAttribute?Qa:zt;A=new p(y,m.itemSize,m.normalized)}m.name!==void 0&&(A.name=m.name),m.usage!==void 0&&A.setUsage(m.usage),m.updateRange!==void 0&&(A.updateRange.offset=m.updateRange.offset,A.updateRange.count=m.updateRange.count),o.setAttribute(d,A)}const c=e.data.morphAttributes;if(c)for(const d in c){const m=c[d],A=[];for(let y=0,p=m.length;y<p;y++){const g=m[y];let v;if(g.isInterleavedBufferAttribute){const E=r(e.data,g.data);v=new Hs(E,g.itemSize,g.offset,g.normalized)}else{const E=kp(g.type,g.array);v=new zt(E,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),A.push(v)}o.morphAttributes[d]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,m=h.length;d!==m;++d){const A=h[d];o.addGroup(A.start,A.count,A.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new D;f.center!==void 0&&d.fromArray(f.center),o.boundingSphere=new vi(d,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Lce extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Ac.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ri(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ac.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ri(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let h=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new gc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Qm().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new DQ;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in q7?a=q7[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new dE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Vu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:kp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new aE(t);s=new uA(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],f=h.url;if(Array.isArray(f)){const d=[];for(let m=0,A=f.length;m<A;m++){const y=f[m],p=a(y);p!==null&&(p instanceof HTMLImageElement?d.push(p):d.push(new qs(p.data,p.width,p.height)))}r[h.uuid]=new tf(d)}else{const d=a(h.url);r[h.uuid]=new tf(d)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:kp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new uA(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h],m=await s(d);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new qs(m.data,m.width,m.height)))}i[l.uuid]=new tf(u)}else{const u=await s(l.url);i[l.uuid]=new tf(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new OA,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new qs:u=new In,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,Fce)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],$7),u.wrapT=i(a.wrap[1],$7)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,eD)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,eD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let m=0,A=f.length;m<A;m++){const y=f[m];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),d.push(i[y])}return d}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,h;switch(e.type){case"Scene":o=new xo,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new We(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new j3(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new W3(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new on(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Qn(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new x6(e.color,e.intensity);break;case"DirectionalLight":o=new hE(e.color,e.intensity);break;case"PointLight":o=new hA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new PQ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new uE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new BQ(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new fE().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new kA(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new ct(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,m=e.instanceColor;o=new NA(u,h,f),o.instanceMatrix=new Qa(new Float32Array(d.array),16),m!==void 0&&(o.instanceColor=new Qa(new Float32Array(m.array),m.itemSize));break;case"LOD":o=new pQ;break;case"Line":o=new cn(a(e.geometry),l(e.material));break;case"LineLoop":o=new i6(a(e.geometry),l(e.material));break;case"LineSegments":o=new Xa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new r6(a(e.geometry),l(e.material));break;case"Sprite":o=new dQ(l(e.material));break;case"Group":o=new Gs;break;case"Bone":o=new wm;break;default:o=new kt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)o.add(this.parseObject(f[d],t,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const m=f[d];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const m=f[d],A=o.getObjectByProperty("uuid",m.object);A!==void 0&&o.addLevel(A,m.distance,m.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Fce={UVMapping:Nu,CubeReflectionMapping:Ml,CubeRefractionMapping:Gu,EquirectangularReflectionMapping:Hu,EquirectangularRefractionMapping:$g,CubeUVReflectionMapping:zm},$7={RepeatWrapping:Fr,ClampToEdgeWrapping:qn,MirroredRepeatWrapping:ym},eD={NearestFilter:rn,NearestMipmapNearestFilter:eA,NearestMipmapLinearFilter:Kp,LinearFilter:Ut,LinearMipmapNearestFilter:L3,LinearMipmapLinearFilter:yo};class LQ extends Hi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Mf.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let t2;class _6{static getContext(){return t2===void 0&&(t2=new(window.AudioContext||window.webkitAudioContext)),t2}static setContext(e){t2=e}}class FQ extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ri(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);_6.getContext().decodeAudioData(c,function(h){t(h)},a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class Oce extends fE{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new We().set(e),s=new We().set(t),o=new D(r.r,r.g,r.b),a=new D(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Uce extends fE{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new We().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const tD=new Oe,nD=new Oe,Mh=new Oe;class zce{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new on,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new on,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Mh.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(ff*t.fov*.5)/t.zoom;let a,l;nD.elements[12]=-r,tD.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Mh.elements[0]=2*t.near/(l-a),Mh.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Mh),a=-o*t.aspect-s,l=o*t.aspect-s,Mh.elements[0]=2*t.near/(l-a),Mh.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Mh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(nD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(tD)}}class Wm{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=iD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=iD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function iD(){return(typeof performance>"u"?Date:performance).now()}const bh=new D,rD=new St,kce=new D,Th=new D;class OQ extends kt{constructor(){super(),this.type="AudioListener",this.context=_6.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Wm}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bh,rD,kce),Th.set(0,0,-1).applyQuaternion(rD),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(bh.x,r),t.positionY.linearRampToValueAtTime(bh.y,r),t.positionZ.linearRampToValueAtTime(bh.z,r),t.forwardX.linearRampToValueAtTime(Th.x,r),t.forwardY.linearRampToValueAtTime(Th.y,r),t.forwardZ.linearRampToValueAtTime(Th.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(bh.x,bh.y,bh.z),t.setOrientation(Th.x,Th.y,Th.z,i.x,i.y,i.z)}}class UQ extends kt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ih=new D,sD=new St,Nce=new D,Bh=new D;let Gce=class extends UQ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ih,sD,Nce),Bh.set(0,0,1).applyQuaternion(sD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ih.x,i),t.positionY.linearRampToValueAtTime(Ih.y,i),t.positionZ.linearRampToValueAtTime(Ih.z,i),t.orientationX.linearRampToValueAtTime(Bh.x,i),t.orientationY.linearRampToValueAtTime(Bh.y,i),t.orientationZ.linearRampToValueAtTime(Bh.z,i)}else t.setPosition(Ih.x,Ih.y,Ih.z),t.setOrientation(Bh.x,Bh.y,Bh.z)}};class Hce{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class zQ{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){St.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;St.multiplyQuaternionsFlat(e,o,e,t,e,i),St.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const E6="\\[\\]\\.:\\/",Qce=new RegExp("["+E6+"]","g"),w6="[^"+E6+"]",Vce="[^"+E6.replace("\\.","")+"]",Wce=/((?:WC+[\/:])*)/.source.replace("WC",w6),jce=/(WCOD+)?/.source.replace("WCOD",Vce),Xce=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",w6),Yce=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",w6),qce=new RegExp("^"+Wce+jce+Xce+Yce+"$"),Kce=["material","materials","bones","map"];class Jce{constructor(e,t,i){const r=i||_n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class _n{constructor(e,t,i){this.path=t,this.parsedPath=i||_n.parseTrackName(t),this.node=_n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new _n.Composite(e,t,i):new _n(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Qce,"")}static parseTrackName(e){const t=qce.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Kce.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=_n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_n.Composite=Jce;_n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_n.prototype.GetterByBindingType=[_n.prototype._getValue_direct,_n.prototype._getValue_array,_n.prototype._getValue_arrayElement,_n.prototype._getValue_toArray];_n.prototype.SetterByBindingTypeAndVersioning=[[_n.prototype._setValue_direct,_n.prototype._setValue_direct_setNeedsUpdate,_n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_array,_n.prototype._setValue_array_setNeedsUpdate,_n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_arrayElement,_n.prototype._setValue_arrayElement_setNeedsUpdate,_n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_fromArray,_n.prototype._setValue_fromArray_setNeedsUpdate,_n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Zce{constructor(){this.isAnimationObjectGroup=!0,this.uuid=go(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],d=f.uuid;let m=t[d];if(m===void 0){m=l++,t[d]=m,e.push(f);for(let A=0,y=o;A!==y;++A)s[A].push(new _n(f,i[A],r[A]))}else if(m<c){a=e[m];const A=--c,y=e[A];t[y.uuid]=m,e[m]=y,t[d]=A,e[A]=f;for(let p=0,g=o;p!==g;++p){const v=s[p],E=v[A];let S=v[m];v[m]=E,S===void 0&&(S=new _n(f,i[p],r[p])),v[A]=S}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,f=e[h];t[f.uuid]=u,e[u]=f,t[c]=h,e[h]=l;for(let d=0,m=r;d!==m;++d){const A=i[d],y=A[h],p=A[u];A[u]=y,A[h]=p}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const f=--s,d=e[f],m=--o,A=e[m];t[d.uuid]=h,e[h]=d,t[A.uuid]=f,e[f]=A,e.pop();for(let y=0,p=r;y!==p;++y){const g=i[y],v=g[f],E=g[m];g[h]=v,g[f]=E,g.pop()}}else{const f=--o,d=e[f];f>0&&(t[d.uuid]=h),e[h]=d,e.pop();for(let m=0,A=r;m!==A;++m){const y=i[m];y[h]=y[f],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let f=u,d=l.length;f!==d;++f){const m=l[f];h[f]=new _n(m,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class kQ{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:$h,endingEnd:$h};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=kH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case jI:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case U3:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===NH;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===zH){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=ef,r.endingEnd=ef):(e?r.endingStart=this.zeroSlopeAtStart?ef:$h:r.endingStart=iA,t?r.endingEnd=this.zeroSlopeAtEnd?ef:$h:r.endingEnd=iA)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const $ce=new Float32Array(1);class S6 extends Or{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const f=r[h],d=f.name;let m=u[d];if(m!==void 0)++m.referenceCount,o[h]=m;else{if(m=o[h],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,d));continue}const A=t&&t._propertyBindings[h].binding.parsedPath;m=new zQ(_n.create(i,d,A),f.ValueTypeName,f.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,d),o[h]=m}a[h].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new A6(new Float32Array(2),new Float32Array(2),1,$ce),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Vu.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=U3),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new kQ(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Vu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Qr{constructor(e){this.value=e}clone(){return new Qr(this.value.clone===void 0?this.value:this.value.clone())}}let eue=0;class tue extends Or{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:eue++}),this.name="",this.usage=rA,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class O_ extends zA{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class nue{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class rh{constructor(e,t,i=0,r=1/0){this.ray=new ha(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new df,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return rb(e,this,i,t),i.sort(oD),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)rb(e[r],this,i,t);return i.sort(oD),i}}function oD(n,e){return n.distance-e.distance}function rb(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)rb(r[s],e,t,!0)}}class bf{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ki(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class iue{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const aD=new Ee;class NQ{constructor(e=new Ee(1/0,1/0),t=new Ee(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=aD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,aD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const lD=new D,n2=new D;class Ga{constructor(e=new D,t=new D){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){lD.subVectors(e,this.start),n2.subVectors(this.end,this.start);const i=n2.dot(n2);let s=n2.dot(lD)/i;return t&&(s=ki(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const cD=new D;class rue extends kt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new It,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ft(r,3));const s=new Gi({fog:!1,toneMapped:!1});this.cone=new Xa(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),cD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(cD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xc=new D,i2=new Oe,fC=new Oe;class GQ extends Xa{constructor(e){const t=HQ(e),i=new It,r=[],s=[],o=new We(0,0,1),a=new We(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ft(r,3)),i.setAttribute("color",new ft(s,3));const l=new Gi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");fC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(i2.multiplyMatrices(fC,a.matrixWorld),Xc.setFromMatrixPosition(i2),r.setXYZ(o,Xc.x,Xc.y,Xc.z),i2.multiplyMatrices(fC,a.parent.matrixWorld),Xc.setFromMatrixPosition(i2),r.setXYZ(o+1,Xc.x,Xc.y,Xc.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function HQ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,HQ(n.children[t]));return e}class sue extends ct{constructor(e,t,i){const r=new Uf(t,4,2),s=new mr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const oue=new D,uD=new We,hD=new We;class aue extends kt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Qo(t);r.rotateY(Math.PI*.5),this.material=new mr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new zt(o,3)),this.add(new ct(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");uD.copy(this.light.color),hD.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?uD:hD;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(oue.setFromMatrixPosition(this.light.matrixWorld).negate())}}class QQ extends Xa{constructor(e=10,t=10,i=4473924,r=8947848){i=new We(i),r=new We(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,d=0,m=-a;f<=t;f++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const A=f===s?i:r;A.toArray(c,d),d+=3,A.toArray(c,d),d+=3,A.toArray(c,d),d+=3,A.toArray(c,d),d+=3}const u=new It;u.setAttribute("position",new ft(l,3)),u.setAttribute("color",new ft(c,3));const h=new Gi({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class lue extends Xa{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new We(s),o=new We(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),d=Math.sin(f)*e,m=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,m);const A=h&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let h=0;h<i;h++){const f=h&1?s:o,d=e-e/i*h;for(let m=0;m<r;m++){let A=m/r*(Math.PI*2),y=Math.sin(A)*d,p=Math.cos(A)*d;a.push(y,0,p),l.push(f.r,f.g,f.b),A=(m+1)/r*(Math.PI*2),y=Math.sin(A)*d,p=Math.cos(A)*d,a.push(y,0,p),l.push(f.r,f.g,f.b)}}const c=new It;c.setAttribute("position",new ft(a,3)),c.setAttribute("color",new ft(l,3));const u=new Gi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const fD=new D,r2=new D,dD=new D;class cue extends kt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new It;r.setAttribute("position",new ft([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gi({fog:!1,toneMapped:!1});this.lightPlane=new cn(r,s),this.add(this.lightPlane),r=new It,r.setAttribute("position",new ft([0,0,0,0,0,1],3)),this.targetLine=new cn(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fD.setFromMatrixPosition(this.light.matrixWorld),r2.setFromMatrixPosition(this.light.target.matrixWorld),dD.subVectors(r2,fD),this.lightPlane.lookAt(r2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r2),this.targetLine.scale.z=dD.length()}}const s2=new D,Oi=new th;class VQ extends Xa{constructor(e){const t=new It,i=new Gi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,A){l(m),l(A)}function l(m){r.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(r.length/3-1)}t.setAttribute("position",new ft(r,3)),t.setAttribute("color",new ft(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new We(16755200),u=new We(16711680),h=new We(43775),f=new We(16777215),d=new We(3355443);this.setColors(c,u,h,f,d)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Oi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xi("c",t,e,Oi,0,0,-1),Xi("t",t,e,Oi,0,0,1),Xi("n1",t,e,Oi,-i,-r,-1),Xi("n2",t,e,Oi,i,-r,-1),Xi("n3",t,e,Oi,-i,r,-1),Xi("n4",t,e,Oi,i,r,-1),Xi("f1",t,e,Oi,-i,-r,1),Xi("f2",t,e,Oi,i,-r,1),Xi("f3",t,e,Oi,-i,r,1),Xi("f4",t,e,Oi,i,r,1),Xi("u1",t,e,Oi,i*.7,r*1.1,-1),Xi("u2",t,e,Oi,-i*.7,r*1.1,-1),Xi("u3",t,e,Oi,0,r*2,-1),Xi("cf1",t,e,Oi,-i,0,1),Xi("cf2",t,e,Oi,i,0,1),Xi("cf3",t,e,Oi,0,-r,1),Xi("cf4",t,e,Oi,0,r,1),Xi("cn1",t,e,Oi,-i,0,-1),Xi("cn2",t,e,Oi,i,0,-1),Xi("cn3",t,e,Oi,0,-r,-1),Xi("cn4",t,e,Oi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xi(n,e,t,i,r,s,o){s2.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],s2.x,s2.y,s2.z)}}const o2=new Bn;class uue extends Xa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new It;s.setIndex(new zt(i,1)),s.setAttribute("position",new zt(r,3)),super(s,new Gi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&o2.setFromObject(this.object),o2.isEmpty())return;const t=o2.min,i=o2.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hue extends Xa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new It;s.setIndex(new zt(i,1)),s.setAttribute("position",new ft(r,3)),super(s,new Gi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fue extends cn{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new It;o.setAttribute("position",new ft(s,3)),o.computeBoundingSphere(),super(o,new Gi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new It;l.setAttribute("position",new ft(a,3)),l.computeBoundingSphere(),this.add(new ct(l,new mr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const pD=new D;let a2,dC;class due extends kt{constructor(e=new D(0,0,1),t=new D(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",a2===void 0&&(a2=new It,a2.setAttribute("position",new ft([0,0,0,0,1,0],3)),dC=new Tr(0,.5,1,5,1),dC.translate(0,-.5,0)),this.position.copy(t),this.line=new cn(a2,new Gi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ct(dC,new mr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{pD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(pD,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pue extends Xa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new It;r.setAttribute("position",new ft(t,3)),r.setAttribute("color",new ft(i,3));const s=new Gi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new We,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tc{constructor(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Pu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(p){const g=[];for(let v=0,E=p.length;v<E;v++){const S=p[v],C=new gc;C.curves=S.curves,g.push(C)}return g}function i(p,g){const v=g.length;let E=!1;for(let S=v-1,C=0;C<v;S=C++){let M=g[S],b=g[C],T=b.x-M.x,I=b.y-M.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(M=g[C],T=-T,b=g[S],I=-I),p.y<M.y||p.y>b.y)continue;if(p.y===M.y){if(p.x===M.x)return!0}else{const F=I*(p.x-M.x)-T*(p.y-M.y);if(F===0)return!0;if(F<0)continue;E=!E}}else{if(p.y!==M.y)continue;if(b.x<=p.x&&p.x<=M.x||M.x<=p.x&&p.x<=b.x)return!0}}return E}const r=Na.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new gc,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],f=[];let d=[],m=0,A;f[m]=void 0,d[m]=[];for(let p=0,g=s.length;p<g;p++)a=s[p],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!u&&f[m]&&m++,f[m]={s:new gc,p:A},f[m].s.curves=a.curves,u&&m++,d[m]=[]):d[m].push({h:a,p:A[0]});if(!f[0])return t(s);if(f.length>1){let p=!1,g=0;for(let v=0,E=f.length;v<E;v++)h[v]=[];for(let v=0,E=f.length;v<E;v++){const S=d[v];for(let C=0;C<S.length;C++){const M=S[C];let b=!0;for(let T=0;T<f.length;T++)i(M.p,f[T].p)&&(v!==T&&g++,b?(b=!1,h[T].push(M)):p=!0);b&&h[v].push(M)}}g>0&&p===!1&&(d=h)}let y;for(let p=0,g=f.length;p<g;p++){l=f[p].s,c.push(l),y=d[p];for(let v=0,E=y.length;v<E;v++)l.holes.push(y[v].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ja}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ja);const pE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:HI,AddEquation:jh,AddOperation:IH,AdditiveAnimationBlendMode:jI,AdditiveBlending:M_,AlphaFormat:LH,AlwaysCompare:$H,AlwaysDepth:EH,AlwaysStencilFunc:KI,AmbientLight:x6,AmbientLightProbe:Uce,AnimationAction:kQ,AnimationClip:Vu,AnimationLoader:Ice,AnimationMixer:S6,AnimationObjectGroup:Zce,AnimationUtils:Cce,ArcCurve:gQ,ArrayCamera:uQ,ArrowHelper:due,Audio:UQ,AudioAnalyser:Hce,AudioContext:_6,AudioListener:OQ,AudioLoader:FQ,AxesHelper:pue,BackSide:Ni,BasicDepthPacking:HH,BasicShadowMap:uH,Bone:wm,BooleanKeyframeTrack:kf,Box2:NQ,Box3:Bn,Box3Helper:hue,BoxGeometry:ys,BoxHelper:uue,BufferAttribute:zt,BufferGeometry:It,BufferGeometryLoader:DQ,ByteType:tA,Cache:Mf,Camera:th,CameraHelper:VQ,CanvasTexture:X3,CapsuleGeometry:J3,CatmullRomCurve3:Y3,CineonToneMapping:RH,CircleGeometry:Z3,ClampToEdgeWrapping:qn,Clock:Wm,Color:We,ColorKeyframeTrack:v6,ColorManagement:zo,CompressedArrayTexture:qle,CompressedTexture:Of,CompressedTextureLoader:Bce,ConeGeometry:$3,CubeCamera:G3,CubeReflectionMapping:Ml,CubeRefractionMapping:Gu,CubeTexture:OA,CubeTextureLoader:lE,CubeUVReflectionMapping:zm,CubicBezierCurve:o6,CubicBezierCurve3:a6,CubicInterpolant:bQ,CullFaceBack:b5,CullFaceFront:cH,CullFaceFrontBack:eie,CullFaceNone:lH,Curve:fa,CurvePath:h6,CustomBlending:P3,CustomToneMapping:DH,CylinderGeometry:Tr,Cylindrical:iue,Data3DTexture:$I,DataArrayTexture:k3,DataTexture:qs,DataTextureLoader:cE,DataUtils:La,DecrementStencilOp:aie,DecrementWrapStencilOp:cie,DefaultLoadingManager:hu,DepthFormat:ka,DepthStencilFormat:Ef,DepthTexture:Hm,DirectionalLight:hE,DirectionalLightHelper:cue,DiscreteInterpolant:TQ,DisplayP3ColorSpace:qI,DodecahedronGeometry:eE,DoubleSide:Vn,DstAlphaFactor:gH,DstColorFactor:vH,DynamicCopyUsage:_ie,DynamicDrawUsage:os,DynamicReadUsage:vie,EdgesGeometry:f6,EllipseCurve:pf,EqualCompare:YH,EqualDepth:SH,EqualStencilFunc:VH,EquirectangularReflectionMapping:Hu,EquirectangularRefractionMapping:$g,Euler:Rr,EventDispatcher:Or,ExtrudeGeometry:QA,FileLoader:Ri,Float16BufferAttribute:cre,Float32BufferAttribute:ft,Float64BufferAttribute:ure,FloatType:En,Fog:j3,FogExp2:W3,FramebufferTexture:Yle,FrontSide:Ss,Frustum:Nm,GLBufferAttribute:nue,GLSL1:wie,GLSL3:K5,GreaterCompare:KH,GreaterDepth:MH,GreaterEqualCompare:ZH,GreaterEqualDepth:CH,GreaterEqualStencilFunc:mie,GreaterStencilFunc:pie,GridHelper:QQ,Group:Gs,HalfFloatType:Ln,HemisphereLight:BQ,HemisphereLightHelper:aue,HemisphereLightProbe:Oce,IcosahedronGeometry:VA,ImageBitmapLoader:LQ,ImageLoader:uA,ImageUtils:ZI,IncrementStencilOp:oie,IncrementWrapStencilOp:lie,InstancedBufferAttribute:Qa,InstancedBufferGeometry:jA,InstancedInterleavedBuffer:O_,InstancedMesh:NA,Int16BufferAttribute:are,Int32BufferAttribute:lre,Int8BufferAttribute:rre,IntType:uf,InterleavedBuffer:zA,InterleavedBufferAttribute:Hs,Interpolant:Vm,InterpolateDiscrete:xm,InterpolateLinear:Sf,InterpolateSmooth:Lx,InvertStencilOp:uie,KeepStencilOp:hf,KeyframeTrack:Ya,LOD:pQ,LatheGeometry:HA,Layers:df,LessCompare:XH,LessDepth:wH,LessEqualCompare:qH,LessEqualDepth:b_,LessEqualStencilFunc:die,LessStencilFunc:fie,Light:ih,LightProbe:fE,Line:cn,Line3:Ga,LineBasicMaterial:Gi,LineCurve:q3,LineCurve3:AQ,LineDashedMaterial:CQ,LineLoop:i6,LineSegments:Xa,LinearEncoding:YI,LinearFilter:Ut,LinearInterpolant:A6,LinearMipMapLinearFilter:R5,LinearMipMapNearestFilter:rie,LinearMipmapLinearFilter:yo,LinearMipmapNearestFilter:L3,LinearSRGBColorSpace:Ks,LinearToneMapping:BH,Loader:Hi,LoaderUtils:Ac,LoadingManager:aE,LoopOnce:zH,LoopPingPong:NH,LoopRepeat:kH,LuminanceAlphaFormat:OH,LuminanceFormat:FH,MOUSE:Yo,Material:Ji,MaterialLoader:dE,MathUtils:Dt,Matrix3:Wt,Matrix4:Oe,MaxEquation:P5,Mesh:ct,MeshBasicMaterial:mr,MeshDepthMaterial:UA,MeshDistanceMaterial:Q3,MeshLambertMaterial:WA,MeshMatcapMaterial:SQ,MeshNormalMaterial:p6,MeshPhongMaterial:vg,MeshPhysicalMaterial:bs,MeshStandardMaterial:zf,MeshToonMaterial:wQ,MinEquation:B5,MirroredRepeatWrapping:ym,MixOperation:TH,MultiplyBlending:I5,MultiplyOperation:LA,NearestFilter:rn,NearestMipMapLinearFilter:iie,NearestMipMapNearestFilter:nie,NearestMipmapLinearFilter:Kp,NearestMipmapNearestFilter:eA,NeverCompare:jH,NeverDepth:_H,NeverStencilFunc:hie,NoBlending:sa,NoColorSpace:Bu,NoToneMapping:oa,NormalAnimationBlendMode:U3,NormalBlending:bu,NotEqualCompare:JH,NotEqualDepth:bH,NotEqualStencilFunc:WH,NumberKeyframeTrack:Qu,Object3D:kt,ObjectLoader:Lce,ObjectSpaceNormalMap:QH,OctahedronGeometry:Qo,OneFactor:R3,OneMinusDstAlphaFactor:AH,OneMinusDstColorFactor:yH,OneMinusSrcAlphaFactor:GI,OneMinusSrcColorFactor:mH,OrthographicCamera:Qn,PCFShadowMap:B3,PCFSoftShadowMap:ug,PMREMGenerator:Z5,Path:Pu,PerspectiveCamera:on,Plane:Br,PlaneGeometry:dr,PlaneHelper:fue,PointLight:hA,PointLightHelper:sue,Points:r6,PointsMaterial:GA,PolarGridHelper:lue,PolyhedronGeometry:nh,PositionalAudio:Gce,PropertyBinding:_n,PropertyMixer:zQ,QuadraticBezierCurve:l6,QuadraticBezierCurve3:K3,Quaternion:St,QuaternionKeyframeTrack:bl,QuaternionLinearInterpolant:IQ,RED_GREEN_RGTC2_Format:Y5,RED_RGTC1_Format:UH,REVISION:ja,RGBADepthPacking:z3,RGBAFormat:Dn,RGBAIntegerFormat:wf,RGBA_ASTC_10x10_Format:V5,RGBA_ASTC_10x5_Format:G5,RGBA_ASTC_10x6_Format:H5,RGBA_ASTC_10x8_Format:Q5,RGBA_ASTC_12x10_Format:W5,RGBA_ASTC_12x12_Format:j5,RGBA_ASTC_4x4_Format:R_,RGBA_ASTC_5x4_Format:F5,RGBA_ASTC_5x5_Format:O5,RGBA_ASTC_6x5_Format:U5,RGBA_ASTC_6x6_Format:nA,RGBA_ASTC_8x5_Format:z5,RGBA_ASTC_8x6_Format:k5,RGBA_ASTC_8x8_Format:N5,RGBA_BPTC_Format:dg,RGBA_ETC2_EAC_Format:P_,RGBA_PVRTC_2BPPV1_Format:L5,RGBA_PVRTC_4BPPV1_Format:I_,RGBA_S3TC_DXT1_Format:Rx,RGBA_S3TC_DXT3_Format:Dx,RGBA_S3TC_DXT5_Format:fg,RGB_ETC1_Format:WI,RGB_ETC2_Format:B_,RGB_PVRTC_2BPPV1_Format:D5,RGB_PVRTC_4BPPV1_Format:T_,RGB_S3TC_DXT1_Format:hg,RGFormat:cu,RGIntegerFormat:FA,RawShaderMaterial:EQ,Ray:ha,Raycaster:rh,RectAreaLight:PQ,RedFormat:ea,RedIntegerFormat:O3,ReinhardToneMapping:PH,RepeatWrapping:Fr,ReplaceStencilOp:Fx,ReverseSubtractEquation:fH,RingGeometry:nE,SIGNED_RED_GREEN_RGTC2_Format:q5,SIGNED_RED_RGTC1_Format:X5,SRGBColorSpace:un,Scene:xo,ShaderChunk:Xt,ShaderLib:Pa,ShaderMaterial:Fn,ShadowMaterial:_Q,Shape:gc,ShapeGeometry:iE,ShapePath:tc,ShapeUtils:Na,ShortType:F3,Skeleton:Qm,SkeletonHelper:GQ,SkinnedMesh:kA,Source:tf,Sphere:vi,SphereGeometry:Uf,Spherical:bf,SphericalHarmonics3:RQ,SplineCurve:c6,SpotLight:uE,SpotLightHelper:rue,Sprite:dQ,SpriteMaterial:n6,SrcAlphaFactor:D3,SrcAlphaSaturateFactor:xH,SrcColorFactor:pH,StaticCopyUsage:xie,StaticDrawUsage:rA,StaticReadUsage:Aie,StereoCamera:zce,StreamCopyUsage:Eie,StreamDrawUsage:gie,StreamReadUsage:yie,StringKeyframeTrack:Nf,SubtractEquation:hH,SubtractiveBlending:T5,TOUCH:oc,TangentSpaceNormalMap:eh,TetrahedronGeometry:rE,Texture:In,TextureLoader:Tl,TorusGeometry:uu,TorusKnotGeometry:sE,Triangle:rr,TriangleFanDrawMode:D_,TriangleStripDrawMode:XI,TrianglesDrawMode:GH,TubeGeometry:oE,TwoPassDoubleSide:tie,UVMapping:Nu,Uint16BufferAttribute:N3,Uint32BufferAttribute:e6,Uint8BufferAttribute:sre,Uint8ClampedBufferAttribute:ore,Uniform:Qr,UniformsGroup:tue,UniformsLib:gt,UniformsUtils:ca,UnsignedByteType:$n,UnsignedInt248Type:Tu,UnsignedIntType:ss,UnsignedShort4444Type:QI,UnsignedShort5551Type:VI,UnsignedShortType:$u,VSMShadowMap:Ta,Vector2:Ee,Vector3:D,Vector4:Yt,VectorKeyframeTrack:Sc,VideoTexture:mQ,WebGL1Renderer:hQ,WebGL3DRenderTarget:Xie,WebGLArrayRenderTarget:jie,WebGLCoordinateSystem:yl,WebGLCubeRenderTarget:km,WebGLMultipleRenderTargets:Yie,WebGLRenderTarget:Rn,WebGLRenderer:V3,WebGLUtils:cQ,WebGPUCoordinateSystem:sA,WireframeGeometry:d6,WrapAroundEnding:iA,ZeroCurvatureEnding:$h,ZeroFactor:dH,ZeroSlopeEnding:ef,ZeroStencilOp:sie,_SRGBAFormat:L_,sRGBEncoding:Iu},Symbol.toStringTag,{value:"Module"}));var WQ={exports:{}},Gf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Gf.ConcurrentRoot=1;Gf.ContinuousEventPriority=4;Gf.DefaultEventPriority=16;Gf.DiscreteEventPriority=1;Gf.IdleEventPriority=536870912;Gf.LegacyRoot=0;WQ.exports=Gf;var Hp=WQ.exports;function mue(n){let e;const t=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const f=e;e=u?h:Object.assign({},e,h),t.forEach(d=>d(e,f))}},r=()=>e,s=(c,u=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function d(){const m=u(e);if(!h(f,m)){const A=f;c(f=m,A)}}return t.add(d),()=>t.delete(d)},l={setState:i,getState:r,subscribe:(c,u,h)=>u||h?s(c,u,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const gue=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),mD=gue?w.useEffect:w.useLayoutEffect;function mE(n){const e=typeof n=="function"?mue(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=w.useReducer(y=>y+1,0),o=e.getState(),a=w.useRef(o),l=w.useRef(i),c=w.useRef(r),u=w.useRef(!1),h=w.useRef();h.current===void 0&&(h.current=i(o));let f,d=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(f=i(o),d=!r(h.current,f)),mD(()=>{d&&(h.current=f),a.current=o,l.current=i,c.current=r,u.current=!1});const m=w.useRef(o);mD(()=>{const y=()=>{try{const g=e.getState(),v=l.current(g);c.current(h.current,v)||(a.current=g,h.current=v,s())}catch{u.current=!0,s()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const A=d?f:h.current;return w.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var jQ={exports:{}},pC={exports:{}},mC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gD;function Aue(){return gD||(gD=1,function(n){function e(O,W){var V=O.length;O.push(W);e:for(;0<V;){var U=V-1>>>1,Y=O[U];if(0<r(Y,W))O[U]=W,O[V]=Y,V=U;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],V=O.pop();if(V!==W){O[0]=V;e:for(var U=0,Y=O.length,$=Y>>>1;U<$;){var N=2*(U+1)-1,Q=O[N],j=N+1,X=O[j];if(0>r(Q,V))j<Y&&0>r(X,Q)?(O[U]=X,O[j]=V,U=j):(O[U]=Q,O[N]=V,U=N);else if(j<Y&&0>r(X,V))O[U]=X,O[j]=V,U=j;else break e}}return W}function r(O,W){var V=O.sortIndex-W.sortIndex;return V!==0?V:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,m=!1,A=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function E(O){if(A=!1,v(O),!m)if(t(l)!==null)m=!0,K(S);else{var W=t(c);W!==null&&J(E,W.startTime-O)}}function S(O,W){m=!1,A&&(A=!1,p(b),b=-1),d=!0;var V=f;try{for(v(W),h=t(l);h!==null&&(!(h.expirationTime>W)||O&&!F());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var Y=U(h.expirationTime<=W);W=n.unstable_now(),typeof Y=="function"?h.callback=Y:h===t(l)&&i(l),v(W)}else i(l);h=t(l)}if(h!==null)var $=!0;else{var N=t(c);N!==null&&J(E,N.startTime-W),$=!1}return $}finally{h=null,f=V,d=!1}}var C=!1,M=null,b=-1,T=5,I=-1;function F(){return!(n.unstable_now()-I<T)}function R(){if(M!==null){var O=n.unstable_now();I=O;var W=!0;try{W=M(!0,O)}finally{W?z():(C=!1,M=null)}}else C=!1}var z;if(typeof g=="function")z=function(){g(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=R,z=function(){H.postMessage(null)}}else z=function(){y(R,0)};function K(O){M=O,C||(C=!0,z())}function J(O,W){b=y(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){m||d||(m=!0,K(S))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var V=f;f=W;try{return O()}finally{f=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=f;f=O;try{return W()}finally{f=V}},n.unstable_scheduleCallback=function(O,W,V){var U=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?U+V:U):V=U,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=V+Y,O={id:u++,callback:W,priorityLevel:O,startTime:V,expirationTime:Y,sortIndex:-1},V>U?(O.sortIndex=V,e(c,O),t(l)===null&&O===t(c)&&(A?(p(b),b=-1):A=!0,J(E,V-U))):(O.sortIndex=Y,e(l,O),m||d||(m=!0,K(S))),O},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(O){var W=f;return function(){var V=f;f=W;try{return O.apply(this,arguments)}finally{f=V}}}}(mC)),mC}var AD;function vue(){return AD||(AD=1,pC.exports=Aue()),pC.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yue=function(e){var t={},i=w,r=vue(),s=Object.assign;function o(x){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+x,B=1;B<arguments.length;B++)_+="&args[]="+encodeURIComponent(arguments[B]);return"Minified React error #"+x+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),m=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),S=Symbol.iterator;function C(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}function M(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case h:return"StrictMode";case y:return"Suspense";case p:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case m:return(x.displayName||"Context")+".Consumer";case d:return(x._context.displayName||"Context")+".Provider";case A:var _=x.render;return x=x.displayName,x||(x=_.displayName||_.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case g:return _=x.displayName||null,_!==null?_:M(x.type)||"Memo";case v:_=x._payload,x=x._init;try{return M(x(_))}catch{}}return null}function b(x){var _=x.type;switch(x.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=_.render,x=x.displayName||x.name||"",_.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(_);case 8:return _===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function T(x){var _=x,B=x;if(x.alternate)for(;_.return;)_=_.return;else{x=_;do _=x,_.flags&4098&&(B=_.return),x=_.return;while(x)}return _.tag===3?B:null}function I(x){if(T(x)!==x)throw Error(o(188))}function F(x){var _=x.alternate;if(!_){if(_=T(x),_===null)throw Error(o(188));return _!==x?null:x}for(var B=x,P=_;;){var k=B.return;if(k===null)break;var q=k.alternate;if(q===null){if(P=k.return,P!==null){B=P;continue}break}if(k.child===q.child){for(q=k.child;q;){if(q===B)return I(k),x;if(q===P)return I(k),_;q=q.sibling}throw Error(o(188))}if(B.return!==P.return)B=k,P=q;else{for(var fe=!1,Te=k.child;Te;){if(Te===B){fe=!0,B=k,P=q;break}if(Te===P){fe=!0,P=k,B=q;break}Te=Te.sibling}if(!fe){for(Te=q.child;Te;){if(Te===B){fe=!0,B=q,P=k;break}if(Te===P){fe=!0,P=q,B=k;break}Te=Te.sibling}if(!fe)throw Error(o(189))}}if(B.alternate!==P)throw Error(o(190))}if(B.tag!==3)throw Error(o(188));return B.stateNode.current===B?x:_}function R(x){return x=F(x),x!==null?z(x):null}function z(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var _=z(x);if(_!==null)return _;x=x.sibling}return null}function L(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var _=L(x);if(_!==null)return _}x=x.sibling}return null}var H=Array.isArray,K=e.getPublicInstance,J=e.getRootHostContext,O=e.getChildHostContext,W=e.prepareForCommit,V=e.resetAfterCommit,U=e.createInstance,Y=e.appendInitialChild,$=e.finalizeInitialChildren,N=e.prepareUpdate,Q=e.shouldSetTextContent,j=e.createTextInstance,X=e.scheduleTimeout,se=e.cancelTimeout,ve=e.noTimeout,de=e.isPrimaryRenderer,he=e.supportsMutation,te=e.supportsPersistence,xe=e.supportsHydration,ce=e.getInstanceFromNode,me=e.preparePortalMount,ye=e.getCurrentEventPriority,Me=e.detachDeletedInstance,oe=e.supportsMicrotasks,ne=e.scheduleMicrotask,we=e.supportsTestSelectors,be=e.findFiberRoot,st=e.getBoundingRect,re=e.getTextContent,Z=e.isHiddenSubtree,ge=e.matchAccessibilityRole,Fe=e.setFocusIfFocusable,Ce=e.setupIntersectionObserver,Le=e.appendChild,Qe=e.appendChildToContainer,He=e.commitTextUpdate,De=e.commitMount,at=e.commitUpdate,tt=e.insertBefore,et=e.insertInContainerBefore,le=e.removeChild,Re=e.removeChildFromContainer,qe=e.resetTextContent,it=e.hideInstance,Ae=e.hideTextInstance,_e=e.unhideInstance,Ie=e.unhideTextInstance,rt=e.clearContainer,nt=e.cloneInstance,pt=e.createContainerChildSet,Pt=e.appendChildToContainerChildSet,Qt=e.finalizeContainerChildren,Tt=e.replaceContainerChildren,Lt=e.cloneHiddenInstance,bn=e.cloneHiddenTextInstance,Tn=e.canHydrateInstance,oi=e.canHydrateTextInstance,xr=e.canHydrateSuspenseInstance,_r=e.isSuspenseInstancePending,Zi=e.isSuspenseInstanceFallback,lr=e.registerSuspenseInstanceRetry,yi=e.getNextHydratableSibling,qt=e.getFirstHydratableChild,Li=e.getFirstHydratableChildWithinContainer,Js=e.getFirstHydratableChildWithinSuspenseInstance,ee=e.hydrateInstance,G=e.hydrateTextInstance,ie=e.hydrateSuspenseInstance,ue=e.getNextHydratableInstanceAfterSuspenseInstance,ae=e.commitHydratedContainer,pe=e.commitHydratedSuspenseInstance,Ue=e.clearSuspenseBoundary,ke=e.clearSuspenseBoundaryFromContainer,je=e.shouldDeleteUnhydratedTailInstances,Xe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance,Be;function xt(x){if(Be===void 0)try{throw Error()}catch(B){var _=B.stack.trim().match(/\n( *(at )?)/);Be=_&&_[1]||""}return`
`+Be+x}var dt=!1;function ht(x,_){if(!x||dt)return"";dt=!0;var B=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(ut){var P=ut}Reflect.construct(x,[],_)}else{try{_.call()}catch(ut){P=ut}x.call(_.prototype)}else{try{throw Error()}catch(ut){P=ut}x()}}catch(ut){if(ut&&P&&typeof ut.stack=="string"){for(var k=ut.stack.split(`
`),q=P.stack.split(`
`),fe=k.length-1,Te=q.length-1;1<=fe&&0<=Te&&k[fe]!==q[Te];)Te--;for(;1<=fe&&0<=Te;fe--,Te--)if(k[fe]!==q[Te]){if(fe!==1||Te!==1)do if(fe--,Te--,0>Te||k[fe]!==q[Te]){var Ke=`
`+k[fe].replace(" at new "," at ");return x.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",x.displayName)),Ke}while(1<=fe&&0<=Te);break}}}finally{dt=!1,Error.prepareStackTrace=B}return(x=x?x.displayName||x.name:"")?xt(x):""}var Bt=Object.prototype.hasOwnProperty,Nt=[],Rt=-1;function _t(x){return{current:x}}function Ht(x){0>Rt||(x.current=Nt[Rt],Nt[Rt]=null,Rt--)}function bt(x,_){Rt++,Nt[Rt]=x.current,x.current=_}var $t={},On=_t($t),Kt=_t(!1),Un=$t;function yn(x,_){var B=x.type.contextTypes;if(!B)return $t;var P=x.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===_)return P.__reactInternalMemoizedMaskedChildContext;var k={},q;for(q in B)k[q]=_[q];return P&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=_,x.__reactInternalMemoizedMaskedChildContext=k),k}function kn(x){return x=x.childContextTypes,x!=null}function Jn(){Ht(Kt),Ht(On)}function en(x,_,B){if(On.current!==$t)throw Error(o(168));bt(On,_),bt(Kt,B)}function ti(x,_,B){var P=x.stateNode;if(_=_.childContextTypes,typeof P.getChildContext!="function")return B;P=P.getChildContext();for(var k in P)if(!(k in _))throw Error(o(108,b(x)||"Unknown",k));return s({},B,P)}function Pn(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||$t,Un=On.current,bt(On,x),bt(Kt,Kt.current),!0}function sn(x,_,B){var P=x.stateNode;if(!P)throw Error(o(169));B?(x=ti(x,_,Un),P.__reactInternalMemoizedMergedChildContext=x,Ht(Kt),Ht(On),bt(On,x)):Ht(Kt),bt(Kt,B)}var ai=Math.clz32?Math.clz32:Zs,Bs=Math.log,Qi=Math.LN2;function Zs(x){return x>>>=0,x===0?32:31-(Bs(x)/Qi|0)|0}var Bl=64,Pl=4194304;function Rl(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function oh(x,_){var B=x.pendingLanes;if(B===0)return 0;var P=0,k=x.suspendedLanes,q=x.pingedLanes,fe=B&268435455;if(fe!==0){var Te=fe&~k;Te!==0?P=Rl(Te):(q&=fe,q!==0&&(P=Rl(q)))}else fe=B&~k,fe!==0?P=Rl(fe):q!==0&&(P=Rl(q));if(P===0)return 0;if(_!==0&&_!==P&&!(_&k)&&(k=P&-P,q=_&-_,k>=q||k===16&&(q&4194240)!==0))return _;if(P&4&&(P|=B&16),_=x.entangledLanes,_!==0)for(x=x.entanglements,_&=P;0<_;)B=31-ai(_),k=1<<B,P|=x[B],_&=~k;return P}function uv(x,_){switch(x){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jm(x,_){for(var B=x.suspendedLanes,P=x.pingedLanes,k=x.expirationTimes,q=x.pendingLanes;0<q;){var fe=31-ai(q),Te=1<<fe,Ke=k[fe];Ke===-1?(!(Te&B)||Te&P)&&(k[fe]=uv(Te,_)):Ke<=_&&(x.expiredLanes|=Te),q&=~Te}}function Dl(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function Vf(x){for(var _=[],B=0;31>B;B++)_.push(x);return _}function qa(x,_,B){x.pendingLanes|=_,_!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,_=31-ai(_),x[_]=B}function Rc(x,_){var B=x.pendingLanes&~_;x.pendingLanes=_,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=_,x.mutableReadLanes&=_,x.entangledLanes&=_,_=x.entanglements;var P=x.eventTimes;for(x=x.expirationTimes;0<B;){var k=31-ai(B),q=1<<k;_[k]=0,P[k]=-1,x[k]=-1,B&=~q}}function Ka(x,_){var B=x.entangledLanes|=_;for(x=x.entanglements;B;){var P=31-ai(B),k=1<<P;k&_|x[P]&_&&(x[P]|=_),B&=~k}}var xn=0;function Zm(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var Ll=r.unstable_scheduleCallback,Wf=r.unstable_cancelCallback,$m=r.unstable_shouldYield,hv=r.unstable_requestPaint,Ci=r.unstable_now,ah=r.unstable_ImmediatePriority,fv=r.unstable_UserBlockingPriority,cs=r.unstable_NormalPriority,e0=r.unstable_IdlePriority,lh=null,$s=null;function t0(x){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(lh,x,void 0,(x.current.flags&128)===128)}catch{}}function dv(x,_){return x===_&&(x!==0||1/x===1/_)||x!==x&&_!==_}var eo=typeof Object.is=="function"?Object.is:dv,us=null,Ja=!1,So=!1;function n0(x){us===null?us=[x]:us.push(x)}function i0(x){Ja=!0,n0(x)}function Ps(){if(!So&&us!==null){So=!0;var x=0,_=xn;try{var B=us;for(xn=1;x<B.length;x++){var P=B[x];do P=P(!0);while(P!==null)}us=null,Ja=!1}catch(k){throw us!==null&&(us=us.slice(x+1)),Ll(ah,Ps),k}finally{xn=_,So=!1}}return null}var ch=a.ReactCurrentBatchConfig;function uh(x,_){if(eo(x,_))return!0;if(typeof x!="object"||x===null||typeof _!="object"||_===null)return!1;var B=Object.keys(x),P=Object.keys(_);if(B.length!==P.length)return!1;for(P=0;P<B.length;P++){var k=B[P];if(!Bt.call(_,k)||!eo(x[k],_[k]))return!1}return!0}function hh(x){switch(x.tag){case 5:return xt(x.type);case 16:return xt("Lazy");case 13:return xt("Suspense");case 19:return xt("SuspenseList");case 0:case 2:case 15:return x=ht(x.type,!1),x;case 11:return x=ht(x.type.render,!1),x;case 1:return x=ht(x.type,!0),x;default:return""}}function hs(x,_){if(x&&x.defaultProps){_=s({},_),x=x.defaultProps;for(var B in x)_[B]===void 0&&(_[B]=x[B]);return _}return _}var Er=_t(null),jf=null,da=null,Dc=null;function Xf(){Dc=da=jf=null}function pv(x,_,B){de?(bt(Er,_._currentValue),_._currentValue=B):(bt(Er,_._currentValue2),_._currentValue2=B)}function wr(x){var _=Er.current;Ht(Er),de?x._currentValue=_:x._currentValue2=_}function fs(x,_,B){for(;x!==null;){var P=x.alternate;if((x.childLanes&_)!==_?(x.childLanes|=_,P!==null&&(P.childLanes|=_)):P!==null&&(P.childLanes&_)!==_&&(P.childLanes|=_),x===B)break;x=x.return}}function Vi(x,_){jf=x,Dc=da=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&_&&(ro=!0),x.firstContext=null)}function Wi(x){var _=de?x._currentValue:x._currentValue2;if(Dc!==x)if(x={context:x,memoizedValue:_,next:null},da===null){if(jf===null)throw Error(o(308));da=x,jf.dependencies={lanes:0,firstContext:x}}else da=da.next=x;return _}var to=null,Lc=!1;function iw(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V8(x,_){x=x.updateQueue,_.updateQueue===x&&(_.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function Fl(x,_){return{eventTime:x,lane:_,tag:0,payload:null,callback:null,next:null}}function Fc(x,_){var B=x.updateQueue;B!==null&&(B=B.shared,$i!==null&&x.mode&1&&!(vn&2)?(x=B.interleaved,x===null?(_.next=_,to===null?to=[B]:to.push(B)):(_.next=x.next,x.next=_),B.interleaved=_):(x=B.pending,x===null?_.next=_:(_.next=x.next,x.next=_),B.pending=_))}function mv(x,_,B){if(_=_.updateQueue,_!==null&&(_=_.shared,(B&4194240)!==0)){var P=_.lanes;P&=x.pendingLanes,B|=P,_.lanes=B,Ka(x,B)}}function W8(x,_){var B=x.updateQueue,P=x.alternate;if(P!==null&&(P=P.updateQueue,B===P)){var k=null,q=null;if(B=B.firstBaseUpdate,B!==null){do{var fe={eventTime:B.eventTime,lane:B.lane,tag:B.tag,payload:B.payload,callback:B.callback,next:null};q===null?k=q=fe:q=q.next=fe,B=B.next}while(B!==null);q===null?k=q=_:q=q.next=_}else k=q=_;B={baseState:P.baseState,firstBaseUpdate:k,lastBaseUpdate:q,shared:P.shared,effects:P.effects},x.updateQueue=B;return}x=B.lastBaseUpdate,x===null?B.firstBaseUpdate=_:x.next=_,B.lastBaseUpdate=_}function gv(x,_,B,P){var k=x.updateQueue;Lc=!1;var q=k.firstBaseUpdate,fe=k.lastBaseUpdate,Te=k.shared.pending;if(Te!==null){k.shared.pending=null;var Ke=Te,ut=Ke.next;Ke.next=null,fe===null?q=ut:fe.next=ut,fe=Ke;var Mt=x.alternate;Mt!==null&&(Mt=Mt.updateQueue,Te=Mt.lastBaseUpdate,Te!==fe&&(Te===null?Mt.firstBaseUpdate=ut:Te.next=ut,Mt.lastBaseUpdate=Ke))}if(q!==null){var fn=k.baseState;fe=0,Mt=ut=Ke=null,Te=q;do{var jt=Te.lane,ni=Te.eventTime;if((P&jt)===jt){Mt!==null&&(Mt=Mt.next={eventTime:ni,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var Ot=x,Jr=Te;switch(jt=_,ni=B,Jr.tag){case 1:if(Ot=Jr.payload,typeof Ot=="function"){fn=Ot.call(ni,fn,jt);break e}fn=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Jr.payload,jt=typeof Ot=="function"?Ot.call(ni,fn,jt):Ot,jt==null)break e;fn=s({},fn,jt);break e;case 2:Lc=!0}}Te.callback!==null&&Te.lane!==0&&(x.flags|=64,jt=k.effects,jt===null?k.effects=[Te]:jt.push(Te))}else ni={eventTime:ni,lane:jt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},Mt===null?(ut=Mt=ni,Ke=fn):Mt=Mt.next=ni,fe|=jt;if(Te=Te.next,Te===null){if(Te=k.shared.pending,Te===null)break;jt=Te,Te=jt.next,jt.next=null,k.lastBaseUpdate=jt,k.shared.pending=null}}while(!0);if(Mt===null&&(Ke=fn),k.baseState=Ke,k.firstBaseUpdate=ut,k.lastBaseUpdate=Mt,_=k.shared.interleaved,_!==null){k=_;do fe|=k.lane,k=k.next;while(k!==_)}else q===null&&(k.shared.lanes=0);nd|=fe,x.lanes=fe,x.memoizedState=fn}}function j8(x,_,B){if(x=_.effects,_.effects=null,x!==null)for(_=0;_<x.length;_++){var P=x[_],k=P.callback;if(k!==null){if(P.callback=null,P=B,typeof k!="function")throw Error(o(191,k));k.call(P)}}}var X8=new i.Component().refs;function rw(x,_,B,P){_=x.memoizedState,B=B(P,_),B=B==null?_:s({},_,B),x.memoizedState=B,x.lanes===0&&(x.updateQueue.baseState=B)}var Av={isMounted:function(x){return(x=x._reactInternals)?T(x)===x:!1},enqueueSetState:function(x,_,B){x=x._reactInternals;var P=ps(),k=zc(x),q=Fl(P,k);q.payload=_,B!=null&&(q.callback=B),Fc(x,q),_=Io(x,k,P),_!==null&&mv(_,x,k)},enqueueReplaceState:function(x,_,B){x=x._reactInternals;var P=ps(),k=zc(x),q=Fl(P,k);q.tag=1,q.payload=_,B!=null&&(q.callback=B),Fc(x,q),_=Io(x,k,P),_!==null&&mv(_,x,k)},enqueueForceUpdate:function(x,_){x=x._reactInternals;var B=ps(),P=zc(x),k=Fl(B,P);k.tag=2,_!=null&&(k.callback=_),Fc(x,k),_=Io(x,P,B),_!==null&&mv(_,x,P)}};function Y8(x,_,B,P,k,q,fe){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(P,q,fe):_.prototype&&_.prototype.isPureReactComponent?!uh(B,P)||!uh(k,q):!0}function q8(x,_,B){var P=!1,k=$t,q=_.contextType;return typeof q=="object"&&q!==null?q=Wi(q):(k=kn(_)?Un:On.current,P=_.contextTypes,q=(P=P!=null)?yn(x,k):$t),_=new _(B,q),x.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Av,x.stateNode=_,_._reactInternals=x,P&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=k,x.__reactInternalMemoizedMaskedChildContext=q),_}function K8(x,_,B,P){x=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(B,P),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(B,P),_.state!==x&&Av.enqueueReplaceState(_,_.state,null)}function sw(x,_,B,P){var k=x.stateNode;k.props=B,k.state=x.memoizedState,k.refs=X8,iw(x);var q=_.contextType;typeof q=="object"&&q!==null?k.context=Wi(q):(q=kn(_)?Un:On.current,k.context=yn(x,q)),k.state=x.memoizedState,q=_.getDerivedStateFromProps,typeof q=="function"&&(rw(x,_,q,B),k.state=x.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(_=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),_!==k.state&&Av.enqueueReplaceState(k,k.state,null),gv(x,B,k,P),k.state=x.memoizedState),typeof k.componentDidMount=="function"&&(x.flags|=4194308)}var Yf=[],qf=0,vv=null,yv=0,Co=[],Mo=0,fh=null,Ol=1,Ul="";function dh(x,_){Yf[qf++]=yv,Yf[qf++]=vv,vv=x,yv=_}function J8(x,_,B){Co[Mo++]=Ol,Co[Mo++]=Ul,Co[Mo++]=fh,fh=x;var P=Ol;x=Ul;var k=32-ai(P)-1;P&=~(1<<k),B+=1;var q=32-ai(_)+k;if(30<q){var fe=k-k%5;q=(P&(1<<fe)-1).toString(32),P>>=fe,k-=fe,Ol=1<<32-ai(_)+k|B<<k|P,Ul=q+x}else Ol=1<<q|B<<k|P,Ul=x}function ow(x){x.return!==null&&(dh(x,1),J8(x,1,0))}function aw(x){for(;x===vv;)vv=Yf[--qf],Yf[qf]=null,yv=Yf[--qf],Yf[qf]=null;for(;x===fh;)fh=Co[--Mo],Co[Mo]=null,Ul=Co[--Mo],Co[Mo]=null,Ol=Co[--Mo],Co[Mo]=null}var no=null,io=null,xi=!1,r0=!1,pa=null;function Z8(x,_){var B=Bo(5,null,null,0);B.elementType="DELETED",B.stateNode=_,B.return=x,_=x.deletions,_===null?(x.deletions=[B],x.flags|=16):_.push(B)}function $8(x,_){switch(x.tag){case 5:return _=Tn(_,x.type,x.pendingProps),_!==null?(x.stateNode=_,no=x,io=qt(_),!0):!1;case 6:return _=oi(_,x.pendingProps),_!==null?(x.stateNode=_,no=x,io=null,!0):!1;case 13:if(_=xr(_),_!==null){var B=fh!==null?{id:Ol,overflow:Ul}:null;return x.memoizedState={dehydrated:_,treeContext:B,retryLane:1073741824},B=Bo(18,null,null,0),B.stateNode=_,B.return=x,x.child=B,no=x,io=null,!0}return!1;default:return!1}}function lw(x){return(x.mode&1)!==0&&(x.flags&128)===0}function cw(x){if(xi){var _=io;if(_){var B=_;if(!$8(x,_)){if(lw(x))throw Error(o(418));_=yi(B);var P=no;_&&$8(x,_)?Z8(P,B):(x.flags=x.flags&-4097|2,xi=!1,no=x)}}else{if(lw(x))throw Error(o(418));x.flags=x.flags&-4097|2,xi=!1,no=x}}}function e9(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;no=x}function s0(x){if(!xe||x!==no)return!1;if(!xi)return e9(x),xi=!0,!1;if(x.tag!==3&&(x.tag!==5||je(x.type)&&!Q(x.type,x.memoizedProps))){var _=io;if(_){if(lw(x)){for(x=io;x;)x=yi(x);throw Error(o(418))}for(;_;)Z8(x,_),_=yi(_)}}if(e9(x),x.tag===13){if(!xe)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));io=ue(x)}else io=no?yi(x.stateNode):null;return!0}function Kf(){xe&&(io=no=null,r0=xi=!1)}function uw(x){pa===null?pa=[x]:pa.push(x)}function o0(x,_,B){if(x=B.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(B._owner){if(B=B._owner,B){if(B.tag!==1)throw Error(o(309));var P=B.stateNode}if(!P)throw Error(o(147,x));var k=P,q=""+x;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===q?_.ref:(_=function(fe){var Te=k.refs;Te===X8&&(Te=k.refs={}),fe===null?delete Te[q]:Te[q]=fe},_._stringRef=q,_)}if(typeof x!="string")throw Error(o(284));if(!B._owner)throw Error(o(290,x))}return x}function xv(x,_){throw x=Object.prototype.toString.call(_),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":x))}function t9(x){var _=x._init;return _(x._payload)}function n9(x){function _(Ne,Pe){if(x){var Ve=Ne.deletions;Ve===null?(Ne.deletions=[Pe],Ne.flags|=16):Ve.push(Pe)}}function B(Ne,Pe){if(!x)return null;for(;Pe!==null;)_(Ne,Pe),Pe=Pe.sibling;return null}function P(Ne,Pe){for(Ne=new Map;Pe!==null;)Pe.key!==null?Ne.set(Pe.key,Pe):Ne.set(Pe.index,Pe),Pe=Pe.sibling;return Ne}function k(Ne,Pe){return Ne=Nc(Ne,Pe),Ne.index=0,Ne.sibling=null,Ne}function q(Ne,Pe,Ve){return Ne.index=Ve,x?(Ve=Ne.alternate,Ve!==null?(Ve=Ve.index,Ve<Pe?(Ne.flags|=2,Pe):Ve):(Ne.flags|=2,Pe)):(Ne.flags|=1048576,Pe)}function fe(Ne){return x&&Ne.alternate===null&&(Ne.flags|=2),Ne}function Te(Ne,Pe,Ve,wt){return Pe===null||Pe.tag!==6?(Pe=Xw(Ve,Ne.mode,wt),Pe.return=Ne,Pe):(Pe=k(Pe,Ve),Pe.return=Ne,Pe)}function Ke(Ne,Pe,Ve,wt){var Ft=Ve.type;return Ft===u?Mt(Ne,Pe,Ve.props.children,wt,Ve.key):Pe!==null&&(Pe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===v&&t9(Ft)===Pe.type)?(wt=k(Pe,Ve.props),wt.ref=o0(Ne,Pe,Ve),wt.return=Ne,wt):(wt=Jv(Ve.type,Ve.key,Ve.props,null,Ne.mode,wt),wt.ref=o0(Ne,Pe,Ve),wt.return=Ne,wt)}function ut(Ne,Pe,Ve,wt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Ve.containerInfo||Pe.stateNode.implementation!==Ve.implementation?(Pe=Yw(Ve,Ne.mode,wt),Pe.return=Ne,Pe):(Pe=k(Pe,Ve.children||[]),Pe.return=Ne,Pe)}function Mt(Ne,Pe,Ve,wt,Ft){return Pe===null||Pe.tag!==7?(Pe=xh(Ve,Ne.mode,wt,Ft),Pe.return=Ne,Pe):(Pe=k(Pe,Ve),Pe.return=Ne,Pe)}function fn(Ne,Pe,Ve){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Pe=Xw(""+Pe,Ne.mode,Ve),Pe.return=Ne,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case l:return Ve=Jv(Pe.type,Pe.key,Pe.props,null,Ne.mode,Ve),Ve.ref=o0(Ne,null,Pe),Ve.return=Ne,Ve;case c:return Pe=Yw(Pe,Ne.mode,Ve),Pe.return=Ne,Pe;case v:var wt=Pe._init;return fn(Ne,wt(Pe._payload),Ve)}if(H(Pe)||C(Pe))return Pe=xh(Pe,Ne.mode,Ve,null),Pe.return=Ne,Pe;xv(Ne,Pe)}return null}function jt(Ne,Pe,Ve,wt){var Ft=Pe!==null?Pe.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ft!==null?null:Te(Ne,Pe,""+Ve,wt);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:return Ve.key===Ft?Ke(Ne,Pe,Ve,wt):null;case c:return Ve.key===Ft?ut(Ne,Pe,Ve,wt):null;case v:return Ft=Ve._init,jt(Ne,Pe,Ft(Ve._payload),wt)}if(H(Ve)||C(Ve))return Ft!==null?null:Mt(Ne,Pe,Ve,wt,null);xv(Ne,Ve)}return null}function ni(Ne,Pe,Ve,wt,Ft){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return Ne=Ne.get(Ve)||null,Te(Pe,Ne,""+wt,Ft);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:return Ne=Ne.get(wt.key===null?Ve:wt.key)||null,Ke(Pe,Ne,wt,Ft);case c:return Ne=Ne.get(wt.key===null?Ve:wt.key)||null,ut(Pe,Ne,wt,Ft);case v:var gn=wt._init;return ni(Ne,Pe,Ve,gn(wt._payload),Ft)}if(H(wt)||C(wt))return Ne=Ne.get(Ve)||null,Mt(Pe,Ne,wt,Ft,null);xv(Pe,wt)}return null}function Ot(Ne,Pe,Ve,wt){for(var Ft=null,gn=null,dn=Pe,Nn=Pe=0,Cr=null;dn!==null&&Nn<Ve.length;Nn++){dn.index>Nn?(Cr=dn,dn=null):Cr=dn.sibling;var Gn=jt(Ne,dn,Ve[Nn],wt);if(Gn===null){dn===null&&(dn=Cr);break}x&&dn&&Gn.alternate===null&&_(Ne,dn),Pe=q(Gn,Pe,Nn),gn===null?Ft=Gn:gn.sibling=Gn,gn=Gn,dn=Cr}if(Nn===Ve.length)return B(Ne,dn),xi&&dh(Ne,Nn),Ft;if(dn===null){for(;Nn<Ve.length;Nn++)dn=fn(Ne,Ve[Nn],wt),dn!==null&&(Pe=q(dn,Pe,Nn),gn===null?Ft=dn:gn.sibling=dn,gn=dn);return xi&&dh(Ne,Nn),Ft}for(dn=P(Ne,dn);Nn<Ve.length;Nn++)Cr=ni(dn,Ne,Nn,Ve[Nn],wt),Cr!==null&&(x&&Cr.alternate!==null&&dn.delete(Cr.key===null?Nn:Cr.key),Pe=q(Cr,Pe,Nn),gn===null?Ft=Cr:gn.sibling=Cr,gn=Cr);return x&&dn.forEach(function(Gc){return _(Ne,Gc)}),xi&&dh(Ne,Nn),Ft}function Jr(Ne,Pe,Ve,wt){var Ft=C(Ve);if(typeof Ft!="function")throw Error(o(150));if(Ve=Ft.call(Ve),Ve==null)throw Error(o(151));for(var gn=Ft=null,dn=Pe,Nn=Pe=0,Cr=null,Gn=Ve.next();dn!==null&&!Gn.done;Nn++,Gn=Ve.next()){dn.index>Nn?(Cr=dn,dn=null):Cr=dn.sibling;var Gc=jt(Ne,dn,Gn.value,wt);if(Gc===null){dn===null&&(dn=Cr);break}x&&dn&&Gc.alternate===null&&_(Ne,dn),Pe=q(Gc,Pe,Nn),gn===null?Ft=Gc:gn.sibling=Gc,gn=Gc,dn=Cr}if(Gn.done)return B(Ne,dn),xi&&dh(Ne,Nn),Ft;if(dn===null){for(;!Gn.done;Nn++,Gn=Ve.next())Gn=fn(Ne,Gn.value,wt),Gn!==null&&(Pe=q(Gn,Pe,Nn),gn===null?Ft=Gn:gn.sibling=Gn,gn=Gn);return xi&&dh(Ne,Nn),Ft}for(dn=P(Ne,dn);!Gn.done;Nn++,Gn=Ve.next())Gn=ni(dn,Ne,Nn,Gn.value,wt),Gn!==null&&(x&&Gn.alternate!==null&&dn.delete(Gn.key===null?Nn:Gn.key),Pe=q(Gn,Pe,Nn),gn===null?Ft=Gn:gn.sibling=Gn,gn=Gn);return x&&dn.forEach(function(Iq){return _(Ne,Iq)}),xi&&dh(Ne,Nn),Ft}function Po(Ne,Pe,Ve,wt){if(typeof Ve=="object"&&Ve!==null&&Ve.type===u&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:e:{for(var Ft=Ve.key,gn=Pe;gn!==null;){if(gn.key===Ft){if(Ft=Ve.type,Ft===u){if(gn.tag===7){B(Ne,gn.sibling),Pe=k(gn,Ve.props.children),Pe.return=Ne,Ne=Pe;break e}}else if(gn.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===v&&t9(Ft)===gn.type){B(Ne,gn.sibling),Pe=k(gn,Ve.props),Pe.ref=o0(Ne,gn,Ve),Pe.return=Ne,Ne=Pe;break e}B(Ne,gn);break}else _(Ne,gn);gn=gn.sibling}Ve.type===u?(Pe=xh(Ve.props.children,Ne.mode,wt,Ve.key),Pe.return=Ne,Ne=Pe):(wt=Jv(Ve.type,Ve.key,Ve.props,null,Ne.mode,wt),wt.ref=o0(Ne,Pe,Ve),wt.return=Ne,Ne=wt)}return fe(Ne);case c:e:{for(gn=Ve.key;Pe!==null;){if(Pe.key===gn)if(Pe.tag===4&&Pe.stateNode.containerInfo===Ve.containerInfo&&Pe.stateNode.implementation===Ve.implementation){B(Ne,Pe.sibling),Pe=k(Pe,Ve.children||[]),Pe.return=Ne,Ne=Pe;break e}else{B(Ne,Pe);break}else _(Ne,Pe);Pe=Pe.sibling}Pe=Yw(Ve,Ne.mode,wt),Pe.return=Ne,Ne=Pe}return fe(Ne);case v:return gn=Ve._init,Po(Ne,Pe,gn(Ve._payload),wt)}if(H(Ve))return Ot(Ne,Pe,Ve,wt);if(C(Ve))return Jr(Ne,Pe,Ve,wt);xv(Ne,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"?(Ve=""+Ve,Pe!==null&&Pe.tag===6?(B(Ne,Pe.sibling),Pe=k(Pe,Ve),Pe.return=Ne,Ne=Pe):(B(Ne,Pe),Pe=Xw(Ve,Ne.mode,wt),Pe.return=Ne,Ne=Pe),fe(Ne)):B(Ne,Pe)}return Po}var Jf=n9(!0),i9=n9(!1),a0={},bo=_t(a0),l0=_t(a0),Zf=_t(a0);function Za(x){if(x===a0)throw Error(o(174));return x}function hw(x,_){bt(Zf,_),bt(l0,x),bt(bo,a0),x=J(_),Ht(bo),bt(bo,x)}function $f(){Ht(bo),Ht(l0),Ht(Zf)}function r9(x){var _=Za(Zf.current),B=Za(bo.current);_=O(B,x.type,_),B!==_&&(bt(l0,x),bt(bo,_))}function fw(x){l0.current===x&&(Ht(bo),Ht(l0))}var Mi=_t(0);function _v(x){for(var _=x;_!==null;){if(_.tag===13){var B=_.memoizedState;if(B!==null&&(B=B.dehydrated,B===null||_r(B)||Zi(B)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===x)break;for(;_.sibling===null;){if(_.return===null||_.return===x)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var dw=[];function pw(){for(var x=0;x<dw.length;x++){var _=dw[x];de?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}dw.length=0}var Ev=a.ReactCurrentDispatcher,To=a.ReactCurrentBatchConfig,ed=0,Fi=null,Yr=null,Sr=null,wv=!1,c0=!1,u0=0,eq=0;function qr(){throw Error(o(321))}function mw(x,_){if(_===null)return!1;for(var B=0;B<_.length&&B<x.length;B++)if(!eo(x[B],_[B]))return!1;return!0}function gw(x,_,B,P,k,q){if(ed=q,Fi=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Ev.current=x===null||x.memoizedState===null?rq:sq,x=B(P,k),c0){q=0;do{if(c0=!1,u0=0,25<=q)throw Error(o(301));q+=1,Sr=Yr=null,_.updateQueue=null,Ev.current=oq,x=B(P,k)}while(c0)}if(Ev.current=Tv,_=Yr!==null&&Yr.next!==null,ed=0,Sr=Yr=Fi=null,wv=!1,_)throw Error(o(300));return x}function Aw(){var x=u0!==0;return u0=0,x}function zl(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Fi.memoizedState=Sr=x:Sr=Sr.next=x,Sr}function $a(){if(Yr===null){var x=Fi.alternate;x=x!==null?x.memoizedState:null}else x=Yr.next;var _=Sr===null?Fi.memoizedState:Sr.next;if(_!==null)Sr=_,Yr=x;else{if(x===null)throw Error(o(310));Yr=x,x={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},Sr===null?Fi.memoizedState=Sr=x:Sr=Sr.next=x}return Sr}function ph(x,_){return typeof _=="function"?_(x):_}function Sv(x){var _=$a(),B=_.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var P=Yr,k=P.baseQueue,q=B.pending;if(q!==null){if(k!==null){var fe=k.next;k.next=q.next,q.next=fe}P.baseQueue=k=q,B.pending=null}if(k!==null){q=k.next,P=P.baseState;var Te=fe=null,Ke=null,ut=q;do{var Mt=ut.lane;if((ed&Mt)===Mt)Ke!==null&&(Ke=Ke.next={lane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),P=ut.hasEagerState?ut.eagerState:x(P,ut.action);else{var fn={lane:Mt,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null};Ke===null?(Te=Ke=fn,fe=P):Ke=Ke.next=fn,Fi.lanes|=Mt,nd|=Mt}ut=ut.next}while(ut!==null&&ut!==q);Ke===null?fe=P:Ke.next=Te,eo(P,_.memoizedState)||(ro=!0),_.memoizedState=P,_.baseState=fe,_.baseQueue=Ke,B.lastRenderedState=P}if(x=B.interleaved,x!==null){k=x;do q=k.lane,Fi.lanes|=q,nd|=q,k=k.next;while(k!==x)}else k===null&&(B.lanes=0);return[_.memoizedState,B.dispatch]}function Cv(x){var _=$a(),B=_.queue;if(B===null)throw Error(o(311));B.lastRenderedReducer=x;var P=B.dispatch,k=B.pending,q=_.memoizedState;if(k!==null){B.pending=null;var fe=k=k.next;do q=x(q,fe.action),fe=fe.next;while(fe!==k);eo(q,_.memoizedState)||(ro=!0),_.memoizedState=q,_.baseQueue===null&&(_.baseState=q),B.lastRenderedState=q}return[q,P]}function s9(){}function o9(x,_){var B=Fi,P=$a(),k=_(),q=!eo(P.memoizedState,k);if(q&&(P.memoizedState=k,ro=!0),P=P.queue,f0(c9.bind(null,B,P,x),[x]),P.getSnapshot!==_||q||Sr!==null&&Sr.memoizedState.tag&1){if(B.flags|=2048,h0(9,l9.bind(null,B,P,k,_),void 0,null),$i===null)throw Error(o(349));ed&30||a9(B,_,k)}return k}function a9(x,_,B){x.flags|=16384,x={getSnapshot:_,value:B},_=Fi.updateQueue,_===null?(_={lastEffect:null,stores:null},Fi.updateQueue=_,_.stores=[x]):(B=_.stores,B===null?_.stores=[x]:B.push(x))}function l9(x,_,B,P){_.value=B,_.getSnapshot=P,u9(_)&&Io(x,1,-1)}function c9(x,_,B){return B(function(){u9(_)&&Io(x,1,-1)})}function u9(x){var _=x.getSnapshot;x=x.value;try{var B=_();return!eo(x,B)}catch{return!0}}function vw(x){var _=zl();return typeof x=="function"&&(x=x()),_.memoizedState=_.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:x},_.queue=x,x=x.dispatch=iq.bind(null,Fi,x),[_.memoizedState,x]}function h0(x,_,B,P){return x={tag:x,create:_,destroy:B,deps:P,next:null},_=Fi.updateQueue,_===null?(_={lastEffect:null,stores:null},Fi.updateQueue=_,_.lastEffect=x.next=x):(B=_.lastEffect,B===null?_.lastEffect=x.next=x:(P=B.next,B.next=x,x.next=P,_.lastEffect=x)),x}function h9(){return $a().memoizedState}function Mv(x,_,B,P){var k=zl();Fi.flags|=x,k.memoizedState=h0(1|_,B,void 0,P===void 0?null:P)}function bv(x,_,B,P){var k=$a();P=P===void 0?null:P;var q=void 0;if(Yr!==null){var fe=Yr.memoizedState;if(q=fe.destroy,P!==null&&mw(P,fe.deps)){k.memoizedState=h0(_,B,q,P);return}}Fi.flags|=x,k.memoizedState=h0(1|_,B,q,P)}function yw(x,_){return Mv(8390656,8,x,_)}function f0(x,_){return bv(2048,8,x,_)}function f9(x,_){return bv(4,2,x,_)}function d9(x,_){return bv(4,4,x,_)}function p9(x,_){if(typeof _=="function")return x=x(),_(x),function(){_(null)};if(_!=null)return x=x(),_.current=x,function(){_.current=null}}function m9(x,_,B){return B=B!=null?B.concat([x]):null,bv(4,4,p9.bind(null,_,x),B)}function xw(){}function g9(x,_){var B=$a();_=_===void 0?null:_;var P=B.memoizedState;return P!==null&&_!==null&&mw(_,P[1])?P[0]:(B.memoizedState=[x,_],x)}function A9(x,_){var B=$a();_=_===void 0?null:_;var P=B.memoizedState;return P!==null&&_!==null&&mw(_,P[1])?P[0]:(x=x(),B.memoizedState=[x,_],x)}function tq(x,_){var B=xn;xn=B!==0&&4>B?B:4,x(!0);var P=To.transition;To.transition={};try{x(!1),_()}finally{xn=B,To.transition=P}}function v9(){return $a().memoizedState}function nq(x,_,B){var P=zc(x);B={lane:P,action:B,hasEagerState:!1,eagerState:null,next:null},y9(x)?x9(_,B):(_9(x,_,B),B=ps(),x=Io(x,P,B),x!==null&&E9(x,_,P))}function iq(x,_,B){var P=zc(x),k={lane:P,action:B,hasEagerState:!1,eagerState:null,next:null};if(y9(x))x9(_,k);else{_9(x,_,k);var q=x.alternate;if(x.lanes===0&&(q===null||q.lanes===0)&&(q=_.lastRenderedReducer,q!==null))try{var fe=_.lastRenderedState,Te=q(fe,B);if(k.hasEagerState=!0,k.eagerState=Te,eo(Te,fe))return}catch{}finally{}B=ps(),x=Io(x,P,B),x!==null&&E9(x,_,P)}}function y9(x){var _=x.alternate;return x===Fi||_!==null&&_===Fi}function x9(x,_){c0=wv=!0;var B=x.pending;B===null?_.next=_:(_.next=B.next,B.next=_),x.pending=_}function _9(x,_,B){$i!==null&&x.mode&1&&!(vn&2)?(x=_.interleaved,x===null?(B.next=B,to===null?to=[_]:to.push(_)):(B.next=x.next,x.next=B),_.interleaved=B):(x=_.pending,x===null?B.next=B:(B.next=x.next,x.next=B),_.pending=B)}function E9(x,_,B){if(B&4194240){var P=_.lanes;P&=x.pendingLanes,B|=P,_.lanes=B,Ka(x,B)}}var Tv={readContext:Wi,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},rq={readContext:Wi,useCallback:function(x,_){return zl().memoizedState=[x,_===void 0?null:_],x},useContext:Wi,useEffect:yw,useImperativeHandle:function(x,_,B){return B=B!=null?B.concat([x]):null,Mv(4194308,4,p9.bind(null,_,x),B)},useLayoutEffect:function(x,_){return Mv(4194308,4,x,_)},useInsertionEffect:function(x,_){return Mv(4,2,x,_)},useMemo:function(x,_){var B=zl();return _=_===void 0?null:_,x=x(),B.memoizedState=[x,_],x},useReducer:function(x,_,B){var P=zl();return _=B!==void 0?B(_):_,P.memoizedState=P.baseState=_,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:_},P.queue=x,x=x.dispatch=nq.bind(null,Fi,x),[P.memoizedState,x]},useRef:function(x){var _=zl();return x={current:x},_.memoizedState=x},useState:vw,useDebugValue:xw,useDeferredValue:function(x){var _=vw(x),B=_[0],P=_[1];return yw(function(){var k=To.transition;To.transition={};try{P(x)}finally{To.transition=k}},[x]),B},useTransition:function(){var x=vw(!1),_=x[0];return x=tq.bind(null,x[1]),zl().memoizedState=x,[_,x]},useMutableSource:function(){},useSyncExternalStore:function(x,_,B){var P=Fi,k=zl();if(xi){if(B===void 0)throw Error(o(407));B=B()}else{if(B=_(),$i===null)throw Error(o(349));ed&30||a9(P,_,B)}k.memoizedState=B;var q={value:B,getSnapshot:_};return k.queue=q,yw(c9.bind(null,P,q,x),[x]),P.flags|=2048,h0(9,l9.bind(null,P,q,B,_),void 0,null),B},useId:function(){var x=zl(),_=$i.identifierPrefix;if(xi){var B=Ul,P=Ol;B=(P&~(1<<32-ai(P)-1)).toString(32)+B,_=":"+_+"R"+B,B=u0++,0<B&&(_+="H"+B.toString(32)),_+=":"}else B=eq++,_=":"+_+"r"+B.toString(32)+":";return x.memoizedState=_},unstable_isNewReconciler:!1},sq={readContext:Wi,useCallback:g9,useContext:Wi,useEffect:f0,useImperativeHandle:m9,useInsertionEffect:f9,useLayoutEffect:d9,useMemo:A9,useReducer:Sv,useRef:h9,useState:function(){return Sv(ph)},useDebugValue:xw,useDeferredValue:function(x){var _=Sv(ph),B=_[0],P=_[1];return f0(function(){var k=To.transition;To.transition={};try{P(x)}finally{To.transition=k}},[x]),B},useTransition:function(){var x=Sv(ph)[0],_=$a().memoizedState;return[x,_]},useMutableSource:s9,useSyncExternalStore:o9,useId:v9,unstable_isNewReconciler:!1},oq={readContext:Wi,useCallback:g9,useContext:Wi,useEffect:f0,useImperativeHandle:m9,useInsertionEffect:f9,useLayoutEffect:d9,useMemo:A9,useReducer:Cv,useRef:h9,useState:function(){return Cv(ph)},useDebugValue:xw,useDeferredValue:function(x){var _=Cv(ph),B=_[0],P=_[1];return f0(function(){var k=To.transition;To.transition={};try{P(x)}finally{To.transition=k}},[x]),B},useTransition:function(){var x=Cv(ph)[0],_=$a().memoizedState;return[x,_]},useMutableSource:s9,useSyncExternalStore:o9,useId:v9,unstable_isNewReconciler:!1};function _w(x,_){try{var B="",P=_;do B+=hh(P),P=P.return;while(P);var k=B}catch(q){k=`
Error generating stack: `+q.message+`
`+q.stack}return{value:x,source:_,stack:k}}function Ew(x,_){try{console.error(_.value)}catch(B){setTimeout(function(){throw B})}}var aq=typeof WeakMap=="function"?WeakMap:Map;function w9(x,_,B){B=Fl(-1,B),B.tag=3,B.payload={element:null};var P=_.value;return B.callback=function(){Vv||(Vv=!0,Nw=P),Ew(x,_)},B}function S9(x,_,B){B=Fl(-1,B),B.tag=3;var P=x.type.getDerivedStateFromError;if(typeof P=="function"){var k=_.value;B.payload=function(){return P(k)},B.callback=function(){Ew(x,_)}}var q=x.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(B.callback=function(){Ew(x,_),typeof P!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var fe=_.stack;this.componentDidCatch(_.value,{componentStack:fe!==null?fe:""})}),B}function C9(x,_,B){var P=x.pingCache;if(P===null){P=x.pingCache=new aq;var k=new Set;P.set(_,k)}else k=P.get(_),k===void 0&&(k=new Set,P.set(_,k));k.has(B)||(k.add(B),x=_q.bind(null,x,_,B),_.then(x,x))}function M9(x){do{var _;if((_=x.tag===13)&&(_=x.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return x;x=x.return}while(x!==null);return null}function b9(x,_,B,P,k){return x.mode&1?(x.flags|=65536,x.lanes=k,x):(x===_?x.flags|=65536:(x.flags|=128,B.flags|=131072,B.flags&=-52805,B.tag===1&&(B.alternate===null?B.tag=17:(_=Fl(-1,1),_.tag=2,Fc(B,_))),B.lanes|=1),x)}function el(x){x.flags|=4}function T9(x,_){if(x!==null&&x.child===_.child)return!0;if(_.flags&16)return!1;for(x=_.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var d0,p0,Iv,Bv;if(he)d0=function(x,_){for(var B=_.child;B!==null;){if(B.tag===5||B.tag===6)Y(x,B.stateNode);else if(B.tag!==4&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===_)break;for(;B.sibling===null;){if(B.return===null||B.return===_)return;B=B.return}B.sibling.return=B.return,B=B.sibling}},p0=function(){},Iv=function(x,_,B,P,k){if(x=x.memoizedProps,x!==P){var q=_.stateNode,fe=Za(bo.current);B=N(q,B,x,P,k,fe),(_.updateQueue=B)&&el(_)}},Bv=function(x,_,B,P){B!==P&&el(_)};else if(te){d0=function(x,_,B,P){for(var k=_.child;k!==null;){if(k.tag===5){var q=k.stateNode;B&&P&&(q=Lt(q,k.type,k.memoizedProps,k)),Y(x,q)}else if(k.tag===6)q=k.stateNode,B&&P&&(q=bn(q,k.memoizedProps,k)),Y(x,q);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)q=k.child,q!==null&&(q.return=k),d0(x,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};var I9=function(x,_,B,P){for(var k=_.child;k!==null;){if(k.tag===5){var q=k.stateNode;B&&P&&(q=Lt(q,k.type,k.memoizedProps,k)),Pt(x,q)}else if(k.tag===6)q=k.stateNode,B&&P&&(q=bn(q,k.memoizedProps,k)),Pt(x,q);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)q=k.child,q!==null&&(q.return=k),I9(x,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===_)break;for(;k.sibling===null;){if(k.return===null||k.return===_)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};p0=function(x,_){var B=_.stateNode;if(!T9(x,_)){x=B.containerInfo;var P=pt(x);I9(P,_,!1,!1),B.pendingChildren=P,el(_),Qt(x,P)}},Iv=function(x,_,B,P,k){var q=x.stateNode,fe=x.memoizedProps;if((x=T9(x,_))&&fe===P)_.stateNode=q;else{var Te=_.stateNode,Ke=Za(bo.current),ut=null;fe!==P&&(ut=N(Te,B,fe,P,k,Ke)),x&&ut===null?_.stateNode=q:(q=nt(q,ut,B,fe,P,_,x,Te),$(q,B,P,k,Ke)&&el(_),_.stateNode=q,x?el(_):d0(q,_,!1,!1))}},Bv=function(x,_,B,P){B!==P?(x=Za(Zf.current),B=Za(bo.current),_.stateNode=j(P,x,B,_),el(_)):_.stateNode=x.stateNode}}else p0=function(){},Iv=function(){},Bv=function(){};function m0(x,_){if(!xi)switch(x.tailMode){case"hidden":_=x.tail;for(var B=null;_!==null;)_.alternate!==null&&(B=_),_=_.sibling;B===null?x.tail=null:B.sibling=null;break;case"collapsed":B=x.tail;for(var P=null;B!==null;)B.alternate!==null&&(P=B),B=B.sibling;P===null?_||x.tail===null?x.tail=null:x.tail.sibling=null:P.sibling=null}}function Kr(x){var _=x.alternate!==null&&x.alternate.child===x.child,B=0,P=0;if(_)for(var k=x.child;k!==null;)B|=k.lanes|k.childLanes,P|=k.subtreeFlags&14680064,P|=k.flags&14680064,k.return=x,k=k.sibling;else for(k=x.child;k!==null;)B|=k.lanes|k.childLanes,P|=k.subtreeFlags,P|=k.flags,k.return=x,k=k.sibling;return x.subtreeFlags|=P,x.childLanes=B,_}function lq(x,_,B){var P=_.pendingProps;switch(aw(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(_),null;case 1:return kn(_.type)&&Jn(),Kr(_),null;case 3:return P=_.stateNode,$f(),Ht(Kt),Ht(On),pw(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(x===null||x.child===null)&&(s0(_)?el(_):x===null||x.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,pa!==null&&(Qw(pa),pa=null))),p0(x,_),Kr(_),null;case 5:fw(_),B=Za(Zf.current);var k=_.type;if(x!==null&&_.stateNode!=null)Iv(x,_,k,P,B),x.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!P){if(_.stateNode===null)throw Error(o(166));return Kr(_),null}if(x=Za(bo.current),s0(_)){if(!xe)throw Error(o(175));x=ee(_.stateNode,_.type,_.memoizedProps,B,x,_,!r0),_.updateQueue=x,x!==null&&el(_)}else{var q=U(k,P,B,x,_);d0(q,_,!1,!1),_.stateNode=q,$(q,k,P,B,x)&&el(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return Kr(_),null;case 6:if(x&&_.stateNode!=null)Bv(x,_,x.memoizedProps,P);else{if(typeof P!="string"&&_.stateNode===null)throw Error(o(166));if(x=Za(Zf.current),B=Za(bo.current),s0(_)){if(!xe)throw Error(o(176));if(x=_.stateNode,P=_.memoizedProps,(B=G(x,P,_,!r0))&&(k=no,k!==null))switch(q=(k.mode&1)!==0,k.tag){case 3:Xe(k.stateNode.containerInfo,x,P,q);break;case 5:$e(k.type,k.memoizedProps,k.stateNode,x,P,q)}B&&el(_)}else _.stateNode=j(P,x,B,_)}return Kr(_),null;case 13:if(Ht(Mi),P=_.memoizedState,xi&&io!==null&&_.mode&1&&!(_.flags&128)){for(x=io;x;)x=yi(x);return Kf(),_.flags|=98560,_}if(P!==null&&P.dehydrated!==null){if(P=s0(_),x===null){if(!P)throw Error(o(318));if(!xe)throw Error(o(344));if(x=_.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));ie(x,_)}else Kf(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;return Kr(_),null}return pa!==null&&(Qw(pa),pa=null),_.flags&128?(_.lanes=B,_):(P=P!==null,B=!1,x===null?s0(_):B=x.memoizedState!==null,P&&!B&&(_.child.flags|=8192,_.mode&1&&(x===null||Mi.current&1?cr===0&&(cr=3):Ww())),_.updateQueue!==null&&(_.flags|=4),Kr(_),null);case 4:return $f(),p0(x,_),x===null&&me(_.stateNode.containerInfo),Kr(_),null;case 10:return wr(_.type._context),Kr(_),null;case 17:return kn(_.type)&&Jn(),Kr(_),null;case 19:if(Ht(Mi),k=_.memoizedState,k===null)return Kr(_),null;if(P=(_.flags&128)!==0,q=k.rendering,q===null)if(P)m0(k,!1);else{if(cr!==0||x!==null&&x.flags&128)for(x=_.child;x!==null;){if(q=_v(x),q!==null){for(_.flags|=128,m0(k,!1),x=q.updateQueue,x!==null&&(_.updateQueue=x,_.flags|=4),_.subtreeFlags=0,x=B,P=_.child;P!==null;)B=P,k=x,B.flags&=14680066,q=B.alternate,q===null?(B.childLanes=0,B.lanes=k,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=q.childLanes,B.lanes=q.lanes,B.child=q.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=q.memoizedProps,B.memoizedState=q.memoizedState,B.updateQueue=q.updateQueue,B.type=q.type,k=q.dependencies,B.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext}),P=P.sibling;return bt(Mi,Mi.current&1|2),_.child}x=x.sibling}k.tail!==null&&Ci()>kw&&(_.flags|=128,P=!0,m0(k,!1),_.lanes=4194304)}else{if(!P)if(x=_v(q),x!==null){if(_.flags|=128,P=!0,x=x.updateQueue,x!==null&&(_.updateQueue=x,_.flags|=4),m0(k,!0),k.tail===null&&k.tailMode==="hidden"&&!q.alternate&&!xi)return Kr(_),null}else 2*Ci()-k.renderingStartTime>kw&&B!==1073741824&&(_.flags|=128,P=!0,m0(k,!1),_.lanes=4194304);k.isBackwards?(q.sibling=_.child,_.child=q):(x=k.last,x!==null?x.sibling=q:_.child=q,k.last=q)}return k.tail!==null?(_=k.tail,k.rendering=_,k.tail=_.sibling,k.renderingStartTime=Ci(),_.sibling=null,x=Mi.current,bt(Mi,P?x&1|2:x&1),_):(Kr(_),null);case 22:case 23:return Vw(),P=_.memoizedState!==null,x!==null&&x.memoizedState!==null!==P&&(_.flags|=8192),P&&_.mode&1?so&1073741824&&(Kr(_),he&&_.subtreeFlags&6&&(_.flags|=8192)):Kr(_),null;case 24:return null;case 25:return null}throw Error(o(156,_.tag))}var cq=a.ReactCurrentOwner,ro=!1;function ds(x,_,B,P){_.child=x===null?i9(_,null,B,P):Jf(_,x.child,B,P)}function B9(x,_,B,P,k){B=B.render;var q=_.ref;return Vi(_,k),P=gw(x,_,B,P,q,k),B=Aw(),x!==null&&!ro?(_.updateQueue=x.updateQueue,_.flags&=-2053,x.lanes&=~k,kl(x,_,k)):(xi&&B&&ow(_),_.flags|=1,ds(x,_,P,k),_.child)}function P9(x,_,B,P,k){if(x===null){var q=B.type;return typeof q=="function"&&!jw(q)&&q.defaultProps===void 0&&B.compare===null&&B.defaultProps===void 0?(_.tag=15,_.type=q,R9(x,_,q,P,k)):(x=Jv(B.type,null,P,_,_.mode,k),x.ref=_.ref,x.return=_,_.child=x)}if(q=x.child,!(x.lanes&k)){var fe=q.memoizedProps;if(B=B.compare,B=B!==null?B:uh,B(fe,P)&&x.ref===_.ref)return kl(x,_,k)}return _.flags|=1,x=Nc(q,P),x.ref=_.ref,x.return=_,_.child=x}function R9(x,_,B,P,k){if(x!==null&&uh(x.memoizedProps,P)&&x.ref===_.ref)if(ro=!1,(x.lanes&k)!==0)x.flags&131072&&(ro=!0);else return _.lanes=x.lanes,kl(x,_,k);return ww(x,_,B,P,k)}function D9(x,_,B){var P=_.pendingProps,k=P.children,q=x!==null?x.memoizedState:null;if(P.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null},bt(td,so),so|=B;else if(B&1073741824)_.memoizedState={baseLanes:0,cachePool:null},P=q!==null?q.baseLanes:B,bt(td,so),so|=P;else return x=q!==null?q.baseLanes|B:B,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:x,cachePool:null},_.updateQueue=null,bt(td,so),so|=x,null;else q!==null?(P=q.baseLanes|B,_.memoizedState=null):P=B,bt(td,so),so|=P;return ds(x,_,k,B),_.child}function L9(x,_){var B=_.ref;(x===null&&B!==null||x!==null&&x.ref!==B)&&(_.flags|=512,_.flags|=2097152)}function ww(x,_,B,P,k){var q=kn(B)?Un:On.current;return q=yn(_,q),Vi(_,k),B=gw(x,_,B,P,q,k),P=Aw(),x!==null&&!ro?(_.updateQueue=x.updateQueue,_.flags&=-2053,x.lanes&=~k,kl(x,_,k)):(xi&&P&&ow(_),_.flags|=1,ds(x,_,B,k),_.child)}function F9(x,_,B,P,k){if(kn(B)){var q=!0;Pn(_)}else q=!1;if(Vi(_,k),_.stateNode===null)x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),q8(_,B,P),sw(_,B,P,k),P=!0;else if(x===null){var fe=_.stateNode,Te=_.memoizedProps;fe.props=Te;var Ke=fe.context,ut=B.contextType;typeof ut=="object"&&ut!==null?ut=Wi(ut):(ut=kn(B)?Un:On.current,ut=yn(_,ut));var Mt=B.getDerivedStateFromProps,fn=typeof Mt=="function"||typeof fe.getSnapshotBeforeUpdate=="function";fn||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Te!==P||Ke!==ut)&&K8(_,fe,P,ut),Lc=!1;var jt=_.memoizedState;fe.state=jt,gv(_,P,fe,k),Ke=_.memoizedState,Te!==P||jt!==Ke||Kt.current||Lc?(typeof Mt=="function"&&(rw(_,B,Mt,P),Ke=_.memoizedState),(Te=Lc||Y8(_,B,Te,P,jt,Ke,ut))?(fn||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(_.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=P,_.memoizedState=Ke),fe.props=P,fe.state=Ke,fe.context=ut,P=Te):(typeof fe.componentDidMount=="function"&&(_.flags|=4194308),P=!1)}else{fe=_.stateNode,V8(x,_),Te=_.memoizedProps,ut=_.type===_.elementType?Te:hs(_.type,Te),fe.props=ut,fn=_.pendingProps,jt=fe.context,Ke=B.contextType,typeof Ke=="object"&&Ke!==null?Ke=Wi(Ke):(Ke=kn(B)?Un:On.current,Ke=yn(_,Ke));var ni=B.getDerivedStateFromProps;(Mt=typeof ni=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Te!==fn||jt!==Ke)&&K8(_,fe,P,Ke),Lc=!1,jt=_.memoizedState,fe.state=jt,gv(_,P,fe,k);var Ot=_.memoizedState;Te!==fn||jt!==Ot||Kt.current||Lc?(typeof ni=="function"&&(rw(_,B,ni,P),Ot=_.memoizedState),(ut=Lc||Y8(_,B,ut,P,jt,Ot,Ke)||!1)?(Mt||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(P,Ot,Ke),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(P,Ot,Ke)),typeof fe.componentDidUpdate=="function"&&(_.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof fe.componentDidUpdate!="function"||Te===x.memoizedProps&&jt===x.memoizedState||(_.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Te===x.memoizedProps&&jt===x.memoizedState||(_.flags|=1024),_.memoizedProps=P,_.memoizedState=Ot),fe.props=P,fe.state=Ot,fe.context=Ke,P=ut):(typeof fe.componentDidUpdate!="function"||Te===x.memoizedProps&&jt===x.memoizedState||(_.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Te===x.memoizedProps&&jt===x.memoizedState||(_.flags|=1024),P=!1)}return Sw(x,_,B,P,q,k)}function Sw(x,_,B,P,k,q){L9(x,_);var fe=(_.flags&128)!==0;if(!P&&!fe)return k&&sn(_,B,!1),kl(x,_,q);P=_.stateNode,cq.current=_;var Te=fe&&typeof B.getDerivedStateFromError!="function"?null:P.render();return _.flags|=1,x!==null&&fe?(_.child=Jf(_,x.child,null,q),_.child=Jf(_,null,Te,q)):ds(x,_,Te,q),_.memoizedState=P.state,k&&sn(_,B,!0),_.child}function O9(x){var _=x.stateNode;_.pendingContext?en(x,_.pendingContext,_.pendingContext!==_.context):_.context&&en(x,_.context,!1),hw(x,_.containerInfo)}function U9(x,_,B,P,k){return Kf(),uw(k),_.flags|=256,ds(x,_,B,P),_.child}var Pv={dehydrated:null,treeContext:null,retryLane:0};function Rv(x){return{baseLanes:x,cachePool:null}}function z9(x,_,B){var P=_.pendingProps,k=Mi.current,q=!1,fe=(_.flags&128)!==0,Te;if((Te=fe)||(Te=x!==null&&x.memoizedState===null?!1:(k&2)!==0),Te?(q=!0,_.flags&=-129):(x===null||x.memoizedState!==null)&&(k|=1),bt(Mi,k&1),x===null)return cw(_),x=_.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(_.mode&1?Zi(x)?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(k=P.children,x=P.fallback,q?(P=_.mode,q=_.child,k={mode:"hidden",children:k},!(P&1)&&q!==null?(q.childLanes=0,q.pendingProps=k):q=Zv(k,P,0,null),x=xh(x,P,B,null),q.return=_,x.return=_,q.sibling=x,_.child=q,_.child.memoizedState=Rv(B),_.memoizedState=Pv,x):Cw(_,k));if(k=x.memoizedState,k!==null){if(Te=k.dehydrated,Te!==null){if(fe)return _.flags&256?(_.flags&=-257,Dv(x,_,B,Error(o(422)))):_.memoizedState!==null?(_.child=x.child,_.flags|=128,null):(q=P.fallback,k=_.mode,P=Zv({mode:"visible",children:P.children},k,0,null),q=xh(q,k,B,null),q.flags|=2,P.return=_,q.return=_,P.sibling=q,_.child=P,_.mode&1&&Jf(_,x.child,null,B),_.child.memoizedState=Rv(B),_.memoizedState=Pv,q);if(!(_.mode&1))_=Dv(x,_,B,null);else if(Zi(Te))_=Dv(x,_,B,Error(o(419)));else if(P=(B&x.childLanes)!==0,ro||P){if(P=$i,P!==null){switch(B&-B){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}P=q&(P.suspendedLanes|B)?0:q,P!==0&&P!==k.retryLane&&(k.retryLane=P,Io(x,P,-1))}Ww(),_=Dv(x,_,B,Error(o(421)))}else _r(Te)?(_.flags|=128,_.child=x.child,_=Eq.bind(null,x),lr(Te,_),_=null):(B=k.treeContext,xe&&(io=Js(Te),no=_,xi=!0,pa=null,r0=!1,B!==null&&(Co[Mo++]=Ol,Co[Mo++]=Ul,Co[Mo++]=fh,Ol=B.id,Ul=B.overflow,fh=_)),_=Cw(_,_.pendingProps.children),_.flags|=4096);return _}return q?(P=N9(x,_,P.children,P.fallback,B),q=_.child,k=x.child.memoizedState,q.memoizedState=k===null?Rv(B):{baseLanes:k.baseLanes|B,cachePool:null},q.childLanes=x.childLanes&~B,_.memoizedState=Pv,P):(B=k9(x,_,P.children,B),_.memoizedState=null,B)}return q?(P=N9(x,_,P.children,P.fallback,B),q=_.child,k=x.child.memoizedState,q.memoizedState=k===null?Rv(B):{baseLanes:k.baseLanes|B,cachePool:null},q.childLanes=x.childLanes&~B,_.memoizedState=Pv,P):(B=k9(x,_,P.children,B),_.memoizedState=null,B)}function Cw(x,_){return _=Zv({mode:"visible",children:_},x.mode,0,null),_.return=x,x.child=_}function k9(x,_,B,P){var k=x.child;return x=k.sibling,B=Nc(k,{mode:"visible",children:B}),!(_.mode&1)&&(B.lanes=P),B.return=_,B.sibling=null,x!==null&&(P=_.deletions,P===null?(_.deletions=[x],_.flags|=16):P.push(x)),_.child=B}function N9(x,_,B,P,k){var q=_.mode;x=x.child;var fe=x.sibling,Te={mode:"hidden",children:B};return!(q&1)&&_.child!==x?(B=_.child,B.childLanes=0,B.pendingProps=Te,_.deletions=null):(B=Nc(x,Te),B.subtreeFlags=x.subtreeFlags&14680064),fe!==null?P=Nc(fe,P):(P=xh(P,q,k,null),P.flags|=2),P.return=_,B.return=_,B.sibling=P,_.child=B,P}function Dv(x,_,B,P){return P!==null&&uw(P),Jf(_,x.child,null,B),x=Cw(_,_.pendingProps.children),x.flags|=2,_.memoizedState=null,x}function G9(x,_,B){x.lanes|=_;var P=x.alternate;P!==null&&(P.lanes|=_),fs(x.return,_,B)}function Mw(x,_,B,P,k){var q=x.memoizedState;q===null?x.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:P,tail:B,tailMode:k}:(q.isBackwards=_,q.rendering=null,q.renderingStartTime=0,q.last=P,q.tail=B,q.tailMode=k)}function H9(x,_,B){var P=_.pendingProps,k=P.revealOrder,q=P.tail;if(ds(x,_,P.children,B),P=Mi.current,P&2)P=P&1|2,_.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=_.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&G9(x,B,_);else if(x.tag===19)G9(x,B,_);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===_)break e;for(;x.sibling===null;){if(x.return===null||x.return===_)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}P&=1}if(bt(Mi,P),!(_.mode&1))_.memoizedState=null;else switch(k){case"forwards":for(B=_.child,k=null;B!==null;)x=B.alternate,x!==null&&_v(x)===null&&(k=B),B=B.sibling;B=k,B===null?(k=_.child,_.child=null):(k=B.sibling,B.sibling=null),Mw(_,!1,k,B,q);break;case"backwards":for(B=null,k=_.child,_.child=null;k!==null;){if(x=k.alternate,x!==null&&_v(x)===null){_.child=k;break}x=k.sibling,k.sibling=B,B=k,k=x}Mw(_,!0,B,null,q);break;case"together":Mw(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function kl(x,_,B){if(x!==null&&(_.dependencies=x.dependencies),nd|=_.lanes,!(B&_.childLanes))return null;if(x!==null&&_.child!==x.child)throw Error(o(153));if(_.child!==null){for(x=_.child,B=Nc(x,x.pendingProps),_.child=B,B.return=_;x.sibling!==null;)x=x.sibling,B=B.sibling=Nc(x,x.pendingProps),B.return=_;B.sibling=null}return _.child}function uq(x,_,B){switch(_.tag){case 3:O9(_),Kf();break;case 5:r9(_);break;case 1:kn(_.type)&&Pn(_);break;case 4:hw(_,_.stateNode.containerInfo);break;case 10:pv(_,_.type._context,_.memoizedProps.value);break;case 13:var P=_.memoizedState;if(P!==null)return P.dehydrated!==null?(bt(Mi,Mi.current&1),_.flags|=128,null):B&_.child.childLanes?z9(x,_,B):(bt(Mi,Mi.current&1),x=kl(x,_,B),x!==null?x.sibling:null);bt(Mi,Mi.current&1);break;case 19:if(P=(B&_.childLanes)!==0,x.flags&128){if(P)return H9(x,_,B);_.flags|=128}var k=_.memoizedState;if(k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),bt(Mi,Mi.current),P)break;return null;case 22:case 23:return _.lanes=0,D9(x,_,B)}return kl(x,_,B)}function hq(x,_){switch(aw(_),_.tag){case 1:return kn(_.type)&&Jn(),x=_.flags,x&65536?(_.flags=x&-65537|128,_):null;case 3:return $f(),Ht(Kt),Ht(On),pw(),x=_.flags,x&65536&&!(x&128)?(_.flags=x&-65537|128,_):null;case 5:return fw(_),null;case 13:if(Ht(Mi),x=_.memoizedState,x!==null&&x.dehydrated!==null){if(_.alternate===null)throw Error(o(340));Kf()}return x=_.flags,x&65536?(_.flags=x&-65537|128,_):null;case 19:return Ht(Mi),null;case 4:return $f(),null;case 10:return wr(_.type._context),null;case 22:case 23:return Vw(),null;case 24:return null;default:return null}}var Lv=!1,mh=!1,fq=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Fv(x,_){var B=x.ref;if(B!==null)if(typeof B=="function")try{B(null)}catch(P){Ls(x,_,P)}else B.current=null}function bw(x,_,B){try{B()}catch(P){Ls(x,_,P)}}var Q9=!1;function dq(x,_){for(W(x.containerInfo),Et=_;Et!==null;)if(x=Et,_=x.child,(x.subtreeFlags&1028)!==0&&_!==null)_.return=x,Et=_;else for(;Et!==null;){x=Et;try{var B=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var P=B.memoizedProps,k=B.memoizedState,q=x.stateNode,fe=q.getSnapshotBeforeUpdate(x.elementType===x.type?P:hs(x.type,P),k);q.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:he&&rt(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Te){Ls(x,x.return,Te)}if(_=x.sibling,_!==null){_.return=x.return,Et=_;break}Et=x.return}return B=Q9,Q9=!1,B}function gh(x,_,B){var P=_.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var k=P=P.next;do{if((k.tag&x)===x){var q=k.destroy;k.destroy=void 0,q!==void 0&&bw(_,B,q)}k=k.next}while(k!==P)}}function g0(x,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var B=_=_.next;do{if((B.tag&x)===x){var P=B.create;B.destroy=P()}B=B.next}while(B!==_)}}function Tw(x){var _=x.ref;if(_!==null){var B=x.stateNode;switch(x.tag){case 5:x=K(B);break;default:x=B}typeof _=="function"?_(x):_.current=x}}function V9(x,_,B){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(lh,_)}catch{}switch(_.tag){case 0:case 11:case 14:case 15:if(x=_.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var P=x=x.next;do{var k=P,q=k.destroy;k=k.tag,q!==void 0&&(k&2||k&4)&&bw(_,B,q),P=P.next}while(P!==x)}break;case 1:if(Fv(_,B),x=_.stateNode,typeof x.componentWillUnmount=="function")try{x.props=_.memoizedProps,x.state=_.memoizedState,x.componentWillUnmount()}catch(fe){Ls(_,B,fe)}break;case 5:Fv(_,B);break;case 4:he?K9(x,_,B):te&&te&&(_=_.stateNode.containerInfo,B=pt(_),Tt(_,B))}}function W9(x,_,B){for(var P=_;;)if(V9(x,P,B),P.child===null||he&&P.tag===4){if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return}P.sibling.return=P.return,P=P.sibling}else P.child.return=P,P=P.child}function j9(x){var _=x.alternate;_!==null&&(x.alternate=null,j9(_)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(_=x.stateNode,_!==null&&Me(_)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function X9(x){return x.tag===5||x.tag===3||x.tag===4}function Y9(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||X9(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function q9(x){if(he){e:{for(var _=x.return;_!==null;){if(X9(_))break e;_=_.return}throw Error(o(160))}var B=_;switch(B.tag){case 5:_=B.stateNode,B.flags&32&&(qe(_),B.flags&=-33),B=Y9(x),Bw(x,B,_);break;case 3:case 4:_=B.stateNode.containerInfo,B=Y9(x),Iw(x,B,_);break;default:throw Error(o(161))}}}function Iw(x,_,B){var P=x.tag;if(P===5||P===6)x=x.stateNode,_?et(B,x,_):Qe(B,x);else if(P!==4&&(x=x.child,x!==null))for(Iw(x,_,B),x=x.sibling;x!==null;)Iw(x,_,B),x=x.sibling}function Bw(x,_,B){var P=x.tag;if(P===5||P===6)x=x.stateNode,_?tt(B,x,_):Le(B,x);else if(P!==4&&(x=x.child,x!==null))for(Bw(x,_,B),x=x.sibling;x!==null;)Bw(x,_,B),x=x.sibling}function K9(x,_,B){for(var P=_,k=!1,q,fe;;){if(!k){k=P.return;e:for(;;){if(k===null)throw Error(o(160));switch(q=k.stateNode,k.tag){case 5:fe=!1;break e;case 3:q=q.containerInfo,fe=!0;break e;case 4:q=q.containerInfo,fe=!0;break e}k=k.return}k=!0}if(P.tag===5||P.tag===6)W9(x,P,B),fe?Re(q,P.stateNode):le(q,P.stateNode);else if(P.tag===18)fe?ke(q,P.stateNode):Ue(q,P.stateNode);else if(P.tag===4){if(P.child!==null){q=P.stateNode.containerInfo,fe=!0,P.child.return=P,P=P.child;continue}}else if(V9(x,P,B),P.child!==null){P.child.return=P,P=P.child;continue}if(P===_)break;for(;P.sibling===null;){if(P.return===null||P.return===_)return;P=P.return,P.tag===4&&(k=!1)}P.sibling.return=P.return,P=P.sibling}}function Pw(x,_){if(he){switch(_.tag){case 0:case 11:case 14:case 15:gh(3,_,_.return),g0(3,_),gh(5,_,_.return);return;case 1:return;case 5:var B=_.stateNode;if(B!=null){var P=_.memoizedProps;x=x!==null?x.memoizedProps:P;var k=_.type,q=_.updateQueue;_.updateQueue=null,q!==null&&at(B,q,k,x,P,_)}return;case 6:if(_.stateNode===null)throw Error(o(162));B=_.memoizedProps,He(_.stateNode,x!==null?x.memoizedProps:B,B);return;case 3:xe&&x!==null&&x.memoizedState.isDehydrated&&ae(_.stateNode.containerInfo);return;case 12:return;case 13:Ov(_);return;case 19:Ov(_);return;case 17:return}throw Error(o(163))}switch(_.tag){case 0:case 11:case 14:case 15:gh(3,_,_.return),g0(3,_),gh(5,_,_.return);return;case 12:return;case 13:Ov(_);return;case 19:Ov(_);return;case 3:xe&&x!==null&&x.memoizedState.isDehydrated&&ae(_.stateNode.containerInfo);break;case 22:case 23:return}e:if(te){switch(_.tag){case 1:case 5:case 6:break e;case 3:case 4:_=_.stateNode,Tt(_.containerInfo,_.pendingChildren);break e}throw Error(o(163))}}function Ov(x){var _=x.updateQueue;if(_!==null){x.updateQueue=null;var B=x.stateNode;B===null&&(B=x.stateNode=new fq),_.forEach(function(P){var k=wq.bind(null,x,P);B.has(P)||(B.add(P),P.then(k,k))})}}function pq(x,_){for(Et=_;Et!==null;){_=Et;var B=_.deletions;if(B!==null)for(var P=0;P<B.length;P++){var k=B[P];try{var q=x;he?K9(q,k,_):W9(q,k,_);var fe=k.alternate;fe!==null&&(fe.return=null),k.return=null}catch(Ft){Ls(k,_,Ft)}}if(B=_.child,_.subtreeFlags&12854&&B!==null)B.return=_,Et=B;else for(;Et!==null;){_=Et;try{var Te=_.flags;if(Te&32&&he&&qe(_.stateNode),Te&512){var Ke=_.alternate;if(Ke!==null){var ut=Ke.ref;ut!==null&&(typeof ut=="function"?ut(null):ut.current=null)}}if(Te&8192)switch(_.tag){case 13:if(_.memoizedState!==null){var Mt=_.alternate;(Mt===null||Mt.memoizedState===null)&&(zw=Ci())}break;case 22:var fn=_.memoizedState!==null,jt=_.alternate,ni=jt!==null&&jt.memoizedState!==null;if(B=_,he){e:if(P=B,k=fn,q=null,he)for(var Ot=P;;){if(Ot.tag===5){if(q===null){q=Ot;var Jr=Ot.stateNode;k?it(Jr):_e(Ot.stateNode,Ot.memoizedProps)}}else if(Ot.tag===6){if(q===null){var Po=Ot.stateNode;k?Ae(Po):Ie(Po,Ot.memoizedProps)}}else if((Ot.tag!==22&&Ot.tag!==23||Ot.memoizedState===null||Ot===P)&&Ot.child!==null){Ot.child.return=Ot,Ot=Ot.child;continue}if(Ot===P)break;for(;Ot.sibling===null;){if(Ot.return===null||Ot.return===P)break e;q===Ot&&(q=null),Ot=Ot.return}q===Ot&&(q=null),Ot.sibling.return=Ot.return,Ot=Ot.sibling}}if(fn&&!ni&&B.mode&1){Et=B;for(var Ne=B.child;Ne!==null;){for(B=Et=Ne;Et!==null;){P=Et;var Pe=P.child;switch(P.tag){case 0:case 11:case 14:case 15:gh(4,P,P.return);break;case 1:Fv(P,P.return);var Ve=P.stateNode;if(typeof Ve.componentWillUnmount=="function"){var wt=P.return;try{Ve.props=P.memoizedProps,Ve.state=P.memoizedState,Ve.componentWillUnmount()}catch(Ft){Ls(P,wt,Ft)}}break;case 5:Fv(P,P.return);break;case 22:if(P.memoizedState!==null){$9(B);continue}}Pe!==null?(Pe.return=P,Et=Pe):$9(B)}Ne=Ne.sibling}}}switch(Te&4102){case 2:q9(_),_.flags&=-3;break;case 6:q9(_),_.flags&=-3,Pw(_.alternate,_);break;case 4096:_.flags&=-4097;break;case 4100:_.flags&=-4097,Pw(_.alternate,_);break;case 4:Pw(_.alternate,_)}}catch(Ft){Ls(_,_.return,Ft)}if(B=_.sibling,B!==null){B.return=_.return,Et=B;break}Et=_.return}}}function mq(x,_,B){Et=x,J9(x)}function J9(x,_,B){for(var P=(x.mode&1)!==0;Et!==null;){var k=Et,q=k.child;if(k.tag===22&&P){var fe=k.memoizedState!==null||Lv;if(!fe){var Te=k.alternate,Ke=Te!==null&&Te.memoizedState!==null||mh;Te=Lv;var ut=mh;if(Lv=fe,(mh=Ke)&&!ut)for(Et=k;Et!==null;)fe=Et,Ke=fe.child,fe.tag===22&&fe.memoizedState!==null?eB(k):Ke!==null?(Ke.return=fe,Et=Ke):eB(k);for(;q!==null;)Et=q,J9(q),q=q.sibling;Et=k,Lv=Te,mh=ut}Z9(x)}else k.subtreeFlags&8772&&q!==null?(q.return=k,Et=q):Z9(x)}}function Z9(x){for(;Et!==null;){var _=Et;if(_.flags&8772){var B=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:mh||g0(5,_);break;case 1:var P=_.stateNode;if(_.flags&4&&!mh)if(B===null)P.componentDidMount();else{var k=_.elementType===_.type?B.memoizedProps:hs(_.type,B.memoizedProps);P.componentDidUpdate(k,B.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var q=_.updateQueue;q!==null&&j8(_,q,P);break;case 3:var fe=_.updateQueue;if(fe!==null){if(B=null,_.child!==null)switch(_.child.tag){case 5:B=K(_.child.stateNode);break;case 1:B=_.child.stateNode}j8(_,fe,B)}break;case 5:var Te=_.stateNode;B===null&&_.flags&4&&De(Te,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&_.memoizedState===null){var Ke=_.alternate;if(Ke!==null){var ut=Ke.memoizedState;if(ut!==null){var Mt=ut.dehydrated;Mt!==null&&pe(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}mh||_.flags&512&&Tw(_)}catch(fn){Ls(_,_.return,fn)}}if(_===x){Et=null;break}if(B=_.sibling,B!==null){B.return=_.return,Et=B;break}Et=_.return}}function $9(x){for(;Et!==null;){var _=Et;if(_===x){Et=null;break}var B=_.sibling;if(B!==null){B.return=_.return,Et=B;break}Et=_.return}}function eB(x){for(;Et!==null;){var _=Et;try{switch(_.tag){case 0:case 11:case 15:var B=_.return;try{g0(4,_)}catch(Ke){Ls(_,B,Ke)}break;case 1:var P=_.stateNode;if(typeof P.componentDidMount=="function"){var k=_.return;try{P.componentDidMount()}catch(Ke){Ls(_,k,Ke)}}var q=_.return;try{Tw(_)}catch(Ke){Ls(_,q,Ke)}break;case 5:var fe=_.return;try{Tw(_)}catch(Ke){Ls(_,fe,Ke)}}}catch(Ke){Ls(_,_.return,Ke)}if(_===x){Et=null;break}var Te=_.sibling;if(Te!==null){Te.return=_.return,Et=Te;break}Et=_.return}}var Uv=0,zv=1,kv=2,Nv=3,Gv=4;if(typeof Symbol=="function"&&Symbol.for){var A0=Symbol.for;Uv=A0("selector.component"),zv=A0("selector.has_pseudo_class"),kv=A0("selector.role"),Nv=A0("selector.test_id"),Gv=A0("selector.text")}function Rw(x){var _=ce(x);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(o(364));return _}if(x=be(x),x===null)throw Error(o(362));return x.stateNode.current}function Dw(x,_){switch(_.$$typeof){case Uv:if(x.type===_.value)return!0;break;case zv:e:{_=_.value,x=[x,0];for(var B=0;B<x.length;){var P=x[B++],k=x[B++],q=_[k];if(P.tag!==5||!Z(P)){for(;q!=null&&Dw(P,q);)k++,q=_[k];if(k===_.length){_=!0;break e}else for(P=P.child;P!==null;)x.push(P,k),P=P.sibling}}_=!1}return _;case kv:if(x.tag===5&&ge(x.stateNode,_.value))return!0;break;case Gv:if((x.tag===5||x.tag===6)&&(x=re(x),x!==null&&0<=x.indexOf(_.value)))return!0;break;case Nv:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Lw(x){switch(x.$$typeof){case Uv:return"<"+(M(x.value)||"Unknown")+">";case zv:return":has("+(Lw(x)||"")+")";case kv:return'[role="'+x.value+'"]';case Gv:return'"'+x.value+'"';case Nv:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function tB(x,_){var B=[];x=[x,0];for(var P=0;P<x.length;){var k=x[P++],q=x[P++],fe=_[q];if(k.tag!==5||!Z(k)){for(;fe!=null&&Dw(k,fe);)q++,fe=_[q];if(q===_.length)B.push(k);else for(k=k.child;k!==null;)x.push(k,q),k=k.sibling}}return B}function Fw(x,_){if(!we)throw Error(o(363));x=Rw(x),x=tB(x,_),_=[],x=Array.from(x);for(var B=0;B<x.length;){var P=x[B++];if(P.tag===5)Z(P)||_.push(P.stateNode);else for(P=P.child;P!==null;)x.push(P),P=P.sibling}return _}var gq=Math.ceil,Hv=a.ReactCurrentDispatcher,Ow=a.ReactCurrentOwner,ji=a.ReactCurrentBatchConfig,vn=0,$i=null,er=null,Ur=0,so=0,td=_t(0),cr=0,v0=null,nd=0,Qv=0,Uw=0,y0=null,Rs=null,zw=0,kw=1/0;function id(){kw=Ci()+500}var Vv=!1,Nw=null,Oc=null,Wv=!1,Uc=null,jv=0,x0=0,Gw=null,Xv=-1,Yv=0;function ps(){return vn&6?Ci():Xv!==-1?Xv:Xv=Ci()}function zc(x){return x.mode&1?vn&2&&Ur!==0?Ur&-Ur:ch.transition!==null?(Yv===0&&(x=Bl,Bl<<=1,!(Bl&4194240)&&(Bl=64),Yv=x),Yv):(x=xn,x!==0?x:ye()):1}function Io(x,_,B){if(50<x0)throw x0=0,Gw=null,Error(o(185));var P=qv(x,_);return P===null?null:(qa(P,_,B),(!(vn&2)||P!==$i)&&(P===$i&&(!(vn&2)&&(Qv|=_),cr===4&&kc(P,Ur)),Ds(P,B),_===1&&vn===0&&!(x.mode&1)&&(id(),Ja&&Ps())),P)}function qv(x,_){x.lanes|=_;var B=x.alternate;for(B!==null&&(B.lanes|=_),B=x,x=x.return;x!==null;)x.childLanes|=_,B=x.alternate,B!==null&&(B.childLanes|=_),B=x,x=x.return;return B.tag===3?B.stateNode:null}function Ds(x,_){var B=x.callbackNode;Jm(x,_);var P=oh(x,x===$i?Ur:0);if(P===0)B!==null&&Wf(B),x.callbackNode=null,x.callbackPriority=0;else if(_=P&-P,x.callbackPriority!==_){if(B!=null&&Wf(B),_===1)x.tag===0?i0(iB.bind(null,x)):n0(iB.bind(null,x)),oe?ne(function(){vn===0&&Ps()}):Ll(ah,Ps),B=null;else{switch(Zm(P)){case 1:B=ah;break;case 4:B=fv;break;case 16:B=cs;break;case 536870912:B=e0;break;default:B=cs}B=fB(B,nB.bind(null,x))}x.callbackPriority=_,x.callbackNode=B}}function nB(x,_){if(Xv=-1,Yv=0,vn&6)throw Error(o(327));var B=x.callbackNode;if(yh()&&x.callbackNode!==B)return null;var P=oh(x,x===$i?Ur:0);if(P===0)return null;if(P&30||P&x.expiredLanes||_)_=Kv(x,P);else{_=P;var k=vn;vn|=2;var q=oB();($i!==x||Ur!==_)&&(id(),Ah(x,_));do try{yq();break}catch(Te){sB(x,Te)}while(!0);Xf(),Hv.current=q,vn=k,er!==null?_=0:($i=null,Ur=0,_=cr)}if(_!==0){if(_===2&&(k=Dl(x),k!==0&&(P=k,_=Hw(x,k))),_===1)throw B=v0,Ah(x,0),kc(x,P),Ds(x,Ci()),B;if(_===6)kc(x,P);else{if(k=x.current.alternate,!(P&30)&&!Aq(k)&&(_=Kv(x,P),_===2&&(q=Dl(x),q!==0&&(P=q,_=Hw(x,q))),_===1))throw B=v0,Ah(x,0),kc(x,P),Ds(x,Ci()),B;switch(x.finishedWork=k,x.finishedLanes=P,_){case 0:case 1:throw Error(o(345));case 2:vh(x,Rs);break;case 3:if(kc(x,P),(P&130023424)===P&&(_=zw+500-Ci(),10<_)){if(oh(x,0)!==0)break;if(k=x.suspendedLanes,(k&P)!==P){ps(),x.pingedLanes|=x.suspendedLanes&k;break}x.timeoutHandle=X(vh.bind(null,x,Rs),_);break}vh(x,Rs);break;case 4:if(kc(x,P),(P&4194240)===P)break;for(_=x.eventTimes,k=-1;0<P;){var fe=31-ai(P);q=1<<fe,fe=_[fe],fe>k&&(k=fe),P&=~q}if(P=k,P=Ci()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*gq(P/1960))-P,10<P){x.timeoutHandle=X(vh.bind(null,x,Rs),P);break}vh(x,Rs);break;case 5:vh(x,Rs);break;default:throw Error(o(329))}}}return Ds(x,Ci()),x.callbackNode===B?nB.bind(null,x):null}function Hw(x,_){var B=y0;return x.current.memoizedState.isDehydrated&&(Ah(x,_).flags|=256),x=Kv(x,_),x!==2&&(_=Rs,Rs=B,_!==null&&Qw(_)),x}function Qw(x){Rs===null?Rs=x:Rs.push.apply(Rs,x)}function Aq(x){for(var _=x;;){if(_.flags&16384){var B=_.updateQueue;if(B!==null&&(B=B.stores,B!==null))for(var P=0;P<B.length;P++){var k=B[P],q=k.getSnapshot;k=k.value;try{if(!eo(q(),k))return!1}catch{return!1}}}if(B=_.child,_.subtreeFlags&16384&&B!==null)B.return=_,_=B;else{if(_===x)break;for(;_.sibling===null;){if(_.return===null||_.return===x)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function kc(x,_){for(_&=~Uw,_&=~Qv,x.suspendedLanes|=_,x.pingedLanes&=~_,x=x.expirationTimes;0<_;){var B=31-ai(_),P=1<<B;x[B]=-1,_&=~P}}function iB(x){if(vn&6)throw Error(o(327));yh();var _=oh(x,0);if(!(_&1))return Ds(x,Ci()),null;var B=Kv(x,_);if(x.tag!==0&&B===2){var P=Dl(x);P!==0&&(_=P,B=Hw(x,P))}if(B===1)throw B=v0,Ah(x,0),kc(x,_),Ds(x,Ci()),B;if(B===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=_,vh(x,Rs),Ds(x,Ci()),null}function rB(x){Uc!==null&&Uc.tag===0&&!(vn&6)&&yh();var _=vn;vn|=1;var B=ji.transition,P=xn;try{if(ji.transition=null,xn=1,x)return x()}finally{xn=P,ji.transition=B,vn=_,!(vn&6)&&Ps()}}function Vw(){so=td.current,Ht(td)}function Ah(x,_){x.finishedWork=null,x.finishedLanes=0;var B=x.timeoutHandle;if(B!==ve&&(x.timeoutHandle=ve,se(B)),er!==null)for(B=er.return;B!==null;){var P=B;switch(aw(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&Jn();break;case 3:$f(),Ht(Kt),Ht(On),pw();break;case 5:fw(P);break;case 4:$f();break;case 13:Ht(Mi);break;case 19:Ht(Mi);break;case 10:wr(P.type._context);break;case 22:case 23:Vw()}B=B.return}if($i=x,er=x=Nc(x.current,null),Ur=so=_,cr=0,v0=null,Uw=Qv=nd=0,Rs=y0=null,to!==null){for(_=0;_<to.length;_++)if(B=to[_],P=B.interleaved,P!==null){B.interleaved=null;var k=P.next,q=B.pending;if(q!==null){var fe=q.next;q.next=k,P.next=fe}B.pending=P}to=null}return x}function sB(x,_){do{var B=er;try{if(Xf(),Ev.current=Tv,wv){for(var P=Fi.memoizedState;P!==null;){var k=P.queue;k!==null&&(k.pending=null),P=P.next}wv=!1}if(ed=0,Sr=Yr=Fi=null,c0=!1,u0=0,Ow.current=null,B===null||B.return===null){cr=1,v0=_,er=null;break}e:{var q=x,fe=B.return,Te=B,Ke=_;if(_=Ur,Te.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ut=Ke,Mt=Te,fn=Mt.tag;if(!(Mt.mode&1)&&(fn===0||fn===11||fn===15)){var jt=Mt.alternate;jt?(Mt.updateQueue=jt.updateQueue,Mt.memoizedState=jt.memoizedState,Mt.lanes=jt.lanes):(Mt.updateQueue=null,Mt.memoizedState=null)}var ni=M9(fe);if(ni!==null){ni.flags&=-257,b9(ni,fe,Te,q,_),ni.mode&1&&C9(q,ut,_),_=ni,Ke=ut;var Ot=_.updateQueue;if(Ot===null){var Jr=new Set;Jr.add(Ke),_.updateQueue=Jr}else Ot.add(Ke);break e}else{if(!(_&1)){C9(q,ut,_),Ww();break e}Ke=Error(o(426))}}else if(xi&&Te.mode&1){var Po=M9(fe);if(Po!==null){!(Po.flags&65536)&&(Po.flags|=256),b9(Po,fe,Te,q,_),uw(Ke);break e}}q=Ke,cr!==4&&(cr=2),y0===null?y0=[q]:y0.push(q),Ke=_w(Ke,Te),Te=fe;do{switch(Te.tag){case 3:Te.flags|=65536,_&=-_,Te.lanes|=_;var Ne=w9(Te,Ke,_);W8(Te,Ne);break e;case 1:q=Ke;var Pe=Te.type,Ve=Te.stateNode;if(!(Te.flags&128)&&(typeof Pe.getDerivedStateFromError=="function"||Ve!==null&&typeof Ve.componentDidCatch=="function"&&(Oc===null||!Oc.has(Ve)))){Te.flags|=65536,_&=-_,Te.lanes|=_;var wt=S9(Te,q,_);W8(Te,wt);break e}}Te=Te.return}while(Te!==null)}lB(B)}catch(Ft){_=Ft,er===B&&B!==null&&(er=B=B.return);continue}break}while(!0)}function oB(){var x=Hv.current;return Hv.current=Tv,x===null?Tv:x}function Ww(){(cr===0||cr===3||cr===2)&&(cr=4),$i===null||!(nd&268435455)&&!(Qv&268435455)||kc($i,Ur)}function Kv(x,_){var B=vn;vn|=2;var P=oB();$i===x&&Ur===_||Ah(x,_);do try{vq();break}catch(k){sB(x,k)}while(!0);if(Xf(),vn=B,Hv.current=P,er!==null)throw Error(o(261));return $i=null,Ur=0,cr}function vq(){for(;er!==null;)aB(er)}function yq(){for(;er!==null&&!$m();)aB(er)}function aB(x){var _=hB(x.alternate,x,so);x.memoizedProps=x.pendingProps,_===null?lB(x):er=_,Ow.current=null}function lB(x){var _=x;do{var B=_.alternate;if(x=_.return,_.flags&32768){if(B=hq(B,_),B!==null){B.flags&=32767,er=B;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{cr=6,er=null;return}}else if(B=lq(B,_,so),B!==null){er=B;return}if(_=_.sibling,_!==null){er=_;return}er=_=x}while(_!==null);cr===0&&(cr=5)}function vh(x,_){var B=xn,P=ji.transition;try{ji.transition=null,xn=1,xq(x,_,B)}finally{ji.transition=P,xn=B}return null}function xq(x,_,B){do yh();while(Uc!==null);if(vn&6)throw Error(o(327));var P=x.finishedWork,k=x.finishedLanes;if(P===null)return null;if(x.finishedWork=null,x.finishedLanes=0,P===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var q=P.lanes|P.childLanes;if(Rc(x,q),x===$i&&(er=$i=null,Ur=0),!(P.subtreeFlags&2064)&&!(P.flags&2064)||Wv||(Wv=!0,fB(cs,function(){return yh(),null})),q=(P.flags&15990)!==0,P.subtreeFlags&15990||q){q=ji.transition,ji.transition=null;var fe=xn;xn=1;var Te=vn;vn|=4,Ow.current=null,dq(x,P),pq(x,P),V(x.containerInfo),x.current=P,mq(P),hv(),vn=Te,xn=fe,ji.transition=q}else x.current=P;if(Wv&&(Wv=!1,Uc=x,jv=k),q=x.pendingLanes,q===0&&(Oc=null),t0(P.stateNode),Ds(x,Ci()),_!==null)for(B=x.onRecoverableError,P=0;P<_.length;P++)B(_[P]);if(Vv)throw Vv=!1,x=Nw,Nw=null,x;return jv&1&&x.tag!==0&&yh(),q=x.pendingLanes,q&1?x===Gw?x0++:(x0=0,Gw=x):x0=0,Ps(),null}function yh(){if(Uc!==null){var x=Zm(jv),_=ji.transition,B=xn;try{if(ji.transition=null,xn=16>x?16:x,Uc===null)var P=!1;else{if(x=Uc,Uc=null,jv=0,vn&6)throw Error(o(331));var k=vn;for(vn|=4,Et=x.current;Et!==null;){var q=Et,fe=q.child;if(Et.flags&16){var Te=q.deletions;if(Te!==null){for(var Ke=0;Ke<Te.length;Ke++){var ut=Te[Ke];for(Et=ut;Et!==null;){var Mt=Et;switch(Mt.tag){case 0:case 11:case 15:gh(8,Mt,q)}var fn=Mt.child;if(fn!==null)fn.return=Mt,Et=fn;else for(;Et!==null;){Mt=Et;var jt=Mt.sibling,ni=Mt.return;if(j9(Mt),Mt===ut){Et=null;break}if(jt!==null){jt.return=ni,Et=jt;break}Et=ni}}}var Ot=q.alternate;if(Ot!==null){var Jr=Ot.child;if(Jr!==null){Ot.child=null;do{var Po=Jr.sibling;Jr.sibling=null,Jr=Po}while(Jr!==null)}}Et=q}}if(q.subtreeFlags&2064&&fe!==null)fe.return=q,Et=fe;else e:for(;Et!==null;){if(q=Et,q.flags&2048)switch(q.tag){case 0:case 11:case 15:gh(9,q,q.return)}var Ne=q.sibling;if(Ne!==null){Ne.return=q.return,Et=Ne;break e}Et=q.return}}var Pe=x.current;for(Et=Pe;Et!==null;){fe=Et;var Ve=fe.child;if(fe.subtreeFlags&2064&&Ve!==null)Ve.return=fe,Et=Ve;else e:for(fe=Pe;Et!==null;){if(Te=Et,Te.flags&2048)try{switch(Te.tag){case 0:case 11:case 15:g0(9,Te)}}catch(Ft){Ls(Te,Te.return,Ft)}if(Te===fe){Et=null;break e}var wt=Te.sibling;if(wt!==null){wt.return=Te.return,Et=wt;break e}Et=Te.return}}if(vn=k,Ps(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(lh,x)}catch{}P=!0}return P}finally{xn=B,ji.transition=_}}return!1}function cB(x,_,B){_=_w(B,_),_=w9(x,_,1),Fc(x,_),_=ps(),x=qv(x,1),x!==null&&(qa(x,1,_),Ds(x,_))}function Ls(x,_,B){if(x.tag===3)cB(x,x,B);else for(;_!==null;){if(_.tag===3){cB(_,x,B);break}else if(_.tag===1){var P=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Oc===null||!Oc.has(P))){x=_w(B,x),x=S9(_,x,1),Fc(_,x),x=ps(),_=qv(_,1),_!==null&&(qa(_,1,x),Ds(_,x));break}}_=_.return}}function _q(x,_,B){var P=x.pingCache;P!==null&&P.delete(_),_=ps(),x.pingedLanes|=x.suspendedLanes&B,$i===x&&(Ur&B)===B&&(cr===4||cr===3&&(Ur&130023424)===Ur&&500>Ci()-zw?Ah(x,0):Uw|=B),Ds(x,_)}function uB(x,_){_===0&&(x.mode&1?(_=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):_=1);var B=ps();x=qv(x,_),x!==null&&(qa(x,_,B),Ds(x,B))}function Eq(x){var _=x.memoizedState,B=0;_!==null&&(B=_.retryLane),uB(x,B)}function wq(x,_){var B=0;switch(x.tag){case 13:var P=x.stateNode,k=x.memoizedState;k!==null&&(B=k.retryLane);break;case 19:P=x.stateNode;break;default:throw Error(o(314))}P!==null&&P.delete(_),uB(x,B)}var hB;hB=function(x,_,B){if(x!==null)if(x.memoizedProps!==_.pendingProps||Kt.current)ro=!0;else{if(!(x.lanes&B)&&!(_.flags&128))return ro=!1,uq(x,_,B);ro=!!(x.flags&131072)}else ro=!1,xi&&_.flags&1048576&&J8(_,yv,_.index);switch(_.lanes=0,_.tag){case 2:var P=_.type;x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x=_.pendingProps;var k=yn(_,On.current);Vi(_,B),k=gw(null,_,P,x,k,B);var q=Aw();return _.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,kn(P)?(q=!0,Pn(_)):q=!1,_.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,iw(_),k.updater=Av,_.stateNode=k,k._reactInternals=_,sw(_,P,x,B),_=Sw(null,_,P,!0,q,B)):(_.tag=0,xi&&q&&ow(_),ds(null,_,k,B),_=_.child),_;case 16:P=_.elementType;e:{switch(x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),x=_.pendingProps,k=P._init,P=k(P._payload),_.type=P,k=_.tag=Cq(P),x=hs(P,x),k){case 0:_=ww(null,_,P,x,B);break e;case 1:_=F9(null,_,P,x,B);break e;case 11:_=B9(null,_,P,x,B);break e;case 14:_=P9(null,_,P,hs(P.type,x),B);break e}throw Error(o(306,P,""))}return _;case 0:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:hs(P,k),ww(x,_,P,k,B);case 1:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:hs(P,k),F9(x,_,P,k,B);case 3:e:{if(O9(_),x===null)throw Error(o(387));P=_.pendingProps,q=_.memoizedState,k=q.element,V8(x,_),gv(_,P,null,B);var fe=_.memoizedState;if(P=fe.element,xe&&q.isDehydrated)if(q={element:P,isDehydrated:!1,cache:fe.cache,transitions:fe.transitions},_.updateQueue.baseState=q,_.memoizedState=q,_.flags&256){k=Error(o(423)),_=U9(x,_,P,B,k);break e}else if(P!==k){k=Error(o(424)),_=U9(x,_,P,B,k);break e}else for(xe&&(io=Li(_.stateNode.containerInfo),no=_,xi=!0,pa=null,r0=!1),B=i9(_,null,P,B),_.child=B;B;)B.flags=B.flags&-3|4096,B=B.sibling;else{if(Kf(),P===k){_=kl(x,_,B);break e}ds(x,_,P,B)}_=_.child}return _;case 5:return r9(_),x===null&&cw(_),P=_.type,k=_.pendingProps,q=x!==null?x.memoizedProps:null,fe=k.children,Q(P,k)?fe=null:q!==null&&Q(P,q)&&(_.flags|=32),L9(x,_),ds(x,_,fe,B),_.child;case 6:return x===null&&cw(_),null;case 13:return z9(x,_,B);case 4:return hw(_,_.stateNode.containerInfo),P=_.pendingProps,x===null?_.child=Jf(_,null,P,B):ds(x,_,P,B),_.child;case 11:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:hs(P,k),B9(x,_,P,k,B);case 7:return ds(x,_,_.pendingProps,B),_.child;case 8:return ds(x,_,_.pendingProps.children,B),_.child;case 12:return ds(x,_,_.pendingProps.children,B),_.child;case 10:e:{if(P=_.type._context,k=_.pendingProps,q=_.memoizedProps,fe=k.value,pv(_,P,fe),q!==null)if(eo(q.value,fe)){if(q.children===k.children&&!Kt.current){_=kl(x,_,B);break e}}else for(q=_.child,q!==null&&(q.return=_);q!==null;){var Te=q.dependencies;if(Te!==null){fe=q.child;for(var Ke=Te.firstContext;Ke!==null;){if(Ke.context===P){if(q.tag===1){Ke=Fl(-1,B&-B),Ke.tag=2;var ut=q.updateQueue;if(ut!==null){ut=ut.shared;var Mt=ut.pending;Mt===null?Ke.next=Ke:(Ke.next=Mt.next,Mt.next=Ke),ut.pending=Ke}}q.lanes|=B,Ke=q.alternate,Ke!==null&&(Ke.lanes|=B),fs(q.return,B,_),Te.lanes|=B;break}Ke=Ke.next}}else if(q.tag===10)fe=q.type===_.type?null:q.child;else if(q.tag===18){if(fe=q.return,fe===null)throw Error(o(341));fe.lanes|=B,Te=fe.alternate,Te!==null&&(Te.lanes|=B),fs(fe,B,_),fe=q.sibling}else fe=q.child;if(fe!==null)fe.return=q;else for(fe=q;fe!==null;){if(fe===_){fe=null;break}if(q=fe.sibling,q!==null){q.return=fe.return,fe=q;break}fe=fe.return}q=fe}ds(x,_,k.children,B),_=_.child}return _;case 9:return k=_.type,P=_.pendingProps.children,Vi(_,B),k=Wi(k),P=P(k),_.flags|=1,ds(x,_,P,B),_.child;case 14:return P=_.type,k=hs(P,_.pendingProps),k=hs(P.type,k),P9(x,_,P,k,B);case 15:return R9(x,_,_.type,_.pendingProps,B);case 17:return P=_.type,k=_.pendingProps,k=_.elementType===P?k:hs(P,k),x!==null&&(x.alternate=null,_.alternate=null,_.flags|=2),_.tag=1,kn(P)?(x=!0,Pn(_)):x=!1,Vi(_,B),q8(_,P,k),sw(_,P,k,B),Sw(null,_,P,!0,x,B);case 19:return H9(x,_,B);case 22:return D9(x,_,B)}throw Error(o(156,_.tag))};function fB(x,_){return Ll(x,_)}function Sq(x,_,B,P){this.tag=x,this.key=B,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bo(x,_,B,P){return new Sq(x,_,B,P)}function jw(x){return x=x.prototype,!(!x||!x.isReactComponent)}function Cq(x){if(typeof x=="function")return jw(x)?1:0;if(x!=null){if(x=x.$$typeof,x===A)return 11;if(x===g)return 14}return 2}function Nc(x,_){var B=x.alternate;return B===null?(B=Bo(x.tag,_,x.key,x.mode),B.elementType=x.elementType,B.type=x.type,B.stateNode=x.stateNode,B.alternate=x,x.alternate=B):(B.pendingProps=_,B.type=x.type,B.flags=0,B.subtreeFlags=0,B.deletions=null),B.flags=x.flags&14680064,B.childLanes=x.childLanes,B.lanes=x.lanes,B.child=x.child,B.memoizedProps=x.memoizedProps,B.memoizedState=x.memoizedState,B.updateQueue=x.updateQueue,_=x.dependencies,B.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},B.sibling=x.sibling,B.index=x.index,B.ref=x.ref,B}function Jv(x,_,B,P,k,q){var fe=2;if(P=x,typeof x=="function")jw(x)&&(fe=1);else if(typeof x=="string")fe=5;else e:switch(x){case u:return xh(B.children,k,q,_);case h:fe=8,k|=8;break;case f:return x=Bo(12,B,_,k|2),x.elementType=f,x.lanes=q,x;case y:return x=Bo(13,B,_,k),x.elementType=y,x.lanes=q,x;case p:return x=Bo(19,B,_,k),x.elementType=p,x.lanes=q,x;case E:return Zv(B,k,q,_);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case d:fe=10;break e;case m:fe=9;break e;case A:fe=11;break e;case g:fe=14;break e;case v:fe=16,P=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return _=Bo(fe,B,_,k),_.elementType=x,_.type=P,_.lanes=q,_}function xh(x,_,B,P){return x=Bo(7,x,P,_),x.lanes=B,x}function Zv(x,_,B,P){return x=Bo(22,x,P,_),x.elementType=E,x.lanes=B,x.stateNode={},x}function Xw(x,_,B){return x=Bo(6,x,null,_),x.lanes=B,x}function Yw(x,_,B){return _=Bo(4,x.children!==null?x.children:[],x.key,_),_.lanes=B,_.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},_}function Mq(x,_,B,P,k){this.tag=_,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ve,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vf(0),this.expirationTimes=Vf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vf(0),this.identifierPrefix=P,this.onRecoverableError=k,xe&&(this.mutableSourceEagerHydrationData=null)}function dB(x,_,B,P,k,q,fe,Te,Ke){return x=new Mq(x,_,B,Te,Ke),_===1?(_=1,q===!0&&(_|=8)):_=0,q=Bo(3,null,null,_),x.current=q,q.stateNode=x,q.memoizedState={element:P,isDehydrated:B,cache:null,transitions:null},iw(q),x}function pB(x){if(!x)return $t;x=x._reactInternals;e:{if(T(x)!==x||x.tag!==1)throw Error(o(170));var _=x;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(kn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(o(171))}if(x.tag===1){var B=x.type;if(kn(B))return ti(x,B,_)}return _}function mB(x){var _=x._reactInternals;if(_===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=R(_),x===null?null:x.stateNode}function gB(x,_){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var B=x.retryLane;x.retryLane=B!==0&&B<_?B:_}}function qw(x,_){gB(x,_),(x=x.alternate)&&gB(x,_)}function bq(x){return x=R(x),x===null?null:x.stateNode}function Tq(){return null}return t.attemptContinuousHydration=function(x){if(x.tag===13){var _=ps();Io(x,134217728,_),qw(x,134217728)}},t.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var _=ps(),B=zc(x);Io(x,B,_),qw(x,B)}},t.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var _=x.stateNode;if(_.current.memoizedState.isDehydrated){var B=Rl(_.pendingLanes);B!==0&&(Ka(_,B|1),Ds(_,Ci()),!(vn&6)&&(id(),Ps()))}break;case 13:var P=ps();rB(function(){return Io(x,1,P)}),qw(x,1)}},t.batchedUpdates=function(x,_){var B=vn;vn|=1;try{return x(_)}finally{vn=B,vn===0&&(id(),Ja&&Ps())}},t.createComponentSelector=function(x){return{$$typeof:Uv,value:x}},t.createContainer=function(x,_,B,P,k,q,fe){return dB(x,_,!1,null,B,P,k,q,fe)},t.createHasPseudoClassSelector=function(x){return{$$typeof:zv,value:x}},t.createHydrationContainer=function(x,_,B,P,k,q,fe,Te,Ke){return x=dB(B,P,!0,x,k,q,fe,Te,Ke),x.context=pB(null),B=x.current,P=ps(),k=zc(B),q=Fl(P,k),q.callback=_??null,Fc(B,q),x.current.lanes=k,qa(x,k,P),Ds(x,P),x},t.createPortal=function(x,_,B){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:P==null?null:""+P,children:x,containerInfo:_,implementation:B}},t.createRoleSelector=function(x){return{$$typeof:kv,value:x}},t.createTestNameSelector=function(x){return{$$typeof:Nv,value:x}},t.createTextSelector=function(x){return{$$typeof:Gv,value:x}},t.deferredUpdates=function(x){var _=xn,B=ji.transition;try{return ji.transition=null,xn=16,x()}finally{xn=_,ji.transition=B}},t.discreteUpdates=function(x,_,B,P,k){var q=xn,fe=ji.transition;try{return ji.transition=null,xn=1,x(_,B,P,k)}finally{xn=q,ji.transition=fe,vn===0&&id()}},t.findAllNodes=Fw,t.findBoundingRects=function(x,_){if(!we)throw Error(o(363));_=Fw(x,_),x=[];for(var B=0;B<_.length;B++)x.push(st(_[B]));for(_=x.length-1;0<_;_--){B=x[_];for(var P=B.x,k=P+B.width,q=B.y,fe=q+B.height,Te=_-1;0<=Te;Te--)if(_!==Te){var Ke=x[Te],ut=Ke.x,Mt=ut+Ke.width,fn=Ke.y,jt=fn+Ke.height;if(P>=ut&&q>=fn&&k<=Mt&&fe<=jt){x.splice(_,1);break}else if(P!==ut||B.width!==Ke.width||jt<q||fn>fe){if(!(q!==fn||B.height!==Ke.height||Mt<P||ut>k)){ut>P&&(Ke.width+=ut-P,Ke.x=P),Mt<k&&(Ke.width=k-ut),x.splice(_,1);break}}else{fn>q&&(Ke.height+=fn-q,Ke.y=q),jt<fe&&(Ke.height=fe-fn),x.splice(_,1);break}}}return x},t.findHostInstance=mB,t.findHostInstanceWithNoPortals=function(x){return x=F(x),x=x!==null?L(x):null,x===null?null:x.stateNode},t.findHostInstanceWithWarning=function(x){return mB(x)},t.flushControlled=function(x){var _=vn;vn|=1;var B=ji.transition,P=xn;try{ji.transition=null,xn=1,x()}finally{xn=P,ji.transition=B,vn=_,vn===0&&(id(),Ps())}},t.flushPassiveEffects=yh,t.flushSync=rB,t.focusWithin=function(x,_){if(!we)throw Error(o(363));for(x=Rw(x),_=tB(x,_),_=Array.from(_),x=0;x<_.length;){var B=_[x++];if(!Z(B)){if(B.tag===5&&Fe(B.stateNode))return!0;for(B=B.child;B!==null;)_.push(B),B=B.sibling}}return!1},t.getCurrentUpdatePriority=function(){return xn},t.getFindAllNodesFailureDescription=function(x,_){if(!we)throw Error(o(363));var B=0,P=[];x=[Rw(x),0];for(var k=0;k<x.length;){var q=x[k++],fe=x[k++],Te=_[fe];if((q.tag!==5||!Z(q))&&(Dw(q,Te)&&(P.push(Lw(Te)),fe++,fe>B&&(B=fe)),fe<_.length))for(q=q.child;q!==null;)x.push(q,fe),q=q.sibling}if(B<_.length){for(x=[];B<_.length;B++)x.push(Lw(_[B]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},t.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return K(x.child.stateNode);default:return x.child.stateNode}},t.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:bq,findFiberByHostInstance:x.findFiberByHostInstance||Tq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)x=!0;else{try{lh=_.inject(x),$s=_}catch{}x=!!_.checkDCE}}return x},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(x,_,B,P){if(!we)throw Error(o(363));x=Fw(x,_);var k=Ce(x,B,P).disconnect;return{disconnect:function(){k()}}},t.registerMutableSourceForHydration=function(x,_){var B=_._getVersion;B=B(_._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[_,B]:x.mutableSourceEagerHydrationData.push(_,B)},t.runWithPriority=function(x,_){var B=xn;try{return xn=x,_()}finally{xn=B}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(x,_,B,P){var k=_.current,q=ps(),fe=zc(k);return B=pB(B),_.context===null?_.context=B:_.pendingContext=B,_=Fl(q,fe),_.payload={element:x},P=P===void 0?null:P,P!==null&&(_.callback=P),Fc(k,_),x=Io(k,fe,q),x!==null&&mv(x,k,fe),fe},t};jQ.exports=yue;var xue=jQ.exports;const _ue=Dm(xue);var XQ={exports:{}},YQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,W){var V=O.length;O.push(W);e:for(;0<V;){var U=V-1>>>1,Y=O[U];if(0<r(Y,W))O[U]=W,O[V]=Y,V=U;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var W=O[0],V=O.pop();if(V!==W){O[0]=V;e:for(var U=0,Y=O.length,$=Y>>>1;U<$;){var N=2*(U+1)-1,Q=O[N],j=N+1,X=O[j];if(0>r(Q,V))j<Y&&0>r(X,Q)?(O[U]=X,O[j]=V,U=j):(O[U]=Q,O[N]=V,U=N);else if(j<Y&&0>r(X,V))O[U]=X,O[j]=V,U=j;else break e}}return W}function r(O,W){var V=O.sortIndex-W.sortIndex;return V!==0?V:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,m=!1,A=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=O)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function E(O){if(A=!1,v(O),!m)if(t(l)!==null)m=!0,K(S);else{var W=t(c);W!==null&&J(E,W.startTime-O)}}function S(O,W){m=!1,A&&(A=!1,p(b),b=-1),d=!0;var V=f;try{for(v(W),h=t(l);h!==null&&(!(h.expirationTime>W)||O&&!F());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var Y=U(h.expirationTime<=W);W=n.unstable_now(),typeof Y=="function"?h.callback=Y:h===t(l)&&i(l),v(W)}else i(l);h=t(l)}if(h!==null)var $=!0;else{var N=t(c);N!==null&&J(E,N.startTime-W),$=!1}return $}finally{h=null,f=V,d=!1}}var C=!1,M=null,b=-1,T=5,I=-1;function F(){return!(n.unstable_now()-I<T)}function R(){if(M!==null){var O=n.unstable_now();I=O;var W=!0;try{W=M(!0,O)}finally{W?z():(C=!1,M=null)}}else C=!1}var z;if(typeof g=="function")z=function(){g(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=R,z=function(){H.postMessage(null)}}else z=function(){y(R,0)};function K(O){M=O,C||(C=!0,z())}function J(O,W){b=y(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){m||d||(m=!0,K(S))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var V=f;f=W;try{return O()}finally{f=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=f;f=O;try{return W()}finally{f=V}},n.unstable_scheduleCallback=function(O,W,V){var U=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?U+V:U):V=U,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=V+Y,O={id:u++,callback:W,priorityLevel:O,startTime:V,expirationTime:Y,sortIndex:-1},V>U?(O.sortIndex=V,e(c,O),t(l)===null&&O===t(c)&&(A?(p(b),b=-1):A=!0,J(E,V-U))):(O.sortIndex=Y,e(l,O),m||d||(m=!0,K(S))),O},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(O){var W=f;return function(){var V=f;f=W;try{return O.apply(this,arguments)}finally{f=V}}}})(YQ);XQ.exports=YQ;var vD=XQ.exports;const Eue=n=>typeof n=="object"&&typeof n.then=="function",rf=[];function qQ(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function KQ(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of rf)if(qQ(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=rf.indexOf(r);s!==-1&&rf.splice(s,1)},promise:(Eue(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(rf.push(r),!t)throw r.promise}const Ic=(n,e,t)=>KQ(n,e,!1,t),JQ=(n,e,t)=>void KQ(n,e,!0,t),gE=n=>{if(n===void 0||n.length===0)rf.splice(0,rf.length);else{const e=rf.find(t=>qQ(n,t.keys,t.equal));e&&e.remove()}};var wue=Object.freeze({__proto__:null});const C6={},si=n=>void Object.assign(C6,n);function Sue(n,e){function t(u,{args:h=[],attach:f,...d},m){let A=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const p=d.object;y=mp(p,{type:u,root:m,attach:f,primitive:!0})}else{const p=C6[A];if(!p)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");y=mp(new p(...h),{type:u,root:m,attach:f,memoizedProps:{args:h}})}return y.__r3f.attach===void 0&&(y instanceof It?y.__r3f.attach="geometry":y instanceof Ji&&(y.__r3f.attach="material")),A!=="inject"&&vC(y,d),y}function i(u,h){let f=!1;if(h){var d,m;(d=h.__r3f)!=null&&d.attach?AC(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),f=!0),f||(m=u.__r3f)==null||m.objects.push(h),h.__r3f||mp(h,{}),h.__r3f.parent=u,ob(h),gp(h)}}function r(u,h,f){let d=!1;if(h){var m,A;if((m=h.__r3f)!=null&&m.attach)AC(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const y=u.children.filter(g=>g!==h),p=y.indexOf(f);u.children=[...y.slice(0,p),h,...y.slice(p)],d=!0}d||(A=u.__r3f)==null||A.objects.push(h),h.__r3f||mp(h,{}),h.__r3f.parent=u,ob(h),gp(h)}}function s(u,h,f=!1){u&&[...u].forEach(d=>o(h,d,f))}function o(u,h,f){if(h){var d,m,A;if(h.__r3f&&(h.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==h)),(m=h.__r3f)!=null&&m.attach)wD(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var y;u.remove(h),(y=h.__r3f)!=null&&y.root&&Bue(zx(h),h)}const g=(A=h.__r3f)==null?void 0:A.primitive,v=!g&&(f===void 0?h.dispose!==null:f);if(!g){var p;s((p=h.__r3f)==null?void 0:p.objects,h,v),s(h.children,h,v)}if(delete h.__r3f,v&&h.dispose&&h.type!=="Scene"){const E=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vD.unstable_scheduleCallback(vD.unstable_IdlePriority,E):E()}gp(u)}}function a(u,h,f,d){var m;const A=(m=u.__r3f)==null?void 0:m.parent;if(!A)return;const y=t(h,f,u.__r3f.root);if(u.children){for(const p of u.children)p.__r3f&&i(y,p);u.children=u.children.filter(p=>!p.__r3f)}u.__r3f.objects.forEach(p=>i(y,p)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(A,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),i(A,y),y.raycast&&y.__r3f.eventCount&&zx(y).getState().internal.interaction.push(y),[d,d.alternate].forEach(p=>{p!==null&&(p.stateNode=y,p.ref&&(typeof p.ref=="function"?p.ref(y):p.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:_ue({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,i(f,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,f)=>{if(!h||!f)return;const d=u.getState().scene;d.__r3f&&r(d,h,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,f,d){var m;if(((m=u==null?void 0:u.__r3f)!=null?m:{}).primitive&&d.object&&d.object!==u)return[!0];{const{args:y=[],children:p,...g}=d,{args:v=[],children:E,...S}=f;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((M,b)=>M!==v[b]))return[!0];const C=sV(u,g,S,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[h,f],d,m,A,y){h?a(u,d,A,y):vC(u,f)},commitMount(u,h,f,d){var m;const A=(m=u.__r3f)!=null?m:{};u.raycast&&A.handlers&&A.eventCount&&zx(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>mp(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:f,parent:d}=(h=u.__r3f)!=null?h:{};f&&d&&wD(d,u,f),u.isObject3D&&(u.visible=!1),gp(u)},unhideInstance(u,h){var f;const{attach:d,parent:m}=(f=u.__r3f)!=null?f:{};d&&m&&AC(m,u,d),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),gp(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Hp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ci.fun(performance.now)?performance.now:ci.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ci.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ci.fun(clearTimeout)?clearTimeout:void 0}),applyProps:vC}}var yD,xD;const gC=n=>"colorSpace"in n||"outputColorSpace"in n,ZQ=()=>{var n;return(n=C6.ColorManagement)!=null?n:null},$Q=n=>n&&n.isOrthographicCamera,Cue=n=>n&&n.hasOwnProperty("current"),jm=typeof window<"u"&&((yD=window.document)!=null&&yD.createElement||((xD=window.navigator)==null?void 0:xD.product)==="ReactNative")?w.useLayoutEffect:w.useEffect;function eV(n){const e=w.useRef(n);return jm(()=>void(e.current=n),[n]),e}function Mue({set:n}){return jm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class tV extends w.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}tV.getDerivedStateFromError=()=>({error:!0});const nV="__default",_D=new Map,bue=n=>n&&!!n.memoized&&!!n.changes;function iV(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const pp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function zx(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const ci={obj:n=>n===Object(n)&&!ci.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ci.str(n)||ci.num(n)||ci.boo(n))return n===e;const s=ci.obj(n);if(s&&i==="reference")return n===e;const o=ci.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!ci.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(ci.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function M6(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function rV(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function mp(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function sb(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const ED=/-\d+$/;function AC(n,e,t){if(ci.str(t)){if(ED.test(t)){const s=t.replace(ED,""),{target:o,key:a}=sb(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=sb(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function wD(n,e,t){var i,r;if(ci.str(t)){const{target:s,key:o}=sb(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function sV(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,h=Object.entries(r),f=[];if(c){const m=Object.keys(l);for(let A=0;A<m.length;A++)r.hasOwnProperty(m[A])||h.unshift([m[A],nV+"remove"])}h.forEach(([m,A])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&m==="object"||ci.equ(A,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return f.push([m,A,!0,[]]);let p=[];m.includes("-")&&(p=m.split("-")),f.push([m,A,!1,p]);for(const g in r){const v=r[g];g.startsWith(`${m}-`)&&f.push([g,v,!1,g.split("-")])}});const d={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(d.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(d.attach=u.memoizedProps.attach),{memoized:d,changes:f}}const Tue=typeof process<"u"&&!1;function vC(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=bue(e)?e:sV(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[h,f,d,m]=a[u];if(gC(n)){const g="srgb",v="srgb-linear";h==="encoding"?(h="colorSpace",f=f===3001?g:v):h==="outputEncoding"&&(h="outputColorSpace",f=f===3001?g:v)}let A=n,y=A[h];if(m.length&&(y=m.reduce((p,g)=>p[g],n),!(y&&y.set))){const[p,...g]=m.reverse();A=g.reverse().reduce((v,E)=>v[E],n),h=p}if(f===nV+"remove")if(A.constructor){let p=_D.get(A.constructor);p||(p=new A.constructor,_D.set(A.constructor,p)),f=p[h]}else f=0;if(d&&i)f?i.handlers[h]=f:delete i.handlers[h],i.eventCount=Object.keys(i.handlers).length;else if(y&&y.set&&(y.copy||y instanceof df)){if(Array.isArray(f))y.fromArray?y.fromArray(f):y.set(...f);else if(y.copy&&f&&f.constructor&&(Tue?y.constructor.name===f.constructor.name:y.constructor===f.constructor))y.copy(f);else if(f!==void 0){const p=y instanceof We;!p&&y.setScalar?y.setScalar(f):y instanceof df&&f instanceof df?y.mask=f.mask:y.set(f),!ZQ()&&s&&!s.linear&&p&&y.convertSRGBToLinear()}}else if(A[h]=f,A[h]instanceof In&&A[h].format===Dn&&A[h].type===$n&&s){const p=A[h];gC(p)&&gC(s.gl)?p.colorSpace=s.gl.outputColorSpace:p.encoding=s.gl.outputEncoding}gp(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const u=zx(n).getState().internal,h=u.interaction.indexOf(n);h>-1&&u.interaction.splice(h,1),i.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&ob(n),n}function gp(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function ob(n){n.onUpdate==null||n.onUpdate(n)}function oV(n,e){n.manual||($Q(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function l2(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Iue(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Hp.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Hp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hp.ContinuousEventPriority;default:return Hp.DefaultEventPriority}}function aV(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Bue(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{aV(t.capturedMap,e,i,r)})}function lV(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),h=new Set,f=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let p=0;p<d.length;p++){const g=pp(d[p]);g&&(g.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function m(p){const g=pp(p);if(!g||!g.events.enabled||g.raycaster.camera===null)return[];if(g.raycaster.camera===void 0){var v;g.events.compute==null||g.events.compute(l,g,(v=g.previousRoot)==null?void 0:v.getState()),g.raycaster.camera===void 0&&(g.raycaster.camera=null)}return g.raycaster.camera?g.raycaster.intersectObject(p,!0):[]}let A=d.flatMap(m).sort((p,g)=>{const v=pp(p.object),E=pp(g.object);return!v||!E?p.distance-g.distance:E.events.priority-v.events.priority||p.distance-g.distance}).filter(p=>{const g=l2(p);return h.has(g)?!1:(h.add(g),!0)});u.events.filter&&(A=u.events.filter(A,u));for(const p of A){let g=p.object;for(;g;){var y;(y=g.__r3f)!=null&&y.eventCount&&f.push({...p,eventObject:g}),g=g.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let p of u.internal.capturedMap.get(l.pointerId).values())h.has(l2(p.intersection))||f.push(p.intersection);return f}function r(l,c,u,h){const f=n.getState();if(l.length){const d={stopped:!1};for(const m of l){const A=pp(m.object)||f,{raycaster:y,pointer:p,camera:g,internal:v}=A,E=new D(p.x,p.y,0).unproject(g),S=I=>{var F,R;return(F=(R=v.capturedMap.get(I))==null?void 0:R.has(m.eventObject))!=null?F:!1},C=I=>{const F={intersection:m,target:c.target};v.capturedMap.has(I)?v.capturedMap.get(I).set(m.eventObject,F):v.capturedMap.set(I,new Map([[m.eventObject,F]])),c.target.setPointerCapture(I)},M=I=>{const F=v.capturedMap.get(I);F&&aV(v.capturedMap,m.eventObject,F,I)};let b={};for(let I in c){let F=c[I];typeof F!="function"&&(b[I]=F)}let T={...m,...b,pointer:p,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:E,ray:y.ray,camera:g,stopPropagation(){const I="pointerId"in c&&v.capturedMap.get(c.pointerId);if((!I||I.has(m.eventObject))&&(T.stopped=d.stopped=!0,v.hovered.size&&Array.from(v.hovered.values()).find(F=>F.eventObject===m.eventObject))){const F=l.slice(0,l.indexOf(m));s([...F,m])}},target:{hasPointerCapture:S,setPointerCapture:C,releasePointerCapture:M},currentTarget:{hasPointerCapture:S,setPointerCapture:C,releasePointerCapture:M},nativeEvent:c};if(h(T),d.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const f=u.eventObject.__r3f,d=f==null?void 0:f.handlers;if(c.hovered.delete(l2(u)),f!=null&&f.eventCount){const m={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(m),d.onPointerLeave==null||d.onPointerLeave(m)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:f}=n.getState();f.lastEvent.current=u;const d=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=i(u,d?t:void 0),p=m?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=y.map(v=>v.eventObject)),m&&!y.length&&p<=2&&(o(u,f.interaction),h&&h(u)),d&&s(y);function g(v){const E=v.eventObject,S=E.__r3f,C=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(d){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const M=l2(v),b=f.hovered.get(M);b?b.stopped&&v.stopPropagation():(f.hovered.set(M,v),C.onPointerOver==null||C.onPointerOver(v),C.onPointerEnter==null||C.onPointerEnter(v))}C.onPointerMove==null||C.onPointerMove(v)}else{const M=C[l];M?(!m||f.initialHits.includes(E))&&(o(u,f.interaction.filter(b=>!f.initialHits.includes(b))),M(v)):m&&f.initialHits.includes(E)&&o(u,f.interaction.filter(b=>!f.initialHits.includes(b)))}}r(y,u,p,g)}}return{handlePointer:a}}const Pue=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],cV=n=>!!(n!=null&&n.render),Tf=w.createContext(null),Rue=(n,e)=>{const t=mE((a,l)=>{const c=new D,u=new D,h=new D;function f(p=l().camera,g=u,v=l().size){const{width:E,height:S,top:C,left:M}=v,b=E/S;g instanceof D?h.copy(g):h.set(...g);const T=p.getWorldPosition(c).distanceTo(h);if($Q(p))return{width:E/p.zoom,height:S/p.zoom,top:C,left:M,factor:1,distance:T,aspect:b};{const I=p.fov*Math.PI/180,F=2*Math.tan(I/2)*T,R=F*(E/S);return{width:R,height:F,top:C,left:M,factor:E/R,distance:T,aspect:b}}}let d;const m=p=>a(g=>({performance:{...g.performance,current:p}})),A=new Ee;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(p=1)=>n(l(),p),advance:(p,g)=>e(p,g,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Wm,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const p=l();d&&clearTimeout(d),p.performance.current!==p.performance.min&&m(p.performance.min),d=setTimeout(()=>m(l().performance.max),p.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:p=>a(g=>({...g,events:{...g.events,...p}})),setSize:(p,g,v,E,S)=>{const C=l().camera,M={width:p,height:g,top:E||0,left:S||0,updateStyle:v};a(b=>({size:M,viewport:{...b.viewport,...f(C,u,M)}}))},setDpr:p=>a(g=>{const v=iV(p);return{viewport:{...g.viewport,dpr:v,initialDpr:g.viewport.initialDpr||v}}}),setFrameloop:(p="always")=>{const g=l().clock;g.stop(),g.elapsedTime=0,p!=="never"&&(g.start(),g.elapsedTime=0),a(()=>({frameloop:p}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:w.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(p,g,v)=>{const E=l().internal;return E.priority=E.priority+(g>0?1:0),E.subscribers.push({ref:p,priority:g,store:v}),E.subscribers=E.subscribers.sort((S,C)=>S.priority-C.priority),()=>{const S=l().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(g>0?1:0),S.subscribers=S.subscribers.filter(C=>C.ref!==p))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var f;r=l,s=c.dpr,oV(a,l),u.setPixelRatio(c.dpr);const d=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,d)}a!==o&&(o=a,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function b6(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let c2,uV=new Set,hV=new Set,fV=new Set;const XA=n=>b6(n,uV),AE=n=>b6(n,hV),Due=n=>b6(n,fV);function yC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ap(n,e){switch(n){case"before":return yC(uV,e);case"after":return yC(hV,e);case"tail":return yC(fV,e)}}let xC,_C;function EC(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),xC=e.internal.subscribers,c2=0;c2<xC.length;c2++)_C=xC[c2],_C.ref.current(_C.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Lue(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Ap("before",c),t=!0;for(const h of n.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=EC(c,s))}if(t=!1,Ap("after",c),i===0)return Ap("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var h;if(!c)return n.forEach(f=>a(f.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,f){if(u&&Ap("before",c),h)EC(c,h,f);else for(const d of n.values())EC(c,d.store.getState());u&&Ap("after",c)}return{loop:o,invalidate:a,advance:l}}function Fue(n){const e=w.useRef(null);return jm(()=>void(e.current=n.current.__r3f),[n]),e}function vE(){const n=w.useContext(Tf);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Se(n=t=>t,e){return vE()(n,e)}function yt(n,e=0){const t=vE(),i=t.getState().internal.subscribe,r=eV(n);return jm(()=>i(r,e,t),[e,i,t]),null}function Oue(n){return w.useMemo(()=>M6(n),[n])}const SD=new WeakMap;function dV(n,e){return function(t,...i){let r=SD.get(t);return r||(r=new t,SD.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,M6(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function hi(n,e,t,i){const r=Array.isArray(e)?e:[e],s=Ic(dV(t,i),[n,...r],{equal:ci.equ});return Array.isArray(e)?s:s[0]}hi.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return JQ(dV(t),[n,...i])};hi.clear=function(n,e){const t=Array.isArray(e)?e:[e];return gE([n,...t])};const If=new Map,{invalidate:ab,advance:lb}=Lue(If),{reconciler:Sm,applyProps:sr}=Sue(If,Iue),bd={objects:"shallow",strict:!1},Uue=(n,e)=>{const t=typeof n=="function"?n(e):n;return cV(t)?t:new V3({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function zue(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function T6(n){const e=If.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Rue(ab,lb),o=t||Sm.createContainer(s,Hp.ConcurrentRoot,null,!1,null,"",r,null);e||If.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:h,size:f,scene:d,events:m,onCreated:A,shadows:y=!1,linear:p=!1,flat:g=!1,legacy:v=!1,orthographic:E=!1,frameloop:S="always",dpr:C=[1,2],performance:M,raycaster:b,camera:T,onPointerMissed:I}=u,F=s.getState(),R=F.gl;F.gl||F.set({gl:R=Uue(h,n)});let z=F.raycaster;z||F.set({raycaster:z=new rh});const{params:L,...H}=b||{};if(ci.equ(H,z,bd)||sr(z,{...H}),ci.equ(L,z.params,bd)||sr(z,{params:{...z.params,...L}}),!F.camera||F.camera===c&&!ci.equ(c,T,bd)){c=T;const V=T instanceof th,U=V?T:E?new Qn(0,0,0,0,.1,1e3):new on(75,0,.1,1e3);V||(U.position.z=5,T&&(sr(U,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(U.manual=!0,U.updateProjectionMatrix())),!F.camera&&!(T!=null&&T.rotation)&&U.lookAt(0,0,0)),F.set({camera:U}),z.camera=U}if(!F.scene){let V;d instanceof xo?V=d:(V=new xo,d&&sr(V,d)),F.set({scene:mp(V)})}if(!F.xr){var K;const V=($,N)=>{const Q=s.getState();Q.frameloop!=="never"&&lb($,!0,Q,N)},U=()=>{const $=s.getState();$.gl.xr.enabled=$.gl.xr.isPresenting,$.gl.xr.setAnimationLoop($.gl.xr.isPresenting?V:null),$.gl.xr.isPresenting||ab($)},Y={connect(){const $=s.getState().gl;$.xr.addEventListener("sessionstart",U),$.xr.addEventListener("sessionend",U)},disconnect(){const $=s.getState().gl;$.xr.removeEventListener("sessionstart",U),$.xr.removeEventListener("sessionend",U)}};typeof((K=R.xr)==null?void 0:K.addEventListener)=="function"&&Y.connect(),F.set({xr:Y})}if(R.shadowMap){const V=R.shadowMap.enabled,U=R.shadowMap.type;if(R.shadowMap.enabled=!!y,ci.boo(y))R.shadowMap.type=ug;else if(ci.str(y)){var J;const Y={basic:uH,percentage:B3,soft:ug,variance:Ta};R.shadowMap.type=(J=Y[y])!=null?J:ug}else ci.obj(y)&&Object.assign(R.shadowMap,y);(V!==R.shadowMap.enabled||U!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}const O=ZQ();O&&("enabled"in O?O.enabled=!v:"legacyMode"in O&&(O.legacyMode=v)),l||sr(R,{outputEncoding:p?3e3:3001,toneMapping:g?oa:HI}),F.legacy!==v&&F.set(()=>({legacy:v})),F.linear!==p&&F.set(()=>({linear:p})),F.flat!==g&&F.set(()=>({flat:g})),h&&!ci.fun(h)&&!cV(h)&&!ci.equ(h,R,bd)&&sr(R,h),m&&!F.events.handlers&&F.set({events:m(s)});const W=zue(n,f);return ci.equ(W,F.size,bd)||F.setSize(W.width,W.height,W.updateStyle,W.top,W.left),C&&F.viewport.dpr!==iV(C)&&F.setDpr(C),F.frameloop!==S&&F.setFrameloop(S),F.onPointerMissed||F.set({onPointerMissed:I}),M&&!ci.equ(M,F.performance,bd)&&F.set(V=>({performance:{...V.performance,...M}})),a=A,l=!0,this},render(u){return l||this.configure(),Sm.updateContainer(Ge.jsx(Nue,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){I6(n)}}}function kue(n,e,t){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const i=T6(e);return i.configure(t),i.render(n)}function Nue({store:n,children:e,onCreated:t,rootElement:i}){return jm(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Ge.jsx(Tf.Provider,{value:n,children:e})}function I6(n,e){const t=If.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Sm.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),rV(r),If.delete(n),e&&e(n)}catch{}},500)})}}function Bc(n,e,t){return Ge.jsx(Gue,{children:n,container:e,state:t},e.uuid)}function Gue({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=vE(),[a]=w.useState(()=>new rh),[l]=w.useState(()=>new Ee),c=w.useCallback((h,f)=>{const d={...h};Object.keys(h).forEach(A=>{(Pue.includes(A)||h[A]!==f[A]&&f[A])&&delete d[A]});let m;if(f&&r){const A=f.camera;m=h.viewport.getCurrentViewport(A,new D,r),A!==h.camera&&oV(A,r)}return{...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...f==null?void 0:f.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...m},...s}},[n]),[u]=w.useState(()=>{const h=o.getState();return mE((d,m)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...i},size:{...h.size,...r},...s,set:d,get:m,setEvents:A=>d(y=>({...y,events:{...y.events,...A}}))}))});return w.useEffect(()=>{const h=o.subscribe(f=>u.setState(d=>c(f,d)));return()=>{h()}},[c]),w.useEffect(()=>{u.setState(h=>c(o.getState(),h))},[c]),w.useEffect(()=>()=>{u.destroy()},[]),Ge.jsx(Ge.Fragment,{children:Sm.createPortal(Ge.jsx(Tf.Provider,{value:u,children:e}),u,null)})}Sm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:w.version});const Hue=w.unstable_act;function cb(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}cb.debounce=cb;var Que=cb;const CD=Dm(Que);function Vue(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=w.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=w.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,h=w.useRef(!1);w.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[f,d,m]=w.useMemo(()=>{const g=()=>{if(!l.current.element)return;const{left:v,top:E,width:S,height:C,bottom:M,right:b,x:T,y:I}=l.current.element.getBoundingClientRect(),F={left:v,top:E,width:S,height:C,bottom:M,right:b,x:T,y:I};l.current.element instanceof HTMLElement&&r&&(F.height=l.current.element.offsetHeight,F.width=l.current.element.offsetWidth),Object.freeze(F),h.current&&!Yue(l.current.lastBounds,F)&&a(l.current.lastBounds=F)};return[g,u?CD(g,u):g,c?CD(g,c):g]},[a,r,c,u]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(m),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})))}const p=g=>{!g||g===l.current.element||(A(),l.current.element=g,l.current.scrollContainers=pV(g),y())};return jue(m,!!t),Wue(d),w.useEffect(()=>{A(),y()},[t,m,d]),w.useEffect(()=>A,[]),[p,o,f]}function Wue(n){w.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function jue(n,e){w.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function pV(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...pV(n.parentElement)]}const Xue=["x","y","top","bottom","left","right","width","height"],Yue=(n,e)=>Xue.every(t=>n[t]===e[t]);var que=Object.defineProperty,Kue=Object.defineProperties,Jue=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,Zue=Object.prototype.hasOwnProperty,$ue=Object.prototype.propertyIsEnumerable,bD=(n,e,t)=>e in n?que(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,TD=(n,e)=>{for(var t in e||(e={}))Zue.call(e,t)&&bD(n,t,e[t]);if(MD)for(var t of MD(e))$ue.call(e,t)&&bD(n,t,e[t]);return n},ehe=(n,e)=>Kue(n,Jue(e)),ID,BD;typeof window<"u"&&((ID=window.document)!=null&&ID.createElement||((BD=window.navigator)==null?void 0:BD.product)==="ReactNative")?w.useLayoutEffect:w.useEffect;function mV(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=mV(i,e,t);if(r)return r;i=i.sibling}}function gV(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const PD=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=PD;return}return PD.apply(this,arguments)};const B6=gV(w.createContext(null));class AV extends w.Component{render(){return w.createElement(B6.Provider,{value:this._reactInternals},this.props.children)}}function the(){const n=w.useContext(B6);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=w.useId();return w.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=mV(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function nhe(){const n=the(),[e]=w.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==B6&&!e.has(r)&&e.set(r,w.useContext(gV(r)))}t=t.return}return e}function ihe(){const n=nhe();return w.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>w.createElement(e,null,w.createElement(t.Provider,ehe(TD({},i),{value:n.get(t)}))),e=>w.createElement(AV,TD({},e))),[n])}const wC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function vV(n){const{handlePointer:e}=lV(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(wC).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=wC[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=wC[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const rhe=w.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=vV,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:f,orthographic:d,frameloop:m,dpr:A,performance:y,raycaster:p,camera:g,scene:v,onPointerMissed:E,onCreated:S,...C},M){w.useMemo(()=>si(pE),[]);const b=ihe(),[T,I]=Vue({scroll:!0,debounce:{scroll:50,resize:0},...i}),F=w.useRef(null),R=w.useRef(null);w.useImperativeHandle(M,()=>F.current);const z=eV(E),[L,H]=w.useState(!1),[K,J]=w.useState(!1);if(L)throw L;if(K)throw K;const O=w.useRef(null);jm(()=>{const V=F.current;I.width>0&&I.height>0&&V&&(O.current||(O.current=T6(V)),O.current.configure({gl:s,events:o,shadows:c,linear:u,flat:h,legacy:f,orthographic:d,frameloop:m,dpr:A,performance:y,raycaster:p,camera:g,scene:v,size:I,onPointerMissed:(...U)=>z.current==null?void 0:z.current(...U),onCreated:U=>{U.events.connect==null||U.events.connect(a?Cue(a)?a.current:a:R.current),l&&U.setEvents({compute:(Y,$)=>{const N=Y[l+"X"],Q=Y[l+"Y"];$.pointer.set(N/$.size.width*2-1,-(Q/$.size.height)*2+1),$.raycaster.setFromCamera($.pointer,$.camera)}}),S==null||S(U)}}),O.current.render(Ge.jsx(b,{children:Ge.jsx(tV,{set:J,children:Ge.jsx(w.Suspense,{fallback:Ge.jsx(Mue,{set:H}),children:e})})})))}),w.useEffect(()=>{const V=F.current;if(V)return()=>I6(V)},[]);const W=a?"none":"auto";return Ge.jsx("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...r},...C,children:Ge.jsx("div",{ref:T,style:{width:"100%",height:"100%"},children:Ge.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}),yV=w.forwardRef(function(e,t){return Ge.jsx(AV,{children:Ge.jsx(rhe,{...e,ref:t})})}),she=Object.freeze(Object.defineProperty({__proto__:null,Canvas:yV,ReactThreeFiber:wue,_roots:If,act:Hue,addAfterEffect:AE,addEffect:XA,addTail:Due,advance:lb,applyProps:sr,buildGraph:M6,context:Tf,createEvents:lV,createPortal:Bc,createRoot:T6,dispose:rV,events:vV,extend:si,flushGlobalEffects:Ap,getRootState:pp,invalidate:ab,reconciler:Sm,render:kue,unmountComponentAtNode:I6,useFrame:yt,useGraph:Oue,useInstanceHandle:Fue,useLoader:hi,useStore:vE,useThree:Se},Symbol.toStringTag,{value:"Module"}));var P6=qA(),an=n=>YA(n,P6),R6=qA();an.write=n=>YA(n,R6);var yE=qA();an.onStart=n=>YA(n,yE);var D6=qA();an.onFrame=n=>YA(n,D6);var L6=qA();an.onFinish=n=>YA(n,L6);var Zp=[];an.setTimeout=(n,e)=>{const t=an.now()+e,i=()=>{const s=Zp.findIndex(o=>o.cancel==i);~s&&Zp.splice(s,1),du-=~s?1:0},r={time:t,handler:n,cancel:i};return Zp.splice(xV(t),0,r),du+=1,_V(),r};var xV=n=>~(~Zp.findIndex(e=>e.time>n)||~Zp.length);an.cancel=n=>{yE.delete(n),D6.delete(n),L6.delete(n),P6.delete(n),R6.delete(n)};an.sync=n=>{ub=!0,an.batchedUpdates(n),ub=!1};an.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,an.onStart(t)}return i.handler=n,i.cancel=()=>{yE.delete(t),e=null},i};var F6=typeof window<"u"?window.requestAnimationFrame:()=>{};an.use=n=>F6=n;an.now=typeof performance<"u"?()=>performance.now():Date.now;an.batchedUpdates=n=>n();an.catch=console.error;an.frameLoop="always";an.advance=()=>{an.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):wV()};var fu=-1,du=0,ub=!1;function YA(n,e){ub?(e.delete(n),n(0)):(e.add(n),_V())}function _V(){fu<0&&(fu=0,an.frameLoop!=="demand"&&F6(EV))}function ohe(){fu=-1}function EV(){~fu&&(F6(EV),an.batchedUpdates(wV))}function wV(){const n=fu;fu=an.now();const e=xV(fu);if(e&&(SV(Zp.splice(0,e),t=>t.handler()),du-=e),!du){ohe();return}yE.flush(),P6.flush(n?Math.min(64,fu-n):16.667),D6.flush(),R6.flush(),L6.flush()}function qA(){let n=new Set,e=n;return{add(t){du+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return du-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,du-=e.size,SV(e,i=>i(t)&&n.add(i)),du+=n.size,e=n)}}}function SV(n,e){n.forEach(t=>{try{e(t)}catch(i){an.catch(i)}})}var ahe=Object.defineProperty,lhe=(n,e)=>{for(var t in e)ahe(n,t,{get:e[t],enumerable:!0})},ua={};lhe(ua,{assign:()=>bV,colors:()=>Ru,createStringInterpolator:()=>U6,skipAnimation:()=>MV,to:()=>CV,willAdvance:()=>z6});function hb(){}var che=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),ot={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function nc(n,e){if(ot.arr(n)){if(!ot.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var Zt=(n,e)=>n.forEach(e);function Cc(n,e,t){if(ot.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Qs=n=>ot.und(n)?[]:ot.arr(n)?n:[n];function yg(n,e){if(n.size){const t=Array.from(n);n.clear(),Zt(t,e)}}var V1=(n,...e)=>yg(n,t=>t(...e)),O6=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),U6,CV,Ru=null,MV=!1,z6=hb,bV=n=>{n.to&&(CV=n.to),n.now&&(an.now=n.now),n.colors!==void 0&&(Ru=n.colors),n.skipAnimation!=null&&(MV=n.skipAnimation),n.createStringInterpolator&&(U6=n.createStringInterpolator),n.requestAnimationFrame&&an.use(n.requestAnimationFrame),n.batchedUpdates&&(an.batchedUpdates=n.batchedUpdates),n.willAdvance&&(z6=n.willAdvance),n.frameLoop&&(an.frameLoop=n.frameLoop)},xg=new Set,Ko=[],SC=[],U_=0,KA={get idle(){return!xg.size&&!Ko.length},start(n){U_>n.priority?(xg.add(n),an.onStart(uhe)):(TV(n),an(fb))},advance:fb,sort(n){if(U_)an.onFrame(()=>KA.sort(n));else{const e=Ko.indexOf(n);~e&&(Ko.splice(e,1),IV(n))}},clear(){Ko=[],xg.clear()}};function uhe(){xg.forEach(TV),xg.clear(),an(fb)}function TV(n){Ko.includes(n)||IV(n)}function IV(n){Ko.splice(hhe(Ko,e=>e.priority>n.priority),0,n)}function fb(n){const e=SC;for(let t=0;t<Ko.length;t++){const i=Ko[t];U_=i.priority,i.idle||(z6(i),i.advance(n),i.idle||e.push(i))}return U_=0,SC=Ko,SC.length=0,Ko=e,Ko.length>0}function hhe(n,e){const t=n.findIndex(e);return t<0?n.length:t}var fhe=(n,e,t)=>Math.min(Math.max(t,n),e),dhe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Fa="[-+]?\\d*\\.?\\d+",z_=Fa+"%";function xE(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var phe=new RegExp("rgb"+xE(Fa,Fa,Fa)),mhe=new RegExp("rgba"+xE(Fa,Fa,Fa,Fa)),ghe=new RegExp("hsl"+xE(Fa,z_,z_)),Ahe=new RegExp("hsla"+xE(Fa,z_,z_,Fa)),vhe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yhe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xhe=/^#([0-9a-fA-F]{6})$/,_he=/^#([0-9a-fA-F]{8})$/;function Ehe(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=xhe.exec(n))?parseInt(e[1]+"ff",16)>>>0:Ru&&Ru[n]!==void 0?Ru[n]:(e=phe.exec(n))?(Td(e[1])<<24|Td(e[2])<<16|Td(e[3])<<8|255)>>>0:(e=mhe.exec(n))?(Td(e[1])<<24|Td(e[2])<<16|Td(e[3])<<8|LD(e[4]))>>>0:(e=vhe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=_he.exec(n))?parseInt(e[1],16)>>>0:(e=yhe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=ghe.exec(n))?(RD(DD(e[1]),u2(e[2]),u2(e[3]))|255)>>>0:(e=Ahe.exec(n))?(RD(DD(e[1]),u2(e[2]),u2(e[3]))|LD(e[4]))>>>0:null}function CC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function RD(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=CC(r,i,n+1/3),o=CC(r,i,n),a=CC(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Td(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function DD(n){return(parseFloat(n)%360+360)%360/360}function LD(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function u2(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function FD(n){let e=Ehe(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var Cm=(n,e,t)=>{if(ot.fun(n))return n;if(ot.arr(n))return Cm({range:n,output:e,extrapolate:t});if(ot.str(n.output[0]))return U6(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=She(c,s);return whe(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function whe(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function She(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var Che=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return fhe(0,1,r/n)},k_=1.70158,h2=k_*1.525,OD=k_+1,UD=2*Math.PI/3,zD=2*Math.PI/4.5,f2=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,BV={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>OD*n*n*n-k_*n*n,easeOutBack:n=>1+OD*Math.pow(n-1,3)+k_*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((h2+1)*2*n-h2)/2:(Math.pow(2*n-2,2)*((h2+1)*(n*2-2)+h2)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*UD),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*UD)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*zD))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*zD)/2+1,easeInBounce:n=>1-f2(1-n),easeOutBounce:f2,easeInOutBounce:n=>n<.5?(1-f2(1-2*n))/2:(1+f2(2*n-1))/2,steps:Che},fA=Symbol.for("FluidValue.get"),Mm=Symbol.for("FluidValue.observers"),pl=n=>!!(n&&n[fA]),Vo=n=>n&&n[fA]?n[fA]():n,kD=n=>n[Mm]||null;function Mhe(n,e){n.eventObserved?n.eventObserved(e):n(e)}function N_(n,e){const t=n[Mm];t&&t.forEach(i=>{Mhe(i,e)})}var bhe=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");The(this,e)}},The=(n,e)=>PV(n,fA,e);function JA(n,e){if(n[fA]){let t=n[Mm];t||PV(n,Mm,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function G_(n,e){const t=n[Mm];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Mm]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var PV=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),kx=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ihe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ND=new RegExp(`(${kx.source})(%|[a-z]+)`,"i"),Bhe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,_E=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,RV=n=>{const[e,t]=Phe(n);if(!e||O6())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&_E.test(t))return RV(t);if(t)return t}return n},Phe=n=>{const e=_E.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},MC,Rhe=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,DV=n=>{MC||(MC=Ru?new RegExp(`(${Object.keys(Ru).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Vo(s).replace(_E,RV).replace(Ihe,FD).replace(MC,FD)),t=e.map(s=>s.match(kx).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Cm({...n,output:s}));return s=>{var l;const o=!ND.test(e[0])&&((l=e.find(c=>ND.test(c)))==null?void 0:l.replace(kx,""));let a=0;return e[0].replace(kx,()=>`${r[a++](s)}${o||""}`).replace(Bhe,Rhe)}},k6="react-spring: ",LV=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${k6}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},Dhe=LV(console.warn);function FV(){Dhe(`${k6}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Lhe=LV(console.warn);function Fhe(){Lhe(`${k6}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function EE(n){return ot.str(n)&&(n[0]=="#"||/\d/.test(n)||!O6()&&_E.test(n)||n in(Ru||{}))}var Id,Nx=new WeakMap,Ohe=n=>n.forEach(({target:e,contentRect:t})=>{var i;return(i=Nx.get(e))==null?void 0:i.forEach(r=>r(t))});function Uhe(n,e){Id||typeof ResizeObserver<"u"&&(Id=new ResizeObserver(Ohe));let t=Nx.get(e);return t||(t=new Set,Nx.set(e,t)),t.add(n),Id&&Id.observe(e),()=>{const i=Nx.get(e);i&&(i.delete(n),!i.size&&Id&&Id.unobserve(e))}}var Gx=new Set,N0,zhe=()=>{const n=()=>{Gx.forEach(e=>e({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},khe=n=>(Gx.add(n),N0||(N0=zhe()),()=>{Gx.delete(n),!Gx.size&&N0&&(N0(),N0=void 0)}),OV=(n,{container:e=document.documentElement}={})=>e===document.documentElement?khe(n):Uhe(n,e),Nhe=(n,e,t)=>e-n===0?1:(t-n)/(e-n),Ghe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},Hhe=class{constructor(n,e){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=t=>{const i=this.info[t],{length:r,position:s}=Ghe[t];i.current=this.container[`scroll${s}`],i.scrollLength=this.container[`scroll${r}`]-this.container[`client${r}`],i.progress=Nhe(0,i.scrollLength,i.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=n,this.container=e,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},G0=new WeakMap,GD=new WeakMap,bC=new WeakMap,HD=n=>n===document.documentElement?window:n,Qhe=(n,{container:e=document.documentElement}={})=>{let t=bC.get(e);t||(t=new Set,bC.set(e,t));const i=new Hhe(n,e);if(t.add(i),!G0.has(e)){const s=()=>(t==null||t.forEach(a=>a.advance()),!0);G0.set(e,s);const o=HD(e);window.addEventListener("resize",s,{passive:!0}),e!==document.documentElement&&GD.set(e,OV(s,{container:e})),o.addEventListener("scroll",s,{passive:!0})}const r=G0.get(e);return an(r),()=>{var a;an.cancel(r);const s=bC.get(e);if(!s||(s.delete(i),s.size))return;const o=G0.get(e);G0.delete(e),o&&(HD(e).removeEventListener("scroll",o),window.removeEventListener("resize",o),(a=GD.get(e))==null||a())}};function Vhe(n){const e=w.useRef(null);return e.current===null&&(e.current=n()),e.current}var Vs=O6()?w.useEffect:w.useLayoutEffect,Whe=()=>{const n=w.useRef(!1);return Vs(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function N6(){const n=w.useState()[1],e=Whe();return()=>{e.current&&n(Math.random())}}function jhe(n,e){const[t]=w.useState(()=>({inputs:e,result:n()})),i=w.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Xhe(e,s.inputs)||(s={inputs:e,result:n()}):s=t,w.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function Xhe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var wE=n=>w.useEffect(n,Yhe),Yhe=[];function db(n){const e=w.useRef();return w.useEffect(()=>{e.current=n}),e.current}var qhe=()=>{const[n,e]=w.useState(null);return Vs(()=>{const t=window.matchMedia("(prefers-reduced-motion)"),i=r=>{e(r.matches),bV({skipAnimation:r.matches})};return i(t),t.addEventListener?t.addEventListener("change",i):t.addListener(i),()=>{t.removeEventListener?t.removeEventListener("change",i):t.removeListener(i)}},[]),n},dA=Symbol.for("Animated:node"),Khe=n=>!!n&&n[dA]===n,fl=n=>n&&n[dA],G6=(n,e)=>che(n,dA,e),SE=n=>n&&n[dA]&&n[dA].getPayload(),UV=class{constructor(){G6(this,this)}getPayload(){return this.payload||[]}},ZA=class extends UV{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,ot.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new ZA(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return ot.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,ot.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},pA=class extends ZA{constructor(e){super(0),this._string=null,this._toString=Cm({output:[e,e]})}static create(e){return new pA(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(ot.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Cm({output:[this.getValue(),e]})),this._value=0,super.reset()}},H_={dependencies:null},H6=class extends UV{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Cc(this.source,(i,r)=>{Khe(i)?t[r]=i.getValue(e):pl(i)?t[r]=Vo(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Zt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Cc(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){H_.dependencies&&pl(e)&&H_.dependencies.add(e);const t=SE(e);t&&Zt(t,i=>this.add(i))}},zV=class extends H6{constructor(e){super(e)}static create(e){return new zV(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(Jhe)),!0)}};function Jhe(n){return(EE(n)?pA:ZA).create(n)}function pb(n){const e=fl(n);return e?e.constructor:ot.arr(n)?zV:EE(n)?pA:ZA}var QD=(n,e)=>{const t=!ot.fun(n)||n.prototype&&n.prototype.isReactComponent;return w.forwardRef((i,r)=>{const s=w.useRef(null),o=t&&w.useCallback(m=>{s.current=efe(r,m)},[r]),[a,l]=$he(i,e),c=N6(),u=()=>{const m=s.current;if(t&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},h=new Zhe(u,l),f=w.useRef();Vs(()=>(f.current=h,Zt(l,m=>JA(m,h)),()=>{f.current&&(Zt(f.current.deps,m=>G_(m,f.current)),an.cancel(f.current.update))})),w.useEffect(u,[]),wE(()=>()=>{const m=f.current;Zt(m.deps,A=>G_(A,m))});const d=e.getComponentProps(a.getValue());return w.createElement(n,{...d,ref:o})})},Zhe=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&an.write(this.update)}};function $he(n,e){const t=new Set;return H_.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new H6(n),H_.dependencies=null,[n,t]}function efe(n,e){return n&&(ot.fun(n)?n(e):n.current=e),e}var VD=Symbol.for("AnimatedComponent"),tfe=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new H6(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=WD(o)||"Anonymous";return ot.str(o)?o=s[o]||(s[o]=QD(o,r)):o=o[VD]||(o[VD]=QD(o,r)),o.displayName=`Animated(${a})`,o};return Cc(n,(o,a)=>{ot.arr(n)&&(a=WD(o)),s[a]=s(o)}),{animated:s}},WD=n=>ot.str(n)?n:n&&ot.str(n.displayName)?n.displayName:ot.fun(n)&&n.name||null,nfe=class{};function xs(n,...e){return ot.fun(n)?n(...e):n}var _g=(n,e)=>n===!0||!!(e&&n&&(ot.fun(n)?n(e):Qs(n).includes(e))),kV=(n,e)=>ot.obj(n)?e&&n[e]:n,NV=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,ife=n=>n,CE=(n,e=ife)=>{let t=rfe;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);ot.und(s)||(i[r]=s)}return i},rfe=["config","onProps","onStart","onChange","onPause","onResume","onRest"],sfe={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ofe(n){const e={};let t=0;if(Cc(n,(i,r)=>{sfe[r]||(e[r]=i,t++)}),t)return e}function ME(n){const e=ofe(n);if(e){const t={to:e};return Cc(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function mA(n){return n=Vo(n),ot.arr(n)?n.map(mA):EE(n)?ua.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function GV(n){for(const e in n)return!0;return!1}function mb(n){return ot.fun(n)||ot.arr(n)&&ot.obj(n[0])}function gb(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function Q6(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}function afe(n,e,t=1e3){Vs(()=>{if(e){let i=0;Zt(n,(r,s)=>{const o=r.current;if(o.length){let a=t*e[s];isNaN(a)?a=i:i=a,Zt(o,l=>{Zt(l.queue,c=>{const u=c.delay;c.delay=h=>a+xs(u||0,h)})}),r.start()}})}else{let i=Promise.resolve();Zt(n,r=>{const s=r.current;if(s.length){const o=s.map(a=>{const l=a.queue;return a.queue=[],l});i=i.then(()=>(Zt(s,(a,l)=>Zt(o[l]||[],c=>a.queue.push(c))),Promise.all(r.start())))}})}})}var HV={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Ab={...HV.default,mass:1,damping:1,easing:BV.linear,clamp:!1},lfe=class{constructor(){this.velocity=0,Object.assign(this,Ab)}};function cfe(n,e,t){t&&(t={...t},jD(t,e),e={...t,...e}),jD(n,e),Object.assign(n,e);for(const o in Ab)n[o]==null&&(n[o]=Ab[o]);let{frequency:i,damping:r}=n;const{mass:s}=n;return ot.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function jD(n,e){if(!ot.und(e.decay))n.duration=void 0;else{const t=!ot.und(e.tension)||!ot.und(e.friction);(t||!ot.und(e.frequency)||!ot.und(e.damping)||!ot.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var XD=[],ufe=class{constructor(){this.changed=!1,this.values=XD,this.toValues=null,this.fromValues=XD,this.config=new lfe,this.immediate=!1}};function QV(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=_g(t.cancel??(i==null?void 0:i.cancel),e);if(u)d();else{ot.und(t.pause)||(r.paused=_g(t.pause,e));let m=i==null?void 0:i.pause;m!==!0&&(m=r.paused||_g(m,e)),l=xs(t.delay||0,e),m?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function h(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-an.now()}function f(){l>0&&!ua.skipAnimation?(r.delayed=!0,c=an.setTimeout(d,l),r.pauseQueue.add(h),r.timeouts.add(c)):d()}function d(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(h),r.timeouts.delete(c),n<=(r.cancelId||0)&&(u=!0);try{s.start({...t,callId:n,cancel:u},o)}catch(m){a(m)}}})}var V6=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?$p(n.get()):e.every(t=>t.noop)?VV(n.get()):Ra(n.get(),e.every(t=>t.finished)),VV=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Ra=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),$p=n=>({value:n,cancelled:!0,finished:!1});function WV(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=CE(e,(y,p)=>p==="onRest"?void 0:y);let u,h;const f=new Promise((y,p)=>(u=y,h=p)),d=y=>{const p=r<=(t.cancelId||0)&&$p(i)||r!==t.asyncId&&Ra(i,!1);if(p)throw y.result=p,h(y),y},m=(y,p)=>{const g=new vb,v=new YD;return(async()=>{if(ua.skipAnimation)throw gA(t),v.result=Ra(i,!1),h(v),v;d(g);const E=ot.obj(y)?{...y}:{...p,to:y};E.parentId=r,Cc(c,(C,M)=>{ot.und(E[M])&&(E[M]=C)});const S=await i.start(E);return d(g),t.paused&&await new Promise(C=>{t.resumeQueue.add(C)}),S})()};let A;if(ua.skipAnimation)return gA(t),Ra(i,!1);try{let y;ot.arr(n)?y=(async p=>{for(const g of p)await m(g)})(n):y=Promise.resolve(n(m,i.stop.bind(i))),await Promise.all([y.then(u),f]),A=Ra(i.get(),!0,!1)}catch(y){if(y instanceof vb)A=y.result;else if(y instanceof YD)A=y.result;else throw y}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return ot.fun(o)&&an.batchedUpdates(()=>{o(A,i,i.item)}),A})()}function gA(n,e){yg(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var vb=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},YD=class extends Error{constructor(){super("SkipAnimationSignal")}},yb=n=>n instanceof bE,hfe=1,bE=class extends bhe{constructor(){super(...arguments),this.id=hfe++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=fl(this);return e&&e.getValue()}to(...e){return ua.to(this,e)}interpolate(...e){return FV(),ua.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){N_(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||KA.sort(this),N_(this,{type:"priority",parent:this,priority:e})}},Bf=Symbol.for("SpringPhase"),jV=1,xb=2,_b=4,TC=n=>(n[Bf]&jV)>0,Yc=n=>(n[Bf]&xb)>0,H0=n=>(n[Bf]&_b)>0,qD=(n,e)=>e?n[Bf]|=xb|jV:n[Bf]&=~xb,KD=(n,e)=>e?n[Bf]|=_b:n[Bf]&=~_b,W6=class extends bE{constructor(e,t){if(super(),this.animation=new ufe,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ot.und(e)||!ot.und(t)){const i=ot.obj(e)?{...e}:{...t,from:e};ot.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Yc(this)||this._state.asyncTo)||H0(this)}get goal(){return Vo(this.animation.to)}get velocity(){const e=fl(this);return e instanceof ZA?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return TC(this)}get isAnimating(){return Yc(this)}get isPaused(){return H0(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{toValues:s}=r;const{config:o}=r,a=SE(r.to);!a&&pl(r.to)&&(s=Qs(Vo(r.to))),r.values.forEach((u,h)=>{if(u.done)return;const f=u.constructor==pA?1:a?a[h].lastPosition:s[h];let d=r.immediate,m=f;if(!d){if(m=u.lastPosition,o.tension<=0){u.done=!0;return}let A=u.elapsedTime+=e;const y=r.fromValues[h],p=u.v0!=null?u.v0:u.v0=ot.arr(o.velocity)?o.velocity[h]:o.velocity;let g;const v=o.precision||(y==f?.005:Math.min(1,Math.abs(f-y)*.001));if(ot.und(o.duration))if(o.decay){const E=o.decay===!0?.998:o.decay,S=Math.exp(-(1-E)*A);m=y+p/(1-E)*(1-S),d=Math.abs(u.lastPosition-m)<=v,g=p*S}else{g=u.lastVelocity==null?p:u.lastVelocity;const E=o.restVelocity||v/10,S=o.clamp?0:o.bounce,C=!ot.und(S),M=y==f?u.v0>0:y<f;let b,T=!1;const I=1,F=Math.ceil(e/I);for(let R=0;R<F&&(b=Math.abs(g)>E,!(!b&&(d=Math.abs(f-m)<=v,d)));++R){C&&(T=m==f||m>f==M,T&&(g=-g*S,m=f));const z=-o.tension*1e-6*(m-f),L=-o.friction*.001*g,H=(z+L)/o.mass;g=g+H*I,m=m+g*I}}else{let E=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,A=u.elapsedTime+=e)),E=(o.progress||0)+A/this._memoizedDuration,E=E>1?1:E<0?0:E,u.durationProgress=E),m=y+o.easing(E)*(f-y),g=(m-u.lastPosition)/e,d=E==1}u.lastVelocity=g,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[h].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(m,o.round)&&(i=!0)});const l=fl(this),c=l.getValue();if(t){const u=Vo(r.to);(c!==u||i)&&!o.decay?(l.setValue(u),this._onChange(u)):i&&o.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return an.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Yc(this)){const{to:e,config:t}=this.animation;an.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return ot.und(e)?(i=this.queue||[],this.queue=[]):i=[ot.obj(e)?e:{...t,to:e}],Promise.all(i.map(r=>this._update(r))).then(r=>V6(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),gA(this._state,e&&this._lastCallId),an.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=ot.obj(i)?i[t]:i,(i==null||mb(i))&&(i=void 0),r=ot.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return TC(this)||(e.reverse&&([i,r]=[r,i]),r=Vo(r),ot.und(r)?fl(this)||this._set(i):this._set(r)),s}_update({...e},t){const{key:i,defaultProps:r}=this;e.default&&Object.assign(r,CE(e,(a,l)=>/^on/.test(l)?kV(a,i):a)),ZD(this,e,"onProps"),V0(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return QV(++this._lastCallId,{key:i,props:e,defaultProps:r,state:o,actions:{pause:()=>{H0(this)||(KD(this,!0),V1(o.pauseQueue),V0(this,"onPause",Ra(this,Q0(this,this.animation.to)),this))},resume:()=>{H0(this)&&(KD(this,!1),Yc(this)&&this._resume(),V1(o.resumeQueue),V0(this,"onResume",Ra(this,Q0(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(e.loop&&a.finished&&!(t&&a.noop)){const l=XV(e);if(l)return this._update(l,!0)}return a})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i($p(this));const r=!ot.und(e.to),s=!ot.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i($p(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:h=c,from:f=u}=e;s&&!r&&(!t.default||ot.und(h))&&(h=f),t.reverse&&([h,f]=[f,h]);const d=!nc(f,u);d&&(l.from=f),f=Vo(f);const m=!nc(h,c);m&&this._focus(h);const A=mb(t.to),{config:y}=l,{decay:p,velocity:g}=y;(r||s)&&(y.velocity=0),t.config&&!A&&cfe(y,xs(t.config,o),t.config!==a.config?xs(a.config,o):void 0);let v=fl(this);if(!v||ot.und(h))return i(Ra(this,!0));const E=ot.und(t.reset)?s&&!t.default:!ot.und(f)&&_g(t.reset,o),S=E?f:this.get(),C=mA(h),M=ot.num(C)||ot.arr(C)||EE(C),b=!A&&(!M||_g(a.immediate||t.immediate,o));if(m){const R=pb(h);if(R!==v.constructor)if(b)v=this._set(C);else throw Error(`Cannot animate between ${v.constructor.name} and ${R.name}, as the "to" prop suggests`)}const T=v.constructor;let I=pl(h),F=!1;if(!I){const R=E||!TC(this)&&d;(m||R)&&(F=nc(mA(S),C),I=!F),(!nc(l.immediate,b)&&!b||!nc(y.decay,p)||!nc(y.velocity,g))&&(I=!0)}if(F&&Yc(this)&&(l.changed&&!E?I=!0:I||this._stop(c)),!A&&((I||pl(c))&&(l.values=v.getPayload(),l.toValues=pl(h)?null:T==pA?[1]:Qs(C)),l.immediate!=b&&(l.immediate=b,!b&&!E&&this._set(c)),I)){const{onRest:R}=l;Zt(dfe,L=>ZD(this,t,L));const z=Ra(this,Q0(this,c));V1(this._pendingCalls,z),this._pendingCalls.add(i),l.changed&&an.batchedUpdates(()=>{var L;l.changed=!E,R==null||R(z,this),E?xs(a.onRest,z):(L=l.onStart)==null||L.call(l,z,this)})}E&&this._set(S),A?i(WV(t.to,t,this._state,this)):I?this._start():Yc(this)&&!m?this._pendingCalls.add(i):i(VV(S))}_focus(e){const t=this.animation;e!==t.to&&(kD(this)&&this._detach(),t.to=e,kD(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;pl(t)&&(JA(t,this),yb(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;pl(e)&&G_(e,this)}_set(e,t=!0){const i=Vo(e);if(!ot.und(i)){const r=fl(this);if(!r||!nc(i,r.getValue())){const s=pb(i);!r||r.constructor!=s?G6(this,s.create(i)):r.setValue(i),r&&an.batchedUpdates(()=>{this._onChange(i,t)})}}return fl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,V0(this,"onStart",Ra(this,Q0(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),xs(this.animation.onChange,e,this)),xs(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;fl(this).reset(Vo(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Yc(this)||(qD(this,!0),H0(this)||this._resume())}_resume(){ua.skipAnimation?this.finish():KA.start(this)}_stop(e,t){if(Yc(this)){qD(this,!1);const i=this.animation;Zt(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),N_(this,{type:"idle",parent:this});const r=t?$p(this.get()):Ra(this.get(),Q0(this,e??i.to));V1(this._pendingCalls,r),i.changed&&(i.changed=!1,V0(this,"onRest",r,this))}}};function Q0(n,e){const t=mA(e),i=mA(n.get());return nc(i,t)}function XV(n,e=n.loop,t=n.to){const i=xs(e);if(i){const r=i!==!0&&ME(i),s=(r||n).reverse,o=!r||r.reset;return AA({...n,loop:e,default:!1,pause:void 0,to:!s||mb(t)?t:void 0,from:o?n.from:void 0,reset:o,...r})}}function AA(n){const{to:e,from:t}=n=ME(n),i=new Set;return ot.obj(e)&&JD(e,i),ot.obj(t)&&JD(t,i),n.keys=i.size?Array.from(i):null,n}function ffe(n){const e=AA(n);return ot.und(e.default)&&(e.default=CE(e)),e}function JD(n,e){Cc(n,(t,i)=>t!=null&&e.add(i))}var dfe=["onStart","onRest","onChange","onPause","onResume"];function ZD(n,e,t){n.animation[t]=e[t]!==NV(e,t)?kV(e[t],n.key):void 0}function V0(n,e,...t){var i,r,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(o=(s=n.defaultProps)[e])==null||o.call(s,...t)}var pfe=["onStart","onChange","onRest"],mfe=1,j6=class{constructor(e,t){this.id=mfe++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];ot.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(AA(e)),this}start(e){let{queue:t}=this;return e?t=Qs(e).map(AA):this.queue=[],this._flush?this._flush(this,t):(ZV(this,t),Eb(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;Zt(Qs(t),r=>i[r].stop(!!e))}else gA(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(ot.und(e))this.start({pause:!0});else{const t=this.springs;Zt(Qs(e),i=>t[i].pause())}return this}resume(e){if(ot.und(e))this.start({pause:!1});else{const t=this.springs;Zt(Qs(e),i=>t[i].resume())}return this}each(e){Cc(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,yg(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&yg(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,yg(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;an.onFrame(this._onFrame)}};function Eb(n,e){return Promise.all(e.map(t=>YV(n,t))).then(t=>V6(n,t))}async function YV(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=ot.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=ot.arr(r)||ot.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Zt(pfe,A=>{const y=e[A];if(ot.fun(y)){const p=n._events[A];e[A]=({finished:g,cancelled:v})=>{const E=p.get(y);E?(g||(E.finished=!1),v&&(E.cancelled=!0)):p.set(y,{value:null,finished:g||!1,cancelled:v||!1})},c&&(c[A]=e[A])}});const h=n._state;e.pause===!h.paused?(h.paused=e.pause,V1(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const f=(i||Object.keys(n.springs)).map(A=>n.springs[A].start(e)),d=e.cancel===!0||NV(e,"cancel")===!0;(u||d&&h.asyncId)&&f.push(QV(++n._lastAsyncId,{props:e,state:h,actions:{pause:hb,resume:hb,start(A,y){d?(gA(h,n._lastAsyncId),y($p(n))):(A.onRest=a,y(WV(u,A,h,n)))}}})),h.paused&&await new Promise(A=>{h.resumeQueue.add(A)});const m=V6(n,await Promise.all(f));if(o&&m.finished&&!(t&&m.noop)){const A=XV(e,o,r);if(A)return ZV(n,[A]),YV(n,A,!0)}return l&&an.batchedUpdates(()=>l(m,n,n.item)),m}function wb(n,e){const t={...n.springs};return e&&Zt(Qs(e),i=>{ot.und(i.keys)&&(i=AA(i)),ot.obj(i.to)||(i={...i,to:void 0}),JV(t,i,r=>KV(r))}),qV(n,t),t}function qV(n,e){Cc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,JA(t,n))})}function KV(n,e){const t=new W6;return t.key=n,e&&JA(t,e),t}function JV(n,e,t){e.keys&&Zt(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function ZV(n,e){Zt(e,t=>{JV(n.springs,t,i=>KV(i,n))})}var Xm=({children:n,...e})=>{const t=w.useContext(Q_),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=jhe(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Q_;return w.createElement(s,{value:e},n)},Q_=gfe(Xm,{});Xm.Provider=Q_.Provider;Xm.Consumer=Q_.Consumer;function gfe(n,e){return Object.assign(n,w.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var TE=()=>{const n=[],e=function(i){Fhe();const r=[];return Zt(n,(s,o)=>{if(ot.und(i))r.push(s.start());else{const a=t(i,s,o);a&&r.push(s.start(a))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return Zt(n,i=>i.pause(...arguments)),this},e.resume=function(){return Zt(n,i=>i.resume(...arguments)),this},e.set=function(i){Zt(n,(r,s)=>{const o=ot.fun(i)?i(s,r):i;o&&r.set(o)})},e.start=function(i){const r=[];return Zt(n,(s,o)=>{if(ot.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Zt(n,i=>i.stop(...arguments)),this},e.update=function(i){return Zt(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return ot.fun(i)?i(s,r):i};return e._getProps=t,e};function X6(n,e,t){const i=ot.fun(e)&&e;i&&!t&&(t=[]);const r=w.useMemo(()=>i||arguments.length==3?TE():void 0,[]),s=w.useRef(0),o=N6(),a=w.useMemo(()=>({ctrls:[],queue:[],flush(p,g){const v=wb(p,g);return s.current>0&&!a.queue.length&&!Object.keys(v).some(S=>!p.springs[S])?Eb(p,g):new Promise(S=>{qV(p,v),a.queue.push(()=>{S(Eb(p,g))}),o()})}}),[]),l=w.useRef([...a.ctrls]),c=[],u=db(n)||0;w.useMemo(()=>{Zt(l.current.slice(n,u),p=>{gb(p,r),p.stop(!0)}),l.current.length=n,h(u,n)},[n]),w.useMemo(()=>{h(0,Math.min(u,n))},t);function h(p,g){for(let v=p;v<g;v++){const E=l.current[v]||(l.current[v]=new j6(null,a.flush)),S=i?i(v,E):e[v];S&&(c[v]=ffe(S))}}const f=l.current.map((p,g)=>wb(p,c[g])),d=w.useContext(Xm),m=db(d),A=d!==m&&GV(d);Vs(()=>{s.current++,a.ctrls=l.current;const{queue:p}=a;p.length&&(a.queue=[],Zt(p,g=>g())),Zt(l.current,(g,v)=>{r==null||r.add(g),A&&g.start({default:d});const E=c[v];E&&(Q6(g,E.ref),g.ref?g.queue.push(E):g.start(E))})}),wE(()=>()=>{Zt(a.ctrls,p=>p.stop(!0))});const y=f.map(p=>({...p}));return r?[y,r]:y}function Pf(n,e){const t=ot.fun(n),[[i],r]=X6(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}var Afe=()=>TE(),vfe=()=>w.useState(Afe)[0],yfe=(n,e)=>{const t=Vhe(()=>new W6(n,e));return wE(()=>()=>{t.stop()}),t};function $V(n,e,t){const i=ot.fun(e)&&e;i&&!t&&(t=[]);let r=!0,s;const o=X6(n,(a,l)=>{const c=i?i(a,l):e;return s=c.ref,r=r&&c.reverse,c},t||[{}]);if(Vs(()=>{Zt(o[1].current,(a,l)=>{const c=o[1].current[l+(r?1:-1)];if(Q6(a,s),a.ref){c&&a.update({to:c.springs});return}c?a.start({to:c.springs}):a.start()})},t),i||arguments.length==3){const a=s??o[1];return a._getProps=(l,c,u)=>{const h=ot.fun(l)?l(u,c):l;if(h){const f=a.current[u+(h.reverse?1:-1)];return f&&(h.to=f.springs),h}},o}return o[0]}function eW(n,e,t){const i=ot.fun(e)&&e,{reset:r,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:h}=i?i():e,f=w.useMemo(()=>i||arguments.length==3?TE():void 0,[]),d=Qs(n),m=[],A=w.useRef(null),y=r?null:A.current;Vs(()=>{A.current=m}),wE(()=>(Zt(m,L=>{f==null||f.add(L.ctrl),L.ctrl.ref=f}),()=>{Zt(A.current,L=>{L.expired&&clearTimeout(L.expirationId),gb(L.ctrl,f),L.ctrl.stop(!0)})}));const p=_fe(d,i?i():e,y),g=r&&A.current||[];Vs(()=>Zt(g,({ctrl:L,item:H,key:K})=>{gb(L,f),xs(c,H,K)}));const v=[];if(y&&Zt(y,(L,H)=>{L.expired?(clearTimeout(L.expirationId),g.push(L)):(H=v[H]=p.indexOf(L.key),~H&&(m[H]=L))}),Zt(d,(L,H)=>{m[H]||(m[H]={key:p[H],item:L,phase:"mount",ctrl:new j6},m[H].ctrl.item=L)}),v.length){let L=-1;const{leave:H}=i?i():e;Zt(v,(K,J)=>{const O=y[J];~K?(L=m.indexOf(O),m[L]={...O,item:d[K]}):H&&m.splice(++L,0,O)})}ot.fun(s)&&m.sort((L,H)=>s(L.item,H.item));let E=-o;const S=N6(),C=CE(e),M=new Map,b=w.useRef(new Map),T=w.useRef(!1);Zt(m,(L,H)=>{const K=L.key,J=L.phase,O=i?i():e;let W,V;const U=xs(O.delay||0,K);if(J=="mount")W=O.enter,V="enter";else{const Q=p.indexOf(K)<0;if(J!="leave")if(Q)W=O.leave,V="leave";else if(W=O.update)V="update";else return;else if(!Q)W=O.enter,V="enter";else return}if(W=xs(W,L.item,H),W=ot.obj(W)?ME(W):{to:W},!W.config){const Q=h||C.config;W.config=xs(Q,L.item,H,V)}E+=o;const Y={...C,delay:U+E,ref:u,immediate:O.immediate,reset:!1,...W};if(V=="enter"&&ot.und(Y.from)){const Q=i?i():e,j=ot.und(Q.initial)||y?Q.from:Q.initial;Y.from=xs(j,L.item,H)}const{onResolve:$}=Y;Y.onResolve=Q=>{xs($,Q);const j=A.current,X=j.find(se=>se.key===K);if(X&&!(Q.cancelled&&X.phase!="update")&&X.ctrl.idle){const se=j.every(ve=>ve.ctrl.idle);if(X.phase=="leave"){const ve=xs(a,X.item);if(ve!==!1){const de=ve===!0?0:ve;if(X.expired=!0,!se&&de>0){de<=2147483647&&(X.expirationId=setTimeout(S,de));return}}}se&&j.some(ve=>ve.expired)&&(b.current.delete(X),l&&(T.current=!0),S())}};const N=wb(L.ctrl,Y);V==="leave"&&l?b.current.set(L,{phase:V,springs:N,payload:Y}):M.set(L,{phase:V,springs:N,payload:Y})});const I=w.useContext(Xm),F=db(I),R=I!==F&&GV(I);Vs(()=>{R&&Zt(m,L=>{L.ctrl.start({default:I})})},[I]),Zt(M,(L,H)=>{if(b.current.size){const K=m.findIndex(J=>J.key===H.key);m.splice(K,1)}}),Vs(()=>{Zt(b.current.size?b.current:M,({phase:L,payload:H},K)=>{const{ctrl:J}=K;K.phase=L,f==null||f.add(J),R&&L=="enter"&&J.start({default:I}),H&&(Q6(J,H.ref),(J.ref||f)&&!T.current?J.update(H):(J.start(H),T.current&&(T.current=!1)))})},r?void 0:t);const z=L=>w.createElement(w.Fragment,null,m.map((H,K)=>{const{springs:J}=M.get(H)||H.ctrl,O=L({...J},H.item,H,K);return O&&O.type?w.createElement(O.type,{...O.props,key:ot.str(H.key)||ot.num(H.key)?H.key:H.ctrl.id,ref:O.ref}):O}));return f?[z,f]:z}var xfe=1;function _fe(n,{key:e,keys:t=e},i){if(t===null){const r=new Set;return n.map(s=>{const o=i&&i.find(a=>a.item===s&&a.phase!=="leave"&&!r.has(a));return o?(r.add(o),o.key):xfe++})}return ot.und(t)?n:ot.fun(t)?n.map(t):Qs(t)}var Efe=({container:n,...e}={})=>{const[t,i]=Pf(()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...e}),[]);return Vs(()=>{const r=Qhe(({x:s,y:o})=>{i.start({scrollX:s.current,scrollXProgress:s.progress,scrollY:o.current,scrollYProgress:o.progress})},{container:(n==null?void 0:n.current)||void 0});return()=>{Zt(Object.values(t),s=>s.stop()),r()}},[]),t},wfe=({container:n,...e})=>{const[t,i]=Pf(()=>({width:0,height:0,...e}),[]);return Vs(()=>{const r=OV(({width:s,height:o})=>{i.start({width:s,height:o,immediate:t.width.get()===0||t.height.get()===0})},{container:(n==null?void 0:n.current)||void 0});return()=>{Zt(Object.values(t),s=>s.stop()),r()}},[]),t},Sfe={any:0,all:1};function Cfe(n,e){const[t,i]=w.useState(!1),r=w.useRef(),s=ot.fun(n)&&n,o=s?s():{},{to:a={},from:l={},...c}=o,u=s?e:n,[h,f]=Pf(()=>({from:l,...c}),[]);return Vs(()=>{const d=r.current,{root:m,once:A,amount:y="any",...p}=u??{};if(!d||A&&t||typeof IntersectionObserver>"u")return;const g=new WeakMap,v=()=>(a&&f.start(a),i(!0),A?void 0:()=>{l&&f.start(l),i(!1)}),E=C=>{C.forEach(M=>{const b=g.get(M.target);if(M.isIntersecting!==!!b)if(M.isIntersecting){const T=v();ot.fun(T)?g.set(M.target,T):S.unobserve(M.target)}else b&&(b(),g.delete(M.target))})},S=new IntersectionObserver(E,{root:m&&m.current||void 0,threshold:typeof y=="number"||Array.isArray(y)?y:Sfe[y],...p});return S.observe(d),()=>S.unobserve(d)},[u]),s?[r,h]:[r,t]}function Mfe({children:n,...e}){return n(Pf(e))}function bfe({items:n,children:e,...t}){const i=$V(n.length,t);return n.map((r,s)=>{const o=e(r,s);return ot.fun(o)?o(i[s]):o})}function Tfe({items:n,children:e,...t}){return eW(n,t)(e)}var IE=class extends bE{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Cm(...t);const i=this._get(),r=pb(i);G6(this,r.create(i))}advance(e){const t=this._get(),i=this.get();nc(t,i)||(fl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&$D(this._active)&&IC(this)}_get(){const e=ot.arr(this.source)?this.source.map(Vo):Qs(Vo(this.source));return this.calc(...e)}_start(){this.idle&&!$D(this._active)&&(this.idle=!1,Zt(SE(this),e=>{e.done=!1}),ua.skipAnimation?(an.batchedUpdates(()=>this.advance()),IC(this)):KA.start(this))}_attach(){let e=1;Zt(Qs(this.source),t=>{pl(t)&&JA(t,this),yb(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Zt(Qs(this.source),e=>{pl(e)&&G_(e,this)}),this._active.clear(),IC(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Qs(this.source).reduce((t,i)=>Math.max(t,(yb(i)?i.priority:0)+1),0))}};function Ife(n){return n.idle!==!1}function $D(n){return!n.size||Array.from(n).every(Ife)}function IC(n){n.idle||(n.idle=!0,Zt(SE(n),e=>{e.done=!0}),N_(n,{type:"idle",parent:n}))}var Bfe=(n,...e)=>new IE(n,e),Pfe=(n,...e)=>(FV(),new IE(n,e));ua.assign({createStringInterpolator:DV,to:(n,e)=>new IE(n,e)});var Rfe=KA.advance,Dfe=["primitive"].concat(Object.keys(pE).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));ua.assign({createStringInterpolator:DV,colors:dhe,frameLoop:"demand"});XA(()=>{an.advance()});var Lfe=tfe(Dfe,{applyAnimatedValues:sr}),Sb=Lfe.animated;const Ffe=Object.freeze(Object.defineProperty({__proto__:null,Any:nfe,BailSignal:vb,Controller:j6,FrameValue:bE,Globals:ua,Interpolation:IE,Spring:Mfe,SpringContext:Xm,SpringRef:TE,SpringValue:W6,Trail:bfe,Transition:Tfe,a:Sb,animated:Sb,config:HV,createInterpolator:Cm,easings:BV,inferTo:ME,interpolate:Pfe,to:Bfe,update:Rfe,useChain:afe,useInView:Cfe,useIsomorphicLayoutEffect:Vs,useReducedMotion:qhe,useResize:wfe,useScroll:Efe,useSpring:Pf,useSpringRef:vfe,useSpringValue:yfe,useSprings:X6,useTrail:$V,useTransition:eW},Symbol.toStringTag,{value:"Module"}));var Ofe=Object.create,BE=Object.defineProperty,Ufe=Object.defineProperties,zfe=Object.getOwnPropertyDescriptor,kfe=Object.getOwnPropertyDescriptors,Nfe=Object.getOwnPropertyNames,V_=Object.getOwnPropertySymbols,Gfe=Object.getPrototypeOf,Y6=Object.prototype.hasOwnProperty,tW=Object.prototype.propertyIsEnumerable,eL=(n,e,t)=>e in n?BE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ri=(n,e)=>{for(var t in e||(e={}))Y6.call(e,t)&&eL(n,t,e[t]);if(V_)for(var t of V_(e))tW.call(e,t)&&eL(n,t,e[t]);return n},Wu=(n,e)=>Ufe(n,kfe(e)),ju=(n,e)=>{var t={};for(var i in n)Y6.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&V_)for(var i of V_(n))e.indexOf(i)<0&&tW.call(n,i)&&(t[i]=n[i]);return t},$A=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Pc=(n,e)=>{for(var t in e)BE(n,t,{get:e[t],enumerable:!0})},Hfe=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Nfe(e))!Y6.call(n,r)&&r!==t&&BE(n,r,{get:()=>e[r],enumerable:!(i=zfe(e,r))||i.enumerable});return n},Qfe=(n,e,t)=>(t=n!=null?Ofe(Gfe(n)):{},Hfe(!n||!n.__esModule?BE(t,"default",{value:n,enumerable:!0}):t,n)),tL=(n,e,t)=>new Promise((i,r)=>{var s=l=>{try{a(t.next(l))}catch(c){r(c)}},o=l=>{try{a(t.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),Vfe=$A((n,e)=>{e.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,i=>`%${i.charCodeAt(0).toString(16).toUpperCase()}`)}),Wfe=$A((n,e)=>{var t="%[a-f0-9]{2}",i=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function s(l,c){try{return[decodeURIComponent(l.join(""))]}catch{}if(l.length===1)return l;c=c||1;var u=l.slice(0,c),h=l.slice(c);return Array.prototype.concat.call([],s(u),s(h))}function o(l){try{return decodeURIComponent(l)}catch{for(var c=l.match(i)||[],u=1;u<c.length;u++)l=s(c,u).join(""),c=l.match(i)||[];return l}}function a(l){for(var c={"%FE%FF":"","%FF%FE":""},u=r.exec(l);u;){try{c[u[0]]=decodeURIComponent(u[0])}catch{var h=o(u[0]);h!==u[0]&&(c[u[0]]=h)}u=r.exec(l)}c["%C2"]="";for(var f=Object.keys(c),d=0;d<f.length;d++){var m=f[d];l=l.replace(new RegExp(m,"g"),c[m])}return l}e.exports=function(l){if(typeof l!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof l+"`");try{return l=l.replace(/\+/g," "),decodeURIComponent(l)}catch{return a(l)}}}),jfe=$A((n,e)=>{e.exports=(t,i)=>{if(!(typeof t=="string"&&typeof i=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(i==="")return[t];let r=t.indexOf(i);return r===-1?[t]:[t.slice(0,r),t.slice(r+i.length)]}}),Xfe=$A((n,e)=>{e.exports=function(t,i){for(var r={},s=Object.keys(t),o=Array.isArray(i),a=0;a<s.length;a++){var l=s[a],c=t[l];(o?i.indexOf(l)!==-1:i(l,c,t))&&(r[l]=c)}return r}}),Yfe=$A(n=>{var e=Vfe(),t=Wfe(),i=jfe(),r=Xfe(),s=g=>g==null,o=Symbol("encodeFragmentIdentifier");function a(g){switch(g.arrayFormat){case"index":return v=>(E,S)=>{let C=E.length;return S===void 0||g.skipNull&&S===null||g.skipEmptyString&&S===""?E:S===null?[...E,[u(v,g),"[",C,"]"].join("")]:[...E,[u(v,g),"[",u(C,g),"]=",u(S,g)].join("")]};case"bracket":return v=>(E,S)=>S===void 0||g.skipNull&&S===null||g.skipEmptyString&&S===""?E:S===null?[...E,[u(v,g),"[]"].join("")]:[...E,[u(v,g),"[]=",u(S,g)].join("")];case"colon-list-separator":return v=>(E,S)=>S===void 0||g.skipNull&&S===null||g.skipEmptyString&&S===""?E:S===null?[...E,[u(v,g),":list="].join("")]:[...E,[u(v,g),":list=",u(S,g)].join("")];case"comma":case"separator":case"bracket-separator":{let v=g.arrayFormat==="bracket-separator"?"[]=":"=";return E=>(S,C)=>C===void 0||g.skipNull&&C===null||g.skipEmptyString&&C===""?S:(C=C===null?"":C,S.length===0?[[u(E,g),v,u(C,g)].join("")]:[[S,u(C,g)].join(g.arrayFormatSeparator)])}default:return v=>(E,S)=>S===void 0||g.skipNull&&S===null||g.skipEmptyString&&S===""?E:S===null?[...E,u(v,g)]:[...E,[u(v,g),"=",u(S,g)].join("")]}}function l(g){let v;switch(g.arrayFormat){case"index":return(E,S,C)=>{if(v=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),!v){C[E]=S;return}C[E]===void 0&&(C[E]={}),C[E][v[1]]=S};case"bracket":return(E,S,C)=>{if(v=/(\[\])$/.exec(E),E=E.replace(/\[\]$/,""),!v){C[E]=S;return}if(C[E]===void 0){C[E]=[S];return}C[E]=[].concat(C[E],S)};case"colon-list-separator":return(E,S,C)=>{if(v=/(:list)$/.exec(E),E=E.replace(/:list$/,""),!v){C[E]=S;return}if(C[E]===void 0){C[E]=[S];return}C[E]=[].concat(C[E],S)};case"comma":case"separator":return(E,S,C)=>{let M=typeof S=="string"&&S.includes(g.arrayFormatSeparator),b=typeof S=="string"&&!M&&h(S,g).includes(g.arrayFormatSeparator);S=b?h(S,g):S;let T=M||b?S.split(g.arrayFormatSeparator).map(I=>h(I,g)):S===null?S:h(S,g);C[E]=T};case"bracket-separator":return(E,S,C)=>{let M=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!M){C[E]=S&&h(S,g);return}let b=S===null?[]:S.split(g.arrayFormatSeparator).map(T=>h(T,g));if(C[E]===void 0){C[E]=b;return}C[E]=[].concat(C[E],b)};default:return(E,S,C)=>{if(C[E]===void 0){C[E]=S;return}C[E]=[].concat(C[E],S)}}}function c(g){if(typeof g!="string"||g.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(g,v){return v.encode?v.strict?e(g):encodeURIComponent(g):g}function h(g,v){return v.decode?t(g):g}function f(g){return Array.isArray(g)?g.sort():typeof g=="object"?f(Object.keys(g)).sort((v,E)=>Number(v)-Number(E)).map(v=>g[v]):g}function d(g){let v=g.indexOf("#");return v!==-1&&(g=g.slice(0,v)),g}function m(g){let v="",E=g.indexOf("#");return E!==-1&&(v=g.slice(E)),v}function A(g){g=d(g);let v=g.indexOf("?");return v===-1?"":g.slice(v+1)}function y(g,v){return v.parseNumbers&&!Number.isNaN(Number(g))&&typeof g=="string"&&g.trim()!==""?g=Number(g):v.parseBooleans&&g!==null&&(g.toLowerCase()==="true"||g.toLowerCase()==="false")&&(g=g.toLowerCase()==="true"),g}function p(g,v){v=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},v),c(v.arrayFormatSeparator);let E=l(v),S=Object.create(null);if(typeof g!="string"||(g=g.trim().replace(/^[?#&]/,""),!g))return S;for(let C of g.split("&")){if(C==="")continue;let[M,b]=i(v.decode?C.replace(/\+/g," "):C,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(v.arrayFormat)?b:h(b,v),E(h(M,v),b,S)}for(let C of Object.keys(S)){let M=S[C];if(typeof M=="object"&&M!==null)for(let b of Object.keys(M))M[b]=y(M[b],v);else S[C]=y(M,v)}return v.sort===!1?S:(v.sort===!0?Object.keys(S).sort():Object.keys(S).sort(v.sort)).reduce((C,M)=>{let b=S[M];return b&&typeof b=="object"&&!Array.isArray(b)?C[M]=f(b):C[M]=b,C},Object.create(null))}n.extract=A,n.parse=p,n.stringify=(g,v)=>{if(!g)return"";v=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},v),c(v.arrayFormatSeparator);let E=b=>v.skipNull&&s(g[b])||v.skipEmptyString&&g[b]==="",S=a(v),C={};for(let b of Object.keys(g))E(b)||(C[b]=g[b]);let M=Object.keys(C);return v.sort!==!1&&M.sort(v.sort),M.map(b=>{let T=g[b];return T===void 0?"":T===null?u(b,v):Array.isArray(T)?T.length===0&&v.arrayFormat==="bracket-separator"?u(b,v)+"[]":T.reduce(S(b),[]).join("&"):u(b,v)+"="+u(T,v)}).filter(b=>b.length>0).join("&")},n.parseUrl=(g,v)=>{v=Object.assign({decode:!0},v);let[E,S]=i(g,"#");return Object.assign({url:E.split("?")[0]||"",query:p(A(g),v)},v&&v.parseFragmentIdentifier&&S?{fragmentIdentifier:h(S,v)}:{})},n.stringifyUrl=(g,v)=>{v=Object.assign({encode:!0,strict:!0,[o]:!0},v);let E=d(g.url).split("?")[0]||"",S=n.extract(g.url),C=n.parse(S,{sort:!1}),M=Object.assign(C,g.query),b=n.stringify(M,v);b&&(b=`?${b}`);let T=m(g.url);return g.fragmentIdentifier&&(T=`#${v[o]?u(g.fragmentIdentifier,v):g.fragmentIdentifier}`),`${E}${b}${T}`},n.pick=(g,v,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[o]:!1},E);let{url:S,query:C,fragmentIdentifier:M}=n.parseUrl(g,E);return n.stringifyUrl({url:S,query:r(C,v),fragmentIdentifier:M},E)},n.exclude=(g,v,E)=>{let S=Array.isArray(v)?C=>!v.includes(C):(C,M)=>!v(C,M);return n.pick(g,S,E)}}),qfe=(n,e)=>({dpr:n,camera:{fov:e},linear:!0,flat:!0,gl:{preserveDrawingBuffer:!0}}),Kfe=1,Jfe=14,nL={zoom:1,distance:14},iL={zoom:5,distance:14},Zfe={meshDelay:0,meshDur:0,rotDelay:1.7,rotDur:1,posDelay:1.3,posDur:2.2,logoTransition:3.1,text:2.5,to:1},BC="https://ruucm.github.io/shadergradient/shadergradient@1.0.0/hdr/",$fe=[{title:"Halo",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=3.6&cPolarAngle=90&cameraZoom=1&color1=%23ff5005&color2=%23dbba95&color3=%23d0bce1&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=-1.4&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=10&rotationZ=50&shader=defaults&type=plane&uDensity=1.3&uSpeed=0.4&uStrength=4&uTime=0&uFrequency=5.5&wireframe=false"},{title:"Pensive",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.5&cAzimuthAngle=250&cDistance=1.5&cPolarAngle=140&cameraZoom=12.5&color1=%23809bd6&color2=%23910aff&color3=%23af38ff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.5&rotationX=0&rotationY=0&rotationZ=140&shader=defaults&type=sphere&uAmplitude=7&uDensity=0.8&uFrequency=5.5&uSpeed=0.3&uStrength=0.4&uTime=0&wireframe=false"},{title:"Mint",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=170&cDistance=4.4&cPolarAngle=70&cameraZoom=1&color1=%2394ffd1&color2=%236bf5ff&color3=%23ffffff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0.9&positionZ=-0.3&reflection=0.1&rotationX=45&rotationY=0&rotationZ=0&type=waterPlane&uAmplitude=0&uDensity=1.2&uFrequency=0&uSpeed=0.2&uStrength=3.4&uTime=0&wireframe=false&shader=defaults"},{title:"Interstella",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=0.8&cAzimuthAngle=270&cDistance=0.5&cPolarAngle=180&cameraZoom=15.1&color1=%2373bfc4&color2=%23ff810a&color3=%238da0ce&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=env&pixelDensity=1&fov=45&positionX=-0.1&positionY=0&positionZ=0&reflection=0.4&rotationX=0&rotationY=130&rotationZ=70&shader=defaults&type=sphere&uAmplitude=3.2&uDensity=0.8&uFrequency=5.5&uSpeed=0.3&uStrength=0.3&uTime=0&wireframe=false"},{title:"Nighty night",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1&cAzimuthAngle=180&cDistance=2.8&cPolarAngle=80&cameraZoom=9.1&color1=%23606080&color2=%238d7dca&color3=%23212121&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.1&rotationX=50&rotationY=0&rotationZ=-60&shader=defaults&type=waterPlane&uAmplitude=0&uDensity=1.5&uFrequency=0&uSpeed=0.3&uStrength=1.5&uTime=8&wireframe=false"},{title:"Viola orientalis",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&brightness=1.1&cAzimuthAngle=0&cDistance=7.1&cPolarAngle=140&cameraZoom=17.3&color1=%23ffffff&color2=%23ffbb00&color3=%230700ff&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=0&type=sphere&uAmplitude=1.4&uDensity=1.1&uSpeed=0.1&uStrength=1&uTime=0&wireframe=false&uFrequency=5.5&shader=defaults"},{title:"Universe",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&brightness=1.1&cAzimuthAngle=180&cDistance=3.9&cPolarAngle=115&cameraZoom=1&color1=%235606FF&color2=%23FE8989&color3=%23000000&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=-0.5&positionY=0.1&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=235&type=waterPlane&uAmplitude=0&uDensity=1.1&uSpeed=0.1&uStrength=2.4&uTime=0.2&uFrequency=5.5&wireframe=false&shader=defaults"},{title:"Sunset",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&bgColor1=%23000000&bgColor2=%23000000&brightness=1.5&cAzimuthAngle=60&cDistance=7.1&cPolarAngle=90&cameraZoom=15.3&color1=%23ff7a33&color2=%2333a0ff&color3=%23ffc53d&embedMode=off&envPreset=dawn&grain=off&http%3A%2F%2Flocalhost%3A3002%2Fcustomize%3Fanimate=on&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=-0.15&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=0&shader=defaults&type=sphere&uAmplitude=1.4&uDensity=1.1&uSpeed=0.1&uStrength=0.4&uTime=0&uFrequency=5.5&wireframe=false"},{title:"Mandarin",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=on&bgColor1=%23000000&bgColor2=%23000000&brightness=1.2&cAzimuthAngle=180&cDistance=2.4&cPolarAngle=95&cameraZoom=1&color1=%23ff6a1a&color2=%23c73c00&color3=%23FD4912&embedMode=off&envPreset=city&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=-2.1&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=225&shader=defaults&type=waterPlane&uAmplitude=0&uFrequency=5.5&uDensity=1.8&uSpeed=0.2&uStrength=3&uTime=0.2&wireframe=false"},{title:"Cotton Candy",color:"white",url:"?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=2.9&cPolarAngle=120&cameraZoom=1&color1=%23ebedff&color2=%23f3f2f8&color3=%23dbf8ff&embedMode=off&envPreset=city&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&fov=45&positionX=0&positionY=1.8&positionZ=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=-90&type=waterPlane&uDensity=1&uSpeed=0.3&uStrength=3&uTime=0.2&uFrequency=5.5&wireframe=false&shader=defaults"}];function ede(){let[n,e]=w.useState(-1);return[n,t=>{let i=t.gl.domElement,r=a=>{a.preventDefault(),e(1),console.log("[Context Lost]")},s=a=>{e(0),console.log("[Context Restored]")},o=a=>{e(2),console.log("[Context Error]")};return i.addEventListener("webglcontextlost",r),i.addEventListener("webglcontextrestored",s),i.addEventListener("webglcontextcreationerror",o),()=>{i.removeEventListener("webglcontextlost",r),i.removeEventListener("webglcontextrestored",s),i.removeEventListener("webglcontextcreationerror",o)}}]}function tde({title:n="",color1:e="#ff7e5f",color2:t="#feb47b"}){return Ge.jsx("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:`linear-gradient(to right, ${e}, ${t})`,color:"white",fontSize:"20px",textAlign:"center",padding:"20px",fontFamily:"Inter",fontWeight:"500"},children:Ge.jsx("p",{children:n})})}function nde(n){var e=n,{children:t,pointerEvents:i="none",pixelDensity:r=1,fov:s=45}=e,o=ju(e,["children","pointerEvents","pixelDensity","fov"]);let[a,l]=ede();return a===1?Ge.jsx(tde,{title:"The graphics context has been lost. Please wait while we try to restore it..."}):Ge.jsx(Ge.Fragment,{children:Ge.jsx(yV,Wu(ri(Wu(ri({id:"gradientCanvas",resize:{offsetSize:!0}},qfe(r,s)),{style:{pointerEvents:i},onCreated:l}),o),{children:t}),r+s)})}var PE=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},ide=new Qn(-1,1,1,-1,0,1),q6=new It;q6.setAttribute("position",new ft([-1,3,0,-1,-1,0,3,-1,0],3));q6.setAttribute("uv",new ft([0,2,0,0,2,0],2));var rde=class{constructor(n){this._mesh=new ct(q6,n)}dispose(){this._mesh.geometry.dispose()}render(n){n.render(this._mesh,ide)}get material(){return this._mesh.material}set material(n){this._mesh.material=n}},rL=class extends PE{constructor(n,e){super(),this.scene=n,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(n,e,t){let i=n.getContext(),r=n.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let s,o;this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),n.setRenderTarget(t),this.clear&&n.clear(),n.render(this.scene,this.camera),n.setRenderTarget(e),this.clear&&n.clear(),n.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}},sde=class extends PE{constructor(){super(),this.needsSwap=!1}render(n){n.state.buffers.stencil.setLocked(!1),n.state.buffers.stencil.setTest(!1)}},sL=class extends PE{constructor(n,e){super(),this.textureID=e!==void 0?e:"tDiffuse",n instanceof Fn?(this.uniforms=n.uniforms,this.material=n):n&&(this.uniforms=ca.clone(n.uniforms),this.material=new Fn({defines:Object.assign({},n.defines),uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader})),this.fsQuad=new rde(this.material)}render(n,e,t){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=t.texture),this.fsQuad.material=this.material,this.renderToScreen?(n.setRenderTarget(null),this.fsQuad.render(n)):(n.setRenderTarget(e),this.clear&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),this.fsQuad.render(n))}},oL={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;

		}`},ode=class{constructor(n,e){if(this.renderer=n,e===void 0){let t={minFilter:Ut,magFilter:Ut,format:Dn},i=n.getSize(new Ee);this._pixelRatio=n.getPixelRatio(),this._width=i.width,this._height=i.height,e=new Rn(this._width*this._pixelRatio,this._height*this._pixelRatio,t),e.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],oL===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),sL===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new sL(oL),this.clock=new Wm}swapBuffers(){let n=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=n}addPass(n){this.passes.push(n),n.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(n,e){this.passes.splice(e,0,n),n.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(n){let e=this.passes.indexOf(n);e!==-1&&this.passes.splice(e,1)}isLastEnabledPass(n){for(let e=n+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(n){n===void 0&&(n=this.clock.getDelta());let e=this.renderer.getRenderTarget(),t=!1;for(let i=0,r=this.passes.length;i<r;i++){let s=this.passes[i];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),s.render(this.renderer,this.writeBuffer,this.readBuffer,n,t),s.needsSwap){if(t){let o=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,n),a.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}rL!==void 0&&(s instanceof rL?t=!0:s instanceof sde&&(t=!1))}}this.renderer.setRenderTarget(e)}reset(n){if(n===void 0){let e=this.renderer.getSize(new Ee);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,n=this.renderTarget1.clone(),n.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=n,this.renderTarget2=n.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(n,e){this._width=n,this._height=e;let t=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(t,i),this.renderTarget2.setSize(t,i);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(t,i)}setPixelRatio(n){this._pixelRatio=n,this.setSize(this._width,this._height)}};new Qn(-1,1,1,-1,0,1);var nW=new It;nW.setAttribute("position",new ft([-1,3,0,-1,-1,0,3,-1,0],3));nW.setAttribute("uv",new ft([0,2,0,0,2,0],2));var ade=class extends PE{constructor(n,e,t,i,r){super(),this.scene=n,this.camera=e,this.overrideMaterial=t,this.clearColor=i,this.clearAlpha=r!==void 0?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new We}render(n,e,t){let i=n.autoClear;n.autoClear=!1;let r,s;this.overrideMaterial!==void 0&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(n.getClearColor(this._oldClearColor),r=n.getClearAlpha(),n.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&n.clearDepth(),n.setRenderTarget(this.renderToScreen?null:t),this.clear&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),n.render(this.scene,this.camera),this.clearColor&&n.setClearColor(this._oldClearColor,r),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),n.autoClear=i}},nr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},lde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",cde="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",ude="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",hde="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",fde="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",dde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",pde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",mde="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",gde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Ade="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",vde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",yde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",xde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",_de="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Ede="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",wde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Sde="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Cde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Mde=new Map([[nr.SKIP,null],[nr.ADD,lde],[nr.ALPHA,cde],[nr.AVERAGE,ude],[nr.COLOR_BURN,hde],[nr.COLOR_DODGE,fde],[nr.DARKEN,dde],[nr.DIFFERENCE,pde],[nr.EXCLUSION,gde],[nr.LIGHTEN,Ade],[nr.MULTIPLY,vde],[nr.DIVIDE,mde],[nr.NEGATION,yde],[nr.NORMAL,xde],[nr.OVERLAY,_de],[nr.REFLECT,Ede],[nr.SCREEN,wde],[nr.SOFT_LIGHT,Sde],[nr.SUBTRACT,Cde]]),bde=class extends Or{constructor(n,e=1){super(),this.blendFunction=n,this.opacity=new Qr(e)}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n,this.dispatchEvent({type:"change"})}getShaderCode(){return Mde.get(this.blendFunction)}},Bd={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:2},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:1},width:{value:20},height:{value:20},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:`

		varying vec2 vUV;
		varying vec3 vPosition;

		void main() {

			vUV = uv;
			vPosition = position;

			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

		}`,fragmentShader:`

		#define SQRT2_MINUS_ONE 0.41421356
		#define SQRT2_HALF_MINUS_ONE 0.20710678
		#define PI2 6.28318531
		#define SHAPE_DOT 1
		#define SHAPE_ELLIPSE 2
		#define SHAPE_LINE 3
		#define SHAPE_SQUARE 4
		#define BLENDING_LINEAR 1
		#define BLENDING_MULTIPLY 2
		#define BLENDING_ADD 3
		#define BLENDING_LIGHTER 4
		#define BLENDING_DARKER 5
		uniform sampler2D tDiffuse;
		uniform float radius;
		uniform float rotateR;
		uniform float rotateG;
		uniform float rotateB;
		uniform float scatter;
		uniform float width;
		uniform float height;
		uniform int shape;
		uniform bool disable;
		uniform float blending;
		uniform int blendingMode;
		varying vec2 vUV;
		varying vec3 vPosition;
		uniform bool greyscale;
		const int samples = 8;

		float blend( float a, float b, float t ) {

		// linear blend
			return a * ( 1.0 - t ) + b * t;

		}

		float hypot( float x, float y ) {

		// vector magnitude
			return sqrt( x * x + y * y );

		}

		float rand( vec2 seed ){

		// get pseudo-random number
			return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );

		}

		float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {

		// apply shape-specific transforms
			float dist = hypot( coord.x - p.x, coord.y - p.y );
			float rad = channel;

			if ( shape == SHAPE_DOT ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

			} else if ( shape == SHAPE_ELLIPSE ) {

				rad = pow( abs( rad ), 1.125 ) * rad_max;

				if ( dist != 0.0 ) {
					float dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );
					dist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;
				}

			} else if ( shape == SHAPE_LINE ) {

				rad = pow( abs( rad ), 1.5) * rad_max;
				float dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;
				dist = hypot( normal.x * dot_p, normal.y * dot_p );

			} else if ( shape == SHAPE_SQUARE ) {

				float theta = atan( p.y - coord.y, p.x - coord.x ) - angle;
				float sin_t = abs( sin( theta ) );
				float cos_t = abs( cos( theta ) );
				rad = pow( abs( rad ), 1.4 );
				rad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );

			}

			return rad - dist;

		}

		struct Cell {

		// grid sample positions
			vec2 normal;
			vec2 p1;
			vec2 p2;
			vec2 p3;
			vec2 p4;
			float samp2;
			float samp1;
			float samp3;
			float samp4;

		};

		vec4 getSample( vec2 point ) {

		// multi-sampled point
			vec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );
			float base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;
			float step = PI2 / float( samples );
			// float dist = radius * 0.66;
			float dist = radius * 0.0;

			for ( int i = 0; i < samples; ++i ) {

				float r = base + step * float( i );
				vec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );
				tex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );

			}

			tex /= float( samples ) + 1.0;
			return tex;

		}

		float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {

		// get colour for given point
			float dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;

			if ( channel == 0 ) {

				c.samp1 = getSample( c.p1 ).r;
				c.samp2 = getSample( c.p2 ).r;
				c.samp3 = getSample( c.p3 ).r;
				c.samp4 = getSample( c.p4 ).r;

			} else if (channel == 1) {

				c.samp1 = getSample( c.p1 ).g;
				c.samp2 = getSample( c.p2 ).g;
				c.samp3 = getSample( c.p3 ).g;
				c.samp4 = getSample( c.p4 ).g;

			} else {

				c.samp1 = getSample( c.p1 ).b;
				c.samp3 = getSample( c.p3 ).b;
				c.samp2 = getSample( c.p2 ).b;
				c.samp4 = getSample( c.p4 ).b;

			}

			dist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );
			dist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );
			dist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );
			dist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );
			res = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;
			// res = 0.0;
			res += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;
			res += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;
			res = clamp( res, 0.0, 1.0 );

			return res;
			// return 2

		}

		Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {

		// get containing cell
			Cell c;

		// calc grid
			vec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );
			float threshold = step * 0.5;
			float dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );
			float dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );
			vec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );
			float offset_normal = mod( hypot( offset.x, offset.y ), step );
			float normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;
			float normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;
			float offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );
			float line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;
			float line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;

		// get closest corner
			c.normal = n;
			c.p1.x = p.x - n.x * normal_scale + n.y * line_scale;
			c.p1.y = p.y - n.y * normal_scale - n.x * line_scale;

		// scatter
			if ( scatter != 0.0 ) {

				float off_mag = scatter * threshold * 0.5;
				float off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;
				c.p1.x += cos( off_angle ) * off_mag;
				c.p1.y += sin( off_angle ) * off_mag;

			}

		// find corners
			float normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );
			float line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );
			c.p2.x = c.p1.x - n.x * normal_step;
			c.p2.y = c.p1.y - n.y * normal_step;
			c.p3.x = c.p1.x + n.y * line_step;
			c.p3.y = c.p1.y - n.x * line_step;
			c.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;
			c.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;

			return c;

		}

		float blendColour( float a, float b, float t ) {

		// blend colours
			if ( blendingMode == BLENDING_LINEAR ) {
				return blend( a, b, 1.0 - t );
			} else if ( blendingMode == BLENDING_ADD ) {
				return blend( a, min( 1.0, a + b ), t );
			} else if ( blendingMode == BLENDING_MULTIPLY ) {
				return blend( a, max( 0.0, a * b ), t );
			} else if ( blendingMode == BLENDING_LIGHTER ) {
				return blend( a, max( a, b ), t );
			} else if ( blendingMode == BLENDING_DARKER ) {
				return blend( a, min( a, b ), t );
			} else {
				return blend( a, b, 1.0 - t );
			}

		}

		void main() {

			if ( ! disable ) {

		// setup
				vec2 p = vec2( vUV.x * width, vUV.y * height ) - vec2(vPosition.x, vPosition.y) * 3.0; // - position values to remove black borders.
				vec2 origin = vec2( 0, 0 );
				float aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;
				// float aa = 0.0;

		// get channel samples
				Cell cell_r = getReferenceCell( p, origin, rotateR, radius );
				Cell cell_g = getReferenceCell( p, origin, rotateG, radius );
				Cell cell_b = getReferenceCell( p, origin, rotateB, radius );
				float r = getDotColour( cell_r, p, 0, rotateR, aa );
				float g = getDotColour( cell_g, p, 1, rotateG, aa );
				float b = getDotColour( cell_b, p, 2, rotateB, aa );

		// blend with original
				vec4 colour = texture2D( tDiffuse, vUV );
				
				// add masking before blendColour
				if (colour.r == 0.0) {
					r = 0.0;
				} else {
					r = blendColour( r, colour.r, blending );
				}

				if (colour.g == 0.0) {
					g = 0.0;
				} else {
					g = blendColour( g, colour.g, blending );
				}

				if (colour.b == 0.0) {
					b = 0.0;
				} else {
					b = blendColour( b, colour.b, blending );
				}
				
				
				

				if ( greyscale ) {
					r = g = b = (r + b + g) / 3.0;
				}

				// add alpha channel to each r, g, b colors
				vec4 vR;
				vec4 vG;
				vec4 vB;
	
				// apply transparent to outside of mesh
				if (r == 0.0 && colour.r == 0.0) {
					vR = vec4( 0, 0, 0, 0 );
				} else {
					vR = vec4( r, 0, 0, 1 );
				}
	
				if (g == 0.0 && colour.g == 0.0) {
					vG = vec4( 0, 0, 0, 0 );
				} else {
					vG = vec4( 0, g, 0, 1 );
				}
	
				if (b == 0.0 && colour.b == 0.0) {
					vB = vec4( 0, 0, 0, 0 );
				} else {
					vB = vec4( 0, 0, b, 1 );
				}

				// gl_FragColor = vec4( r, g, b, 1.0 );
				gl_FragColor = vR + vG + vB;

			} else {

				gl_FragColor = texture2D( tDiffuse, vUV );

			}

		}`},Tde=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},Ide=new Qn(-1,1,1,-1,0,1),K6=new It;K6.setAttribute("position",new ft([-1,3,0,-1,-1,0,3,-1,0],3));K6.setAttribute("uv",new ft([0,2,0,0,2,0],2));var Bde=class{constructor(n){this._mesh=new ct(K6,n)}dispose(){this._mesh.geometry.dispose()}render(n){n.render(this._mesh,Ide)}get material(){return this._mesh.material}set material(n){this._mesh.material=n}},Pde=class extends Tde{constructor(n,e,t){super(),Bd===void 0&&console.error("THREE.HalftonePass requires HalftoneShader"),this.uniforms=ca.clone(Bd.uniforms),this.material=new Fn({uniforms:this.uniforms,fragmentShader:Bd.fragmentShader,vertexShader:Bd.vertexShader}),this.uniforms.width.value=n,this.uniforms.height.value=e,this.uniforms.disable.value=t.disable,this.uniforms.blending.value=t.blending,this.fsQuad=new Bde(this.material),this.blendMode=new bde(nr.SCREEN),this.extensions=null}render(n,e,t){this.material.uniforms.tDiffuse.value=t.texture,this.renderToScreen?(n.setRenderTarget(null),this.fsQuad.render(n)):(n.setRenderTarget(e),this.clear&&n.clear(),this.fsQuad.render(n))}setSize(n,e){this.uniforms.width.value=n,this.uniforms.height.value=e}initialize(n,e,t){}addEventListener(){}getAttributes(){return this.attributes}getFragmentShader(){return Bd.fragmentShader}getVertexShader(){return Bd.vertexShader}update(n,e,t){}};function Rde(n,e){let{gl:t,scene:i,camera:r,size:s}=Se(),o=w.useMemo(()=>{let a=new ode(t);a.addPass(new ade(i,r));let l={shape:1,radius:2,rotateR:Math.PI/12,rotateB:Math.PI/12*2,rotateG:Math.PI/12*3,scatter:1,blending:e,blendingMode:1,greyscale:!1,disable:n},c=new Pde(s.width,s.height,l);return a.addPass(c),a},[t,i,r,s,n,e]);w.useEffect(()=>o==null?void 0:o.setSize(s.width,s.height),[o,s]),yt((a,l)=>(t.autoClear=!0,void o.render(l)),1)}function Dde(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Lde=Dde;function Fde(n,e,t){let{gl:i,size:r,viewport:s}=Se(),o=typeof n=="number"?n:r.width*s.dpr,a=r.height*s.dpr,l=(typeof n=="number"?t:n)||{},{samples:c}=l,u=ju(l,["samples"]),h=w.useMemo(()=>{let f;return f=new Rn(o,a,ri({minFilter:Ut,magFilter:Ut,encoding:i.outputEncoding,type:Ln},u)),f.samples=c,f},[]);return w.useLayoutEffect(()=>{h.setSize(o,a),c&&(h.samples=c)},[c,h,o,a]),w.useEffect(()=>()=>h.dispose(),[]),h}var Ode=n=>typeof n=="function",Ude=w.forwardRef((n,e)=>{var t=n,{envMap:i,resolution:r=256,frames:s=1/0,children:o,makeDefault:a}=t,l=ju(t,["envMap","resolution","frames","children","makeDefault"]);let c=Se(({set:g})=>g),u=Se(({camera:g})=>g),h=Se(({size:g})=>g),f=w.useRef(null),d=w.useRef(null),m=Fde(r);w.useLayoutEffect(()=>{l.manual||f.current.updateProjectionMatrix()},[h,l]),w.useLayoutEffect(()=>{f.current.updateProjectionMatrix()}),w.useLayoutEffect(()=>{if(a){let g=u;return c(()=>({camera:f.current})),()=>c(()=>({camera:g}))}},[f,a,c]);let A=0,y=null,p=Ode(o);return yt(g=>{p&&(s===1/0||A<s)&&(d.current.visible=!1,g.gl.setRenderTarget(m),y=g.scene.background,i&&(g.scene.background=i),g.gl.render(g.scene,f.current),g.scene.background=y,g.gl.setRenderTarget(null),d.current.visible=!0,A++)}),Ge.jsxs(Ge.Fragment,{children:[Ge.jsx("orthographicCamera",Wu(ri({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:Lde([f,e])},l),{children:!p&&o})),Ge.jsx("group",{ref:d,children:p&&o(m.texture)})]})});function zde(n,e){let t=Se(r=>r.pointer),[i]=w.useState(()=>{let r=new rh;return function(s,o){r.setFromCamera(t,n instanceof th?n:n.current);let a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}var iW=w.createContext({}),kde=()=>w.useContext(iW),Nde=2*Math.PI,aL=new kt,lL=new Oe,[Pd,PC]=[new St,new St],cL=new D,uL=new D,Gde=n=>"minPolarAngle"in n,Hde=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=0,autoClear:i=!0,onUpdate:r,onTarget:s,children:o})=>{let a=Se(({size:R})=>R),l=Se(({camera:R})=>R),c=Se(({controls:R})=>R),u=Se(({gl:R})=>R),h=Se(({scene:R})=>R),f=Se(({invalidate:R})=>R),d=w.useRef(),m=w.useRef(),A=w.useRef(null),[y]=w.useState(()=>new xo),p=w.useRef(!1),g=w.useRef(0),v=w.useRef(new D(0,0,0)),E=w.useRef(new D(0,0,0));w.useEffect(()=>{E.current.copy(l.up)},[l]);let S=w.useCallback(R=>{p.current=!0,(c||s)&&(v.current=(c==null?void 0:c.target)||(s==null?void 0:s())),g.current=l.position.distanceTo(cL),Pd.copy(l.quaternion),uL.copy(R).multiplyScalar(g.current).add(cL),aL.lookAt(uL),PC.copy(aL.quaternion),f()},[c,l,s,f]);w.useEffect(()=>(h.background&&(d.current=h.background,h.background=null,y.background=d.current),()=>{d.current&&(h.background=d.current)}),[]),yt((R,z)=>{var L;if(A.current&&m.current){if(p.current)if(Pd.angleTo(PC)<.01)p.current=!1,Gde(c)&&l.up.copy(E.current);else{let H=z*Nde;Pd.rotateTowards(PC,H),l.position.set(0,0,1).applyQuaternion(Pd).multiplyScalar(g.current).add(v.current),l.up.set(0,1,0).applyQuaternion(Pd).normalize(),l.quaternion.copy(Pd),r?r():c&&c.update(),f()}lL.copy(l.matrix).invert(),(L=m.current)==null||L.quaternion.setFromRotationMatrix(lL),i&&(u.autoClear=!1),u.clearDepth(),u.render(y,A.current)}},t);let C=zde(A),M=w.useMemo(()=>({tweenCamera:S,raycast:C}),[S]),[b,T]=e,I=n.endsWith("-center")?0:n.endsWith("-left")?-a.width/2+b:a.width/2-b,F=n.startsWith("center-")?0:n.startsWith("top-")?a.height/2-T:-a.height/2+T;return Bc(Ge.jsxs(iW.Provider,{value:M,children:[Ge.jsx(Ude,{ref:A,position:[0,0,200]}),Ge.jsx("group",{ref:m,position:[I,F,0],children:o})]}),y)};function RC({scale:n=[.8,.05,.05],color:e,rotation:t}){return Ge.jsx("group",{rotation:t,children:Ge.jsxs("mesh",{position:[.4,0,0],children:[Ge.jsx("boxGeometry",{args:n}),Ge.jsx("meshBasicMaterial",{color:e,toneMapped:!1})]})})}function Rd(n){var e=n,{onClick:t,font:i,disabled:r,arcStyle:s,label:o,labelColor:a,axisHeadScale:l=1}=e,c=ju(e,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);let u=Se(A=>A.gl),h=w.useMemo(()=>{let A=document.createElement("canvas");A.width=64,A.height=64;let y=A.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=s,y.fill(),o&&(y.font=i,y.textAlign="center",y.fillStyle=a,y.fillText(o,32,41)),new X3(A)},[s,o,a,i]),[f,d]=w.useState(!1),m=(o?1:.75)*(f?1.2:1)*l;return Ge.jsx("sprite",Wu(ri({scale:m,onPointerOver:r?void 0:A=>{A.stopPropagation(),d(!0)},onPointerOut:r?void 0:t||(A=>{A.stopPropagation(),d(!1)})},c),{children:Ge.jsx("spriteMaterial",{map:h,"map-encoding":u.outputEncoding,"map-anisotropy":u.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:o?1:.75,toneMapped:!1})}))}var Qde=n=>{var e=n,{hideNegativeAxes:t,hideAxisHeads:i,disabled:r,font:s="18px Inter var, Arial, sans-serif",axisColors:o=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:l,labels:c=["X","Y","Z"],labelColor:u="#000",onClick:h}=e,f=ju(e,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);let[d,m,A]=o,{tweenCamera:y,raycast:p}=kde(),g={font:s,disabled:r,labelColor:u,raycast:p,onClick:h,axisHeadScale:a,onPointerDown:r?void 0:v=>{y(v.object.position),v.stopPropagation()}};return Ge.jsxs("group",Wu(ri({scale:40},f),{children:[Ge.jsx(RC,{color:d,rotation:[0,0,0],scale:l}),Ge.jsx(RC,{color:m,rotation:[0,0,Math.PI/2],scale:l}),Ge.jsx(RC,{color:A,rotation:[0,-Math.PI/2,0],scale:l}),!i&&Ge.jsxs(Ge.Fragment,{children:[Ge.jsx(Rd,ri({arcStyle:d,position:[1,0,0],label:c[0]},g)),Ge.jsx(Rd,ri({arcStyle:m,position:[0,1,0],label:c[1]},g)),Ge.jsx(Rd,ri({arcStyle:A,position:[0,0,1],label:c[2]},g)),!t&&Ge.jsxs(Ge.Fragment,{children:[Ge.jsx(Rd,ri({arcStyle:d,position:[-1,0,0]},g)),Ge.jsx(Rd,ri({arcStyle:m,position:[0,-1,0]},g)),Ge.jsx(Rd,ri({arcStyle:A,position:[0,0,-1]},g))]})]}),Ge.jsx("ambientLight",{intensity:.5}),Ge.jsx("pointLight",{position:[10,10,10],intensity:.5})]}))};function Vde({isFigmaPlugin:n}){return Ge.jsx(Ge.Fragment,{children:Ge.jsx(Hde,{alignment:"bottom-right",margin:n?[25,25]:[65,110],renderPriority:2,children:Ge.jsx(Qde,{axisColors:["#FF430A","#FF430A","#FF430A"],labelColor:"white",hideNegativeAxes:!0,axisHeadScale:.8})})})}var br={LEFT:1,RIGHT:2,MIDDLE:4},vt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function Ph(n){return n.isPerspectiveCamera}function eu(n){return n.isOrthographicCamera}var Dd=Math.PI*2,hL=Math.PI/2,rW=1e-5;function Ei(n,e=rW){return Math.abs(n)<e}function _i(n,e,t=rW){return Ei(n-e,t)}function fL(n,e){return Math.round(n/e)*e}function W0(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function j0(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function DC(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function LC(n,e){return eu(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}function dL(n){return n.invert?n.invert():n.inverse(),n}var Wde=class{constructor(){this._listeners={}}addEventListener(n,e){let t=this._listeners;t[n]===void 0&&(t[n]=[]),t[n].indexOf(e)===-1&&t[n].push(e)}removeEventListener(n,e){let t=this._listeners[n];if(t!==void 0){let i=t.indexOf(e);i!==-1&&t.splice(i,1)}}removeAllEventListeners(n){if(!n){this._listeners={};return}Array.isArray(this._listeners[n])&&(this._listeners[n].length=0)}dispatchEvent(n){let e=this._listeners[n.type];if(e!==void 0){n.target=this;let t=e.slice(0);for(let i=0,r=t.length;i<r;i++)t[i].call(this,n)}}},sW=typeof window<"u",jde=sW&&/Mac/.test(navigator.platform),pL=!(sW&&"PointerEvent"in window),d2=1/8,Vt,mL,p2,FC,Fs,wn,Zn,Ld,nl,il,Rh,gL,AL,ya,X0,em,vL,OC,yL,UC,zC,m2,xL=class extends Wde{constructor(n,e){if(super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=vt.NONE,this._viewport=null,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(t,i,r)=>{if(Ph(this._camera)){let s=wn.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*Vt.MathUtils.DEG2RAD,a=s.length()*Math.tan(o*.5),l=this.truckSpeed*t*a/this._elementRect.height,c=this.truckSpeed*i*a/this._elementRect.height;this.verticalDragToForward?(r?this.setFocalOffset(this._focalOffsetEnd.x+l,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(l,0,!0),this.forward(-c,!0)):r?this.setFocalOffset(this._focalOffsetEnd.x+l,this._focalOffsetEnd.y+c,this._focalOffsetEnd.z,!0):this.truck(l,c,!0)}else if(eu(this._camera)){let s=this._camera,o=t*(s.right-s.left)/s.zoom/this._elementRect.width,a=i*(s.top-s.bottom)/s.zoom/this._elementRect.height;r?this.setFocalOffset(this._focalOffsetEnd.x+o,this._focalOffsetEnd.y+a,this._focalOffsetEnd.z,!0):this.truck(o,a,!0)}},this._rotateInternal=(t,i)=>{let r=Dd*this.azimuthRotateSpeed*t/this._elementRect.height,s=Dd*this.polarRotateSpeed*i/this._elementRect.height;this.rotate(r,s,!0)},this._dollyInternal=(t,i,r)=>{let s=Math.pow(.95,-t*this.dollySpeed),o=this._sphericalEnd.radius*s,a=this._sphericalEnd.radius,l=a*(t>=0?-1:1);this.dollyTo(o),this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(wn),this._targetEnd.add(wn.normalize().multiplyScalar(l)),this._target.add(wn.normalize().multiplyScalar(l))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-a,this.infinityDolly&&(o<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=l),this._dollyControlCoord.set(i,r))},this._zoomInternal=(t,i,r)=>{let s=Math.pow(.95,t*this.dollySpeed),o=this._zoomEnd;this.zoomTo(this._zoom*s),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-o,this._dollyControlCoord.set(i,r))},typeof Vt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=n,this._yAxisUpSpace=new Vt.Quaternion().setFromUnitVectors(this._camera.up,p2),this._yAxisUpSpaceInverse=dL(this._yAxisUpSpace.clone()),this._state=vt.NONE,this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._target=new Vt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Vt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Vt.Spherical().setFromVector3(wn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new Vt.Vector3,new Vt.Vector3,new Vt.Vector3,new Vt.Vector3],this._updateNearPlaneCorners(),this._boundary=new Vt.Box3(new Vt.Vector3(-1/0,-1/0,-1/0),new Vt.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new Vt.Vector2,this.mouseButtons={left:vt.ROTATE,middle:vt.DOLLY,right:vt.TRUCK,wheel:Ph(this._camera)?vt.DOLLY:eu(this._camera)?vt.ZOOM:vt.NONE},this.touches={one:vt.TOUCH_ROTATE,two:Ph(this._camera)?vt.TOUCH_DOLLY_TRUCK:eu(this._camera)?vt.TOUCH_ZOOM_TRUCK:vt.NONE,three:vt.TOUCH_TRUCK},this._domElement){let t=new Vt.Vector2,i=new Vt.Vector2,r=new Vt.Vector2,s=E=>{if(!this._enabled)return;let S={pointerId:E.pointerId,clientX:E.clientX,clientY:E.clientY,deltaX:0,deltaY:0};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",h),p(E)},o=E=>{if(!this._enabled)return;let S={pointerId:0,clientX:E.clientX,clientY:E.clientY,deltaX:0,deltaY:0};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",f),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",f),p(E)},a=E=>{this._enabled&&(E.preventDefault(),Array.prototype.forEach.call(E.changedTouches,S=>{let C={pointerId:S.identifier,clientX:S.clientX,clientY:S.clientY,deltaX:0,deltaY:0};this._activePointers.push(C)}),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this._domElement.ownerDocument.addEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",d),p(E))},l=E=>{E.cancelable&&E.preventDefault();let S=E.pointerId,C=this._findPointerById(S);if(C){if(C.clientX=E.clientX,C.clientY=E.clientY,C.deltaX=E.movementX,C.deltaY=E.movementY,E.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=0,(E.buttons&br.LEFT)===br.LEFT&&(this._state=this._state|this.mouseButtons.left),(E.buttons&br.MIDDLE)===br.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(E.buttons&br.RIGHT)===br.RIGHT&&(this._state=this._state|this.mouseButtons.right);g()}},c=E=>{let S=this._findPointerById(0);S&&(S.clientX=E.clientX,S.clientY=E.clientY,S.deltaX=E.movementX,S.deltaY=E.movementY,this._state=0,(E.buttons&br.LEFT)===br.LEFT&&(this._state=this._state|this.mouseButtons.left),(E.buttons&br.MIDDLE)===br.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(E.buttons&br.RIGHT)===br.RIGHT&&(this._state=this._state|this.mouseButtons.right),g())},u=E=>{E.cancelable&&E.preventDefault(),Array.prototype.forEach.call(E.changedTouches,S=>{let C=S.identifier,M=this._findPointerById(C);M&&(M.clientX=S.clientX,M.clientY=S.clientY)}),g()},h=E=>{let S=E.pointerId,C=this._findPointerById(S);if(C&&this._activePointers.splice(this._activePointers.indexOf(C),1),E.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=vt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=vt.NONE;v()},f=()=>{let E=this._findPointerById(0);E&&this._activePointers.splice(this._activePointers.indexOf(E),1),this._state=vt.NONE,v()},d=E=>{switch(Array.prototype.forEach.call(E.changedTouches,S=>{let C=S.identifier,M=this._findPointerById(C);M&&this._activePointers.splice(this._activePointers.indexOf(M),1)}),this._activePointers.length){case 0:this._state=vt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}v()},m=-1,A=E=>{if(!this._enabled||this.mouseButtons.wheel===vt.NONE)return;if(E.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===vt.ROTATE||this.mouseButtons.wheel===vt.TRUCK){let T=performance.now();m-T<1e3&&this._getClientRect(this._elementRect),m=T}let S=jde?-1:-3,C=E.deltaMode===1?E.deltaY/S:E.deltaY/(S*10),M=this.dollyToCursor?(E.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,b=this.dollyToCursor?(E.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case vt.ROTATE:{this._rotateInternal(E.deltaX,E.deltaY);break}case vt.TRUCK:{this._truckInternal(E.deltaX,E.deltaY,!1);break}case vt.OFFSET:{this._truckInternal(E.deltaX,E.deltaY,!0);break}case vt.DOLLY:{this._dollyInternal(-C,M,b);break}case vt.ZOOM:{this._zoomInternal(-C,M,b);break}}this.dispatchEvent({type:"control"})},y=E=>{this._enabled&&E.preventDefault()},p=E=>{if(this._enabled){if(DC(this._activePointers,Fs),this._getClientRect(this._elementRect),t.copy(Fs),i.copy(Fs),this._activePointers.length>=2){let S=Fs.x-this._activePointers[1].clientX,C=Fs.y-this._activePointers[1].clientY,M=Math.sqrt(S*S+C*C);r.set(0,M);let b=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,T=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(b,T)}if("touches"in E||"pointerType"in E&&E.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=0,(E.buttons&br.LEFT)===br.LEFT&&(this._state=this._state|this.mouseButtons.left),(E.buttons&br.MIDDLE)===br.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(E.buttons&br.RIGHT)===br.RIGHT&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})}},g=()=>{if(!this._enabled)return;DC(this._activePointers,Fs);let E=this._domElement&&document.pointerLockElement===this._domElement,S=E?-this._activePointers[0].deltaX:i.x-Fs.x,C=E?-this._activePointers[0].deltaY:i.y-Fs.y;if(i.copy(Fs),((this._state&vt.ROTATE)===vt.ROTATE||(this._state&vt.TOUCH_ROTATE)===vt.TOUCH_ROTATE||(this._state&vt.TOUCH_DOLLY_ROTATE)===vt.TOUCH_DOLLY_ROTATE||(this._state&vt.TOUCH_ZOOM_ROTATE)===vt.TOUCH_ZOOM_ROTATE)&&this._rotateInternal(S,C),(this._state&vt.DOLLY)===vt.DOLLY||(this._state&vt.ZOOM)===vt.ZOOM){let M=this.dollyToCursor?(t.x-this._elementRect.x)/this._elementRect.width*2-1:0,b=this.dollyToCursor?(t.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===vt.DOLLY?this._dollyInternal(C*d2,M,b):this._zoomInternal(C*d2,M,b)}if((this._state&vt.TOUCH_DOLLY)===vt.TOUCH_DOLLY||(this._state&vt.TOUCH_ZOOM)===vt.TOUCH_ZOOM||(this._state&vt.TOUCH_DOLLY_TRUCK)===vt.TOUCH_DOLLY_TRUCK||(this._state&vt.TOUCH_ZOOM_TRUCK)===vt.TOUCH_ZOOM_TRUCK||(this._state&vt.TOUCH_DOLLY_OFFSET)===vt.TOUCH_DOLLY_OFFSET||(this._state&vt.TOUCH_ZOOM_OFFSET)===vt.TOUCH_ZOOM_OFFSET||(this._state&vt.TOUCH_DOLLY_ROTATE)===vt.TOUCH_DOLLY_ROTATE||(this._state&vt.TOUCH_ZOOM_ROTATE)===vt.TOUCH_ZOOM_ROTATE){let M=Fs.x-this._activePointers[1].clientX,b=Fs.y-this._activePointers[1].clientY,T=Math.sqrt(M*M+b*b),I=r.y-T;r.set(0,T);let F=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===vt.TOUCH_DOLLY||this._state===vt.TOUCH_DOLLY_ROTATE||this._state===vt.TOUCH_DOLLY_TRUCK||this._state===vt.TOUCH_DOLLY_OFFSET?this._dollyInternal(I*d2,F,R):this._zoomInternal(I*d2,F,R)}((this._state&vt.TRUCK)===vt.TRUCK||(this._state&vt.TOUCH_TRUCK)===vt.TOUCH_TRUCK||(this._state&vt.TOUCH_DOLLY_TRUCK)===vt.TOUCH_DOLLY_TRUCK||(this._state&vt.TOUCH_ZOOM_TRUCK)===vt.TOUCH_ZOOM_TRUCK)&&this._truckInternal(S,C,!1),((this._state&vt.OFFSET)===vt.OFFSET||(this._state&vt.TOUCH_OFFSET)===vt.TOUCH_OFFSET||(this._state&vt.TOUCH_DOLLY_OFFSET)===vt.TOUCH_DOLLY_OFFSET||(this._state&vt.TOUCH_ZOOM_OFFSET)===vt.TOUCH_ZOOM_OFFSET)&&this._truckInternal(S,C,!0),this.dispatchEvent({type:"control"})},v=()=>{DC(this._activePointers,Fs),i.copy(Fs),this._activePointers.length===0&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",d),this.dispatchEvent({type:"controlend"}))};this._domElement.addEventListener("pointerdown",s),pL&&this._domElement.addEventListener("mousedown",o),pL&&this._domElement.addEventListener("touchstart",a),this._domElement.addEventListener("pointercancel",h),this._domElement.addEventListener("wheel",A,{passive:!1}),this._domElement.addEventListener("contextmenu",y),this._removeAllEventListeners=()=>{this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("touchstart",a),this._domElement.removeEventListener("pointercancel",h),this._domElement.removeEventListener("wheel",A,{passive:!1}),this._domElement.removeEventListener("contextmenu",y),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("touchmove",u,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.removeEventListener("mouseup",f),this._domElement.ownerDocument.removeEventListener("touchend",d)},this.cancel=()=>{this._state!==vt.NONE&&(this._state=vt.NONE,this._activePointers.length=0,v())}}this.update(0)}static install(n){Vt=n.THREE,mL=Object.freeze(new Vt.Vector3(0,0,0)),p2=Object.freeze(new Vt.Vector3(0,1,0)),FC=Object.freeze(new Vt.Vector3(0,0,1)),Fs=new Vt.Vector2,wn=new Vt.Vector3,Zn=new Vt.Vector3,Ld=new Vt.Vector3,nl=new Vt.Vector3,il=new Vt.Vector3,Rh=new Vt.Vector3,gL=new Vt.Vector3,AL=new Vt.Vector3,ya=new Vt.Spherical,X0=new Vt.Spherical,em=new Vt.Box3,vL=new Vt.Box3,OC=new Vt.Sphere,yL=new Vt.Quaternion,UC=new Vt.Quaternion,zC=new Vt.Matrix4,m2=new Vt.Raycaster}static get ACTION(){return vt}get camera(){return this._camera}set camera(n){this._camera=n,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(n){this._enabled=n,n?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="")}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(n){this._spherical.radius===n&&this._sphericalEnd.radius===n||(this._spherical.radius=n,this._sphericalEnd.radius=n,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(n){this._spherical.theta===n&&this._sphericalEnd.theta===n||(this._spherical.theta=n,this._sphericalEnd.theta=n,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(n){this._spherical.phi===n&&this._sphericalEnd.phi===n||(this._spherical.phi=n,this._sphericalEnd.phi=n,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(n){this._boundaryEnclosesCamera=n,this._needsUpdate=!0}addEventListener(n,e){super.addEventListener(n,e)}removeEventListener(n,e){super.removeEventListener(n,e)}rotate(n,e,t=!1){return this.rotateTo(this._sphericalEnd.theta+n,this._sphericalEnd.phi+e,t)}rotateAzimuthTo(n,e=!1){return this.rotateTo(n,this._sphericalEnd.phi,e)}rotatePolarTo(n,e=!1){return this.rotateTo(this._sphericalEnd.theta,n,e)}rotateTo(n,e,t=!1){let i=Vt.MathUtils.clamp(n,this.minAzimuthAngle,this.maxAzimuthAngle),r=Vt.MathUtils.clamp(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,t||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let s=!t||_i(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_i(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(n,e=!1){return this.dollyTo(this._sphericalEnd.radius-n,e)}dollyTo(n,e=!1){let t=this._sphericalEnd.radius,i=Vt.MathUtils.clamp(n,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){let s=this._collisionTest(),o=_i(s,this._spherical.radius);if(!(t>i)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(i,s)}else this._sphericalEnd.radius=i;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);let r=!e||_i(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}zoom(n,e=!1){return this.zoomTo(this._zoomEnd+n,e)}zoomTo(n,e=!1){this._zoomEnd=Vt.MathUtils.clamp(n,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);let t=!e||_i(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(t)}pan(n,e,t=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(n,e,t)}truck(n,e,t=!1){this._camera.updateMatrix(),nl.setFromMatrixColumn(this._camera.matrix,0),il.setFromMatrixColumn(this._camera.matrix,1),nl.multiplyScalar(n),il.multiplyScalar(-e);let i=wn.copy(nl).add(il),r=Zn.copy(this._targetEnd).add(i);return this.moveTo(r.x,r.y,r.z,t)}forward(n,e=!1){wn.setFromMatrixColumn(this._camera.matrix,0),wn.crossVectors(this._camera.up,wn),wn.multiplyScalar(n);let t=Zn.copy(this._targetEnd).add(wn);return this.moveTo(t.x,t.y,t.z,e)}moveTo(n,e,t,i=!1){let r=wn.set(n,e,t).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);let s=!i||_i(this._target.x,this._targetEnd.x,this.restThreshold)&&_i(this._target.y,this._targetEnd.y,this.restThreshold)&&_i(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}fitToBox(n,e,{cover:t=!1,paddingLeft:i=0,paddingRight:r=0,paddingBottom:s=0,paddingTop:o=0}={}){let a=[],l=n.isBox3?em.copy(n):em.setFromObject(n);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());let c=fL(this._sphericalEnd.theta,hL),u=fL(this._sphericalEnd.phi,hL);a.push(this.rotateTo(c,u,e));let h=wn.setFromSpherical(this._sphericalEnd).normalize(),f=yL.setFromUnitVectors(h,FC),d=_i(Math.abs(h.y),1);d&&f.multiply(UC.setFromAxisAngle(p2,c)),f.multiply(this._yAxisUpSpaceInverse);let m=vL.makeEmpty();Zn.copy(l.min).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.min).setX(l.max.x).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.min).setY(l.max.y).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.max).setZ(l.min.z).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.min).setZ(l.max.z).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.max).setY(l.min.y).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.max).setX(l.min.x).applyQuaternion(f),m.expandByPoint(Zn),Zn.copy(l.max).applyQuaternion(f),m.expandByPoint(Zn),m.min.x-=i,m.min.y-=s,m.max.x+=r,m.max.y+=o,f.setFromUnitVectors(FC,h),d&&f.premultiply(UC.invert()),f.premultiply(this._yAxisUpSpace);let A=m.getSize(wn),y=m.getCenter(Zn).applyQuaternion(f);if(Ph(this._camera)){let p=this.getDistanceToFitBox(A.x,A.y,A.z,t);a.push(this.moveTo(y.x,y.y,y.z,e)),a.push(this.dollyTo(p,e)),a.push(this.setFocalOffset(0,0,0,e))}else if(eu(this._camera)){let p=this._camera,g=p.right-p.left,v=p.top-p.bottom,E=t?Math.max(g/A.x,v/A.y):Math.min(g/A.x,v/A.y);a.push(this.moveTo(y.x,y.y,y.z,e)),a.push(this.zoomTo(E,e)),a.push(this.setFocalOffset(0,0,0,e))}return Promise.all(a)}fitToSphere(n,e){let t=[],i=n instanceof Vt.Sphere?OC.copy(n):Xde(n,OC);if(t.push(this.moveTo(i.center.x,i.center.y,i.center.z,e)),Ph(this._camera)){let r=this.getDistanceToFitSphere(i.radius);t.push(this.dollyTo(r,e))}else if(eu(this._camera)){let r=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,o=2*i.radius,a=Math.min(r/o,s/o);t.push(this.zoomTo(a,e))}return t.push(this.setFocalOffset(0,0,0,e)),Promise.all(t)}setLookAt(n,e,t,i,r,s,o=!1){let a=Zn.set(i,r,s),l=wn.set(n,e,t);this._targetEnd.copy(a),this._sphericalEnd.setFromVector3(l.sub(a).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let c=!o||_i(this._target.x,this._targetEnd.x,this.restThreshold)&&_i(this._target.y,this._targetEnd.y,this.restThreshold)&&_i(this._target.z,this._targetEnd.z,this.restThreshold)&&_i(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_i(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&_i(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(n,e,t,i,r,s,o,a,l,c,u,h,f,d=!1){let m=wn.set(i,r,s),A=Zn.set(n,e,t);ya.setFromVector3(A.sub(m).applyQuaternion(this._yAxisUpSpace));let y=Ld.set(c,u,h),p=Zn.set(o,a,l);X0.setFromVector3(p.sub(y).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(m.lerp(y,f));let g=X0.theta-ya.theta,v=X0.phi-ya.phi,E=X0.radius-ya.radius;this._sphericalEnd.set(ya.radius+E*f,ya.phi+v*f,ya.theta+g*f),this.normalizeRotations(),this._needsUpdate=!0,d||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let S=!d||_i(this._target.x,this._targetEnd.x,this.restThreshold)&&_i(this._target.y,this._targetEnd.y,this.restThreshold)&&_i(this._target.z,this._targetEnd.z,this.restThreshold)&&_i(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_i(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&_i(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(S)}setPosition(n,e,t,i=!1){return this.setLookAt(n,e,t,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(n,e,t,i=!1){let r=this.getPosition(wn);return this.setLookAt(r.x,r.y,r.z,n,e,t,i)}setFocalOffset(n,e,t,i=!1){this._focalOffsetEnd.set(n,e,t),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);let r=!i||_i(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&_i(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&_i(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(n,e,t){this._camera.updateMatrixWorld(),nl.setFromMatrixColumn(this._camera.matrixWorldInverse,0),il.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Rh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let i=wn.set(n,e,t),r=i.distanceTo(this._camera.position),s=i.sub(this._camera.position);nl.multiplyScalar(s.x),il.multiplyScalar(s.y),Rh.multiplyScalar(s.z),wn.copy(nl).add(il).add(Rh),wn.z=wn.z+r,this.dollyTo(r,!1),this.setFocalOffset(-wn.x,wn.y,-wn.z,!1),this.moveTo(n,e,t,!1)}setBoundary(n){if(!n){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(n),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(n,e,t,i){if(n===null){this._viewport=null;return}this._viewport=this._viewport||new Vt.Vector4,typeof n=="number"?this._viewport.set(n,e,t,i):this._viewport.copy(n)}getDistanceToFitBox(n,e,t,i=!1){if(LC(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let r=n/e,s=this._camera.getEffectiveFOV()*Vt.MathUtils.DEG2RAD,o=this._camera.aspect;return((i?r>o:r<o)?e:n/o)*.5/Math.tan(s*.5)+t*.5}getDistanceToFitSphere(n){if(LC(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let e=this._camera.getEffectiveFOV()*Vt.MathUtils.DEG2RAD,t=Math.atan(Math.tan(e*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?e:t;return n/Math.sin(i*.5)}getTarget(n){return(n&&n.isVector3?n:new Vt.Vector3).copy(this._targetEnd)}getPosition(n){return(n&&n.isVector3?n:new Vt.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(n){return(n&&n.isVector3?n:new Vt.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Dd,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Dd),this._spherical.theta+=Dd*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Dd)}reset(n=!1){let e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,n),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,n),this.zoomTo(this._zoom0,n)];return Promise.all(e)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,p2),dL(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(n){let e=this._state===vt.NONE?this.dampingFactor:this.draggingDampingFactor,t=Math.min(e*n*60,1),i=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=gL.subVectors(this._targetEnd,this._target),a=AL.subVectors(this._focalOffsetEnd,this._focalOffset);if(!Ei(i)||!Ei(r)||!Ei(s)||!Ei(o.x)||!Ei(o.y)||!Ei(o.z)||!Ei(a.x)||!Ei(a.y)||!Ei(a.z)?(this._spherical.set(this._spherical.radius+s*t,this._spherical.phi+r*t,this._spherical.theta+i*t),this._target.add(o.multiplyScalar(t)),this._focalOffset.add(a.multiplyScalar(t)),this._needsUpdate=!0):(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)),this._dollyControlAmount!==0){if(Ph(this._camera)){let h=this._camera,f=wn.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),d=Zn.copy(f).cross(h.up).normalize();d.lengthSq()===0&&(d.x=1);let m=Ld.crossVectors(d,f),A=this._sphericalEnd.radius*Math.tan(h.getEffectiveFOV()*Vt.MathUtils.DEG2RAD*.5),y=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,p=wn.copy(this._targetEnd).add(d.multiplyScalar(this._dollyControlCoord.x*A*h.aspect)).add(m.multiplyScalar(this._dollyControlCoord.y*A));this._targetEnd.lerp(p,y)}else if(eu(this._camera)){let h=this._camera,f=h.getWorldDirection(wn.clone()),d=this._targetEnd.x*f.x+this._targetEnd.y*f.y+this._targetEnd.z*f.z,m=wn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(h.near+h.far)/(h.near-h.far)).unproject(h),A=Zn.set(0,0,-1).applyQuaternion(h.quaternion),y=Ld.copy(m).add(A.multiplyScalar(-m.dot(h.up))),p=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom;this._targetEnd.lerp(y,p);let g=this._targetEnd.x*f.x+this._targetEnd.y*f.y+this._targetEnd.z*f.z,v=f.multiplyScalar(g-d);this._targetEnd.sub(v)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}let l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Ei(this._focalOffset.x)||!Ei(this._focalOffset.y)||!Ei(this._focalOffset.z))&&(this._camera.updateMatrix(),nl.setFromMatrixColumn(this._camera.matrix,0),il.setFromMatrixColumn(this._camera.matrix,1),Rh.setFromMatrixColumn(this._camera.matrix,2),nl.multiplyScalar(this._focalOffset.x),il.multiplyScalar(-this._focalOffset.y),Rh.multiplyScalar(this._focalOffset.z),wn.copy(nl).add(il).add(Rh),this._camera.position.add(wn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),wn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let c=this._zoomEnd-this._zoom;this._zoom+=c*t,this._camera.zoom!==this._zoom&&(Ei(c)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);let u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Ei(i,this.restThreshold)&&Ei(r,this.restThreshold)&&Ei(s,this.restThreshold)&&Ei(o.x,this.restThreshold)&&Ei(o.y,this.restThreshold)&&Ei(o.z,this.restThreshold)&&Ei(a.x,this.restThreshold)&&Ei(a.y,this.restThreshold)&&Ei(a.z,this.restThreshold)&&Ei(c,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:W0(this.maxDistance),minZoom:this.minZoom,maxZoom:W0(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:W0(this.maxPolarAngle),minAzimuthAngle:W0(this.minAzimuthAngle),maxAzimuthAngle:W0(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:wn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(n,e=!1){let t=JSON.parse(n),i=wn.fromArray(t.position);this.enabled=t.enabled,this.minDistance=t.minDistance,this.maxDistance=j0(t.maxDistance),this.minZoom=t.minZoom,this.maxZoom=j0(t.maxZoom),this.minPolarAngle=t.minPolarAngle,this.maxPolarAngle=j0(t.maxPolarAngle),this.minAzimuthAngle=j0(t.minAzimuthAngle),this.maxAzimuthAngle=j0(t.maxAzimuthAngle),this.dampingFactor=t.dampingFactor,this.draggingDampingFactor=t.draggingDampingFactor,this.dollySpeed=t.dollySpeed,this.truckSpeed=t.truckSpeed,this.dollyToCursor=t.dollyToCursor,this.verticalDragToForward=t.verticalDragToForward,this._target0.fromArray(t.target0),this._position0.fromArray(t.position0),this._zoom0=t.zoom0,this._focalOffset0.fromArray(t.focalOffset0),this.moveTo(t.target[0],t.target[1],t.target[2],e),ya.setFromVector3(i.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(ya.theta,ya.phi,e),this.zoomTo(t.zoom,e),this.setFocalOffset(t.focalOffset[0],t.focalOffset[1],t.focalOffset[2],e),this._needsUpdate=!0}dispose(){this._removeAllEventListeners()}_findPointerById(n){let e=null;return this._activePointers.some(t=>t.pointerId===n?(e=t,!0):!1),e}_encloseToBoundary(n,e,t){let i=e.lengthSq();if(i===0)return n;let r=Zn.copy(e).add(n),s=this._boundary.clampPoint(r,Ld).sub(r),o=s.lengthSq();if(o===0)return n.add(e);if(o===i)return n;if(t===0)return n.add(e).add(s);{let a=1+t*o/e.dot(s);return n.add(Zn.copy(e).multiplyScalar(a)).add(s.multiplyScalar(1-t))}}_updateNearPlaneCorners(){if(Ph(this._camera)){let n=this._camera,e=n.near,t=n.getEffectiveFOV()*Vt.MathUtils.DEG2RAD,i=Math.tan(t*.5)*e,r=i*n.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(eu(this._camera)){let n=this._camera,e=1/n.zoom,t=n.left*e,i=n.right*e,r=n.top*e,s=n.bottom*e;this._nearPlaneCorners[0].set(t,r,0),this._nearPlaneCorners[1].set(i,r,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(t,s,0)}}_collisionTest(){let n=1/0;if(!(this.colliderMeshes.length>=1)||LC(this._camera,"_collisionTest"))return n;let e=wn.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);zC.lookAt(mL,e,this._camera.up);for(let t=0;t<4;t++){let i=Zn.copy(this._nearPlaneCorners[t]);i.applyMatrix4(zC);let r=Ld.addVectors(this._target,i);m2.set(r,e),m2.far=this._spherical.radius+1;let s=m2.intersectObjects(this.colliderMeshes);s.length!==0&&s[0].distance<n&&(n=s[0].distance)}return n}_getClientRect(n){let e=this._domElement.getBoundingClientRect();return n.x=e.left,n.y=e.top,this._viewport?(n.x+=this._viewport.x,n.y+=e.height-this._viewport.w-this._viewport.y,n.width=this._viewport.z,n.height=this._viewport.w):(n.width=e.width,n.height=e.height),n}_createOnRestPromise(n){return n?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(e=>{let t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)}))}_removeAllEventListeners(){}};function Xde(n,e){let t=e,i=t.center;em.makeEmpty(),n.traverseVisible(s=>{s.isMesh&&em.expandByObject(s)}),em.getCenter(i);let r=0;return n.traverseVisible(s=>{if(!s.isMesh)return;let o=s,a=o.geometry.clone();if(a.applyMatrix4(o.matrixWorld),a.isBufferGeometry){let l=a.attributes.position;for(let c=0,u=l.count;c<u;c++)wn.fromBufferAttribute(l,c),r=Math.max(r,i.distanceToSquared(wn))}else{let l=a.attributes.position,c=new Vt.Vector3;for(let u=0,h=l.count;u<h;u++)c.fromBufferAttribute(l,u),r=Math.max(r,i.distanceToSquared(c))}}),t.radius=Math.sqrt(r),t}function Cb(n){return n/180*Math.PI}function _L(n){return n.map(e=>Cb(e))}function oW(n){return n.replace("http://localhost:3001/customize","").replace("https://shadergradient.co/customize","").replace("https://www.shadergradient.co/customize","")}function Yde({type:n,cAzimuthAngle:e,cPolarAngle:t,cDistance:i,cameraZoom:r,zoomOut:s,enableTransition:o}){let a=w.useRef(),l=a.current;return yt((c,u)=>a.current.update(u)),w.useEffect(()=>{l==null||l.rotateTo(Cb(e),Cb(t),o)},[l,e,t]),w.useEffect(()=>{s?n==="sphere"?(l==null||l.dollyTo(iL.distance,o),l==null||l.zoomTo(iL.zoom,o)):(l==null||l.dollyTo(nL.distance,o),l==null||l.zoomTo(nL.zoom,o)):n==="sphere"?(l==null||l.zoomTo(r,o),l==null||l.dollyTo(Jfe,o)):(l==null||l.dollyTo(i,o),l==null||l.zoomTo(Kfe,o))},[l,s,n,r,i]),a}function qde(n){var e=n,{dampingFactor:t=.05}=e,i=ju(e,["dampingFactor"]);xL.install({THREE:pE}),si({CameraControls:xL});let r=Se(a=>a.camera),s=Se(a=>a.gl),o=Yde(i);return Ge.jsx("cameraControls",{ref:o,args:[r,s.domElement],enableDamping:!0,dampingFactor:t,zoomSpeed:10,dollySpeed:10,restThreshold:0})}var Kde=class extends cE{constructor(n){super(n),this.type=Ln}parse(n){let e=function(y,p){switch(y){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(p||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(p||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(p||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(p||""))}},t=`
`,i=function(y,p,g){p=p||1024;let v=y.pos,E=-1,S=0,C="",M=String.fromCharCode.apply(null,new Uint16Array(y.subarray(v,v+128)));for(;0>(E=M.indexOf(t))&&S<p&&v<y.byteLength;)C+=M,S+=M.length,v+=128,M+=String.fromCharCode.apply(null,new Uint16Array(y.subarray(v,v+128)));return-1<E?(y.pos+=S+E+1,C+M.slice(0,E)):!1},r=function(y){let p=/^#\?(\S+)/,g=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,v=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},M,b;for((y.pos>=y.byteLength||!(M=i(y)))&&e(1,"no header found"),(b=M.match(p))||e(3,"bad initial token"),C.valid|=1,C.programtype=b[1],C.string+=M+`
`;M=i(y),M!==!1;){if(C.string+=M+`
`,M.charAt(0)==="#"){C.comments+=M+`
`;continue}if((b=M.match(g))&&(C.gamma=parseFloat(b[1])),(b=M.match(v))&&(C.exposure=parseFloat(b[1])),(b=M.match(E))&&(C.valid|=2,C.format=b[1]),(b=M.match(S))&&(C.valid|=4,C.height=parseInt(b[1],10),C.width=parseInt(b[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2||e(3,"missing format specifier"),C.valid&4||e(3,"missing image size specifier"),C},s=function(y,p,g){let v=p;if(v<8||v>32767||y[0]!==2||y[1]!==2||y[2]&128)return new Uint8Array(y);v!==(y[2]<<8|y[3])&&e(3,"wrong scanline width");let E=new Uint8Array(4*p*g);E.length||e(4,"unable to allocate buffer space");let S=0,C=0,M=4*v,b=new Uint8Array(4),T=new Uint8Array(M),I=g;for(;I>0&&C<y.byteLength;){C+4>y.byteLength&&e(1),b[0]=y[C++],b[1]=y[C++],b[2]=y[C++],b[3]=y[C++],(b[0]!=2||b[1]!=2||(b[2]<<8|b[3])!=v)&&e(3,"bad rgbe scanline format");let F=0,R;for(;F<M&&C<y.byteLength;){R=y[C++];let L=R>128;if(L&&(R-=128),(R===0||F+R>M)&&e(3,"bad scanline data"),L){let H=y[C++];for(let K=0;K<R;K++)T[F++]=H}else T.set(y.subarray(C,C+R),F),F+=R,C+=R}let z=v;for(let L=0;L<z;L++){let H=0;E[S]=T[L+H],H+=v,E[S+1]=T[L+H],H+=v,E[S+2]=T[L+H],H+=v,E[S+3]=T[L+H],S+=4}I--}return E},o=function(y,p,g,v){let E=y[p+3],S=Math.pow(2,E-128)/255;g[v+0]=y[p+0]*S,g[v+1]=y[p+1]*S,g[v+2]=y[p+2]*S,g[v+3]=1},a=function(y,p,g,v){let E=y[p+3],S=Math.pow(2,E-128)/255;g[v+0]=La.toHalfFloat(Math.min(y[p+0]*S,65504)),g[v+1]=La.toHalfFloat(Math.min(y[p+1]*S,65504)),g[v+2]=La.toHalfFloat(Math.min(y[p+2]*S,65504)),g[v+3]=La.toHalfFloat(1)},l=new Uint8Array(n);l.pos=0;let c=r(l),u=c.width,h=c.height,f=s(l.subarray(l.pos),u,h),d,m,A;switch(this.type){case En:A=f.length/4;let y=new Float32Array(A*4);for(let g=0;g<A;g++)o(f,g*4,y,g*4);d=y,m=En;break;case Ln:A=f.length/4;let p=new Uint16Array(A*4);for(let g=0;g<A;g++)a(f,g*4,p,g*4);d=p,m=Ln;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:h,data:d,header:c.string,gamma:c.gamma,exposure:c.exposure,type:m}}setDataType(n){return this.type=n,this}load(n,e,t,i){function r(s,o){switch(s.type){case En:case Ln:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Ut,s.magFilter=Ut,s.generateMipmaps=!1,s.flipY=!0;break}e&&e(s,o)}return super.load(n,r,t,i)}};function kC(n,{path:e}){return hi(Kde,n,t=>t.setPath(e))}var Jde=n=>n.current&&n.current.isScene,Zde=n=>Jde(n)?n.current:n;function $de({background:n=!1,envPreset:e}){let t=kC("city.hdr",{path:BC}),i=kC("dawn.hdr",{path:BC}),r=kC("lobby.hdr",{path:BC}),s={city:t,dawn:i,lobby:r}[e],o=Se(l=>l.scene);xl.useLayoutEffect(()=>{if(s){let l=Zde(o);l.background;let c=l.environment;return n!=="only"&&(l.environment=s),n&&(l.background=s),()=>{n!=="only"&&(l.environment=c),n&&(l.background="black")}}},[o,s,n]);let a=s;return a.mapping=Hu,null}var NC=0;function epe(){let[n,e]=w.useState({});return hu.onLoad=()=>{e(t=>Wu(ri({},t),{active:!1}))},hu.onProgress=(t,i,r)=>{i===r&&(NC=r);let s=(i-NC)/(r-NC)*100||100;e(o=>Wu(ri({},o),{active:!0,item:t,loaded:i,total:r,progress:s}))},n}function tpe({lightType:n,brightness:e,envPreset:t}){return Ge.jsxs(Ge.Fragment,{children:[n==="3d"&&Ge.jsx("ambientLight",{intensity:e||1}),n==="env"&&Ge.jsx(w.Suspense,{fallback:Ge.jsx(npe,{}),children:Ge.jsx($de,{envPreset:t,background:!1,loadingCallback:()=>{}})})]})}function npe(){let{progress:n}=epe();return w.useEffect(()=>{let e=document.getElementById("LoaderRoot");e&&n&&(n===100?(e.innerHTML="Ligths are loaded",setTimeout(()=>{e.innerHTML=""},1e3)):e.innerHTML="Loading lights...")},[n]),Ge.jsx("ambientLight",{intensity:.4})}function ipe(n,e,t){return class extends Gi{constructor(){let i=Object.entries(n),r=i.reduce((s,[o,a])=>{let l=ca.clone({[o]:{value:a}});return ri(ri({},s),l)},{});super({color:"#ffffff",linewidth:5,userData:r,onBeforeCompile:s=>{s.uniforms=ri(ri({},s.uniforms),r),s.vertexShader=e}}),i.forEach(([s])=>Object.defineProperty(this,s,{get:()=>this.uniforms[s].value,set:o=>this.uniforms[s].value=o}))}}}Xt.uv2_pars_vertex="";Xt.uv2_vertex="";Xt.uv2_pars_fragment="";Xt.encodings_fragment="";function rpe(n,e,t,i){return class extends bs{constructor(){let r=Object.entries(n),s=n.colors,o=GC(s[0]),a=GC(s[1]),l=GC(s[2]),c={uC1r:{value:Xl(o==null?void 0:o.r)},uC1g:{value:Xl(o==null?void 0:o.g)},uC1b:{value:Xl(o==null?void 0:o.b)},uC2r:{value:Xl(a==null?void 0:a.r)},uC2g:{value:Xl(a==null?void 0:a.g)},uC2b:{value:Xl(a==null?void 0:a.b)},uC3r:{value:Xl(l==null?void 0:l.r)},uC3g:{value:Xl(l==null?void 0:l.g)},uC3b:{value:Xl(l==null?void 0:l.b)}},u=r.reduce((h,[f,d])=>{let m=ca.clone({[f]:{value:d}});return ri(ri({},h),m)},{});super({metalness:.2,userData:u,side:Vn,onBeforeCompile:h=>{h.uniforms=ri(ri(ri({},h.uniforms),u),c),h.vertexShader=e,h.fragmentShader=t}}),r.forEach(([h])=>Object.defineProperty(this,h,{get:()=>this.uniforms[h].value,set:f=>this.uniforms[h].value=f}))}}}function GC(n){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Xl(n=0){return n/255}var aW={};Pc(aW,{defaults:()=>J6,positionMix:()=>hW});var J6={};Pc(J6,{plane:()=>lW,sphere:()=>cW,waterPlane:()=>uW});var lW={};Pc(lW,{fragment:()=>spe,vertex:()=>ope});var spe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
vec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
gl_FragColor=vec4(outgoingLight,diffuseColor.a);}`,ope=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,cW={};Pc(cW,{fragment:()=>ape,vertex:()=>lpe});var ape=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
float distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
gl_FragColor=vec4(outgoingLight,diffuseColor.a);
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
}`,lpe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;
#define STANDARD
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,uW={};Pc(uW,{fragment:()=>cpe,vertex:()=>upe});var cpe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
vec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
gl_FragColor=vec4(outgoingLight,diffuseColor.a);}`,upe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,hW={};Pc(hW,{plane:()=>fW,sphere:()=>dW,waterPlane:()=>pW});var fW={};Pc(fW,{fragment:()=>hpe,vertex:()=>fpe});var hpe="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",fpe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,dW={};Pc(dW,{fragment:()=>dpe,vertex:()=>ppe});var dpe=`
#define STANDARD
#ifdef PHYSICAL
#define REFLECTIVITY
#define CLEARCOAT
#define TRANSMISSION
#endif
uniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;
#ifdef TRANSMISSION
uniform float transmission;
#endif
#ifdef REFLECTIVITY
uniform float reflectivity;
#endif
#ifdef CLEARCOAT
uniform float clearcoat;uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <color_pars_fragment>
#include <common>
#include <dithering_pars_fragment>
#include <emissivemap_pars_fragment>
#include <lightmap_pars_fragment>
#include <map_pars_fragment>
#include <packing>
#include <uv2_pars_fragment>
#include <uv_pars_fragment>
#include <bsdfs>
#include <bumpmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <clipping_planes_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <shadowmap_pars_fragment>
varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;
#include <clipping_planes_fragment>
float distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;
#ifdef TRANSMISSION
float totalTransmission=transmission;
#endif
#include <logdepthbuf_fragment>
#include <map_fragment>
#include <color_fragment>
#include <alphamap_fragment>
#include <alphatest_fragment>
#include <roughnessmap_fragment>
#include <metalnessmap_fragment>
#include <normal_fragment_begin>
#include <normal_fragment_maps>
#include <clearcoat_normal_fragment_begin>
#include <clearcoat_normal_fragment_maps>
#include <emissivemap_fragment>
#include <lights_physical_fragment>
#include <lights_fragment_begin>
#include <lights_fragment_maps>
#include <lights_fragment_end>
#include <aomap_fragment>
vec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;
#ifdef TRANSMISSION
diffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);
#endif
gl_FragColor=vec4(outgoingLight,diffuseColor.a);
#include <tonemapping_fragment>
#include <encodings_fragment>
#include <fog_fragment>
#include <premultiplied_alpha_fragment>
#include <dithering_fragment>
}`,ppe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;
#define STANDARD
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
float t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`,pW={};Pc(pW,{fragment:()=>mpe,vertex:()=>gpe});var mpe="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",gpe=`vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;
#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
#ifdef USE_TANGENT
varying vec3 vTangent;varying vec3 vBitangent;
#endif
#endif
#include <clipping_planes_pars_vertex>
#include <color_pars_vertex>
#include <common>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <morphtarget_pars_vertex>
#include <shadowmap_pars_vertex>
#include <skinning_pars_vertex>
#include <uv2_pars_vertex>
#include <uv_pars_vertex>
void main(){
#include <beginnormal_vertex>
#include <color_vertex>
#include <defaultnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <uv2_vertex>
#include <uv_vertex>
#ifndef FLAT_SHADED
vNormal=normalize(transformedNormal);
#ifdef USE_TANGENT
vTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);
#endif
#endif
#include <begin_vertex>
#include <clipping_planes_vertex>
#include <displacementmap_vertex>
#include <logdepthbuf_vertex>
#include <morphtarget_vertex>
#include <project_vertex>
#include <skinning_vertex>
vViewPosition=-mvPosition.xyz;
#include <fog_vertex>
#include <shadowmap_vertex>
#include <worldpos_vertex>
vUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}`;function Ape({type:n,shader:e,color1:t,color2:i,color3:r,uTime:s,uSpeed:o,uDensity:a,uStrength:l,uFrequency:c,uAmplitude:u}){let[h,f]=w.useState(!1),d=n??"plane",m=J6[d];e&&e!=="defaults"&&(m=aW[e][d]);let A=rpe({colors:[t,i,r],uTime:s,uSpeed:o,uLoadingTime:0,uNoiseDensity:a,uNoiseStrength:l,uFrequency:c,uAmplitude:u,uIntensity:.5},m.vertex,m.fragment),y=ipe({uTime:s,uSpeed:o,uNoiseDensity:a,uNoiseStrength:l,uFrequency:c,uAmplitude:u,uIntensity:.5},m.vertex);return si({ColorShiftMaterial:A}),si({HoveredLineMaterial:y}),w.useEffect(()=>{f(!0)},[]),h}var{to:EL,rotDur:eMe,meshDur:HC,rotDelay:tMe,meshDelay:QC}=Zfe,VC=new Wm,vpe=20;function ype({animate:n,range:e,rangeStart:t,rangeEnd:i}){let r=w.useRef(),s=w.useRef(),o=0;return yt((a,l)=>{if(r.current){let c=VC.getElapsedTime();if(e==="enabled"&&(c=t,c=c+VC.getElapsedTime(),c>=i&&(c=t,VC.start())),c>QC){let u=r.current.userData.uLoadingTime.value,h=c<HC+QC?Math.easeInOutCubic(o,u,EL-u,HC*1e3):EL;r.current.userData.uLoadingTime.value=h,c<HC+QC&&(o+=vpe)}n==="on"&&(r.current.userData.uTime.value=c,s.current!==void 0&&(s.current.userData.uTime.value=c))}}),{material:r,linemat:s}}Math.easeInOutCubic=function(n,e,t,i){return n/=i/2,n<1?t/2*n*n*n+e:(n-=2,t/2*(n*n*n+2)+e)};var g2=192,A2=36,xpe=({type:n,animate:e,range:t,rangeStart:i,rangeEnd:r,uTime:s,uSpeed:o,uStrength:a,uDensity:l,uFrequency:c,uAmplitude:u,positionX:h,positionY:f,positionZ:d,rotationX:m,rotationY:A,rotationZ:y,color1:p,color2:g,color3:v,reflection:E,wireframe:S,shader:C,rotSpringOption:M=({rotation:T})=>({to:(I,F)=>tL(void 0,null,function*(){yield I({animatedRotation:T})}),from:{rotation:_L([0,0,0])},config:{duration:300}}),posSpringOption:b=({position:T})=>({to:(I,F)=>tL(void 0,null,function*(){yield I({animatedPosition:T})}),from:{position:[0,0,0]},config:{duration:300}})})=>{let T=Ape({type:n,shader:C,color1:p,color2:g,color3:v,uTime:s,uSpeed:o,uDensity:l,uStrength:a,uFrequency:c,uAmplitude:u}),{material:I,linemat:F}=ype({animate:e,range:t,rangeStart:i,rangeEnd:r}),R=[h,f,d],z=_L([m,A,y]),{animatedPosition:L}=Pf(b({position:R})),{animatedRotation:H}=Pf(M({rotation:z}));return Ge.jsxs("group",{children:[Ge.jsxs(Sb.mesh,{position:L,rotation:H,name:"shadergradient-mesh",children:[n==="plane"&&Ge.jsx("planeGeometry",{args:[10,10,1,g2]}),n==="sphere"&&Ge.jsx("icosahedronGeometry",{args:[1,g2/3]}),n==="waterPlane"&&Ge.jsx("planeGeometry",{args:[10,10,g2,g2]}),T&&Ge.jsx("colorShiftMaterial",{ref:I,roughness:1-E})]}),Ge.jsx("mesh",{children:Ge.jsxs("lineSegments",{renderOrder:1,position:R,rotation:z,visible:!1,children:[n==="plane"&&Ge.jsx("planeGeometry",{args:[10,10,1,A2]}),n==="sphere"&&Ge.jsx("icosahedronGeometry",{args:[1,A2/3]}),n==="waterPlane"&&Ge.jsx("planeGeometry",{args:[10,10,A2,A2]}),T&&Ge.jsx("hoveredLineMaterial",{ref:F})]})})]})},mW=Qfe(Yfe()),_pe=mW.parse(oW($fe[0].url),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"});function Epe(n){var e=n,{control:t="props",dampingFactor:i,rotSpringOption:r,posSpringOption:s,isFigmaPlugin:o=!1,enableTransition:a=!0}=e,l=ju(e,["control","dampingFactor","rotSpringOption","posSpringOption","isFigmaPlugin","enableTransition"]);let c=ri(ri({},_pe),l);t==="query"&&(c=mW.parse(oW(l.urlString),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"}));let u=c,{lightType:h,envPreset:f,brightness:d,grain:m,grainBlending:A,toggleAxis:y}=u,p=ju(u,["lightType","envPreset","brightness","grain","grainBlending","toggleAxis"]);return Rde(m==="off",A||1),Ge.jsxs(Ge.Fragment,{children:[Ge.jsx(tpe,{lightType:h,brightness:d,envPreset:f}),Ge.jsx(xpe,Wu(ri({},p),{rotSpringOption:r,posSpringOption:s}),JSON.stringify(p)),y&&Ge.jsx(Vde,{isFigmaPlugin:o}),Ge.jsx(qde,ri({dampingFactor:i,enableTransition:a},p))]})}/*! Bundled license information:

camera-controls/dist/camera-controls.module.js:
  (*!
   * camera-controls
   * https://github.com/yomotsu/camera-controls
   * (c) 2017 @yomotsu
   * Released under the MIT License.
   *)
*/function Ye(){return Ye=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ye.apply(null,arguments)}const ev=new D,Z6=new D,wpe=new D,wL=new Ee;function Spe(n,e,t){const i=ev.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function Cpe(n,e){const t=ev.setFromMatrixPosition(n.matrixWorld),i=Z6.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(wpe);return r.angleTo(s)>Math.PI/2}function Mpe(n,e,t,i){const r=ev.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),wL.set(s.x,s.y),t.setFromCamera(wL,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function bpe(n,e){if(e instanceof Qn)return e.zoom;if(e instanceof on){const t=ev.setFromMatrixPosition(n.matrixWorld),i=Z6.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function Tpe(n,e,t){if(e instanceof on||e instanceof Qn){const i=ev.setFromMatrixPosition(n.matrixWorld),r=Z6.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Mb=n=>Math.abs(n)<1e-10?0:n;function gW(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=Mb(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const Ipe=(n=>e=>gW(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Bpe=(n=>(e,t)=>gW(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Ppe(n){return n&&typeof n=="object"&&"current"in n}const tv=w.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:h,onOcclude:f,castShadow:d,receiveShadow:m,material:A,geometry:y,zIndexRange:p=[16777271,0],calculatePosition:g=Spe,as:v="div",wrapperClass:E,pointerEvents:S="auto",...C},M)=>{const{gl:b,camera:T,scene:I,size:F,raycaster:R,events:z,viewport:L}=Se(),[H]=w.useState(()=>document.createElement(v)),K=w.useRef(),J=w.useRef(null),O=w.useRef(0),W=w.useRef([0,0]),V=w.useRef(null),U=w.useRef(null),Y=(a==null?void 0:a.current)||z.connected||b.domElement.parentNode,$=w.useRef(null),N=w.useRef(!1),Q=w.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&Ppe(h[0]),[h]);w.useLayoutEffect(()=>{const de=b.domElement;h&&h==="blending"?(de.style.zIndex=`${Math.floor(p[0]/2)}`,de.style.position="absolute",de.style.pointerEvents="none"):(de.style.zIndex=null,de.style.position=null,de.style.pointerEvents=null)},[h]),w.useLayoutEffect(()=>{if(J.current){const de=K.current=uI(H);if(I.updateMatrixWorld(),u)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const he=g(J.current,T,F);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${he[0]}px,${he[1]}px,0);transform-origin:0 0;`}return Y&&(r?Y.prepend(H):Y.appendChild(H)),()=>{Y&&Y.removeChild(H),de.unmount()}}},[Y,u]),w.useLayoutEffect(()=>{E&&(H.className=E)},[E]);const j=w.useMemo(()=>u?{position:"absolute",top:0,left:0,width:F.width,height:F.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-F.height/2,left:-F.width/2,width:F.width,height:F.height},...t},[t,s,o,F,u]),X=w.useMemo(()=>({position:"absolute",pointerEvents:S}),[S]);w.useLayoutEffect(()=>{if(N.current=!1,u){var de;(de=K.current)==null||de.render(w.createElement("div",{ref:V,style:j},w.createElement("div",{ref:U,style:X},w.createElement("div",{ref:M,className:i,style:t,children:n}))))}else{var he;(he=K.current)==null||he.render(w.createElement("div",{ref:M,style:j,className:i,children:n}))}});const se=w.useRef(!0);yt(de=>{if(J.current){T.updateMatrixWorld(),J.current.updateWorldMatrix(!0,!1);const he=u?W.current:g(J.current,T,F);if(u||Math.abs(O.current-T.zoom)>e||Math.abs(W.current[0]-he[0])>e||Math.abs(W.current[1]-he[1])>e){const te=Cpe(J.current,T);let xe=!1;Q&&(Array.isArray(h)?xe=h.map(Me=>Me.current):h!=="blending"&&(xe=[I]));const ce=se.current;if(xe){const Me=Mpe(J.current,T,R,xe);se.current=Me&&!te}else se.current=!te;ce!==se.current&&(f?f(!se.current):H.style.display=se.current?"block":"none");const me=Math.floor(p[0]/2),ye=h?Q?[p[0],me]:[me-1,0]:p;if(H.style.zIndex=`${Tpe(J.current,T,ye)}`,u){const[Me,oe]=[F.width/2,F.height/2],ne=T.projectionMatrix.elements[5]*oe,{isOrthographicCamera:we,top:be,left:st,bottom:re,right:Z}=T,ge=Ipe(T.matrixWorldInverse),Fe=we?`scale(${ne})translate(${Mb(-(Z+st)/2)}px,${Mb((be+re)/2)}px)`:`translateZ(${ne}px)`;let Ce=J.current.matrixWorld;c&&(Ce=T.matrixWorldInverse.clone().transpose().copyPosition(Ce).scale(J.current.scale),Ce.elements[3]=Ce.elements[7]=Ce.elements[11]=0,Ce.elements[15]=1),H.style.width=F.width+"px",H.style.height=F.height+"px",H.style.perspective=we?"":`${ne}px`,V.current&&U.current&&(V.current.style.transform=`${Fe}${ge}translate(${Me}px,${oe}px)`,U.current.style.transform=Bpe(Ce,1/((l||10)/400)))}else{const Me=l===void 0?1:bpe(J.current,T)*l;H.style.transform=`translate3d(${he[0]}px,${he[1]}px,0) scale(${Me})`}W.current=he,O.current=T.zoom}}if(!Q&&$.current&&!N.current)if(u){if(V.current){const he=V.current.children[0];if(he!=null&&he.clientWidth&&he!=null&&he.clientHeight){const{isOrthographicCamera:te}=T;if(te||y)C.scale&&(Array.isArray(C.scale)?C.scale instanceof D?$.current.scale.copy(C.scale.clone().divideScalar(1)):$.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):$.current.scale.setScalar(1/C.scale));else{const xe=(l||10)/400,ce=he.clientWidth*xe,me=he.clientHeight*xe;$.current.scale.set(ce,me,1)}N.current=!0}}}else{const he=H.children[0];if(he!=null&&he.clientWidth&&he!=null&&he.clientHeight){const te=1/L.factor,xe=he.clientWidth*te,ce=he.clientHeight*te;$.current.scale.set(xe,ce,1),N.current=!0}$.current.lookAt(de.camera.position)}});const ve=w.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return w.createElement("group",Ye({},C,{ref:J}),h&&!Q&&w.createElement("mesh",{castShadow:d,receiveShadow:m,ref:$},y||w.createElement("planeGeometry",null),A||w.createElement("shaderMaterial",{side:Vn,vertexShader:ve.vertexShader,fragmentShader:ve.fragmentShader})))});function Rpe({onChanged:n,portal:e,preventDefault:t=!0,scroll:i=!0,keyCode:r=9}){const s=w.useRef(0),o=Se(c=>c.setEvents),a=Se(c=>c.get),l=Se(c=>c.gl);return w.useEffect(()=>{var c;let u=[],h;const f=a().events.filter,d=(c=e==null?void 0:e.current)!==null&&c!==void 0?c:l.domElement.parentNode,m=()=>d&&n&&n(u,Math.round(s.current)%u.length);o({filter:(v,E)=>{let S=[...v];(S.length!==u.length||!u.every(C=>S.map(M=>M.object.uuid).includes(C.object.uuid)))&&(s.current=0,u=S,m()),f&&(S=f(S,E));for(let C=0;C<Math.round(s.current)%S.length;C++){const M=S.shift();S=[...S,M]}return S}});const A=v=>{var E,S;s.current=v(s.current),(E=a().events.handlers)==null||E.onPointerCancel(void 0),(S=a().events.handlers)==null||S.onPointerMove(h),m()},y=v=>{(v.keyCode||v.which)===r&&(t&&v.preventDefault(),u.length>1&&A(E=>E+1))},p=v=>{t&&v.preventDefault();let E=0;v||(v=window.event),v.wheelDelta?E=v.wheelDelta/120:v.detail&&(E=-v.detail/3),u.length>1&&A(S=>Math.abs(S-E))},g=v=>h=v;return document.addEventListener("pointermove",g,{passive:!0}),i&&document.addEventListener("wheel",p),r!==void 0&&document.addEventListener("keydown",y),()=>{o({filter:f}),r!==void 0&&document.removeEventListener("keydown",y),i&&document.removeEventListener("wheel",p),document.removeEventListener("pointermove",g)}},[l,a,o,t,i,r]),null}function Dpe(n,e="pointer",t="auto",i=document.body){w.useEffect(()=>{if(n)return i.style.cursor=e,()=>void(i.style.cursor=t)},[n])}let Y0=0;const $6=mE(n=>(hu.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Y0)/(i-Y0)*100})},hu.onLoad=()=>{n({active:!1})},hu.onError=e=>n(t=>({errors:[...t.errors,e]})),hu.onProgress=(e,t,i)=>{t===i&&(Y0=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Y0)/(i-Y0)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Lpe({children:n}){const e=$6();return w.createElement(w.Fragment,null,n==null?void 0:n(e))}const Fpe=n=>`Loading ${n.toFixed(2)}%`;function Ope({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:i,dataInterpolation:r=Fpe,initialState:s=o=>o}){const{active:o,progress:a}=$6(),l=w.useRef(0),c=w.useRef(0),u=w.useRef(null),[h,f]=w.useState(s(o));w.useEffect(()=>{let m;return o!==h&&(m=setTimeout(()=>f(o),300)),()=>clearTimeout(m)},[h,o]);const d=w.useCallback(()=>{u.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),u.current.innerText=r(l.current),l.current<a&&(c.current=requestAnimationFrame(d)))},[r,a]);return w.useEffect(()=>(d(),()=>cancelAnimationFrame(c.current)),[d]),h?w.createElement("div",{style:{...v2.container,opacity:o?1:0,...n}},w.createElement("div",null,w.createElement("div",{style:{...v2.inner,...e}},w.createElement("div",{style:{...v2.bar,transform:`scaleX(${a/100})`,...t}}),w.createElement("span",{ref:u,style:{...v2.data,...i}})))):null}const v2={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Upe(n,e,t){return Math.max(e,Math.min(n,t))}const gi={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function SL(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function CL(n,e,t,i=.15){return i===0?Upe(n,e,t):n<e?-SL(e-n,t-e,i)+e:n>t?+SL(n-t,t-e,i)+t:n}function zpe(n,[e,t],[i,r]){const[[s,o],[a,l]]=n;return[CL(e,s,o,i),CL(t,a,l,r)]}function kpe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Npe(n){var e=kpe(n,"string");return typeof e=="symbol"?e:String(e)}function ir(n,e,t){return e=Npe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ML(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Bi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(t),!0).forEach(function(i){ir(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ML(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const AW={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function bL(n){return n?n[0].toUpperCase()+n.slice(1):""}const Gpe=["enter","leave"];function Hpe(n=!1,e){return n&&!Gpe.includes(e)}function Qpe(n,e="",t=!1){const i=AW[n],r=i&&i[e]||e;return"on"+bL(n)+bL(r)+(Hpe(t,r)?"Capture":"")}const Vpe=["gotpointercapture","lostpointercapture"];function Wpe(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=Vpe.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function jpe(n,e=""){const t=AW[n],i=t&&t[e]||e;return n+i}function RE(n){return"touches"in n}function vW(n){return RE(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Xpe(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function Ype(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function yW(n){return RE(n)?Ype(n)[0]:n}function bb(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:o,origin:[r,s]}}catch{}return null}function qpe(n){return Xpe(n).map(e=>e.identifier)}function TL(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return bb(t,i)}function WC(n){const e=yW(n);return RE(n)?e.identifier:e.pointerId}function bm(n){const e=yW(n);return[e.clientX,e.clientY]}const IL=40,BL=800;function xW(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=IL,t*=IL):i===2&&(e*=BL,t*=BL),[e,t]}function Kpe(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??o)!==null&&t!==void 0?t:0]}function Jpe(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function W_(n,...e){return typeof n=="function"?n(...e):n}function Zpe(){}function $pe(...n){return n.length===0?Zpe:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function PL(n,e){return Object.assign({},e,n||{})}const eme=32;class _W{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?W_(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Jpe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const C=t._delta.map(Math.abs);gi.addTo(t._distance,C)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=i.threshold,{_step:u,values:h}=t;if(i.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&h[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&h[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const f=[0,0];if(i.hasCustomTransform){const[C,M]=h;f[0]=u[0]!==!1?C-u[0]:0,f[1]=u[1]!==!1?M-u[1]:0}else f[0]=u[0]!==!1?o-u[0]:0,f[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const d=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=W_(i.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[A,y]=t.offset,[[p,g],[v,E]]=t._bounds;t.overflow=[A<p?-1:A>g?1:0,y<v?-1:y>E?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const S=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=zpe(t._bounds,t.offset,S),t.delta=gi.sub(t.offset,d),this.computeMovement(),m&&(!t.last||s>eme)){t.delta=gi.sub(t.offset,d);const C=t.delta.map(Math.abs);gi.addTo(t.distance,C),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[C[0]/s,C[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Bi(Bi(Bi({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function tme([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class nv extends _W{constructor(...e){super(...e),ir(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=gi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=gi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[vW(e)]:i.axisThreshold;t.axis=tme(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const nme=n=>n,RL=.15,EW={enabled(n=!0){return n},eventOptions(n,e,t){return Bi(Bi({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[RL,RL];case!1:return[0,0];default:return gi.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return gi.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||nme},threshold(n){return gi.toVector(n,0)}},ime=0,Hf=Bi(Bi({},EW),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=ime){return n},bounds(n={}){if(typeof n=="function")return s=>Hf.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),DL={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class rme extends nv{constructor(...e){super(...e),ir(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Hf.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=WC(e),i._pointerActive=!0,this.computeValues(bm(e)),this.computeInitial(),t.preventScrollAxis&&vW(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=WC(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=bm(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=gi.sub(s,t._values),this.computeValues(s)),gi.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=WC(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[h,f]=i.swipe.velocity,[d,m]=i.swipe.distance,A=i.swipe.duration;if(t.elapsedTime<A){const y=Math.abs(a/t.timeDelta),p=Math.abs(l/t.timeDelta);y>h&&Math.abs(c)>d&&(t.swipe[0]=Math.sign(a)),p>f&&Math.abs(u)>m&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,sme(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=DL[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,gi.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in DL&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function sme(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const iv=typeof window<"u"&&window.document&&window.document.createElement;function wW(){return iv&&"ontouchstart"in window}function ome(){return wW()||iv&&window.navigator.maxTouchPoints>1}function ame(){return iv&&"onpointerdown"in window}function lme(){return iv&&"exitPointerLock"in window.document}function cme(){try{return"constructor"in GestureEvent}catch{return!1}}const qo={isBrowser:iv,gesture:cme(),touch:wW(),touchscreen:ome(),pointer:ame(),pointerLock:lme()},ume=250,hme=180,fme=.5,dme=50,pme=250,mme=10,LL={mouse:0,touch:0,pen:8},gme=Bi(Bi({},Hf),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&qo.pointerLock,qo.touch&&t?"touch":this.pointerLock?"mouse":qo.pointer&&!r?"pointer":qo.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?ume:void 0,!(!qo.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=gi.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=fme,distance:e=dme,duration:t=pme}={}){return{velocity:this.transform(gi.toVector(n)),distance:this.transform(gi.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return hme;case!1:return 0;default:return n}},axisThreshold(n){return n?Bi(Bi({},LL),n):LL},keyboardDisplacement(n=mme){return n}});function SW(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,o]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const Ame=30,vme=100;class yme extends _W{constructor(...e){super(...e),ir(this,"ingKey","pinching"),ir(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=gi.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*Ame-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=TL(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(o=>r.has(o))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=bb(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=TL(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=bb(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),i.origin=t.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=gi.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(i=>e[i]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-xW(e)[1]/vme*i.offset[0],0],gi.addTo(i._movement,i._delta),SW(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const xme=Bi(Bi({},EW),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!qo.touch&&qo.gesture)return"gesture";if(qo.touch&&i)return"touch";if(qo.touchscreen){if(qo.pointer)return"pointer";if(qo.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const a=PL(W_(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=PL(W_(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",gi.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class _me extends nv{constructor(...e){super(...e),ir(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(bm(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=bm(e),i=this.state;i._delta=gi.sub(t,i._values),gi.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Eme=Bi(Bi({},Hf),{},{mouseOnly:(n=!0)=>n});class wme extends nv{constructor(...e){super(...e),ir(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=Kpe(e);t._delta=gi.sub(i,t._values),gi.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const Sme=Hf;class Cme extends nv{constructor(...e){super(...e),ir(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=xW(e),gi.addTo(t._movement,t._delta),SW(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const Mme=Hf;class bme extends nv{constructor(...e){super(...e),ir(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(bm(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=bm(e);t._movement=t._delta=gi.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const Tme=Bi(Bi({},Hf),{},{mouseOnly:(n=!0)=>n}),e8=new Map,Tb=new Map;function Ime(n){e8.set(n.key,n.engine),Tb.set(n.key,n.resolver)}const Bme={key:"drag",engine:rme,resolver:gme},Pme={key:"hover",engine:bme,resolver:Tme},Rme={key:"move",engine:_me,resolver:Eme},Dme={key:"pinch",engine:yme,resolver:xme},Lme={key:"scroll",engine:wme,resolver:Sme},Fme={key:"wheel",engine:Cme,resolver:Mme};function Ome(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Ume(n,e){if(n==null)return{};var t=Ome(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const zme={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=qo.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},kme=["target","eventOptions","window","enabled","transform"];function Hx(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Hx(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function Nme(n,e,t={}){const i=n,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=i,c=Ume(i,kme);if(t.shared=Hx({target:r,eventOptions:s,window:o,enabled:a,transform:l},zme),e){const u=Tb.get(e);t[e]=Hx(Bi({shared:t.shared},c),u)}else for(const u in c){const h=Tb.get(u);h&&(t[u]=Hx(Bi({shared:t.shared},c[u]),h))}return t}class CW{constructor(e,t){ir(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const o=this._listeners,a=jpe(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Bi(Bi({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Gme{constructor(){ir(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let Hme=class{constructor(e){ir(this,"gestures",new Set),ir(this,"_targetEventStore",new CW(this)),ir(this,"gestureEventStores",{}),ir(this,"gestureTimeoutStores",{}),ir(this,"handlers",{}),ir(this,"config",{}),ir(this,"pointerIds",new Set),ir(this,"touchIds",new Set),ir(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Qme(this,e)}setEventIds(e){if(RE(e))return this.touchIds=new Set(qpe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Nme(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=FL(i,a.eventOptions,!!r);if(a.enabled){const c=e8.get(o);new c(this,e,o).bind(l)}}const s=FL(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Bi(Bi({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in i)i[s]=$pe(...i[s]);if(!r)return i;for(const s in i){const{device:o,capture:a,passive:l}=Wpe(s);this._targetEventStore.add(r,o,"",i[s],{capture:a,passive:l})}}}};function Fd(n,e){n.gestures.add(e),n.gestureEventStores[e]=new CW(n,e),n.gestureTimeoutStores[e]=new Gme}function Qme(n,e){e.drag&&Fd(n,"drag"),e.wheel&&Fd(n,"wheel"),e.scroll&&Fd(n,"scroll"),e.move&&Fd(n,"move"),e.pinch&&Fd(n,"pinch"),e.hover&&Fd(n,"hover")}const FL=(n,e,t)=>(i,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(c=o.passive)!==null&&c!==void 0?c:e.passive;let f=a?i:Qpe(i,r,u);t&&h&&(f+="Passive"),n[f]=n[f]||[],n[f].push(s)},Vme=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Wme(n){const e={},t={},i=new Set;for(let r in n)Vme.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Od(n,e,t,i,r,s){if(!n.has(t)||!e8.has(i))return;const o=t+"Start",a=t+"End",l=c=>{let u;return c.first&&o in e&&e[o](c),t in e&&(u=e[t](c)),c.last&&a in e&&e[a](c),u};r[i]=l,s[i]=s[i]||{}}function jme(n,e){const[t,i,r]=Wme(n),s={};return Od(r,t,"onDrag","drag",s,e),Od(r,t,"onWheel","wheel",s,e),Od(r,t,"onScroll","scroll",s,e),Od(r,t,"onPinch","pinch",s,e),Od(r,t,"onMove","move",s,e),Od(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function Xme(n,e={},t,i){const r=xl.useMemo(()=>new Hme(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),xl.useEffect(r.effect.bind(r)),xl.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function Yme(n){return n.forEach(Ime),function(t,i){const{handlers:r,nativeHandlers:s,config:o}=jme(t,i||{});return Xme(r,o,void 0,s)}}function MW(n,e){return Yme([Bme,Dme,Lme,Fme,Rme,Pme])(n,e||{})}const jC=new D,OL=new Ee,Dh=new D,y2=new D,q0=new D,UL=new Br,qme=w.forwardRef(({autoTransform:n=!0,matrix:e,axisLock:t,dragLimits:i,onHover:r,onDragStart:s,onDrag:o,onDragEnd:a,children:l,dragConfig:c,...u},h)=>{const f=Se(v=>v.controls),{camera:d,size:m,raycaster:A,invalidate:y}=Se(),p=w.useRef(null),g=MW({onHover:({hovering:v})=>r&&r(v??!1),onDragStart:({event:v})=>{f&&(f.enabled=!1);const{point:E}=v;p.current.matrix.decompose(jC,new St,new D),Dh.copy(E),y2.copy(Dh).sub(jC),s&&s(jC),y()},onDrag:({xy:[v,E],intentional:S})=>{if(!S)return;const C=(v-m.left)/m.width*2-1,M=-((E-m.top)/m.height)*2+1;if(OL.set(C,M),A.setFromCamera(OL,d),!t)d.getWorldDirection(q0).negate();else switch(t){case"x":q0.set(1,0,0);break;case"y":q0.set(0,1,0);break;case"z":q0.set(0,0,1);break}UL.setFromNormalAndCoplanarPoint(q0,Dh),A.ray.intersectPlane(UL,Dh);const b=p.current.matrix.clone(),T=p.current.matrixWorld.clone(),I=new D(Dh.x-y2.x,Dh.y-y2.y,Dh.z-y2.z);if(i&&(I.x=i[0]?Math.max(Math.min(I.x,i[0][1]),i[0][0]):I.x,I.y=i[1]?Math.max(Math.min(I.y,i[1][1]),i[1][0]):I.y,I.z=i[2]?Math.max(Math.min(I.z,i[2][1]),i[2][0]):I.z),n){p.current.matrix.setPosition(I);const F=p.current.matrix.clone().multiply(b.invert()),R=p.current.matrix.clone().multiply(T.invert());o&&o(p.current.matrix,F,p.current.matrixWorld,R)}else{const F=new Oe().copy(p.current.matrix);F.setPosition(I);const R=F.clone().multiply(b.invert()),z=F.clone().multiply(T.invert());o&&o(F,R,p.current.matrixWorld,z)}y()},onDragEnd:()=>{f&&(f.enabled=!0),a&&a(),y()}},{drag:{filterTaps:!0,threshold:1,...typeof c=="object"?c:{}}});return w.useImperativeHandle(h,()=>p.current,[]),w.useLayoutEffect(()=>{e&&(p.current.matrix=e)},[e]),w.createElement("group",Ye({ref:p},g(),{matrix:e,matrixAutoUpdate:!1},u),l)});function Eg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ib(n,e){return Ib=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Ib(n,e)}function Kme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jme(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8];return i*a*h+r*l*c+s*o*u-s*a*c-r*o*h-i*l*u}function zL(n,e){for(var t=[],i=n.toArray(),r=e.toArray(),s=0;s<i.length;s++)t[s]=i[s]+r[s];return new Wt().fromArray(t)}function Zme(n){if(Array.isArray(n))return n}function $me(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function Bb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function bW(n,e){if(n){if(typeof n=="string")return Bb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bb(n,e)}}function e0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cl(n,e){return Zme(n)||$me(n,e)||bW(n,e)||e0e()}function t0e(n){if(Array.isArray(n))return Bb(n)}function n0e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function i0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j_(n){return t0e(n)||n0e(n)||bW(n)||i0e()}function Qx(n,e,t){return Kme()?Qx=Reflect.construct:Qx=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&Ib(c,o.prototype),c},Qx.apply(null,arguments)}function r0e(n){var e=Cl(n[0],2),t=e[0],i=e[1],r=Cl(n[1],2),s=r[0],o=r[1],a=Cl(n[2],2),l=a[0],c=a[1];return Jme(t,i,1,s,o,1,l,c,1)}function s0e(n){return r0e(n)===0}var o0e=new Ee,a0e=new Ee;function kL(n){var e=n.map(function(c){return Array.isArray(c)?Qx(Ee,j_(c)):c}),t=Cl(e,3),i=t[0],r=t[1],s=t[2];if(s0e(n))return!1;var o=o0e.subVectors(r,i),a=a0e.subVectors(s,i),l=a.cross(o);return l>0}function TW(n,e,t){return Math.max(e,Math.min(t,n))}function IW(n,e){return TW(n-Math.floor(n/e)*e,0,e)}function BW(n,e){var t=IW(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function l0e(n){return n/180*Math.PI}function c0e(n){return n*180/Math.PI}function u0e(n,e){for(var t=e.radius,i=t===void 0?1:t,r=n.length/3,s=2/r,o=Math.PI*(3-2.2360679775),a=0;a<n.length;a+=3){var l=a*s-1+s/2,c=Math.sqrt(1-Math.pow(l,2)),u=a%r*o,h=Math.cos(u)*c,f=Math.sin(u)*c;n[a]=h*i,n[a+1]=l*i,n[a+2]=f*i}}function h0e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(n.x-e.x)<t&&Math.abs(n.y-e.y)<t&&Math.abs(n.z-e.z)<t}function PW(n,e){return n.x===e.x?typeof n.z<"u"&&n.y===e.y?n.z-e.z:n.y-e.y:n.x-e.x}function f0e(n){for(var e=n.sort(PW),t=[e[0],e[1]],i=2;i<e.length;i++)for(t.push(e[i]);t.length>2&&kL(j_(t.slice(-3)));)t.splice(t.length-2,1);for(var r=[e[e.length-1],e[e.length-2]],s=e.length-3;s>=0;s--)for(r.push(e[s]);r.length>2&&kL(j_(r.slice(-3)));)r.splice(r.length-2,1);r.splice(0,1),r.splice(r.length-1,1);var o=[].concat(t,r);return o}function d0e(n,e,t){var i=Cl(e,2),r=i[0],s=i[1],o=Cl(t,2),a=o[0],l=o[1];return a+(n-r)*(l-a)/(s-r)}function p0e(n){return n*n*n*(n*(n*6-15)+10)}function m0e(n,e,t){return n*(1-t)+e*t}function RW(n,e,t){return(t-n)/(e-n)}function g0e(n,e,t){var i=Math.sqrt(n*n+e*e+t*t);return[n/i,e/i,t/i]}function A0e(n,e,t){var i=n*n,r=e*e,s=t*t,o=n*Math.sqrt(1-(r+s)/2+r*s/3),a=e*Math.sqrt(1-(s+i)/2+s*i/3),l=t*Math.sqrt(1-(i+r)/2+i*r/3);return[o,a,l]}function DW(n,e){var t=new D().crossVectors(n,e),i=n.dot(e),r=new Wt().identity(),s=new Wt().set(0,-t.z,t.y,t.z,0,-t.x,-t.y,t.x,0),o=new Wt().multiplyMatrices(s,s).multiplyScalar(1/(1+i)),a=zL(zL(r,s),o);return a}function v0e(n,e,t){var i=Math.asin(e),r=Math.atan2(n,-t);return[i,r]}function y0e(n,e){var t=Math.sin(n),i=Math.cos(n),r=Math.sin(e)*i,s=-Math.cos(e)*i;return[r,t,s]}function x0e(n,e){var t=Cl(e,2),i=t[0],r=t[1],s=DW(n.normal,new D(0,1,0)),o=RW(i.clone().applyMatrix3(s).y,r.clone().applyMatrix3(s).y,0);return new D().lerpVectors(i,r,o)}function _0e(n,e){var t=e.normal.dot(n);return t}function E0e(n,e){var t=Cl(n,3),i=t[0],r=t[1],s=t[2],o=Cl(e,2),a=o[0],l=o[1];return s*a*l+r*a+i}function w0e(n,e){var t=Cl(e,2),i=t[0],r=t[1],s=i*r,o=n/s,a=n-s*o,l=a/i,c=a%i;return[c,l,o]}function S0e(n,e){return n[0]+e[0]*n[1]}function C0e(n,e){var t=n%e,i=Math.floor(n/e);return[t,i]}var XC=Object.freeze({__proto__:null,clamp:TW,repeat:IW,deltaAngle:BW,degToRad:l0e,radToDeg:c0e,fibonacciOnSphere:u0e,vectorEquals:h0e,lexicographic:PW,convexHull:f0e,remap:d0e,fade:p0e,lerp:m0e,inverseLerp:RW,normalize:g0e,pointOnCubeToPointOnSphere:A0e,rotateVectorOnVector:DW,pointToCoordinate:v0e,coordinateToPoint:y0e,planeSegmentIntersection:x0e,pointToPlaneDistance:_0e,getIndexFrom3D:E0e,get3DFromIndex:w0e,getIndexFrom2D:S0e,get2DFromIndex:C0e});function LW(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Lo=function n(e,t,i){var r=this;LW(this,n),Eg(this,"dot2",function(s,o){return r.x*s+r.y*o}),Eg(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},M0e=[new Lo(1,1,0),new Lo(-1,1,0),new Lo(1,-1,0),new Lo(-1,-1,0),new Lo(1,0,1),new Lo(-1,0,1),new Lo(1,0,-1),new Lo(-1,0,-1),new Lo(0,1,1),new Lo(0,-1,1),new Lo(0,1,-1),new Lo(0,-1,-1)],NL=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],GL=new Array(512),HL=new Array(512),b0e=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=NL[t]^e&255:i=NL[t]^e>>8&255,GL[t]=GL[t+256]=i,HL[t]=HL[t+256]=M0e[i%12]}};b0e(0);function T0e(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function QL(n){var e=T0e(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var I0e=function n(e){var t=this;LW(this,n),Eg(this,"seed",0),Eg(this,"init",function(i){t.seed=i,t.value=QL(i)}),Eg(this,"value",QL(this.seed)),this.init(e)};new I0e(Math.random());var B0e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},FW=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},P0e=function(e){return e},R0e={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},D0e={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},L0e={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},F0e={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},O0e={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},U0e={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function gr(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:FW,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;i=Math.max(1e-4,i);var c=2/i,u=o(c*r),h=n[e]-t,f=t,d=s*i;h=Math.min(Math.max(h,-d),d),t=n[e]-h;var m=(n.__damp[l]+c*h)*r;n.__damp[l]=(n.__damp[l]-c*m)*u;var A=t+(h+m)*u;return f-n[e]>0==A>f&&(A=f,n.__damp[l]=(A-f)/r),n[e]=A,!0}var z0e=function(e){return e&&e.isCamera},k0e=function(e){return e&&e.isLight},K0=new D,VL=new St,WL=new St,J0=new Oe,YC=new D;function N0e(n,e,t,i,r,s,o){typeof e=="number"?K0.setScalar(e):Array.isArray(e)?K0.set(e[0],e[1],e[2]):K0.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),YC.setFromMatrixPosition(n.matrixWorld),z0e(n)||k0e(n)?J0.lookAt(YC,K0,n.up):J0.lookAt(K0,YC,n.up),X_(n.quaternion,WL.setFromRotationMatrix(J0),t,i,r,s,o),a&&(J0.extractRotation(a.matrixWorld),VL.setFromRotationMatrix(J0),X_(n.quaternion,WL.copy(n.quaternion).premultiply(VL.invert()),t,i,r,s,o))}function tm(n,e,t,i,r,s,o,a){return gr(n,e,n[e]+BW(n[e],t),i,r,s,o,a)}var Z0=new Ee,jL,XL;function G0e(n,e,t,i,r,s,o){return typeof e=="number"?Z0.setScalar(e):Array.isArray(e)?Z0.set(e[0],e[1]):Z0.copy(e),jL=gr(n,"x",Z0.x,t,i,r,s,o),XL=gr(n,"y",Z0.y,t,i,r,s,o),jL||XL}var Ud=new D,YL,qL,KL;function Pb(n,e,t,i,r,s,o){return typeof e=="number"?Ud.setScalar(e):Array.isArray(e)?Ud.set(e[0],e[1],e[2]):Ud.copy(e),YL=gr(n,"x",Ud.x,t,i,r,s,o),qL=gr(n,"y",Ud.y,t,i,r,s,o),KL=gr(n,"z",Ud.z,t,i,r,s,o),YL||qL||KL}var Lh=new Yt,JL,ZL,$L,eF;function H0e(n,e,t,i,r,s,o){return typeof e=="number"?Lh.setScalar(e):Array.isArray(e)?Lh.set(e[0],e[1],e[2],e[3]):Lh.copy(e),JL=gr(n,"x",Lh.x,t,i,r,s,o),ZL=gr(n,"y",Lh.y,t,i,r,s,o),$L=gr(n,"z",Lh.z,t,i,r,s,o),eF=gr(n,"w",Lh.w,t,i,r,s,o),JL||ZL||$L||eF}var $0=new Rr,tF,nF,iF;function Q0e(n,e,t,i,r,s,o){return Array.isArray(e)?$0.set(e[0],e[1],e[2],e[3]):$0.copy(e),tF=tm(n,"x",$0.x,t,i,r,s,o),nF=tm(n,"y",$0.y,t,i,r,s,o),iF=tm(n,"z",$0.z,t,i,r,s,o),tF||nF||iF}var zd=new We,rF,sF,oF;function V0e(n,e,t,i,r,s,o){return e instanceof We?zd.copy(e):Array.isArray(e)?zd.setRGB(e[0],e[1],e[2]):zd.set(e),rF=gr(n,"r",zd.r,t,i,r,s,o),sF=gr(n,"g",zd.g,t,i,r,s,o),oF=gr(n,"b",zd.b,t,i,r,s,o),rF||sF||oF}var xa=new St,Yl=new Yt,aF=new Yt,e1=new Yt,lF,cF,uF,hF;function X_(n,e,t,i,r,s,o){var a=n;Array.isArray(e)?xa.set(e[0],e[1],e[2],e[3]):xa.copy(e);var l=n.dot(xa)>0?1:-1;return xa.x*=l,xa.y*=l,xa.z*=l,xa.w*=l,lF=gr(n,"x",xa.x,t,i,r,s,o),cF=gr(n,"y",xa.y,t,i,r,s,o),uF=gr(n,"z",xa.z,t,i,r,s,o),hF=gr(n,"w",xa.w,t,i,r,s,o),Yl.set(n.x,n.y,n.z,n.w).normalize(),aF.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),e1.copy(Yl).multiplyScalar(aF.dot(Yl)/Yl.dot(Yl)),a.__damp.velocity_x-=e1.x,a.__damp.velocity_y-=e1.y,a.__damp.velocity_z-=e1.z,a.__damp.velocity_w-=e1.w,n.set(Yl.x,Yl.y,Yl.z,Yl.w),lF||cF||uF||hF}var t1=new bf,fF,dF,pF;function W0e(n,e,t,i,r,s,o){return Array.isArray(e)?t1.set(e[0],e[1],e[2]):t1.copy(e),fF=gr(n,"radius",t1.radius,t,i,r,s,o),dF=tm(n,"phi",t1.phi,t,i,r,s,o),pF=tm(n,"theta",t1.theta,t,i,r,s,o),fF||dF||pF}var x2=new Oe,mF=new D,gF=new St,AF=new D,vF,yF,xF;function j0e(n,e,t,i,r,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new D,rotation:new St,scale:new D},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?x2.set.apply(x2,j_(e)):x2.copy(e),x2.decompose(mF,gF,AF),vF=Pb(a.__damp.position,mF,t,i,r,s,o),yF=X_(a.__damp.rotation,gF,t,i,r,s,o),xF=Pb(a.__damp.scale,AF,t,i,r,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),vF||yF||xF}var Tm=Object.freeze({__proto__:null,rsqw:B0e,exp:FW,linear:P0e,sine:R0e,cubic:D0e,quint:L0e,circ:F0e,quart:O0e,expo:U0e,damp:gr,dampLookAt:N0e,dampAngle:tm,damp2:G0e,damp3:Pb,damp4:H0e,dampE:Q0e,dampC:V0e,dampQ:X_,dampS:W0e,dampM:j0e});const t8=w.createContext(null);function n8(){return w.useContext(t8)}function X0e({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:i,pages:r=1,distance:s=1,damping:o=.25,maxSpeed:a=1/0,prepend:l=!1,style:c={},children:u}){const{get:h,setEvents:f,gl:d,size:m,invalidate:A,events:y}=Se(),[p]=w.useState(()=>document.createElement("div")),[g]=w.useState(()=>document.createElement("div")),[v]=w.useState(()=>document.createElement("div")),E=d.domElement.parentNode,S=w.useRef(0),C=w.useMemo(()=>({el:p,eps:n,fill:g,fixed:v,horizontal:i,damping:o,offset:0,delta:0,scroll:S,pages:r,range(T,I,F=0){const R=T-F,z=R+I+F*2;return this.offset<R?0:this.offset>z?1:(this.offset-R)/(z-R)},curve(T,I,F=0){return Math.sin(this.range(T,I,F)*Math.PI)},visible(T,I,F=0){const R=T-F,z=R+I+F*2;return this.offset>=R&&this.offset<=z}}),[n,o,i,r]);w.useEffect(()=>{p.style.position="absolute",p.style.width="100%",p.style.height="100%",p.style[i?"overflowX":"overflowY"]="auto",p.style[i?"overflowY":"overflowX"]="hidden",p.style.top="0px",p.style.left="0px";for(const I in c)p.style[I]=c[I];v.style.position="sticky",v.style.top="0px",v.style.left="0px",v.style.width="100%",v.style.height="100%",v.style.overflow="hidden",p.appendChild(v),g.style.height=i?"100%":`${r*s*100}%`,g.style.width=i?`${r*s*100}%`:"100%",g.style.pointerEvents="none",p.appendChild(g),l?E.prepend(p):E.appendChild(p),p[i?"scrollLeft":"scrollTop"]=1;const b=y.connected||d.domElement;requestAnimationFrame(()=>y.connect==null?void 0:y.connect(p));const T=h().events.compute;return f({compute(I,F){const{left:R,top:z}=E.getBoundingClientRect(),L=I.clientX-R,H=I.clientY-z;F.pointer.set(L/F.size.width*2-1,-(H/F.size.height)*2+1),F.raycaster.setFromCamera(F.pointer,F.camera)}}),()=>{E.removeChild(p),f({compute:T}),y.connect==null||y.connect(b)}},[r,s,i,p,g,v,E]),w.useEffect(()=>{if(y.connected===p){const b=m[i?"width":"height"],T=p[i?"scrollWidth":"scrollHeight"],I=T-b;let F=0,R=!0,z=!0;const L=()=>{if(!(!e||z)&&(A(),F=p[i?"scrollLeft":"scrollTop"],S.current=F/I,t)){if(!R){if(F>=I){const K=1-C.offset;p[i?"scrollLeft":"scrollTop"]=1,S.current=C.offset=-K,R=!0}else if(F<=0){const K=1+C.offset;p[i?"scrollLeft":"scrollTop"]=T,S.current=C.offset=K,R=!0}}R&&setTimeout(()=>R=!1,40)}};p.addEventListener("scroll",L,{passive:!0}),requestAnimationFrame(()=>z=!1);const H=K=>p.scrollLeft+=K.deltaY/2;return i&&p.addEventListener("wheel",H,{passive:!0}),()=>{p.removeEventListener("scroll",L),i&&p.removeEventListener("wheel",H)}}},[p,y,m,t,C,A,i,e]);let M=0;return yt((b,T)=>{M=C.offset,Tm.damp(C,"offset",S.current,o,T,a,void 0,n),Tm.damp(C,"delta",Math.abs(M-C.offset),o,T,a,void 0,n),C.delta>n&&A()}),w.createElement(t8.Provider,{value:C},u)}const Y0e=w.forwardRef(({children:n},e)=>{const t=w.useRef(null);w.useImperativeHandle(e,()=>t.current,[]);const i=n8(),{width:r,height:s}=Se(o=>o.viewport);return yt(()=>{t.current.position.x=i.horizontal?-r*(i.pages-1)*i.offset:0,t.current.position.y=i.horizontal?0:s*(i.pages-1)*i.offset}),w.createElement("group",{ref:t},n)}),q0e=w.forwardRef(({children:n,style:e,...t},i)=>{const r=n8(),s=w.useRef(null);w.useImperativeHandle(i,()=>s.current,[]);const{width:o,height:a}=Se(u=>u.size),l=w.useContext(Tf),c=w.useMemo(()=>uI(r.fixed),[r.fixed]);return yt(()=>{r.delta>r.eps&&(s.current.style.transform=`translate3d(${r.horizontal?-o*(r.pages-1)*r.offset:0}px,${r.horizontal?0:a*(r.pages-1)*-r.offset}px,0)`)}),c.render(w.createElement("div",Ye({ref:s,style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},t),w.createElement(t8.Provider,{value:r},w.createElement(Tf.Provider,{value:l},n)))),null}),K0e=w.forwardRef(({html:n,...e},t)=>{const i=n?q0e:Y0e;return w.createElement(i,Ye({ref:t},e))});let i8=sv();const hn=n=>rv(n,i8);let r8=sv();hn.write=n=>rv(n,r8);let DE=sv();hn.onStart=n=>rv(n,DE);let s8=sv();hn.onFrame=n=>rv(n,s8);let o8=sv();hn.onFinish=n=>rv(n,o8);let nm=[];hn.setTimeout=(n,e)=>{let t=hn.now()+e,i=()=>{let s=nm.findIndex(o=>o.cancel==i);~s&&nm.splice(s,1),mu-=~s?1:0},r={time:t,handler:n,cancel:i};return nm.splice(OW(t),0,r),mu+=1,UW(),r};let OW=n=>~(~nm.findIndex(e=>e.time>n)||~nm.length);hn.cancel=n=>{DE.delete(n),s8.delete(n),o8.delete(n),i8.delete(n),r8.delete(n)};hn.sync=n=>{Rb=!0,hn.batchedUpdates(n),Rb=!1};hn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,hn.onStart(t)}return i.handler=n,i.cancel=()=>{DE.delete(t),e=null},i};let a8=typeof window<"u"?window.requestAnimationFrame:()=>{};hn.use=n=>a8=n;hn.now=typeof performance<"u"?()=>performance.now():Date.now;hn.batchedUpdates=n=>n();hn.catch=console.error;hn.frameLoop="always";hn.advance=()=>{hn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):kW()};let pu=-1,mu=0,Rb=!1;function rv(n,e){Rb?(e.delete(n),n(0)):(e.add(n),UW())}function UW(){pu<0&&(pu=0,hn.frameLoop!=="demand"&&a8(zW))}function J0e(){pu=-1}function zW(){~pu&&(a8(zW),hn.batchedUpdates(kW))}function kW(){let n=pu;pu=hn.now();let e=OW(pu);if(e&&(NW(nm.splice(0,e),t=>t.handler()),mu-=e),!mu){J0e();return}DE.flush(),i8.flush(n?Math.min(64,pu-n):16.667),s8.flush(),r8.flush(),o8.flush()}function sv(){let n=new Set,e=n;return{add(t){mu+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return mu-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,mu-=e.size,NW(e,i=>i(t)&&n.add(i)),mu+=n.size,e=n)}}}function NW(n,e){n.forEach(t=>{try{e(t)}catch(i){hn.catch(i)}})}function Db(){}const Z0e=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),At={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function ic(n,e){if(At.arr(n)){if(!At.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const Xn=(n,e)=>n.forEach(e);function Mc(n,e,t){if(At.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}const ta=n=>At.und(n)?[]:At.arr(n)?n:[n];function wg(n,e){if(n.size){const t=Array.from(n);n.clear(),Xn(t,e)}}const W1=(n,...e)=>wg(n,t=>t(...e)),l8=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let c8,GW,Du=null,HW=!1,u8=Db;const $0e=n=>{n.to&&(GW=n.to),n.now&&(hn.now=n.now),n.colors!==void 0&&(Du=n.colors),n.skipAnimation!=null&&(HW=n.skipAnimation),n.createStringInterpolator&&(c8=n.createStringInterpolator),n.requestAnimationFrame&&hn.use(n.requestAnimationFrame),n.batchedUpdates&&(hn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(u8=n.willAdvance),n.frameLoop&&(hn.frameLoop=n.frameLoop)};var Il=Object.freeze({__proto__:null,get createStringInterpolator(){return c8},get to(){return GW},get colors(){return Du},get skipAnimation(){return HW},get willAdvance(){return u8},assign:$0e});const Sg=new Set;let Jo=[],qC=[],Y_=0;const LE={get idle(){return!Sg.size&&!Jo.length},start(n){Y_>n.priority?(Sg.add(n),hn.onStart(e1e)):(QW(n),hn(Lb))},advance:Lb,sort(n){if(Y_)hn.onFrame(()=>LE.sort(n));else{const e=Jo.indexOf(n);~e&&(Jo.splice(e,1),VW(n))}},clear(){Jo=[],Sg.clear()}};function e1e(){Sg.forEach(QW),Sg.clear(),hn(Lb)}function QW(n){Jo.includes(n)||VW(n)}function VW(n){Jo.splice(t1e(Jo,e=>e.priority>n.priority),0,n)}function Lb(n){const e=qC;for(let t=0;t<Jo.length;t++){const i=Jo[t];Y_=i.priority,i.idle||(u8(i),i.advance(n),i.idle||e.push(i))}return Y_=0,qC=Jo,qC.length=0,Jo=e,Jo.length>0}function t1e(n,e){const t=n.findIndex(e);return t<0?n.length:t}const n1e=(n,e,t)=>Math.min(Math.max(t,n),e),i1e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Oa="[-+]?\\d*\\.?\\d+",q_=Oa+"%";function FE(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const r1e=new RegExp("rgb"+FE(Oa,Oa,Oa)),s1e=new RegExp("rgba"+FE(Oa,Oa,Oa,Oa)),o1e=new RegExp("hsl"+FE(Oa,q_,q_)),a1e=new RegExp("hsla"+FE(Oa,q_,q_,Oa)),l1e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,c1e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,u1e=/^#([0-9a-fA-F]{6})$/,h1e=/^#([0-9a-fA-F]{8})$/;function f1e(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=u1e.exec(n))?parseInt(e[1]+"ff",16)>>>0:Du&&Du[n]!==void 0?Du[n]:(e=r1e.exec(n))?(kd(e[1])<<24|kd(e[2])<<16|kd(e[3])<<8|255)>>>0:(e=s1e.exec(n))?(kd(e[1])<<24|kd(e[2])<<16|kd(e[3])<<8|wF(e[4]))>>>0:(e=l1e.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=h1e.exec(n))?parseInt(e[1],16)>>>0:(e=c1e.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=o1e.exec(n))?(_F(EF(e[1]),_2(e[2]),_2(e[3]))|255)>>>0:(e=a1e.exec(n))?(_F(EF(e[1]),_2(e[2]),_2(e[3]))|wF(e[4]))>>>0:null}function KC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function _F(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=KC(r,i,n+1/3),o=KC(r,i,n),a=KC(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function kd(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function EF(n){return(parseFloat(n)%360+360)%360/360}function wF(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function _2(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function SF(n){let e=f1e(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}const vA=(n,e,t)=>{if(At.fun(n))return n;if(At.arr(n))return vA({range:n,output:e,extrapolate:t});if(At.str(n.output[0]))return c8(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=p1e(c,s);return d1e(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function d1e(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function p1e(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const m1e=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return n1e(0,1,r/n)},K_=1.70158,E2=K_*1.525,CF=K_+1,MF=2*Math.PI/3,bF=2*Math.PI/4.5,w2=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,g1e={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>CF*n*n*n-K_*n*n,easeOutBack:n=>1+CF*Math.pow(n-1,3)+K_*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((E2+1)*2*n-E2)/2:(Math.pow(2*n-2,2)*((E2+1)*(n*2-2)+E2)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*MF),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*MF)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*bF))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*bF)/2+1,easeInBounce:n=>1-w2(1-n),easeOutBounce:w2,easeInOutBounce:n=>n<.5?(1-w2(1-2*n))/2:(1+w2(2*n-1))/2,steps:m1e};function Fb(){return Fb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Fb.apply(this,arguments)}const Im=Symbol.for("FluidValue.get"),Rf=Symbol.for("FluidValue.observers"),ml=n=>!!(n&&n[Im]),Wo=n=>n&&n[Im]?n[Im]():n,TF=n=>n[Rf]||null;function A1e(n,e){n.eventObserved?n.eventObserved(e):n(e)}function J_(n,e){let t=n[Rf];t&&t.forEach(i=>{A1e(i,e)})}class v1e{constructor(e){if(this[Im]=void 0,this[Rf]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");y1e(this,e)}}const y1e=(n,e)=>WW(n,Im,e);function ov(n,e){if(n[Im]){let t=n[Rf];t||WW(n,Rf,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function Z_(n,e){let t=n[Rf];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[Rf]=null,n.observerRemoved&&n.observerRemoved(i,e)}}const WW=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Vx=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,x1e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,IF=new RegExp(`(${Vx.source})(%|[a-z]+)`,"i"),_1e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,OE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,jW=n=>{const[e,t]=E1e(n);if(!e||l8())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&OE.test(t))return jW(t);if(t)return t}return n},E1e=n=>{const e=OE.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]};let JC;const w1e=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,XW=n=>{JC||(JC=Du?new RegExp(`(${Object.keys(Du).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Wo(s).replace(OE,jW).replace(x1e,SF).replace(JC,SF)),t=e.map(s=>s.match(Vx).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>vA(Fb({},n,{output:s})));return s=>{var o;const a=!IF.test(e[0])&&((o=e.find(c=>IF.test(c)))==null?void 0:o.replace(Vx,""));let l=0;return e[0].replace(Vx,()=>`${r[l++](s)}${a||""}`).replace(_1e,w1e)}},h8="react-spring: ",YW=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${h8}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},S1e=YW(console.warn);function C1e(){S1e(`${h8}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const M1e=YW(console.warn);function b1e(){M1e(`${h8}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function UE(n){return At.str(n)&&(n[0]=="#"||/\d/.test(n)||!l8()&&OE.test(n)||n in(Du||{}))}const f8=l8()?w.useEffect:w.useLayoutEffect,T1e=()=>{const n=w.useRef(!1);return f8(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function qW(){const n=w.useState()[1],e=T1e();return()=>{e.current&&n(Math.random())}}function I1e(n,e){const[t]=w.useState(()=>({inputs:e,result:n()})),i=w.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&B1e(e,s.inputs)||(s={inputs:e,result:n()}):s=t,w.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function B1e(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const KW=n=>w.useEffect(n,P1e),P1e=[];function BF(n){const e=w.useRef();return w.useEffect(()=>{e.current=n}),e.current}const yA=Symbol.for("Animated:node"),R1e=n=>!!n&&n[yA]===n,dl=n=>n&&n[yA],d8=(n,e)=>Z0e(n,yA,e),zE=n=>n&&n[yA]&&n[yA].getPayload();class JW{constructor(){this.payload=void 0,d8(this,this)}getPayload(){return this.payload||[]}}class Ym extends JW{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,At.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Ym(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return At.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,At.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Bm extends Ym{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=vA({output:[e,e]})}static create(e){return new Bm(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(At.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=vA({output:[this.getValue(),e]})),this._value=0,super.reset()}}const $_={dependencies:null};class p8 extends JW{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Mc(this.source,(i,r)=>{R1e(i)?t[r]=i.getValue(e):ml(i)?t[r]=Wo(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Xn(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Mc(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){$_.dependencies&&ml(e)&&$_.dependencies.add(e);const t=zE(e);t&&Xn(t,i=>this.add(i))}}class m8 extends p8{constructor(e){super(e)}static create(e){return new m8(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(D1e)),!0)}}function D1e(n){return(UE(n)?Bm:Ym).create(n)}function Ob(n){const e=dl(n);return e?e.constructor:At.arr(n)?m8:UE(n)?Bm:Ym}function e3(){return e3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},e3.apply(this,arguments)}const PF=(n,e)=>{const t=!At.fun(n)||n.prototype&&n.prototype.isReactComponent;return w.forwardRef((i,r)=>{const s=w.useRef(null),o=t&&w.useCallback(m=>{s.current=O1e(r,m)},[r]),[a,l]=F1e(i,e),c=qW(),u=()=>{const m=s.current;if(t&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},h=new L1e(u,l),f=w.useRef();f8(()=>(f.current=h,Xn(l,m=>ov(m,h)),()=>{f.current&&(Xn(f.current.deps,m=>Z_(m,f.current)),hn.cancel(f.current.update))})),w.useEffect(u,[]),KW(()=>()=>{const m=f.current;Xn(m.deps,A=>Z_(A,m))});const d=e.getComponentProps(a.getValue());return w.createElement(n,e3({},d,{ref:o}))})};class L1e{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&hn.write(this.update)}}function F1e(n,e){const t=new Set;return $_.dependencies=t,n.style&&(n=e3({},n,{style:e.createAnimatedStyle(n.style)})),n=new p8(n),$_.dependencies=null,[n,t]}function O1e(n,e){return n&&(At.fun(n)?n(e):n.current=e),e}const RF=Symbol.for("AnimatedComponent"),U1e=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new p8(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=DF(o)||"Anonymous";return At.str(o)?o=s[o]||(s[o]=PF(o,r)):o=o[RF]||(o[RF]=PF(o,r)),o.displayName=`Animated(${a})`,o};return Mc(n,(o,a)=>{At.arr(n)&&(a=DF(o)),s[a]=s(o)}),{animated:s}},DF=n=>At.str(n)?n:n&&At.str(n.displayName)?n.displayName:At.fun(n)&&n.name||null;function Dr(){return Dr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Dr.apply(this,arguments)}function Yh(n,...e){return At.fun(n)?n(...e):n}const Cg=(n,e)=>n===!0||!!(e&&n&&(At.fun(n)?n(e):ta(n).includes(e))),ZW=(n,e)=>At.obj(n)?e&&n[e]:n,$W=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,z1e=n=>n,g8=(n,e=z1e)=>{let t=k1e;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);At.und(s)||(i[r]=s)}return i},k1e=["config","onProps","onStart","onChange","onPause","onResume","onRest"],N1e={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function G1e(n){const e={};let t=0;if(Mc(n,(i,r)=>{N1e[r]||(e[r]=i,t++)}),t)return e}function ej(n){const e=G1e(n);if(e){const t={to:e};return Mc(n,(i,r)=>r in e||(t[r]=i)),t}return Dr({},n)}function xA(n){return n=Wo(n),At.arr(n)?n.map(xA):UE(n)?Il.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function H1e(n){for(const e in n)return!0;return!1}function Ub(n){return At.fun(n)||At.arr(n)&&At.obj(n[0])}function Q1e(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function V1e(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const W1e={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},zb=Dr({},W1e.default,{mass:1,damping:1,easing:g1e.linear,clamp:!1});class j1e{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,zb)}}function X1e(n,e,t){t&&(t=Dr({},t),LF(t,e),e=Dr({},t,e)),LF(n,e),Object.assign(n,e);for(const o in zb)n[o]==null&&(n[o]=zb[o]);let{mass:i,frequency:r,damping:s}=n;return At.und(r)||(r<.01&&(r=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/r,2)*i,n.friction=4*Math.PI*s*i/r),n}function LF(n,e){if(!At.und(e.decay))n.duration=void 0;else{const t=!At.und(e.tension)||!At.und(e.friction);(t||!At.und(e.frequency)||!At.und(e.damping)||!At.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const FF=[];class Y1e{constructor(){this.changed=!1,this.values=FF,this.toValues=null,this.fromValues=FF,this.to=void 0,this.from=void 0,this.config=new j1e,this.immediate=!1}}function tj(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{var l;let c,u,h=Cg((l=t.cancel)!=null?l:i==null?void 0:i.cancel,e);if(h)m();else{At.und(t.pause)||(r.paused=Cg(t.pause,e));let A=i==null?void 0:i.pause;A!==!0&&(A=r.paused||Cg(A,e)),c=Yh(t.delay||0,e),A?(r.resumeQueue.add(d),s.pause()):(s.resume(),d())}function f(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),c=u.time-hn.now()}function d(){c>0&&!Il.skipAnimation?(r.delayed=!0,u=hn.setTimeout(m,c),r.pauseQueue.add(f),r.timeouts.add(u)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(f),r.timeouts.delete(u),n<=(r.cancelId||0)&&(h=!0);try{s.start(Dr({},t,{callId:n,cancel:h}),o)}catch(A){a(A)}}})}const A8=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?im(n.get()):e.every(t=>t.noop)?nj(n.get()):Da(n.get(),e.every(t=>t.finished)),nj=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Da=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),im=n=>({value:n,cancelled:!0,finished:!1});function ij(n,e,t,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const c=g8(e,(y,p)=>p==="onRest"?void 0:y);let u,h;const f=new Promise((y,p)=>(u=y,h=p)),d=y=>{const p=r<=(t.cancelId||0)&&im(i)||r!==t.asyncId&&Da(i,!1);if(p)throw y.result=p,h(y),y},m=(y,p)=>{const g=new OF,v=new UF;return(async()=>{if(Il.skipAnimation)throw _A(t),v.result=Da(i,!1),h(v),v;d(g);const E=At.obj(y)?Dr({},y):Dr({},p,{to:y});E.parentId=r,Mc(c,(C,M)=>{At.und(E[M])&&(E[M]=C)});const S=await i.start(E);return d(g),t.paused&&await new Promise(C=>{t.resumeQueue.add(C)}),S})()};let A;if(Il.skipAnimation)return _A(t),Da(i,!1);try{let y;At.arr(n)?y=(async p=>{for(const g of p)await m(g)})(n):y=Promise.resolve(n(m,i.stop.bind(i))),await Promise.all([y.then(u),f]),A=Da(i.get(),!0,!1)}catch(y){if(y instanceof OF)A=y.result;else if(y instanceof UF)A=y.result;else throw y}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return At.fun(o)&&hn.batchedUpdates(()=>{o(A,i,i.item)}),A})()}function _A(n,e){wg(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class OF extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class UF extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const kb=n=>n instanceof v8;let q1e=1;class v8 extends v1e{constructor(...e){super(...e),this.id=q1e++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=dl(this);return e&&e.getValue()}to(...e){return Il.to(this,e)}interpolate(...e){return C1e(),Il.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){J_(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||LE.sort(this),J_(this,{type:"priority",parent:this,priority:e})}}const Df=Symbol.for("SpringPhase"),rj=1,Nb=2,Gb=4,ZC=n=>(n[Df]&rj)>0,qc=n=>(n[Df]&Nb)>0,n1=n=>(n[Df]&Gb)>0,zF=(n,e)=>e?n[Df]|=Nb|rj:n[Df]&=~Nb,kF=(n,e)=>e?n[Df]|=Gb:n[Df]&=~Gb;class K1e extends v8{constructor(e,t){if(super(),this.key=void 0,this.animation=new Y1e,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!At.und(e)||!At.und(t)){const i=At.obj(e)?Dr({},e):Dr({},t,{from:e});At.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(qc(this)||this._state.asyncTo)||n1(this)}get goal(){return Wo(this.animation.to)}get velocity(){const e=dl(this);return e instanceof Ym?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return ZC(this)}get isAnimating(){return qc(this)}get isPaused(){return n1(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{config:s,toValues:o}=r;const a=zE(r.to);!a&&ml(r.to)&&(o=ta(Wo(r.to))),r.values.forEach((u,h)=>{if(u.done)return;const f=u.constructor==Bm?1:a?a[h].lastPosition:o[h];let d=r.immediate,m=f;if(!d){if(m=u.lastPosition,s.tension<=0){u.done=!0;return}let A=u.elapsedTime+=e;const y=r.fromValues[h],p=u.v0!=null?u.v0:u.v0=At.arr(s.velocity)?s.velocity[h]:s.velocity;let g;const v=s.precision||(y==f?.005:Math.min(1,Math.abs(f-y)*.001));if(At.und(s.duration))if(s.decay){const E=s.decay===!0?.998:s.decay,S=Math.exp(-(1-E)*A);m=y+p/(1-E)*(1-S),d=Math.abs(u.lastPosition-m)<=v,g=p*S}else{g=u.lastVelocity==null?p:u.lastVelocity;const E=s.restVelocity||v/10,S=s.clamp?0:s.bounce,C=!At.und(S),M=y==f?u.v0>0:y<f;let b,T=!1;const I=1,F=Math.ceil(e/I);for(let R=0;R<F&&(b=Math.abs(g)>E,!(!b&&(d=Math.abs(f-m)<=v,d)));++R){C&&(T=m==f||m>f==M,T&&(g=-g*S,m=f));const z=-s.tension*1e-6*(m-f),L=-s.friction*.001*g,H=(z+L)/s.mass;g=g+H*I,m=m+g*I}}else{let E=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,A=u.elapsedTime+=e)),E=(s.progress||0)+A/this._memoizedDuration,E=E>1?1:E<0?0:E,u.durationProgress=E),m=y+s.easing(E)*(f-y),g=(m-u.lastPosition)/e,d=E==1}u.lastVelocity=g,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),d=!0)}a&&!a[h].done&&(d=!1),d?u.done=!0:t=!1,u.setValue(m,s.round)&&(i=!0)});const l=dl(this),c=l.getValue();if(t){const u=Wo(r.to);(c!==u||i)&&!s.decay?(l.setValue(u),this._onChange(u)):i&&s.decay&&this._onChange(c),this._stop()}else i&&this._onChange(c)}set(e){return hn.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(qc(this)){const{to:e,config:t}=this.animation;hn.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return At.und(e)?(i=this.queue||[],this.queue=[]):i=[At.obj(e)?e:Dr({},t,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>A8(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),_A(this._state,e&&this._lastCallId),hn.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=At.obj(i)?i[t]:i,(i==null||Ub(i))&&(i=void 0),r=At.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return ZC(this)||(e.reverse&&([i,r]=[r,i]),r=Wo(r),At.und(r)?dl(this)||this._set(i):this._set(r)),s}_update(e,t){let i=Dr({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,g8(i,(l,c)=>/^on/.test(c)?ZW(l,r):l)),GF(this,i,"onProps"),r1(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return tj(++this._lastCallId,{key:r,props:i,defaultProps:s,state:a,actions:{pause:()=>{n1(this)||(kF(this,!0),W1(a.pauseQueue),r1(this,"onPause",Da(this,i1(this,this.animation.to)),this))},resume:()=>{n1(this)&&(kF(this,!1),qc(this)&&this._resume(),W1(a.resumeQueue),r1(this,"onResume",Da(this,i1(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(i.loop&&l.finished&&!(t&&l.noop)){const c=sj(i);if(c)return this._update(c,!0)}return l})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(im(this));const r=!At.und(e.to),s=!At.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(im(this));const{key:o,defaultProps:a,animation:l}=this,{to:c,from:u}=l;let{to:h=c,from:f=u}=e;s&&!r&&(!t.default||At.und(h))&&(h=f),t.reverse&&([h,f]=[f,h]);const d=!ic(f,u);d&&(l.from=f),f=Wo(f);const m=!ic(h,c);m&&this._focus(h);const A=Ub(t.to),{config:y}=l,{decay:p,velocity:g}=y;(r||s)&&(y.velocity=0),t.config&&!A&&X1e(y,Yh(t.config,o),t.config!==a.config?Yh(a.config,o):void 0);let v=dl(this);if(!v||At.und(h))return i(Da(this,!0));const E=At.und(t.reset)?s&&!t.default:!At.und(f)&&Cg(t.reset,o),S=E?f:this.get(),C=xA(h),M=At.num(C)||At.arr(C)||UE(C),b=!A&&(!M||Cg(a.immediate||t.immediate,o));if(m){const R=Ob(h);if(R!==v.constructor)if(b)v=this._set(C);else throw Error(`Cannot animate between ${v.constructor.name} and ${R.name}, as the "to" prop suggests`)}const T=v.constructor;let I=ml(h),F=!1;if(!I){const R=E||!ZC(this)&&d;(m||R)&&(F=ic(xA(S),C),I=!F),(!ic(l.immediate,b)&&!b||!ic(y.decay,p)||!ic(y.velocity,g))&&(I=!0)}if(F&&qc(this)&&(l.changed&&!E?I=!0:I||this._stop(c)),!A&&((I||ml(c))&&(l.values=v.getPayload(),l.toValues=ml(h)?null:T==Bm?[1]:ta(C)),l.immediate!=b&&(l.immediate=b,!b&&!E&&this._set(c)),I)){const{onRest:R}=l;Xn(Z1e,L=>GF(this,t,L));const z=Da(this,i1(this,c));W1(this._pendingCalls,z),this._pendingCalls.add(i),l.changed&&hn.batchedUpdates(()=>{l.changed=!E,R==null||R(z,this),E?Yh(a.onRest,z):l.onStart==null||l.onStart(z,this)})}E&&this._set(S),A?i(ij(t.to,t,this._state,this)):I?this._start():qc(this)&&!m?this._pendingCalls.add(i):i(nj(S))}_focus(e){const t=this.animation;e!==t.to&&(TF(this)&&this._detach(),t.to=e,TF(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ml(t)&&(ov(t,this),kb(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ml(e)&&Z_(e,this)}_set(e,t=!0){const i=Wo(e);if(!At.und(i)){const r=dl(this);if(!r||!ic(i,r.getValue())){const s=Ob(i);!r||r.constructor!=s?d8(this,s.create(i)):r.setValue(i),r&&hn.batchedUpdates(()=>{this._onChange(i,t)})}}return dl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,r1(this,"onStart",Da(this,i1(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Yh(this.animation.onChange,e,this)),Yh(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;dl(this).reset(Wo(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),qc(this)||(zF(this,!0),n1(this)||this._resume())}_resume(){Il.skipAnimation?this.finish():LE.start(this)}_stop(e,t){if(qc(this)){zF(this,!1);const i=this.animation;Xn(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),J_(this,{type:"idle",parent:this});const r=t?im(this.get()):Da(this.get(),i1(this,e??i.to));W1(this._pendingCalls,r),i.changed&&(i.changed=!1,r1(this,"onRest",r,this))}}}function i1(n,e){const t=xA(e),i=xA(n.get());return ic(i,t)}function sj(n,e=n.loop,t=n.to){let i=Yh(e);if(i){const r=i!==!0&&ej(i),s=(r||n).reverse,o=!r||r.reset;return EA(Dr({},n,{loop:e,default:!1,pause:void 0,to:!s||Ub(t)?t:void 0,from:o?n.from:void 0,reset:o},r))}}function EA(n){const{to:e,from:t}=n=ej(n),i=new Set;return At.obj(e)&&NF(e,i),At.obj(t)&&NF(t,i),n.keys=i.size?Array.from(i):null,n}function J1e(n){const e=EA(n);return At.und(e.default)&&(e.default=g8(e)),e}function NF(n,e){Mc(n,(t,i)=>t!=null&&e.add(i))}const Z1e=["onStart","onRest","onChange","onPause","onResume"];function GF(n,e,t){n.animation[t]=e[t]!==$W(e,t)?ZW(e[t],n.key):void 0}function r1(n,e,...t){var i,r,s,o;(i=(r=n.animation)[e])==null||i.call(r,...t),(s=(o=n.defaultProps)[e])==null||s.call(o,...t)}const $1e=["onStart","onChange","onRest"];let ege=1;class tge{constructor(e,t){this.id=ege++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(Dr({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];At.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(EA(e)),this}start(e){let{queue:t}=this;return e?t=ta(e).map(EA):this.queue=[],this._flush?this._flush(this,t):(uj(this,t),Hb(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;Xn(ta(t),r=>i[r].stop(!!e))}else _A(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(At.und(e))this.start({pause:!0});else{const t=this.springs;Xn(ta(e),i=>t[i].pause())}return this}resume(e){if(At.und(e))this.start({pause:!1});else{const t=this.springs;Xn(ta(e),i=>t[i].resume())}return this}each(e){Mc(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,wg(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const o=!r&&this._started,a=s||o&&i.size?this.get():null;s&&t.size&&wg(t,([l,c])=>{c.value=a,l(c,this,this._item)}),o&&(this._started=!1,wg(i,([l,c])=>{c.value=a,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;hn.onFrame(this._onFrame)}}function Hb(n,e){return Promise.all(e.map(t=>oj(n,t))).then(t=>A8(n,t))}async function oj(n,e,t){const{keys:i,to:r,from:s,loop:o,onRest:a,onResolve:l}=e,c=At.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const u=At.arr(r)||At.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Xn($1e,A=>{const y=e[A];if(At.fun(y)){const p=n._events[A];e[A]=({finished:g,cancelled:v})=>{const E=p.get(y);E?(g||(E.finished=!1),v&&(E.cancelled=!0)):p.set(y,{value:null,finished:g||!1,cancelled:v||!1})},c&&(c[A]=e[A])}});const h=n._state;e.pause===!h.paused?(h.paused=e.pause,W1(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const f=(i||Object.keys(n.springs)).map(A=>n.springs[A].start(e)),d=e.cancel===!0||$W(e,"cancel")===!0;(u||d&&h.asyncId)&&f.push(tj(++n._lastAsyncId,{props:e,state:h,actions:{pause:Db,resume:Db,start(A,y){d?(_A(h,n._lastAsyncId),y(im(n))):(A.onRest=a,y(ij(u,A,h,n)))}}})),h.paused&&await new Promise(A=>{h.resumeQueue.add(A)});const m=A8(n,await Promise.all(f));if(o&&m.finished&&!(t&&m.noop)){const A=sj(e,o,r);if(A)return uj(n,[A]),oj(n,A,!0)}return l&&hn.batchedUpdates(()=>l(m,n,n.item)),m}function HF(n,e){const t=Dr({},n.springs);return e&&Xn(ta(e),i=>{At.und(i.keys)&&(i=EA(i)),At.obj(i.to)||(i=Dr({},i,{to:void 0})),cj(t,i,r=>lj(r))}),aj(n,t),t}function aj(n,e){Mc(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,ov(t,n))})}function lj(n,e){const t=new K1e;return t.key=n,e&&ov(t,e),t}function cj(n,e,t){e.keys&&Xn(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function uj(n,e){Xn(e,t=>{cj(n.springs,t,i=>lj(i,n))})}function nge(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const ige=["children"],kE=n=>{let{children:e}=n,t=nge(n,ige);const i=w.useContext(t3),r=t.pause||!!i.pause,s=t.immediate||!!i.immediate;t=I1e(()=>({pause:r,immediate:s}),[r,s]);const{Provider:o}=t3;return w.createElement(o,{value:t},e)},t3=rge(kE,{});kE.Provider=t3.Provider;kE.Consumer=t3.Consumer;function rge(n,e){return Object.assign(n,w.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const sge=()=>{const n=[],e=function(r){b1e();const s=[];return Xn(n,(o,a)=>{if(At.und(r))s.push(o.start());else{const l=t(r,o,a);l&&s.push(o.start(l))}}),s};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return Xn(n,i=>i.pause(...arguments)),this},e.resume=function(){return Xn(n,i=>i.resume(...arguments)),this},e.set=function(i){Xn(n,r=>r.set(i))},e.start=function(i){const r=[];return Xn(n,(s,o)=>{if(At.und(i))r.push(s.start());else{const a=this._getProps(i,s,o);a&&r.push(s.start(a))}}),r},e.stop=function(){return Xn(n,i=>i.stop(...arguments)),this},e.update=function(i){return Xn(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(r,s,o){return At.fun(r)?r(o,s):r};return e._getProps=t,e};function oge(n,e,t){const i=At.fun(e)&&e;i&&!t&&(t=[]);const r=w.useMemo(()=>i||arguments.length==3?sge():void 0,[]),s=w.useRef(0),o=qW(),a=w.useMemo(()=>({ctrls:[],queue:[],flush(p,g){const v=HF(p,g);return s.current>0&&!a.queue.length&&!Object.keys(v).some(S=>!p.springs[S])?Hb(p,g):new Promise(S=>{aj(p,v),a.queue.push(()=>{S(Hb(p,g))}),o()})}}),[]),l=w.useRef([...a.ctrls]),c=[],u=BF(n)||0;w.useMemo(()=>{Xn(l.current.slice(n,u),p=>{Q1e(p,r),p.stop(!0)}),l.current.length=n,h(u,n)},[n]),w.useMemo(()=>{h(0,Math.min(u,n))},t);function h(p,g){for(let v=p;v<g;v++){const E=l.current[v]||(l.current[v]=new tge(null,a.flush)),S=i?i(v,E):e[v];S&&(c[v]=J1e(S))}}const f=l.current.map((p,g)=>HF(p,c[g])),d=w.useContext(kE),m=BF(d),A=d!==m&&H1e(d);f8(()=>{s.current++,a.ctrls=l.current;const{queue:p}=a;p.length&&(a.queue=[],Xn(p,g=>g())),Xn(l.current,(g,v)=>{r==null||r.add(g),A&&g.start({default:d});const E=c[v];E&&(V1e(g,E.ref),g.ref?g.queue.push(E):g.start(E))})}),KW(()=>()=>{Xn(a.ctrls,p=>p.stop(!0))});const y=f.map(p=>Dr({},p));return r?[y,r]:y}function age(n,e){const t=At.fun(n),[[i],r]=oge(1,t?n:[n],t?[]:e);return t||arguments.length==2?[i,r]:i}let QF;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(QF||(QF={}));class lge extends v8{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=vA(...t);const i=this._get(),r=Ob(i);d8(this,r.create(i))}advance(e){const t=this._get(),i=this.get();ic(t,i)||(dl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&VF(this._active)&&$C(this)}_get(){const e=At.arr(this.source)?this.source.map(Wo):ta(Wo(this.source));return this.calc(...e)}_start(){this.idle&&!VF(this._active)&&(this.idle=!1,Xn(zE(this),e=>{e.done=!1}),Il.skipAnimation?(hn.batchedUpdates(()=>this.advance()),$C(this)):LE.start(this))}_attach(){let e=1;Xn(ta(this.source),t=>{ml(t)&&ov(t,this),kb(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Xn(ta(this.source),e=>{ml(e)&&Z_(e,this)}),this._active.clear(),$C(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ta(this.source).reduce((t,i)=>Math.max(t,(kb(i)?i.priority:0)+1),0))}}function cge(n){return n.idle!==!1}function VF(n){return!n.size||Array.from(n).every(cge)}function $C(n){n.idle||(n.idle=!0,Xn(zE(n),e=>{e.done=!0}),J_(n,{type:"idle",parent:n}))}Il.assign({createStringInterpolator:XW,to:(n,e)=>new lge(n,e)});const uge=["primitive"].concat(Object.keys(pE).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Il.assign({createStringInterpolator:XW,colors:i1e,frameLoop:"demand"});XA(()=>{hn.advance()});const hge=U1e(uge,{applyAnimatedValues:sr}),fge=hge.animated;function dge({enabled:n=!0,snap:e,global:t,domElement:i,cursor:r=!0,children:s,speed:o=1,rotation:a=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:h={mass:1,tension:170,friction:26}}){const f=Se(C=>C.events),d=Se(C=>C.gl),m=i||f.connected||d.domElement,{size:A}=Se(),y=w.useMemo(()=>[a[0]+c[0],a[0]+c[1]],[a[0],c[0],c[1]]),p=w.useMemo(()=>[a[1]+u[0],a[1]+u[1]],[a[1],u[0],u[1]]),g=w.useMemo(()=>[Dt.clamp(a[0],...y),Dt.clamp(a[1],...p),a[2]],[a[0],a[1],a[2],y,p]),[v,E]=age(()=>({scale:1,rotation:g,config:h}));w.useEffect(()=>void E.start({scale:1,rotation:g,config:h}),[g]),w.useEffect(()=>{if(t&&r&&n)return m.style.cursor="grab",d.domElement.style.cursor="",()=>{m.style.cursor="default",d.domElement.style.cursor="default"}},[t,r,m,n]);const S=MW({onHover:({last:C})=>{r&&!t&&n&&(m.style.cursor=C?"auto":"grab")},onDrag:({down:C,delta:[M,b],memo:[T,I]=v.rotation.animation.to||g})=>{if(!n)return[b,M];r&&(m.style.cursor=C?"grabbing":"grab"),M=Dt.clamp(I+M/A.width*Math.PI*o,...p),b=Dt.clamp(T+b/A.height*Math.PI*o,...y);const F=e&&!C&&typeof e!="boolean"?e:h;return E.start({scale:C&&b>y[1]/2?l:1,rotation:e&&!C?g:[b,M,0],config:R=>R==="scale"?{...F,friction:F.friction*3}:F}),[b,M]}},{target:t?m:void 0});return w.createElement(fge.group,Ye({},S==null?void 0:S(),v),s)}const pge=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let h=o(i.getState());c=f=>{const d=o(f);if(!u(h,d)){const m=h;a(h=d,m)}},l!=null&&l.fireImmediately&&a(h,h)}return r(c)},n(e,t,i)},hj=w.createContext(null);function mge({map:n,children:e,onChange:t,domElement:i}){const r=n.map(l=>l.name+l.keys).join("-"),s=w.useMemo(()=>mE(pge(()=>n.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[r]),o=w.useMemo(()=>[s.subscribe,s.getState,s],[r]),a=s.setState;return w.useEffect(()=>{const c=n.map(({name:d,keys:m,up:A})=>({keys:m,up:A,fn:y=>{a({[d]:y}),t&&t(d,y,o[1]())}})).reduce((d,{keys:m,fn:A,up:y=!0})=>(m.forEach(p=>d[p]={fn:A,pressed:!1,up:y}),d),{}),u=({key:d,code:m})=>{const A=c[d]||c[m];if(!A)return;const{fn:y,pressed:p,up:g}=A;A.pressed=!0,(g||!p)&&y(!0)},h=({key:d,code:m})=>{const A=c[d]||c[m];if(!A)return;const{fn:y,up:p}=A;A.pressed=!1,p&&y(!1)},f=i||window;return f.addEventListener("keydown",u,{passive:!0}),f.addEventListener("keyup",h,{passive:!0}),()=>{f.removeEventListener("keydown",u),f.removeEventListener("keyup",h)}},[i,r]),w.createElement(hj.Provider,{value:o,children:e})}function gge(n){const[e,t,i]=w.useContext(hj);return n?i(n):[e,t]}var Age=Object.defineProperty,vge=(n,e,t)=>e in n?Age(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,s1=(n,e,t)=>(vge(n,typeof e!="symbol"?e+"":e,t),t);const vp=4,rm=1024,Al=4,yge=(n=1)=>{const e=new Float32Array(rm*Al*n*vp),t=new qs(e,rm,Al*n,Dn,En);return t.wrapS=Fr,t.wrapT=Fr,t.magFilter=rn,t.needsUpdate=!0,t},xge=(n,e,t=0)=>{const i=Math.floor(rm*(Al/4));e.arcLengthDivisions=i/2,e.updateArcLengths();const r=e.getSpacedPoints(i),s=e.computeFrenetFrames(i,!0);for(let o=0;o<i;o++){const a=Math.floor(o/rm),l=o%rm;let c=r[o];S2(n,l,c.x,c.y,c.z,0+a+Al*t),c=s.tangents[o],S2(n,l,c.x,c.y,c.z,1+a+Al*t),c=s.normals[o],S2(n,l,c.x,c.y,c.z,2+a+Al*t),c=s.binormals[o],S2(n,l,c.x,c.y,c.z,3+a+Al*t)}n.needsUpdate=!0},S2=(n,e,t,i,r,s)=>{const o=n.image,{data:a}=o,l=vp*rm*s;a[e*vp+l+0]=t,a[e*vp+l+1]=i,a[e*vp+l+2]=r,a[e*vp+l+3]=1},_ge=n=>({spineTexture:{value:n},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function Ege(n,e,t=1){n.__ok||(n.__ok=!0,n.onBeforeCompile=i=>{if(i.__modified)return;i.__modified=!0,Object.assign(i.uniforms,e);const r=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Al*t}.;
		float textureStacks = ${Al/4}.;

		${i.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Al}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);i.vertexShader=r})}class wge{constructor(e,t=1){s1(this,"curveArray"),s1(this,"curveLengthArray"),s1(this,"object3D"),s1(this,"splineTexure"),s1(this,"uniforms");const i=e.clone(),r=yge(t),s=_ge(r);i.traverse(o=>{(o instanceof ct||o instanceof NA)&&(o.material=o.material.clone(),Ege(o.material,s,t))}),this.curveArray=new Array(t),this.curveLengthArray=new Array(t),this.object3D=i,this.splineTexure=r,this.uniforms=s}updateCurve(e,t){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const i=t.getLength();this.uniforms.spineLength.value=i,this.curveLengthArray[e]=i,this.curveArray[e]=t,xge(this.splineTexure,t,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new Oe;function Sge(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=n.getIndex(),r=n.getAttribute("position"),s=i?i.count:r.count;let o=0;const a=Object.keys(n.attributes),l={},c={},u=[],h=["getX","getY","getZ","getW"];for(let A=0,y=a.length;A<y;A++){const p=a[A];l[p]=[];const g=n.morphAttributes[p];g&&(c[p]=new Array(g.length).fill(0).map(()=>[]))}const f=Math.log10(1/e),d=Math.pow(10,f);for(let A=0;A<s;A++){const y=i?i.getX(A):A;let p="";for(let g=0,v=a.length;g<v;g++){const E=a[g],S=n.getAttribute(E),C=S.itemSize;for(let M=0;M<C;M++)p+=`${~~(S[h[M]](y)*d)},`}if(p in t)u.push(t[p]);else{for(let g=0,v=a.length;g<v;g++){const E=a[g],S=n.getAttribute(E),C=n.morphAttributes[E],M=S.itemSize,b=l[E],T=c[E];for(let I=0;I<M;I++){const F=h[I];if(b.push(S[F](y)),C)for(let R=0,z=C.length;R<z;R++)T[R].push(C[R][F](y))}}t[p]=o,u.push(o),o++}}const m=n.clone();for(let A=0,y=a.length;A<y;A++){const p=a[A],g=n.getAttribute(p),v=new g.array.constructor(l[p]),E=new zt(v,g.itemSize,g.normalized);if(m.setAttribute(p,E),p in c)for(let S=0;S<c[p].length;S++){const C=n.morphAttributes[p][S],M=new C.array.constructor(c[p][S]),b=new zt(M,C.itemSize,C.normalized);m.morphAttributes[p][S]=b}}return m.setIndex(u),m}function WF(n,e){if(e===GH)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===D_||e===XI){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===D_)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function fj(n,e=Math.PI/3){const t=Math.cos(e),i=(1+1e-10)*100,r=[new D,new D,new D],s=new D,o=new D,a=new D,l=new D;function c(A){const y=~~(A.x*i),p=~~(A.y*i),g=~~(A.z*i);return`${y},${p},${g}`}const u=n.index?n.toNonIndexed():n,h=u.attributes.position,f={};for(let A=0,y=h.count/3;A<y;A++){const p=3*A,g=r[0].fromBufferAttribute(h,p+0),v=r[1].fromBufferAttribute(h,p+1),E=r[2].fromBufferAttribute(h,p+2);s.subVectors(E,v),o.subVectors(g,v);const S=new D().crossVectors(s,o).normalize();for(let C=0;C<3;C++){const M=r[C],b=c(M);b in f||(f[b]=[]),f[b].push(S)}}const d=new Float32Array(h.count*3),m=new zt(d,3,!1);for(let A=0,y=h.count/3;A<y;A++){const p=3*A,g=r[0].fromBufferAttribute(h,p+0),v=r[1].fromBufferAttribute(h,p+1),E=r[2].fromBufferAttribute(h,p+2);s.subVectors(E,v),o.subVectors(g,v),a.crossVectors(s,o).normalize();for(let S=0;S<3;S++){const C=r[S],M=c(C),b=f[M];l.set(0,0,0);for(let T=0,I=b.length;T<I;T++){const F=b[T];a.dot(F)>t&&l.add(F)}l.normalize(),m.setXYZ(p+S,l.x,l.y,l.z)}}return u.setAttribute("normal",m),u}const dj=parseInt(ja.replace(/\D+/g,""));var Zo=Uint8Array,gu=Uint16Array,Qb=Uint32Array,pj=new Zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mj=new Zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cge=new Zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gj=function(n,e){for(var t=new gu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Qb(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},Aj=gj(pj,2),vj=Aj[0],Mge=Aj[1];vj[28]=258,Mge[258]=28;var bge=gj(mj,0),Tge=bge[0],Vb=new gu(32768);for(var pi=0;pi<32768;++pi){var Kc=(pi&43690)>>>1|(pi&21845)<<1;Kc=(Kc&52428)>>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>>4|(Kc&3855)<<4,Vb[pi]=((Kc&65280)>>>8|(Kc&255)<<8)>>>1}var Mg=function(n,e,t){for(var i=n.length,r=0,s=new gu(e);r<i;++r)++s[n[r]-1];var o=new gu(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new gu(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],h=o[n[r]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[Vb[h]>>>l]=c}else for(a=new gu(i),r=0;r<i;++r)n[r]&&(a[r]=Vb[o[n[r]-1]++]>>>15-n[r]);return a},av=new Zo(288);for(var pi=0;pi<144;++pi)av[pi]=8;for(var pi=144;pi<256;++pi)av[pi]=9;for(var pi=256;pi<280;++pi)av[pi]=7;for(var pi=280;pi<288;++pi)av[pi]=8;var yj=new Zo(32);for(var pi=0;pi<32;++pi)yj[pi]=5;var Ige=Mg(av,9,1),Bge=Mg(yj,5,1),e4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},_a=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},t4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Pge=function(n){return(n/8|0)+(n&7&&1)},Rge=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof gu?gu:n instanceof Qb?Qb:Zo)(t-e);return i.set(n.subarray(e,t)),i},Dge=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Zo(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Zo(i*3));var o=function(j){var X=e.length;if(j>X){var se=new Zo(Math.max(X*2,j));se.set(e),e=se}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,h=t.d,f=t.m,d=t.n,m=i*8;do{if(!u){t.f=a=_a(n,l,1);var A=_a(n,l+1,3);if(l+=3,A)if(A==1)u=Ige,h=Bge,f=9,d=5;else if(A==2){var v=_a(n,l,31)+257,E=_a(n,l+10,15)+4,S=v+_a(n,l+5,31)+1;l+=14;for(var C=new Zo(S),M=new Zo(19),b=0;b<E;++b)M[Cge[b]]=_a(n,l+b*3,7);l+=E*3;for(var T=e4(M),I=(1<<T)-1,F=Mg(M,T,1),b=0;b<S;){var R=F[_a(n,l,I)];l+=R&15;var y=R>>>4;if(y<16)C[b++]=y;else{var z=0,L=0;for(y==16?(L=3+_a(n,l,3),l+=2,z=C[b-1]):y==17?(L=3+_a(n,l,7),l+=3):y==18&&(L=11+_a(n,l,127),l+=7);L--;)C[b++]=z}}var H=C.subarray(0,v),K=C.subarray(v);f=e4(H),d=e4(K),u=Mg(H,f,1),h=Mg(K,d,1)}else throw"invalid block type";else{var y=Pge(l)+4,p=n[y-4]|n[y-3]<<8,g=y+p;if(g>i){if(s)throw"unexpected EOF";break}r&&o(c+p),e.set(n.subarray(y,g),c),t.b=c+=p,t.p=l=g*8;continue}if(l>m){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var J=(1<<f)-1,O=(1<<d)-1,W=l;;W=l){var z=u[t4(n,l)&J],V=z>>>4;if(l+=z&15,l>m){if(s)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(V<256)e[c++]=V;else if(V==256){W=l,u=null;break}else{var U=V-254;if(V>264){var b=V-257,Y=pj[b];U=_a(n,l,(1<<Y)-1)+vj[b],l+=Y}var $=h[t4(n,l)&O],N=$>>>4;if(!$)throw"invalid distance";l+=$&15;var K=Tge[N];if(N>3){var Y=mj[N];K+=t4(n,l)&(1<<Y)-1,l+=Y}if(l>m){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Q=c+U;c<Q;c+=4)e[c]=e[c-K],e[c+1]=e[c+1-K],e[c+2]=e[c+2-K],e[c+3]=e[c+3-K];c=Q}}t.l=u,t.p=W,t.b=c,u&&(a=1,t.m=f,t.d=h,t.n=d)}while(!a);return c==e.length?e:Rge(e,0,c)},Lge=new Zo(0),Fge=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function j1(n,e){return Dge((Fge(n),n.subarray(2,-4)),e)}var Oge=typeof TextDecoder<"u"&&new TextDecoder,Uge=0;try{Oge.decode(Lge,{stream:!0}),Uge=1}catch{}let zge=class extends ct{constructor(e,t,i=!1,r=!1,s=1e4){const o=new It;super(o,t),this.isMarchingCubes=!0;const a=this,l=new Float32Array(12*3),c=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=i,this.enableColors=r,this.init=function(g){this.resolution=g,this.isolation=80,this.size=g,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const v=s*3;this.positionArray=new Float32Array(v*3);const E=new zt(this.positionArray,3);E.setUsage(os),o.setAttribute("position",E),this.normalArray=new Float32Array(v*3);const S=new zt(this.normalArray,3);if(S.setUsage(os),o.setAttribute("normal",S),this.enableUvs){this.uvArray=new Float32Array(v*2);const C=new zt(this.uvArray,2);C.setUsage(os),o.setAttribute("uv",C)}if(this.enableColors){this.colorArray=new Float32Array(v*3);const C=new zt(this.colorArray,3);C.setUsage(os),o.setAttribute("color",C)}o.boundingSphere=new vi(new D,1)};function h(g,v,E){return g+(v-g)*E}function f(g,v,E,S,C,M,b,T,I,F){const R=(E-b)/(T-b),z=a.normal_cache;l[v+0]=S+R*a.delta,l[v+1]=C,l[v+2]=M,c[v+0]=h(z[g+0],z[g+3],R),c[v+1]=h(z[g+1],z[g+4],R),c[v+2]=h(z[g+2],z[g+5],R),u[v+0]=h(a.palette[I*3+0],a.palette[F*3+0],R),u[v+1]=h(a.palette[I*3+1],a.palette[F*3+1],R),u[v+2]=h(a.palette[I*3+2],a.palette[F*3+2],R)}function d(g,v,E,S,C,M,b,T,I,F){const R=(E-b)/(T-b),z=a.normal_cache;l[v+0]=S,l[v+1]=C+R*a.delta,l[v+2]=M;const L=g+a.yd*3;c[v+0]=h(z[g+0],z[L+0],R),c[v+1]=h(z[g+1],z[L+1],R),c[v+2]=h(z[g+2],z[L+2],R),u[v+0]=h(a.palette[I*3+0],a.palette[F*3+0],R),u[v+1]=h(a.palette[I*3+1],a.palette[F*3+1],R),u[v+2]=h(a.palette[I*3+2],a.palette[F*3+2],R)}function m(g,v,E,S,C,M,b,T,I,F){const R=(E-b)/(T-b),z=a.normal_cache;l[v+0]=S,l[v+1]=C,l[v+2]=M+R*a.delta;const L=g+a.zd*3;c[v+0]=h(z[g+0],z[L+0],R),c[v+1]=h(z[g+1],z[L+1],R),c[v+2]=h(z[g+2],z[L+2],R),u[v+0]=h(a.palette[I*3+0],a.palette[F*3+0],R),u[v+1]=h(a.palette[I*3+1],a.palette[F*3+1],R),u[v+2]=h(a.palette[I*3+2],a.palette[F*3+2],R)}function A(g){const v=g*3;a.normal_cache[v]===0&&(a.normal_cache[v+0]=a.field[g-1]-a.field[g+1],a.normal_cache[v+1]=a.field[g-a.yd]-a.field[g+a.yd],a.normal_cache[v+2]=a.field[g-a.zd]-a.field[g+a.zd])}function y(g,v,E,S,C){const M=S+1,b=S+a.yd,T=S+a.zd,I=M+a.yd,F=M+a.zd,R=S+a.yd+a.zd,z=M+a.yd+a.zd;let L=0;const H=a.field[S],K=a.field[M],J=a.field[b],O=a.field[I],W=a.field[T],V=a.field[F],U=a.field[R],Y=a.field[z];H<C&&(L|=1),K<C&&(L|=2),J<C&&(L|=8),O<C&&(L|=4),W<C&&(L|=16),V<C&&(L|=32),U<C&&(L|=128),Y<C&&(L|=64);const $=kge[L];if($===0)return 0;const N=a.delta,Q=g+N,j=v+N,X=E+N;$&1&&(A(S),A(M),f(S*3,0,C,g,v,E,H,K,S,M)),$&2&&(A(M),A(I),d(M*3,3,C,Q,v,E,K,O,M,I)),$&4&&(A(b),A(I),f(b*3,6,C,g,j,E,J,O,b,I)),$&8&&(A(S),A(b),d(S*3,9,C,g,v,E,H,J,S,b)),$&16&&(A(T),A(F),f(T*3,12,C,g,v,X,W,V,T,F)),$&32&&(A(F),A(z),d(F*3,15,C,Q,v,X,V,Y,F,z)),$&64&&(A(R),A(z),f(R*3,18,C,g,j,X,U,Y,R,z)),$&128&&(A(T),A(R),d(T*3,21,C,g,v,X,W,U,T,R)),$&256&&(A(S),A(T),m(S*3,24,C,g,v,E,H,W,S,T)),$&512&&(A(M),A(F),m(M*3,27,C,Q,v,E,K,V,M,F)),$&1024&&(A(I),A(z),m(I*3,30,C,Q,j,E,O,Y,I,z)),$&2048&&(A(b),A(R),m(b*3,33,C,g,j,E,J,U,b,R)),L<<=4;let se,ve,de,he=0,te=0;for(;C2[L+te]!=-1;)se=L+te,ve=se+1,de=se+2,p(l,c,u,3*C2[se],3*C2[ve],3*C2[de]),te+=3,he++;return he}function p(g,v,E,S,C,M){const b=a.count*3;if(a.positionArray[b+0]=g[S],a.positionArray[b+1]=g[S+1],a.positionArray[b+2]=g[S+2],a.positionArray[b+3]=g[C],a.positionArray[b+4]=g[C+1],a.positionArray[b+5]=g[C+2],a.positionArray[b+6]=g[M],a.positionArray[b+7]=g[M+1],a.positionArray[b+8]=g[M+2],a.material.flatShading===!0){const T=(v[S+0]+v[C+0]+v[M+0])/3,I=(v[S+1]+v[C+1]+v[M+1])/3,F=(v[S+2]+v[C+2]+v[M+2])/3;a.normalArray[b+0]=T,a.normalArray[b+1]=I,a.normalArray[b+2]=F,a.normalArray[b+3]=T,a.normalArray[b+4]=I,a.normalArray[b+5]=F,a.normalArray[b+6]=T,a.normalArray[b+7]=I,a.normalArray[b+8]=F}else a.normalArray[b+0]=v[S+0],a.normalArray[b+1]=v[S+1],a.normalArray[b+2]=v[S+2],a.normalArray[b+3]=v[C+0],a.normalArray[b+4]=v[C+1],a.normalArray[b+5]=v[C+2],a.normalArray[b+6]=v[M+0],a.normalArray[b+7]=v[M+1],a.normalArray[b+8]=v[M+2];if(a.enableUvs){const T=a.count*2;a.uvArray[T+0]=g[S+0],a.uvArray[T+1]=g[S+2],a.uvArray[T+2]=g[C+0],a.uvArray[T+3]=g[C+2],a.uvArray[T+4]=g[M+0],a.uvArray[T+5]=g[M+2]}a.enableColors&&(a.colorArray[b+0]=E[S+0],a.colorArray[b+1]=E[S+1],a.colorArray[b+2]=E[S+2],a.colorArray[b+3]=E[C+0],a.colorArray[b+4]=E[C+1],a.colorArray[b+5]=E[C+2],a.colorArray[b+6]=E[M+0],a.colorArray[b+7]=E[M+1],a.colorArray[b+8]=E[M+2]),a.count+=3}this.addBall=function(g,v,E,S,C,M){const b=Math.sign(S);S=Math.abs(S);const T=M!=null;let I=new We(g,v,E);if(T)try{I=M instanceof We?M:Array.isArray(M)?new We(Math.min(Math.abs(M[0]),1),Math.min(Math.abs(M[1]),1),Math.min(Math.abs(M[2]),1)):new We(M)}catch{I=new We(g,v,E)}const F=this.size*Math.sqrt(S/C),R=E*this.size,z=v*this.size,L=g*this.size;let H=Math.floor(R-F);H<1&&(H=1);let K=Math.floor(R+F);K>this.size-1&&(K=this.size-1);let J=Math.floor(z-F);J<1&&(J=1);let O=Math.floor(z+F);O>this.size-1&&(O=this.size-1);let W=Math.floor(L-F);W<1&&(W=1);let V=Math.floor(L+F);V>this.size-1&&(V=this.size-1);let U,Y,$,N,Q,j,X,se,ve,de,he;for($=H;$<K;$++)for(Q=this.size2*$,se=$/this.size-E,ve=se*se,Y=J;Y<O;Y++)for(N=Q+this.size*Y,X=Y/this.size-v,de=X*X,U=W;U<V;U++)if(j=U/this.size-g,he=S/(1e-6+j*j+de+ve)-C,he>0){this.field[N+U]+=he*b;const te=Math.sqrt((U-L)*(U-L)+(Y-z)*(Y-z)+($-R)*($-R))/F,xe=1-te*te*te*(te*(te*6-15)+10);this.palette[(N+U)*3+0]+=I.r*xe,this.palette[(N+U)*3+1]+=I.g*xe,this.palette[(N+U)*3+2]+=I.b*xe}},this.addPlaneX=function(g,v){const E=this.size,S=this.yd,C=this.zd,M=this.field;let b,T,I,F,R,z,L,H=E*Math.sqrt(g/v);for(H>E&&(H=E),b=0;b<H;b++)if(z=b/E,F=z*z,R=g/(1e-4+F)-v,R>0)for(T=0;T<E;T++)for(L=b+T*S,I=0;I<E;I++)M[C*I+L]+=R},this.addPlaneY=function(g,v){const E=this.size,S=this.yd,C=this.zd,M=this.field;let b,T,I,F,R,z,L,H,K=E*Math.sqrt(g/v);for(K>E&&(K=E),T=0;T<K;T++)if(z=T/E,F=z*z,R=g/(1e-4+F)-v,R>0)for(L=T*S,b=0;b<E;b++)for(H=L+b,I=0;I<E;I++)M[C*I+H]+=R},this.addPlaneZ=function(g,v){const E=this.size,S=this.yd,C=this.zd,M=this.field;let b,T,I,F,R,z,L,H,K=E*Math.sqrt(g/v);for(K>E&&(K=E),I=0;I<K;I++)if(z=I/E,F=z*z,R=g/(1e-4+F)-v,R>0)for(L=C*I,T=0;T<E;T++)for(H=L+T*S,b=0;b<E;b++)M[H+b]+=R},this.setCell=function(g,v,E,S){const C=this.size2*E+this.size*v+g;this.field[C]=S},this.getCell=function(g,v,E){const S=this.size2*E+this.size*v+g;return this.field[S]},this.blur=function(g=1){const v=this.field,E=v.slice(),S=this.size,C=this.size2;for(let M=0;M<S;M++)for(let b=0;b<S;b++)for(let T=0;T<S;T++){const I=C*T+S*b+M;let F=E[I],R=1;for(let z=-1;z<=1;z+=2){const L=z+M;if(!(L<0||L>=S))for(let H=-1;H<=1;H+=2){const K=H+b;if(!(K<0||K>=S))for(let J=-1;J<=1;J+=2){const O=J+T;if(O<0||O>=S)continue;const W=C*O+S*K+L,V=E[W];R++,F+=g*(V-F)/R}}}v[I]=F}},this.reset=function(){for(let g=0;g<this.size3;g++)this.normal_cache[g*3]=0,this.field[g]=0,this.palette[g*3]=this.palette[g*3+1]=this.palette[g*3+2]=0},this.update=function(){this.count=0;const g=this.size-2;for(let v=1;v<g;v++){const E=this.size2*v,S=(v-this.halfsize)/this.halfsize;for(let C=1;C<g;C++){const M=E+this.size*C,b=(C-this.halfsize)/this.halfsize;for(let T=1;T<g;T++){const I=(T-this.halfsize)/this.halfsize,F=M+T;y(I,b,S,F,this.isolation)}}}this.geometry.setDrawRange(0,this.count),o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>s&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}};const kge=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),C2=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var Nge=Object.defineProperty,Gge=(n,e,t)=>e in n?Nge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ea=(n,e,t)=>(Gge(n,typeof e!="symbol"?e+"":e,t),t);class n4{constructor(e=Math){Ea(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Ea(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Ea(this,"p",[]),Ea(this,"perm",[]),Ea(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Ea(this,"dot",(t,i,r)=>t[0]*i+t[1]*r),Ea(this,"dot3",(t,i,r,s)=>t[0]*i+t[1]*r+t[2]*s),Ea(this,"dot4",(t,i,r,s,o)=>t[0]*i+t[1]*r+t[2]*s+t[3]*o),Ea(this,"noise",(t,i)=>{let r,s,o;const a=.5*(Math.sqrt(3)-1),l=(t+i)*a,c=Math.floor(t+l),u=Math.floor(i+l),h=(3-Math.sqrt(3))/6,f=(c+u)*h,d=c-f,m=u-f,A=t-d,y=i-m;let p=0,g=1;A>y&&(p=1,g=0);const v=A-p+h,E=y-g+h,S=A-1+2*h,C=y-1+2*h,M=c&255,b=u&255,T=this.perm[M+this.perm[b]]%12,I=this.perm[M+p+this.perm[b+g]]%12,F=this.perm[M+1+this.perm[b+1]]%12;let R=.5-A*A-y*y;R<0?r=0:(R*=R,r=R*R*this.dot(this.grad3[T],A,y));let z=.5-v*v-E*E;z<0?s=0:(z*=z,s=z*z*this.dot(this.grad3[I],v,E));let L=.5-S*S-C*C;return L<0?o=0:(L*=L,o=L*L*this.dot(this.grad3[F],S,C)),70*(r+s+o)}),Ea(this,"noise3d",(t,i,r)=>{let s,o,a,l;const u=(t+i+r)*.3333333333333333,h=Math.floor(t+u),f=Math.floor(i+u),d=Math.floor(r+u),m=1/6,A=(h+f+d)*m,y=h-A,p=f-A,g=d-A,v=t-y,E=i-p,S=r-g;let C,M,b,T,I,F;v>=E?E>=S?(C=1,M=0,b=0,T=1,I=1,F=0):v>=S?(C=1,M=0,b=0,T=1,I=0,F=1):(C=0,M=0,b=1,T=1,I=0,F=1):E<S?(C=0,M=0,b=1,T=0,I=1,F=1):v<S?(C=0,M=1,b=0,T=0,I=1,F=1):(C=0,M=1,b=0,T=1,I=1,F=0);const R=v-C+m,z=E-M+m,L=S-b+m,H=v-T+2*m,K=E-I+2*m,J=S-F+2*m,O=v-1+3*m,W=E-1+3*m,V=S-1+3*m,U=h&255,Y=f&255,$=d&255,N=this.perm[U+this.perm[Y+this.perm[$]]]%12,Q=this.perm[U+C+this.perm[Y+M+this.perm[$+b]]]%12,j=this.perm[U+T+this.perm[Y+I+this.perm[$+F]]]%12,X=this.perm[U+1+this.perm[Y+1+this.perm[$+1]]]%12;let se=.6-v*v-E*E-S*S;se<0?s=0:(se*=se,s=se*se*this.dot3(this.grad3[N],v,E,S));let ve=.6-R*R-z*z-L*L;ve<0?o=0:(ve*=ve,o=ve*ve*this.dot3(this.grad3[Q],R,z,L));let de=.6-H*H-K*K-J*J;de<0?a=0:(de*=de,a=de*de*this.dot3(this.grad3[j],H,K,J));let he=.6-O*O-W*W-V*V;return he<0?l=0:(he*=he,l=he*he*this.dot3(this.grad3[X],O,W,V)),32*(s+o+a+l)}),Ea(this,"noise4d",(t,i,r,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let h,f,d,m,A;const y=(t+i+r+s)*c,p=Math.floor(t+y),g=Math.floor(i+y),v=Math.floor(r+y),E=Math.floor(s+y),S=(p+g+v+E)*u,C=p-S,M=g-S,b=v-S,T=E-S,I=t-C,F=i-M,R=r-b,z=s-T,L=I>F?32:0,H=I>R?16:0,K=F>R?8:0,J=I>z?4:0,O=F>z?2:0,W=R>z?1:0,V=L+H+K+J+O+W;let U,Y,$,N,Q,j,X,se,ve,de,he,te;U=a[V][0]>=3?1:0,Y=a[V][1]>=3?1:0,$=a[V][2]>=3?1:0,N=a[V][3]>=3?1:0,Q=a[V][0]>=2?1:0,j=a[V][1]>=2?1:0,X=a[V][2]>=2?1:0,se=a[V][3]>=2?1:0,ve=a[V][0]>=1?1:0,de=a[V][1]>=1?1:0,he=a[V][2]>=1?1:0,te=a[V][3]>=1?1:0;const xe=I-U+u,ce=F-Y+u,me=R-$+u,ye=z-N+u,Me=I-Q+2*u,oe=F-j+2*u,ne=R-X+2*u,we=z-se+2*u,be=I-ve+3*u,st=F-de+3*u,re=R-he+3*u,Z=z-te+3*u,ge=I-1+4*u,Fe=F-1+4*u,Ce=R-1+4*u,Le=z-1+4*u,Qe=p&255,He=g&255,De=v&255,at=E&255,tt=l[Qe+l[He+l[De+l[at]]]]%32,et=l[Qe+U+l[He+Y+l[De+$+l[at+N]]]]%32,le=l[Qe+Q+l[He+j+l[De+X+l[at+se]]]]%32,Re=l[Qe+ve+l[He+de+l[De+he+l[at+te]]]]%32,qe=l[Qe+1+l[He+1+l[De+1+l[at+1]]]]%32;let it=.6-I*I-F*F-R*R-z*z;it<0?h=0:(it*=it,h=it*it*this.dot4(o[tt],I,F,R,z));let Ae=.6-xe*xe-ce*ce-me*me-ye*ye;Ae<0?f=0:(Ae*=Ae,f=Ae*Ae*this.dot4(o[et],xe,ce,me,ye));let _e=.6-Me*Me-oe*oe-ne*ne-we*we;_e<0?d=0:(_e*=_e,d=_e*_e*this.dot4(o[le],Me,oe,ne,we));let Ie=.6-be*be-st*st-re*re-Z*Z;Ie<0?m=0:(Ie*=Ie,m=Ie*Ie*this.dot4(o[Re],be,st,re,Z));let rt=.6-ge*ge-Fe*Fe-Ce*Ce-Le*Le;return rt<0?A=0:(rt*=rt,A=rt*rt*this.dot4(o[qe],ge,Fe,Ce,Le)),27*(h+f+d+m+A)});for(let t=0;t<256;t++)this.p[t]=Math.floor(e.random()*256);for(let t=0;t<512;t++)this.perm[t]=this.p[t&255]}}var Hge=Object.defineProperty,Qge=(n,e,t)=>e in n?Hge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xj=(n,e,t)=>(Qge(n,typeof e!="symbol"?e+"":e,t),t);const Wx={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new D},up:{value:new D(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${dj>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},_j=new Fn({name:"SkyShader",fragmentShader:Wx.fragmentShader,vertexShader:Wx.vertexShader,uniforms:ca.clone(Wx.uniforms),side:Ni,depthWrite:!1});let y8=class extends ct{constructor(){super(new ys(1,1,1),_j)}};xj(y8,"SkyShader",Wx);xj(y8,"material",_j);const Vge=n=>n&&n.isCubeTexture;class Wge extends ct{constructor(e,t){var i,r;const s=Vge(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),h=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,m=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(ja.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new VA(1,16),p=new Fn({uniforms:A,fragmentShader:m,vertexShader:d,side:Vn});super(y,p)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function Ej(n,e,t={}){const i=new D,r=new St,s=new D,o=new Oe,a=new Oe,l=new Oe;t.preserveMatrix=t.preserveMatrix!==void 0?t.preserveMatrix:!0,t.preservePosition=t.preservePosition!==void 0?t.preservePosition:!0,t.preserveHipPosition=t.preserveHipPosition!==void 0?t.preserveHipPosition:!1,t.useTargetMatrix=t.useTargetMatrix!==void 0?t.useTargetMatrix:!1,t.hip=t.hip!==void 0?t.hip:"hip",t.names=t.names||{};const c=e.isObject3D?e.skeleton.bones:n3(e),u=n.isObject3D?n.skeleton.bones:n3(n);let h,f,d,m,A;if(n.isObject3D?n.skeleton.pose():(t.useTargetMatrix=!0,t.preserveMatrix=!1),t.preservePosition){A=[];for(let y=0;y<u.length;y++)A.push(u[y].position.clone())}if(t.preserveMatrix){n.updateMatrixWorld(),n.matrixWorld.identity();for(let y=0;y<n.children.length;++y)n.children[y].updateMatrixWorld(!0)}if(t.offsets){h=[];for(let y=0;y<u.length;++y)f=u[y],d=t.names[f.name]||f.name,t.offsets[d]&&(f.matrix.multiply(t.offsets[d]),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()),h.push(f.matrixWorld.clone())}for(let y=0;y<u.length;++y){if(f=u[y],d=t.names[f.name]||f.name,m=wj(d,c),l.copy(f.matrixWorld),m){if(m.updateMatrixWorld(),t.useTargetMatrix?a.copy(m.matrixWorld):(a.copy(n.matrixWorld).invert(),a.multiply(m.matrixWorld)),s.setFromMatrixScale(a),a.scale(s.set(1/s.x,1/s.y,1/s.z)),l.makeRotationFromQuaternion(r.setFromRotationMatrix(a)),n.isObject3D){const p=u.indexOf(f),g=h?h[p]:o.copy(n.skeleton.boneInverses[p]).invert();l.multiply(g)}l.copyPosition(a)}f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(l)):f.matrix.copy(l),t.preserveHipPosition&&d===t.hip&&f.matrix.setPosition(i.set(0,f.position.y,0)),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()}if(t.preservePosition)for(let y=0;y<u.length;++y)f=u[y],d=t.names[f.name]||f.name,d!==t.hip&&f.position.copy(A[y]);t.preserveMatrix&&n.updateMatrixWorld(!0)}function jge(n,e,t,i={}){i.useFirstFramePosition=i.useFirstFramePosition!==void 0?i.useFirstFramePosition:!1,i.fps=i.fps!==void 0?i.fps:30,i.names=i.names||[],e.isObject3D||(e=Yge(e));const r=Math.round(t.duration*(i.fps/1e3)*1e3),s=1/i.fps,o=[],a=new S6(e),l=n3(n.skeleton),c=[];let u,h,f,d,m;a.clipAction(t).play(),a.update(0),e.updateMatrixWorld();for(let A=0;A<r;++A){const y=A*s;Ej(n,e,i);for(let p=0;p<l.length;++p)m=i.names[l[p].name]||l[p].name,f=wj(m,e.skeleton),f&&(h=l[p],d=c[p]=c[p]||{bone:h},i.hip===m&&(d.pos||(d.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),i.useFirstFramePosition&&(A===0&&(u=h.position.clone()),h.position.sub(u)),d.pos.times[A]=y,h.position.toArray(d.pos.values,A*3)),d.quat||(d.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),d.quat.times[A]=y,h.quaternion.toArray(d.quat.values,A*4));a.update(s),e.updateMatrixWorld()}for(let A=0;A<c.length;++A)d=c[A],d&&(d.pos&&o.push(new Sc(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),o.push(new bl(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return a.uncacheAction(t),new Vu(t.name,-1,o)}function Xge(n){const e=new Map,t=new Map,i=n.clone();return Sj(n,i,function(r,s){e.set(s,r),t.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),i}function wj(n,e){for(let t=0,i=n3(e);t<i.length;t++)if(n===i[t].name)return i[t]}function n3(n){return Array.isArray(n)?n:n.bones}function Yge(n){const e=new GQ(n.bones[0]);return e.skeleton=n,e}function Sj(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)Sj(n.children[i],e.children[i],t)}const qge={retarget:Ej,retargetClip:jge,clone:Xge},zr=new rr,M2=new D;class Kge{constructor(e){let t=e.geometry;t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let s=0;s<e.count;s+=3){let o=1;t&&(o=t.getX(s)+t.getX(s+1)+t.getX(s+2)),zr.a.fromBufferAttribute(e,s),zr.b.fromBufferAttribute(e,s+1),zr.c.fromBufferAttribute(e,s+2),o*=zr.getArea(),i[s/3]=o}this.distribution=new Float32Array(e.count/3);let r=0;for(let s=0;s<i.length;s++)r+=i[s],this.distribution[s]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){const r=this.sampleFaceIndex();return this.sampleFace(r,e,t,i)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const t=this.distribution;let i=0,r=t.length-1,s=-1;for(;i<=r;){const o=Math.ceil((i+r)/2);if(o===0||t[o-1]<=e&&t[o]>e){s=o;break}else e<t[o]?r=o-1:i=o+1}return s}sampleFace(e,t,i,r){let s=this.randomFunction(),o=this.randomFunction();return s+o>1&&(s=1-s,o=1-o),zr.a.fromBufferAttribute(this.positionAttribute,e*3),zr.b.fromBufferAttribute(this.positionAttribute,e*3+1),zr.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(zr.a,s).addScaledVector(zr.b,o).addScaledVector(zr.c,1-(s+o)),i!==void 0&&zr.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(zr.a.fromBufferAttribute(this.colorAttribute,e*3),zr.b.fromBufferAttribute(this.colorAttribute,e*3+1),zr.c.fromBufferAttribute(this.colorAttribute,e*3+2),M2.set(0,0,0).addScaledVector(zr.a,s).addScaledVector(zr.b,o).addScaledVector(zr.c,1-(s+o)),r.r=M2.x,r.g=M2.y,r.b=M2.z),this}}var Jge=Object.defineProperty,Zge=(n,e,t)=>e in n?Jge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ln=(n,e,t)=>(Zge(n,typeof e!="symbol"?e+"":e,t),t);const jF=new D;let $ge=class extends Or{constructor(e,t){super(),ln(this,"object"),ln(this,"domElement"),ln(this,"enabled",!0),ln(this,"movementSpeed",1),ln(this,"lookSpeed",.005),ln(this,"lookVertical",!0),ln(this,"autoForward",!1),ln(this,"activeLook",!0),ln(this,"heightSpeed",!1),ln(this,"heightCoef",1),ln(this,"heightMin",0),ln(this,"heightMax",1),ln(this,"constrainVertical",!1),ln(this,"verticalMin",0),ln(this,"verticalMax",Math.PI),ln(this,"mouseDragOn",!1),ln(this,"autoSpeedFactor",0),ln(this,"mouseX",0),ln(this,"mouseY",0),ln(this,"moveForward",!1),ln(this,"moveBackward",!1),ln(this,"moveLeft",!1),ln(this,"moveRight",!1),ln(this,"moveUp",!1),ln(this,"moveDown",!1),ln(this,"viewHalfX",0),ln(this,"viewHalfY",0),ln(this,"lat",0),ln(this,"lon",0),ln(this,"lookDirection",new D),ln(this,"spherical",new bf),ln(this,"target",new D),ln(this,"connect",i=>{i.setAttribute("tabindex","-1"),i.style.touchAction="none",i.addEventListener("contextmenu",this.contextmenu),i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),this.domElement=i,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),ln(this,"dispose",()=>{var i,r,s,o;(i=this.domElement)==null||i.removeEventListener("contextmenu",this.contextmenu),(r=this.domElement)==null||r.removeEventListener("mousedown",this.onMouseDown),(s=this.domElement)==null||s.removeEventListener("mousemove",this.onMouseMove),(o=this.domElement)==null||o.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),ln(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),ln(this,"onMouseDown",i=>{var r;if((r=this.domElement)==null||r.focus(),this.activeLook)switch(i.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),ln(this,"onMouseUp",i=>{if(this.activeLook)switch(i.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),ln(this,"onMouseMove",i=>{this.domElement&&(this.mouseX=i.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=i.pageY-this.domElement.offsetTop-this.viewHalfY)}),ln(this,"onKeyDown",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),ln(this,"onKeyUp",i=>{switch(i.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),ln(this,"lookAt",(i,r,s)=>(i instanceof D?this.target.copy(i):r&&s&&this.target.set(i,r,s),this.object.lookAt(this.target),this.setOrientation(),this)),ln(this,"update",i=>{if(!this.enabled)return;if(this.heightSpeed){const h=Dt.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=i*(h*this.heightCoef)}else this.autoSpeedFactor=0;const r=i*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(r+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(r),this.moveLeft&&this.object.translateX(-r),this.moveRight&&this.object.translateX(r),this.moveUp&&this.object.translateY(r),this.moveDown&&this.object.translateY(-r);let s=i*this.lookSpeed;this.activeLook||(s=0);let o=1;this.constrainVertical&&(o=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*s,this.lookVertical&&(this.lat-=this.mouseY*s*o),this.lat=Math.max(-85,Math.min(85,this.lat));let a=Dt.degToRad(90-this.lat);const l=Dt.degToRad(this.lon);this.constrainVertical&&(a=Dt.mapLinear(a,0,Math.PI,this.verticalMin,this.verticalMax));const c=this.object.position;jF.setFromSphericalCoords(1,a,l).add(c),this.object.lookAt(jF)}),ln(this,"contextmenu",i=>i.preventDefault()),ln(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-Dt.radToDeg(this.spherical.phi),this.lon=Dt.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=t,this.setOrientation(),t&&this.connect(t)}};var eAe=Object.defineProperty,tAe=(n,e,t)=>e in n?eAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Je=(n,e,t)=>(tAe(n,typeof e!="symbol"?e+"":e,t),t);let nAe=class extends kt{constructor(e,t){super(),Je(this,"isTransformControls",!0),Je(this,"visible",!1),Je(this,"domElement"),Je(this,"raycaster",new rh),Je(this,"gizmo"),Je(this,"plane"),Je(this,"tempVector",new D),Je(this,"tempVector2",new D),Je(this,"tempQuaternion",new St),Je(this,"unit",{X:new D(1,0,0),Y:new D(0,1,0),Z:new D(0,0,1)}),Je(this,"pointStart",new D),Je(this,"pointEnd",new D),Je(this,"offset",new D),Je(this,"rotationAxis",new D),Je(this,"startNorm",new D),Je(this,"endNorm",new D),Je(this,"rotationAngle",0),Je(this,"cameraPosition",new D),Je(this,"cameraQuaternion",new St),Je(this,"cameraScale",new D),Je(this,"parentPosition",new D),Je(this,"parentQuaternion",new St),Je(this,"parentQuaternionInv",new St),Je(this,"parentScale",new D),Je(this,"worldPositionStart",new D),Je(this,"worldQuaternionStart",new St),Je(this,"worldScaleStart",new D),Je(this,"worldPosition",new D),Je(this,"worldQuaternion",new St),Je(this,"worldQuaternionInv",new St),Je(this,"worldScale",new D),Je(this,"eye",new D),Je(this,"positionStart",new D),Je(this,"quaternionStart",new St),Je(this,"scaleStart",new D),Je(this,"camera"),Je(this,"object"),Je(this,"enabled",!0),Je(this,"axis",null),Je(this,"mode","translate"),Je(this,"translationSnap",null),Je(this,"rotationSnap",null),Je(this,"scaleSnap",null),Je(this,"space","world"),Je(this,"size",1),Je(this,"dragging",!1),Je(this,"showX",!0),Je(this,"showY",!0),Je(this,"showZ",!0),Je(this,"changeEvent",{type:"change"}),Je(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),Je(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),Je(this,"objectChangeEvent",{type:"objectChange"}),Je(this,"intersectObjectWithRay",(r,s,o)=>{const a=s.intersectObject(r,!0);for(let l=0;l<a.length;l++)if(a[l].object.visible||o)return a[l];return!1}),Je(this,"attach",r=>(this.object=r,this.visible=!0,this)),Je(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),Je(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),Je(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),Je(this,"pointerHover",r=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);s?this.axis=s.object.name:this.axis=null}),Je(this,"pointerDown",r=>{if(!(this.object===void 0||this.dragging===!0||r.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(r,this.camera);const s=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(s){let o=this.space;if(this.mode==="scale"?o="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(o="world"),o==="local"&&this.mode==="rotate"){const a=this.rotationSnap;this.axis==="X"&&a&&(this.object.rotation.x=Math.round(this.object.rotation.x/a)*a),this.axis==="Y"&&a&&(this.object.rotation.y=Math.round(this.object.rotation.y/a)*a),this.axis==="Z"&&a&&(this.object.rotation.z=Math.round(this.object.rotation.z/a)*a)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(s.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),Je(this,"pointerMove",r=>{const s=this.axis,o=this.mode,a=this.object;let l=this.space;if(o==="scale"?l="local":(s==="E"||s==="XYZE"||s==="XYZ")&&(l="world"),a===void 0||s===null||this.dragging===!1||r.button!==-1)return;this.raycaster.setFromCamera(r,this.camera);const c=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),o==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&s!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),s.indexOf("X")===-1&&(this.offset.x=0),s.indexOf("Y")===-1&&(this.offset.y=0),s.indexOf("Z")===-1&&(this.offset.z=0),l==="local"&&s!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),a.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(l==="local"&&(a.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this.quaternionStart)),l==="world"&&(a.parent&&a.position.add(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld)),s.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),s.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),s.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(this.tempVector.setFromMatrixPosition(a.parent.matrixWorld))));else if(o==="scale"){if(s.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),this.tempVector2.set(u,u,u)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),s.search("X")===-1&&(this.tempVector2.x=1),s.search("Y")===-1&&(this.tempVector2.y=1),s.search("Z")===-1&&(this.tempVector2.z=1);a.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(s.search("X")!==-1&&(this.object.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),s.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));s==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):s==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*u):(s==="X"||s==="Y"||s==="Z")&&(this.rotationAxis.copy(this.unit[s]),this.tempVector.copy(this.unit[s]),l==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&s!=="E"&&s!=="XYZE"?(a.quaternion.copy(this.quaternionStart),a.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),a.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),Je(this,"pointerUp",r=>{r.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),Je(this,"getPointer",r=>{var s;if(this.domElement&&((s=this.domElement.ownerDocument)!=null&&s.pointerLockElement))return{x:0,y:0,button:r.button};{const o=r.changedTouches?r.changedTouches[0]:r,a=this.domElement.getBoundingClientRect();return{x:(o.clientX-a.left)/a.width*2-1,y:-(o.clientY-a.top)/a.height*2+1,button:r.button}}}),Je(this,"onPointerHover",r=>{if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(r));break}}),Je(this,"onPointerDown",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(r)),this.pointerDown(this.getPointer(r)))}),Je(this,"onPointerMove",r=>{this.enabled&&this.pointerMove(this.getPointer(r))}),Je(this,"onPointerUp",r=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(r)))}),Je(this,"getMode",()=>this.mode),Je(this,"setMode",r=>{this.mode=r}),Je(this,"setTranslationSnap",r=>{this.translationSnap=r}),Je(this,"setRotationSnap",r=>{this.rotationSnap=r}),Je(this,"setScaleSnap",r=>{this.scaleSnap=r}),Je(this,"setSize",r=>{this.size=r}),Je(this,"setSpace",r=>{this.space=r}),Je(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),Je(this,"connect",r=>{r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),Je(this,"dispose",()=>{var r,s,o,a,l,c;(r=this.domElement)==null||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)==null||s.removeEventListener("pointermove",this.onPointerHover),(a=(o=this.domElement)==null?void 0:o.ownerDocument)==null||a.removeEventListener("pointermove",this.onPointerMove),(c=(l=this.domElement)==null?void 0:l.ownerDocument)==null||c.removeEventListener("pointerup",this.onPointerUp),this.traverse(u=>{const h=u;h.geometry&&h.geometry.dispose(),h.material&&h.material.dispose()})}),this.domElement=t,this.camera=e,this.gizmo=new iAe,this.add(this.gizmo),this.plane=new rAe,this.add(this.plane);const i=(r,s)=>{let o=s;Object.defineProperty(this,r,{get:function(){return o!==void 0?o:s},set:function(a){o!==a&&(o=a,this.plane[r]=a,this.gizmo[r]=a,this.dispatchEvent({type:r+"-changed",value:a}),this.dispatchEvent(this.changeEvent))}}),this[r]=s,this.plane[r]=s,this.gizmo[r]=s};i("camera",this.camera),i("object",this.object),i("enabled",this.enabled),i("axis",this.axis),i("mode",this.mode),i("translationSnap",this.translationSnap),i("rotationSnap",this.rotationSnap),i("scaleSnap",this.scaleSnap),i("space",this.space),i("size",this.size),i("dragging",this.dragging),i("showX",this.showX),i("showY",this.showY),i("showZ",this.showZ),i("worldPosition",this.worldPosition),i("worldPositionStart",this.worldPositionStart),i("worldQuaternion",this.worldQuaternion),i("worldQuaternionStart",this.worldQuaternionStart),i("cameraPosition",this.cameraPosition),i("cameraQuaternion",this.cameraQuaternion),i("pointStart",this.pointStart),i("pointEnd",this.pointEnd),i("rotationAxis",this.rotationAxis),i("rotationAngle",this.rotationAngle),i("eye",this.eye),t!==void 0&&this.connect(t)}};class iAe extends kt{constructor(){super(),Je(this,"isTransformControlsGizmo",!0),Je(this,"type","TransformControlsGizmo"),Je(this,"tempVector",new D(0,0,0)),Je(this,"tempEuler",new Rr),Je(this,"alignVector",new D(0,1,0)),Je(this,"zeroVector",new D(0,0,0)),Je(this,"lookAtMatrix",new Oe),Je(this,"tempQuaternion",new St),Je(this,"tempQuaternion2",new St),Je(this,"identityQuaternion",new St),Je(this,"unitX",new D(1,0,0)),Je(this,"unitY",new D(0,1,0)),Je(this,"unitZ",new D(0,0,1)),Je(this,"gizmo"),Je(this,"picker"),Je(this,"helper"),Je(this,"rotationAxis",new D),Je(this,"cameraPosition",new D),Je(this,"worldPositionStart",new D),Je(this,"worldQuaternionStart",new St),Je(this,"worldPosition",new D),Je(this,"worldQuaternion",new St),Je(this,"eye",new D),Je(this,"camera",null),Je(this,"enabled",!0),Je(this,"axis",null),Je(this,"mode","translate"),Je(this,"space","world"),Je(this,"size",1),Je(this,"dragging",!1),Je(this,"showX",!0),Je(this,"showY",!0),Je(this,"showZ",!0),Je(this,"updateMatrixWorld",()=>{let V=this.space;this.mode==="scale"&&(V="local");const U=V==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let Y=[];Y=Y.concat(this.picker[this.mode].children),Y=Y.concat(this.gizmo[this.mode].children),Y=Y.concat(this.helper[this.mode].children);for(let $=0;$<Y.length;$++){const N=Y[$];N.visible=!0,N.rotation.set(0,0,0),N.position.copy(this.worldPosition);let Q;if(this.camera.isOrthographicCamera?Q=(this.camera.top-this.camera.bottom)/this.camera.zoom:Q=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),N.scale.set(1,1,1).multiplyScalar(Q*this.size/7),N.tag==="helper"){N.visible=!1,N.name==="AXIS"?(N.position.copy(this.worldPositionStart),N.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),N.quaternion.copy(U).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(U).dot(this.eye))>.9&&(N.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),N.quaternion.copy(U).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(U).dot(this.eye))>.9&&(N.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),N.quaternion.copy(U).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(U).dot(this.eye))>.9&&(N.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),N.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),N.quaternion.multiply(this.tempQuaternion),N.visible=this.dragging),this.axis==="E"&&(N.visible=!1)):N.name==="START"?(N.position.copy(this.worldPositionStart),N.visible=this.dragging):N.name==="END"?(N.position.copy(this.worldPosition),N.visible=this.dragging):N.name==="DELTA"?(N.position.copy(this.worldPositionStart),N.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),N.scale.copy(this.tempVector),N.visible=this.dragging):(N.quaternion.copy(U),this.dragging?N.position.copy(this.worldPositionStart):N.position.copy(this.worldPosition),this.axis&&(N.visible=this.axis.search(N.name)!==-1));continue}N.quaternion.copy(U),this.mode==="translate"||this.mode==="scale"?((N.name==="X"||N.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(U).dot(this.eye))>.99&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),(N.name==="Y"||N.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(U).dot(this.eye))>.99&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),(N.name==="Z"||N.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(U).dot(this.eye))>.99&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(U).dot(this.eye))<.2&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(U).dot(this.eye))<.2&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(U).dot(this.eye))<.2&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(U).dot(this.eye)<0?N.tag==="fwd"?N.visible=!1:N.scale.x*=-1:N.tag==="bwd"&&(N.visible=!1)),N.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(U).dot(this.eye)<0?N.tag==="fwd"?N.visible=!1:N.scale.y*=-1:N.tag==="bwd"&&(N.visible=!1)),N.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(U).dot(this.eye)<0?N.tag==="fwd"?N.visible=!1:N.scale.z*=-1:N.tag==="bwd"&&(N.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(U),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(U).invert()),N.name.search("E")!==-1&&N.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),N.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),N.quaternion.copy(this.tempQuaternion)),N.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),N.quaternion.copy(this.tempQuaternion)),N.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),N.quaternion.copy(this.tempQuaternion))),N.visible=N.visible&&(N.name.indexOf("X")===-1||this.showX),N.visible=N.visible&&(N.name.indexOf("Y")===-1||this.showY),N.visible=N.visible&&(N.name.indexOf("Z")===-1||this.showZ),N.visible=N.visible&&(N.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),N.material.tempOpacity=N.material.tempOpacity||N.material.opacity,N.material.tempColor=N.material.tempColor||N.material.color.clone(),N.material.color.copy(N.material.tempColor),N.material.opacity=N.material.tempOpacity,this.enabled?this.axis&&(N.name===this.axis?(N.material.opacity=1,N.material.color.lerp(new We(1,1,1),.5)):this.axis.split("").some(function(j){return N.name===j})?(N.material.opacity=1,N.material.color.lerp(new We(1,1,1),.5)):(N.material.opacity*=.25,N.material.color.lerp(new We(1,1,1),.5))):(N.material.opacity*=.5,N.material.color.lerp(new We(1,1,1),.5))}super.updateMatrixWorld()});const e=new mr({depthTest:!1,depthWrite:!1,transparent:!0,side:Vn,fog:!1,toneMapped:!1}),t=new Gi({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=e.clone();i.opacity=.15;const r=e.clone();r.opacity=.33;const s=e.clone();s.color.set(16711680);const o=e.clone();o.color.set(65280);const a=e.clone();a.color.set(255);const l=e.clone();l.opacity=.25;const c=l.clone();c.color.set(16776960);const u=l.clone();u.color.set(65535);const h=l.clone();h.color.set(16711935),e.clone().color.set(16776960);const d=t.clone();d.color.set(16711680);const m=t.clone();m.color.set(65280);const A=t.clone();A.color.set(255);const y=t.clone();y.color.set(65535);const p=t.clone();p.color.set(16711935);const g=t.clone();g.color.set(16776960);const v=t.clone();v.color.set(7895160);const E=g.clone();E.opacity=.25;const S=new Tr(0,.05,.2,12,1,!1),C=new ys(.125,.125,.125),M=new It;M.setAttribute("position",new ft([0,0,0,1,0,0],3));const b=(V,U)=>{const Y=new It,$=[];for(let N=0;N<=64*U;++N)$.push(0,Math.cos(N/32*Math.PI)*V,Math.sin(N/32*Math.PI)*V);return Y.setAttribute("position",new ft($,3)),Y},T=()=>{const V=new It;return V.setAttribute("position",new ft([0,0,0,1,1,1],3)),V},I={X:[[new ct(S,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new ct(S,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new cn(M,d)]],Y:[[new ct(S,o),[0,1,0],null,null,"fwd"],[new ct(S,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new cn(M,m),null,[0,0,Math.PI/2]]],Z:[[new ct(S,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new ct(S,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new cn(M,A),null,[0,-Math.PI/2,0]]],XYZ:[[new ct(new Qo(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new ct(new dr(.295,.295),c.clone()),[.15,.15,0]],[new cn(M,g),[.18,.3,0],null,[.125,1,1]],[new cn(M,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new ct(new dr(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new cn(M,y),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new cn(M,y),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new ct(new dr(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new cn(M,p),[.18,0,.3],null,[.125,1,1]],[new cn(M,p),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},F={X:[[new ct(new Tr(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new ct(new Tr(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new ct(new Tr(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new ct(new Qo(.2,0),i)]],XY:[[new ct(new dr(.4,.4),i),[.2,.2,0]]],YZ:[[new ct(new dr(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new ct(new dr(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},R={START:[[new ct(new Qo(.01,2),r),null,null,null,"helper"]],END:[[new ct(new Qo(.01,2),r),null,null,null,"helper"]],DELTA:[[new cn(T(),r),null,null,null,"helper"]],X:[[new cn(M,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new cn(M,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new cn(M,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},z={X:[[new cn(b(1,.5),d)],[new ct(new Qo(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new cn(b(1,.5),m),null,[0,0,-Math.PI/2]],[new ct(new Qo(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new cn(b(1,.5),A),null,[0,Math.PI/2,0]],[new ct(new Qo(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new cn(b(1.25,1),E),null,[0,Math.PI/2,0]],[new ct(new Tr(.03,0,.15,4,1,!1),E),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new ct(new Tr(.03,0,.15,4,1,!1),E),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new ct(new Tr(.03,0,.15,4,1,!1),E),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new ct(new Tr(.03,0,.15,4,1,!1),E),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new cn(b(1,1),v),null,[0,Math.PI/2,0]]]},L={AXIS:[[new cn(M,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},H={X:[[new ct(new uu(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ct(new uu(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ct(new uu(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ct(new uu(1.25,.1,2,24),i)]],XYZE:[[new ct(new Uf(.7,10,8),i)]]},K={X:[[new ct(C,s),[.8,0,0],[0,0,-Math.PI/2]],[new cn(M,d),null,null,[.8,1,1]]],Y:[[new ct(C,o),[0,.8,0]],[new cn(M,m),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new ct(C,a),[0,0,.8],[Math.PI/2,0,0]],[new cn(M,A),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new ct(C,c),[.85,.85,0],null,[2,2,.2]],[new cn(M,g),[.855,.98,0],null,[.125,1,1]],[new cn(M,g),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new ct(C,u),[0,.85,.85],null,[.2,2,2]],[new cn(M,y),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new cn(M,y),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new ct(C,h),[.85,0,.85],null,[2,.2,2]],[new cn(M,p),[.855,0,.98],null,[.125,1,1]],[new cn(M,p),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new ct(new ys(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new ct(new ys(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new ct(new ys(.125,.125,.125),l.clone()),[0,0,1.1]]]},J={X:[[new ct(new Tr(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new ct(new Tr(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new ct(new Tr(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new ct(C,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new ct(C,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new ct(C,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new ct(new ys(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new ct(new ys(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new ct(new ys(.2,.2,.2),i),[0,0,1.1]]]},O={X:[[new cn(M,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new cn(M,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new cn(M,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},W=V=>{const U=new kt;for(let Y in V)for(let $=V[Y].length;$--;){const N=V[Y][$][0].clone(),Q=V[Y][$][1],j=V[Y][$][2],X=V[Y][$][3],se=V[Y][$][4];N.name=Y,N.tag=se,Q&&N.position.set(Q[0],Q[1],Q[2]),j&&N.rotation.set(j[0],j[1],j[2]),X&&N.scale.set(X[0],X[1],X[2]),N.updateMatrix();const ve=N.geometry.clone();ve.applyMatrix4(N.matrix),N.geometry=ve,N.renderOrder=1/0,N.position.set(0,0,0),N.rotation.set(0,0,0),N.scale.set(1,1,1),U.add(N)}return U};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=W(I)),this.add(this.gizmo.rotate=W(z)),this.add(this.gizmo.scale=W(K)),this.add(this.picker.translate=W(F)),this.add(this.picker.rotate=W(H)),this.add(this.picker.scale=W(J)),this.add(this.helper.translate=W(R)),this.add(this.helper.rotate=W(L)),this.add(this.helper.scale=W(O)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class rAe extends ct{constructor(){super(new dr(1e5,1e5,2,2),new mr({visible:!1,wireframe:!0,side:Vn,transparent:!0,opacity:.1,toneMapped:!1})),Je(this,"isTransformControlsPlane",!0),Je(this,"type","TransformControlsPlane"),Je(this,"unitX",new D(1,0,0)),Je(this,"unitY",new D(0,1,0)),Je(this,"unitZ",new D(0,0,1)),Je(this,"tempVector",new D),Je(this,"dirVector",new D),Je(this,"alignVector",new D),Je(this,"tempMatrix",new Oe),Je(this,"identityQuaternion",new St),Je(this,"cameraQuaternion",new St),Je(this,"worldPosition",new D),Je(this,"worldQuaternion",new St),Je(this,"eye",new D),Je(this,"axis",null),Je(this,"mode","translate"),Je(this,"space","world"),Je(this,"updateMatrixWorld",()=>{let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),this.unitX.set(1,0,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}var sAe=Object.defineProperty,oAe=(n,e,t)=>e in n?sAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ur=(n,e,t)=>(oAe(n,typeof e!="symbol"?e+"":e,t),t);const Nd=new Rr(0,0,0,"YXZ"),Gd=new D,aAe={type:"change"},lAe={type:"lock"},cAe={type:"unlock"},XF=Math.PI/2;let uAe=class extends Or{constructor(e,t){super(),ur(this,"camera"),ur(this,"domElement"),ur(this,"isLocked"),ur(this,"minPolarAngle"),ur(this,"maxPolarAngle"),ur(this,"pointerSpeed"),ur(this,"onMouseMove",i=>{if(!this.domElement||this.isLocked===!1)return;const r=i.movementX||i.mozMovementX||i.webkitMovementX||0,s=i.movementY||i.mozMovementY||i.webkitMovementY||0;Nd.setFromQuaternion(this.camera.quaternion),Nd.y-=r*.002*this.pointerSpeed,Nd.x-=s*.002*this.pointerSpeed,Nd.x=Math.max(XF-this.maxPolarAngle,Math.min(XF-this.minPolarAngle,Nd.x)),this.camera.quaternion.setFromEuler(Nd),this.dispatchEvent(aAe)}),ur(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(lAe),this.isLocked=!0):(this.dispatchEvent(cAe),this.isLocked=!1))}),ur(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),ur(this,"connect",i=>{this.domElement=i||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),ur(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),ur(this,"dispose",()=>{this.disconnect()}),ur(this,"getObject",()=>this.camera),ur(this,"direction",new D(0,0,-1)),ur(this,"getDirection",i=>i.copy(this.direction).applyQuaternion(this.camera.quaternion)),ur(this,"moveForward",i=>{Gd.setFromMatrixColumn(this.camera.matrix,0),Gd.crossVectors(this.camera.up,Gd),this.camera.position.addScaledVector(Gd,i)}),ur(this,"moveRight",i=>{Gd.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Gd,i)}),ur(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),ur(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}};var hAe=Object.defineProperty,fAe=(n,e,t)=>e in n?hAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hr=(n,e,t)=>(fAe(n,typeof e!="symbol"?e+"":e,t),t);let dAe=class extends Or{constructor(e){super(),hr(this,"object"),hr(this,"changeEvent",{type:"change"}),hr(this,"EPS",1e-6),hr(this,"enabled",!0),hr(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),hr(this,"screenOrientation",0),hr(this,"alphaOffset",0),hr(this,"onDeviceOrientationChangeEvent",t=>{this.deviceOrientation=t}),hr(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),hr(this,"zee",new D(0,0,1)),hr(this,"euler",new Rr),hr(this,"q0",new St),hr(this,"q1",new St(-Math.sqrt(.5),0,0,Math.sqrt(.5))),hr(this,"setObjectQuaternion",(t,i,r,s,o)=>{this.euler.set(r,i,-s,"YXZ"),t.setFromEuler(this.euler),t.multiply(this.q1),t.multiply(this.q0.setFromAxisAngle(this.zee,-o))}),hr(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(t=>{t=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(t=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",t)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),hr(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),hr(this,"lastQuaternion",new St),hr(this,"update",()=>{if(this.enabled===!1)return;const t=this.deviceOrientation;if(t){const i=t.alpha?Dt.degToRad(t.alpha)+this.alphaOffset:0,r=t.beta?Dt.degToRad(t.beta):0,s=t.gamma?Dt.degToRad(t.gamma):0,o=this.screenOrientation?Dt.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,i,r,s,o),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),hr(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}};var pAe=Object.defineProperty,mAe=(n,e,t)=>e in n?pAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,mt=(n,e,t)=>(mAe(n,typeof e!="symbol"?e+"":e,t),t);let gAe=class extends Or{constructor(e,t){super(),mt(this,"enabled",!0),mt(this,"screen",{left:0,top:0,width:0,height:0}),mt(this,"rotateSpeed",1),mt(this,"zoomSpeed",1.2),mt(this,"panSpeed",.3),mt(this,"noRotate",!1),mt(this,"noZoom",!1),mt(this,"noPan",!1),mt(this,"staticMoving",!1),mt(this,"dynamicDampingFactor",.2),mt(this,"minDistance",0),mt(this,"maxDistance",1/0),mt(this,"keys",["KeyA","KeyS","KeyD"]),mt(this,"mouseButtons",{LEFT:Yo.ROTATE,MIDDLE:Yo.DOLLY,RIGHT:Yo.PAN}),mt(this,"object"),mt(this,"domElement"),mt(this,"cursorZoom",!1),mt(this,"target",new D),mt(this,"mousePosition",new Ee),mt(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),mt(this,"EPS",1e-6),mt(this,"lastZoom",1),mt(this,"lastPosition",new D),mt(this,"cursorVector",new D),mt(this,"targetVector",new D),mt(this,"_state",this.STATE.NONE),mt(this,"_keyState",this.STATE.NONE),mt(this,"_eye",new D),mt(this,"_movePrev",new Ee),mt(this,"_moveCurr",new Ee),mt(this,"_lastAxis",new D),mt(this,"_lastAngle",0),mt(this,"_zoomStart",new Ee),mt(this,"_zoomEnd",new Ee),mt(this,"_touchZoomDistanceStart",0),mt(this,"_touchZoomDistanceEnd",0),mt(this,"_panStart",new Ee),mt(this,"_panEnd",new Ee),mt(this,"target0"),mt(this,"position0"),mt(this,"up0"),mt(this,"zoom0"),mt(this,"changeEvent",{type:"change"}),mt(this,"startEvent",{type:"start"}),mt(this,"endEvent",{type:"end"}),mt(this,"onScreenVector",new Ee),mt(this,"getMouseOnScreen",(i,r)=>(this.onScreenVector.set((i-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),this.onScreenVector)),mt(this,"onCircleVector",new Ee),mt(this,"getMouseOnCircle",(i,r)=>(this.onCircleVector.set((i-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),this.onCircleVector)),mt(this,"axis",new D),mt(this,"quaternion",new St),mt(this,"eyeDirection",new D),mt(this,"objectUpDirection",new D),mt(this,"objectSidewaysDirection",new D),mt(this,"moveDirection",new D),mt(this,"angle",0),mt(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),mt(this,"zoomCamera",()=>{let i;if(this._state===this.STATE.TOUCH_ZOOM_PAN)i=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(i):this.object.isOrthographicCamera?(this.object.zoom/=i,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(i=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(i-1)>this.EPS&&i>0&&(this.object.isPerspectiveCamera?(i>1&&this._eye.length()>=this.maxDistance-this.EPS&&(i=1),this._eye.multiplyScalar(i)):this.object.isOrthographicCamera?(i>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(i=1),this.object.zoom/=i):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let r=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(r,this.target,i)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),mt(this,"mouseChange",new Ee),mt(this,"objectUp",new D),mt(this,"pan",new D),mt(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const i=this.object,r=(i.right-i.left)/this.object.zoom,s=(i.top-i.bottom)/this.object.zoom;this.mouseChange.x*=r,this.mouseChange.y*=s}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),mt(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),mt(this,"handleResize",()=>{if(!this.domElement)return;const i=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=i.left+window.pageXOffset-r.clientLeft,this.screen.top=i.top+window.pageYOffset-r.clientTop,this.screen.width=i.width,this.screen.height=i.height}),mt(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),mt(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),mt(this,"keydown",i=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(i.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:i.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:i.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),mt(this,"onPointerDown",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseDown(i);break}}),mt(this,"onPointerMove",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseMove(i);break}}),mt(this,"onPointerUp",i=>{if(this.enabled!==!1)switch(i.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),mt(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),mt(this,"onMouseDown",i=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(i.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break}const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):r===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):r===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),mt(this,"onMouseMove",i=>{if(this.enabled===!1)return;const r=this._keyState!==this.STATE.NONE?this._keyState:this._state;r===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.pageX,i.pageY))):r===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY)):r===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(i.pageX,i.pageY))}),mt(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),mt(this,"mousewheel",i=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.mousePosition.x=i.offsetX/this.screen.width*2-1,this.mousePosition.y=-(i.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),mt(this,"touchstart",i=>{if(this.enabled!==!1){switch(i.preventDefault(),i.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(o,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),mt(this,"touchmove",i=>{if(this.enabled!==!1)switch(i.preventDefault(),i.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY));break;default:const r=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(r*r+s*s);const o=(i.touches[0].pageX+i.touches[1].pageX)/2,a=(i.touches[0].pageY+i.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(o,a));break}}),mt(this,"touchend",i=>{if(this.enabled!==!1){switch(i.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(i.touches[0].pageX,i.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),mt(this,"contextmenu",i=>{this.enabled!==!1&&i.preventDefault()}),mt(this,"connect",i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),mt(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,t!==void 0&&this.connect(t),this.update()}};var AAe=Object.defineProperty,vAe=(n,e,t)=>e in n?AAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tn=(n,e,t)=>(vAe(n,typeof e!="symbol"?e+"":e,t),t);const b2=new ha,YF=new Br,yAe=Math.cos(70*(Math.PI/180)),qF=(n,e)=>(n%e+e)%e;let Cj=class extends Or{constructor(e,t){super(),tn(this,"object"),tn(this,"domElement"),tn(this,"enabled",!0),tn(this,"target",new D),tn(this,"minDistance",0),tn(this,"maxDistance",1/0),tn(this,"minZoom",0),tn(this,"maxZoom",1/0),tn(this,"minPolarAngle",0),tn(this,"maxPolarAngle",Math.PI),tn(this,"minAzimuthAngle",-1/0),tn(this,"maxAzimuthAngle",1/0),tn(this,"enableDamping",!1),tn(this,"dampingFactor",.05),tn(this,"enableZoom",!0),tn(this,"zoomSpeed",1),tn(this,"enableRotate",!0),tn(this,"rotateSpeed",1),tn(this,"enablePan",!0),tn(this,"panSpeed",1),tn(this,"screenSpacePanning",!0),tn(this,"keyPanSpeed",7),tn(this,"zoomToCursor",!1),tn(this,"autoRotate",!1),tn(this,"autoRotateSpeed",2),tn(this,"reverseOrbit",!1),tn(this,"reverseHorizontalOrbit",!1),tn(this,"reverseVerticalOrbit",!1),tn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),tn(this,"mouseButtons",{LEFT:Yo.ROTATE,MIDDLE:Yo.DOLLY,RIGHT:Yo.PAN}),tn(this,"touches",{ONE:oc.ROTATE,TWO:oc.DOLLY_PAN}),tn(this,"target0"),tn(this,"position0"),tn(this,"zoom0"),tn(this,"_domElementKeyEvents",null),tn(this,"getPolarAngle"),tn(this,"getAzimuthalAngle"),tn(this,"setPolarAngle"),tn(this,"setAzimuthalAngle"),tn(this,"getDistance"),tn(this,"listenToKeyEvents"),tn(this,"stopListenToKeyEvents"),tn(this,"saveState"),tn(this,"reset"),tn(this,"update"),tn(this,"connect"),tn(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=le=>{let Re=qF(le,2*Math.PI),qe=u.phi;qe<0&&(qe+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let it=Math.abs(Re-qe);2*Math.PI-it<it&&(Re<qe?Re+=2*Math.PI:qe+=2*Math.PI),h.phi=Re-qe,i.update()},this.setAzimuthalAngle=le=>{let Re=qF(le,2*Math.PI),qe=u.theta;qe<0&&(qe+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let it=Math.abs(Re-qe);2*Math.PI-it<it&&(Re<qe?Re+=2*Math.PI:qe+=2*Math.PI),h.theta=Re-qe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",Ce),this._domElementKeyEvents=le},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ce),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const le=new D,Re=new D(0,1,0),qe=new St().setFromUnitVectors(e.up,Re),it=qe.clone().invert(),Ae=new D,_e=new St,Ie=2*Math.PI;return function(){const nt=i.object.position;qe.setFromUnitVectors(e.up,Re),it.copy(qe).invert(),le.copy(nt).sub(i.target),le.applyQuaternion(qe),u.setFromVector3(le),i.autoRotate&&l===a.NONE&&L(R()),i.enableDamping?(u.theta+=h.theta*i.dampingFactor,u.phi+=h.phi*i.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let pt=i.minAzimuthAngle,Pt=i.maxAzimuthAngle;isFinite(pt)&&isFinite(Pt)&&(pt<-Math.PI?pt+=Ie:pt>Math.PI&&(pt-=Ie),Pt<-Math.PI?Pt+=Ie:Pt>Math.PI&&(Pt-=Ie),pt<=Pt?u.theta=Math.max(pt,Math.min(Pt,u.theta)):u.theta=u.theta>(pt+Pt)/2?Math.max(pt,u.theta):Math.min(Pt,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(d,i.dampingFactor):i.target.add(d),i.zoomToCursor&&T||i.object.isOrthographicCamera?u.radius=Y(u.radius):u.radius=Y(u.radius*f),le.setFromSpherical(u),le.applyQuaternion(it),nt.copy(i.target).add(le),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,d.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),d.set(0,0,0));let Qt=!1;if(i.zoomToCursor&&T){let Tt=null;if(i.object instanceof on&&i.object.isPerspectiveCamera){const Lt=le.length();Tt=Y(Lt*f);const bn=Lt-Tt;i.object.position.addScaledVector(M,bn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Lt=new D(b.x,b.y,0);Lt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/f)),i.object.updateProjectionMatrix(),Qt=!0;const bn=new D(b.x,b.y,0);bn.unproject(i.object),i.object.position.sub(bn).add(Lt),i.object.updateMatrixWorld(),Tt=le.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Tt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Tt).add(i.object.position):(b2.origin.copy(i.object.position),b2.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(b2.direction))<yAe?e.lookAt(i.target):(YF.setFromNormalAndCoplanarPoint(i.object.up,i.target),b2.intersectPlane(YF,i.target))))}else i.object instanceof Qn&&i.object.isOrthographicCamera&&(Qt=f!==1,Qt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/f)),i.object.updateProjectionMatrix()));return f=1,T=!1,Qt||Ae.distanceToSquared(i.object.position)>c||8*(1-_e.dot(i.object.quaternion))>c?(i.dispatchEvent(r),Ae.copy(i.object.position),_e.copy(i.object.quaternion),Qt=!1,!0):!1}})(),this.connect=le=>{le===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=le,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",He),i.domElement.addEventListener("pointerdown",be),i.domElement.addEventListener("pointercancel",re),i.domElement.addEventListener("wheel",Fe)},this.dispose=()=>{var le,Re,qe,it,Ae,_e;i.domElement&&(i.domElement.style.touchAction="auto"),(le=i.domElement)==null||le.removeEventListener("contextmenu",He),(Re=i.domElement)==null||Re.removeEventListener("pointerdown",be),(qe=i.domElement)==null||qe.removeEventListener("pointercancel",re),(it=i.domElement)==null||it.removeEventListener("wheel",Fe),(Ae=i.domElement)==null||Ae.ownerDocument.removeEventListener("pointermove",st),(_e=i.domElement)==null||_e.ownerDocument.removeEventListener("pointerup",re),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Ce)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new bf,h=new bf;let f=1;const d=new D,m=new Ee,A=new Ee,y=new Ee,p=new Ee,g=new Ee,v=new Ee,E=new Ee,S=new Ee,C=new Ee,M=new D,b=new Ee;let T=!1;const I=[],F={};function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}function z(){return Math.pow(.95,i.zoomSpeed)}function L(le){i.reverseOrbit||i.reverseHorizontalOrbit?h.theta+=le:h.theta-=le}function H(le){i.reverseOrbit||i.reverseVerticalOrbit?h.phi+=le:h.phi-=le}const K=(()=>{const le=new D;return function(qe,it){le.setFromMatrixColumn(it,0),le.multiplyScalar(-qe),d.add(le)}})(),J=(()=>{const le=new D;return function(qe,it){i.screenSpacePanning===!0?le.setFromMatrixColumn(it,1):(le.setFromMatrixColumn(it,0),le.crossVectors(i.object.up,le)),le.multiplyScalar(qe),d.add(le)}})(),O=(()=>{const le=new D;return function(qe,it){const Ae=i.domElement;if(Ae&&i.object instanceof on&&i.object.isPerspectiveCamera){const _e=i.object.position;le.copy(_e).sub(i.target);let Ie=le.length();Ie*=Math.tan(i.object.fov/2*Math.PI/180),K(2*qe*Ie/Ae.clientHeight,i.object.matrix),J(2*it*Ie/Ae.clientHeight,i.object.matrix)}else Ae&&i.object instanceof Qn&&i.object.isOrthographicCamera?(K(qe*(i.object.right-i.object.left)/i.object.zoom/Ae.clientWidth,i.object.matrix),J(it*(i.object.top-i.object.bottom)/i.object.zoom/Ae.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function W(le){i.object instanceof on&&i.object.isPerspectiveCamera||i.object instanceof Qn&&i.object.isOrthographicCamera?f/=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(le){i.object instanceof on&&i.object.isPerspectiveCamera||i.object instanceof Qn&&i.object.isOrthographicCamera?f*=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function U(le){if(!i.zoomToCursor||!i.domElement)return;T=!0;const Re=i.domElement.getBoundingClientRect(),qe=le.clientX-Re.left,it=le.clientY-Re.top,Ae=Re.width,_e=Re.height;b.x=qe/Ae*2-1,b.y=-(it/_e)*2+1,M.set(b.x,b.y,1).unproject(i.object).sub(i.object.position).normalize()}function Y(le){return Math.max(i.minDistance,Math.min(i.maxDistance,le))}function $(le){m.set(le.clientX,le.clientY)}function N(le){U(le),E.set(le.clientX,le.clientY)}function Q(le){p.set(le.clientX,le.clientY)}function j(le){A.set(le.clientX,le.clientY),y.subVectors(A,m).multiplyScalar(i.rotateSpeed);const Re=i.domElement;Re&&(L(2*Math.PI*y.x/Re.clientHeight),H(2*Math.PI*y.y/Re.clientHeight)),m.copy(A),i.update()}function X(le){S.set(le.clientX,le.clientY),C.subVectors(S,E),C.y>0?W(z()):C.y<0&&V(z()),E.copy(S),i.update()}function se(le){g.set(le.clientX,le.clientY),v.subVectors(g,p).multiplyScalar(i.panSpeed),O(v.x,v.y),p.copy(g),i.update()}function ve(le){U(le),le.deltaY<0?V(z()):le.deltaY>0&&W(z()),i.update()}function de(le){let Re=!1;switch(le.code){case i.keys.UP:O(0,i.keyPanSpeed),Re=!0;break;case i.keys.BOTTOM:O(0,-i.keyPanSpeed),Re=!0;break;case i.keys.LEFT:O(i.keyPanSpeed,0),Re=!0;break;case i.keys.RIGHT:O(-i.keyPanSpeed,0),Re=!0;break}Re&&(le.preventDefault(),i.update())}function he(){if(I.length==1)m.set(I[0].pageX,I[0].pageY);else{const le=.5*(I[0].pageX+I[1].pageX),Re=.5*(I[0].pageY+I[1].pageY);m.set(le,Re)}}function te(){if(I.length==1)p.set(I[0].pageX,I[0].pageY);else{const le=.5*(I[0].pageX+I[1].pageX),Re=.5*(I[0].pageY+I[1].pageY);p.set(le,Re)}}function xe(){const le=I[0].pageX-I[1].pageX,Re=I[0].pageY-I[1].pageY,qe=Math.sqrt(le*le+Re*Re);E.set(0,qe)}function ce(){i.enableZoom&&xe(),i.enablePan&&te()}function me(){i.enableZoom&&xe(),i.enableRotate&&he()}function ye(le){if(I.length==1)A.set(le.pageX,le.pageY);else{const qe=et(le),it=.5*(le.pageX+qe.x),Ae=.5*(le.pageY+qe.y);A.set(it,Ae)}y.subVectors(A,m).multiplyScalar(i.rotateSpeed);const Re=i.domElement;Re&&(L(2*Math.PI*y.x/Re.clientHeight),H(2*Math.PI*y.y/Re.clientHeight)),m.copy(A)}function Me(le){if(I.length==1)g.set(le.pageX,le.pageY);else{const Re=et(le),qe=.5*(le.pageX+Re.x),it=.5*(le.pageY+Re.y);g.set(qe,it)}v.subVectors(g,p).multiplyScalar(i.panSpeed),O(v.x,v.y),p.copy(g)}function oe(le){const Re=et(le),qe=le.pageX-Re.x,it=le.pageY-Re.y,Ae=Math.sqrt(qe*qe+it*it);S.set(0,Ae),C.set(0,Math.pow(S.y/E.y,i.zoomSpeed)),W(C.y),E.copy(S)}function ne(le){i.enableZoom&&oe(le),i.enablePan&&Me(le)}function we(le){i.enableZoom&&oe(le),i.enableRotate&&ye(le)}function be(le){var Re,qe;i.enabled!==!1&&(I.length===0&&((Re=i.domElement)==null||Re.ownerDocument.addEventListener("pointermove",st),(qe=i.domElement)==null||qe.ownerDocument.addEventListener("pointerup",re)),De(le),le.pointerType==="touch"?Le(le):Z(le))}function st(le){i.enabled!==!1&&(le.pointerType==="touch"?Qe(le):ge(le))}function re(le){var Re,qe,it;at(le),I.length===0&&((Re=i.domElement)==null||Re.releasePointerCapture(le.pointerId),(qe=i.domElement)==null||qe.ownerDocument.removeEventListener("pointermove",st),(it=i.domElement)==null||it.ownerDocument.removeEventListener("pointerup",re)),i.dispatchEvent(o),l=a.NONE}function Z(le){let Re;switch(le.button){case 0:Re=i.mouseButtons.LEFT;break;case 1:Re=i.mouseButtons.MIDDLE;break;case 2:Re=i.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case Yo.DOLLY:if(i.enableZoom===!1)return;N(le),l=a.DOLLY;break;case Yo.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(i.enablePan===!1)return;Q(le),l=a.PAN}else{if(i.enableRotate===!1)return;$(le),l=a.ROTATE}break;case Yo.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(i.enableRotate===!1)return;$(le),l=a.ROTATE}else{if(i.enablePan===!1)return;Q(le),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function ge(le){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;j(le);break;case a.DOLLY:if(i.enableZoom===!1)return;X(le);break;case a.PAN:if(i.enablePan===!1)return;se(le);break}}function Fe(le){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(le.preventDefault(),i.dispatchEvent(s),ve(le),i.dispatchEvent(o))}function Ce(le){i.enabled===!1||i.enablePan===!1||de(le)}function Le(le){switch(tt(le),I.length){case 1:switch(i.touches.ONE){case oc.ROTATE:if(i.enableRotate===!1)return;he(),l=a.TOUCH_ROTATE;break;case oc.PAN:if(i.enablePan===!1)return;te(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case oc.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ce(),l=a.TOUCH_DOLLY_PAN;break;case oc.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Qe(le){switch(tt(le),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;ye(le),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Me(le),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ne(le),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;we(le),i.update();break;default:l=a.NONE}}function He(le){i.enabled!==!1&&le.preventDefault()}function De(le){I.push(le)}function at(le){delete F[le.pointerId];for(let Re=0;Re<I.length;Re++)if(I[Re].pointerId==le.pointerId){I.splice(Re,1);return}}function tt(le){let Re=F[le.pointerId];Re===void 0&&(Re=new Ee,F[le.pointerId]=Re),Re.set(le.pageX,le.pageY)}function et(le){const Re=le.pointerId===I[0].pointerId?I[1]:I[0];return F[Re.pointerId]}t!==void 0&&this.connect(t),this.update()}},xAe=class extends Cj{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Yo.PAN,this.mouseButtons.RIGHT=Yo.ROTATE,this.touches.ONE=oc.PAN,this.touches.TWO=oc.DOLLY_ROTATE}};var _Ae=Object.defineProperty,EAe=(n,e,t)=>e in n?_Ae(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ze=(n,e,t)=>(EAe(n,typeof e!="symbol"?e+"":e,t),t);const Gt={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Yn={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},pn={x:0,y:0},lo={camera:new Oe,gizmos:new Oe},fi={type:"change"},wa={type:"start"},Fo={type:"end"};let wAe=class extends Or{constructor(e,t=null,i=null){super(),ze(this,"camera"),ze(this,"domElement"),ze(this,"scene"),ze(this,"mouseActions"),ze(this,"_mouseOp"),ze(this,"_v2_1"),ze(this,"_v3_1"),ze(this,"_v3_2"),ze(this,"_m4_1"),ze(this,"_m4_2"),ze(this,"_quat"),ze(this,"_translationMatrix"),ze(this,"_rotationMatrix"),ze(this,"_scaleMatrix"),ze(this,"_rotationAxis"),ze(this,"_cameraMatrixState"),ze(this,"_cameraProjectionState"),ze(this,"_fovState"),ze(this,"_upState"),ze(this,"_zoomState"),ze(this,"_nearPos"),ze(this,"_farPos"),ze(this,"_gizmoMatrixState"),ze(this,"_up0"),ze(this,"_zoom0"),ze(this,"_fov0"),ze(this,"_initialNear"),ze(this,"_nearPos0"),ze(this,"_initialFar"),ze(this,"_farPos0"),ze(this,"_cameraMatrixState0"),ze(this,"_gizmoMatrixState0"),ze(this,"_button"),ze(this,"_touchStart"),ze(this,"_touchCurrent"),ze(this,"_input"),ze(this,"_switchSensibility"),ze(this,"_startFingerDistance"),ze(this,"_currentFingerDistance"),ze(this,"_startFingerRotation"),ze(this,"_currentFingerRotation"),ze(this,"_devPxRatio"),ze(this,"_downValid"),ze(this,"_nclicks"),ze(this,"_downEvents"),ze(this,"_clickStart"),ze(this,"_maxDownTime"),ze(this,"_maxInterval"),ze(this,"_posThreshold"),ze(this,"_movementThreshold"),ze(this,"_currentCursorPosition"),ze(this,"_startCursorPosition"),ze(this,"_grid"),ze(this,"_gridPosition"),ze(this,"_gizmos"),ze(this,"_curvePts"),ze(this,"_timeStart"),ze(this,"_animationId"),ze(this,"focusAnimationTime"),ze(this,"_timePrev"),ze(this,"_timeCurrent"),ze(this,"_anglePrev"),ze(this,"_angleCurrent"),ze(this,"_cursorPosPrev"),ze(this,"_cursorPosCurr"),ze(this,"_wPrev"),ze(this,"_wCurr"),ze(this,"adjustNearFar"),ze(this,"scaleFactor"),ze(this,"dampingFactor"),ze(this,"wMax"),ze(this,"enableAnimations"),ze(this,"enableGrid"),ze(this,"cursorZoom"),ze(this,"minFov"),ze(this,"maxFov"),ze(this,"enabled"),ze(this,"enablePan"),ze(this,"enableRotate"),ze(this,"enableZoom"),ze(this,"minDistance"),ze(this,"maxDistance"),ze(this,"minZoom"),ze(this,"maxZoom"),ze(this,"target"),ze(this,"_currentTarget"),ze(this,"_tbRadius"),ze(this,"_state"),ze(this,"onWindowResize",()=>{const r=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c)}const s=this._tbRadius/r,a=new pf(0,0,s,s).getPoints(this._curvePts),l=new It().setFromPoints(a);for(const c in this._gizmos.children){const u=this._gizmos.children[c];u.geometry=l}this.dispatchEvent(fi)}),ze(this,"onContextMenu",r=>{if(this.enabled){for(let s=0;s<this.mouseActions.length;s++)if(this.mouseActions[s].mouse==2){r.preventDefault();break}}}),ze(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Yn.NONE}),ze(this,"onPointerDown",r=>{if(r.button==0&&r.isPrimary?(this._downValid=!0,this._downEvents.push(r)):this._downValid=!1,r.pointerType=="touch"&&this._input!=Yn.CURSOR)switch(this._touchStart.push(r),this._touchCurrent.push(r),this._input){case Yn.NONE:this._input=Yn.ONE_FINGER,this.onSinglePanStart(r,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case Yn.ONE_FINGER:case Yn.ONE_FINGER_SWITCHED:this._input=Yn.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Yn.TWO_FINGER:this._input=Yn.MULT_FINGER,this.onTriplePanStart();break}else if(r.pointerType!="touch"&&this._input==Yn.NONE){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT"),this._mouseOp=this.getOpFromAction(r.button,s),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=Yn.CURSOR,this._button=r.button,this.onSinglePanStart(r,this._mouseOp))}}),ze(this,"onPointerMove",r=>{if(r.pointerType=="touch"&&this._input!=Yn.CURSOR)switch(this._input){case Yn.ONE_FINGER:this.updateTouchEvent(r),this.onSinglePanMove(r,Gt.ROTATE);break;case Yn.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],r)*this._devPxRatio>=this._switchSensibility){this._input=Yn.ONE_FINGER,this.updateTouchEvent(r),this.onSinglePanStart(r,"ROTATE");break}break;case Yn.TWO_FINGER:this.updateTouchEvent(r),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Yn.MULT_FINGER:this.updateTouchEvent(r),this.onTriplePanMove();break}else if(r.pointerType!="touch"&&this._input==Yn.CURSOR){let s=null;r.ctrlKey||r.metaKey?s="CTRL":r.shiftKey&&(s="SHIFT");const o=this.getOpStateFromAction(this._button,s);o&&this.onSinglePanMove(r,o)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],r)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),ze(this,"onPointerUp",r=>{if(r.pointerType=="touch"&&this._input!=Yn.CURSOR){const s=this._touchCurrent.length;for(let o=0;o<s;o++)if(this._touchCurrent[o].pointerId==r.pointerId){this._touchCurrent.splice(o,1),this._touchStart.splice(o,1);break}switch(this._input){case Yn.ONE_FINGER:case Yn.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Yn.NONE,this.onSinglePanEnd();break;case Yn.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=Yn.ONE_FINGER_SWITCHED;break;case Yn.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Yn.NONE,this.onTriplePanEnd());break}}else r.pointerType!="touch"&&this._input==Yn.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Yn.NONE,this.onSinglePanEnd(),this._button=-1);if(r.isPrimary)if(this._downValid)if(r.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const o=r.timeStamp-this._clickStart,a=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;o<=this._maxInterval&&a<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(r)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),ze(this,"onWheel",r=>{var s,o;if(this.enabled&&this.enableZoom&&this.domElement){let a=null;r.ctrlKey||r.metaKey?a="CTRL":r.shiftKey&&(a="SHIFT");const l=this.getOpFromAction("WHEEL",a);if(l){r.preventDefault(),this.dispatchEvent(wa);const c=125;let u=r.deltaY/c,h=1;switch(u>0?h=1/this.scaleFactor:u<0&&(h=this.scaleFactor),l){case"ZOOM":if(this.updateTbState(Gt.SCALE,!0),u>0?h=1/Math.pow(this.scaleFactor,u):u<0&&(h=Math.pow(this.scaleFactor,-u)),this.cursorZoom&&this.enablePan){let f;this.camera instanceof Qn&&(f=(s=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof on&&(f=(o=this.unprojectOnTbPlane(this.camera,r.clientX,r.clientY,this.domElement))==null?void 0:o.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),f!==void 0&&this.applyTransformMatrix(this.applyScale(h,f))}else this.applyTransformMatrix(this.applyScale(h,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(fi),this.dispatchEvent(Fo);break;case"FOV":if(this.camera instanceof on){this.updateTbState(Gt.FOV,!0),r.deltaX!=0&&(u=r.deltaX/c,h=1,u>0?h=1/Math.pow(this.scaleFactor,u):u<0&&(h=Math.pow(this.scaleFactor,-u))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const f=this._v3_1.distanceTo(this._gizmos.position);let d=f/h;d=Dt.clamp(d,this.minDistance,this.maxDistance);const m=f*Math.tan(Dt.DEG2RAD*this.camera.fov*.5);let A=Dt.RAD2DEG*(Math.atan(m/d)*2);A>this.maxFov?A=this.maxFov:A<this.minFov&&(A=this.minFov);const y=m/Math.tan(Dt.DEG2RAD*(A/2));h=f/y,this.setFov(A),this.applyTransformMatrix(this.applyScale(h,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(fi),this.dispatchEvent(Fo);break}}}}),ze(this,"onSinglePanStart",(r,s)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(wa),this.setCenter(r.clientX,r.clientY),s){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(fi)),this.camera){this.updateTbState(Gt.PAN,!0);const o=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement);o!==void 0&&this._startCursorPosition.copy(o),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(fi))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(Gt.ROTATE,!0);const o=this.unprojectOnTbSurface(this.camera,pn.x,pn.y,this.domElement,this._tbRadius);o!==void 0&&this._startCursorPosition.copy(o),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(fi);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof on&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(fi)),this.updateTbState(Gt.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(fi)),this.updateTbState(Gt.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),ze(this,"onSinglePanMove",(r,s)=>{if(this.enabled&&this.domElement){const o=s!=this._state;switch(this.setCenter(r.clientX,r.clientY),s){case Gt.PAN:if(this.enablePan&&this.camera)if(o){this.dispatchEvent(Fo),this.dispatchEvent(wa),this.updateTbState(s,!0);const a=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const a=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement);a!==void 0&&this._currentCursorPosition.copy(a),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case Gt.ROTATE:if(this.enableRotate&&this.camera)if(o){this.dispatchEvent(Fo),this.dispatchEvent(wa),this.updateTbState(s,!0);const a=this.unprojectOnTbSurface(this.camera,pn.x,pn.y,this.domElement,this._tbRadius);a!==void 0&&this._startCursorPosition.copy(a),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const a=this.unprojectOnTbSurface(this.camera,pn.x,pn.y,this.domElement,this._tbRadius);a!==void 0&&this._currentCursorPosition.copy(a);const l=this._startCursorPosition.distanceTo(this._currentCursorPosition),c=this._startCursorPosition.angleTo(this._currentCursorPosition),u=Math.max(l/this._tbRadius,c);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),u)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=u,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case Gt.SCALE:if(this.enableZoom)if(o)this.dispatchEvent(Fo),this.dispatchEvent(wa),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this.applyTransformMatrix(this.applyScale(c,this._gizmos.position))}break;case Gt.FOV:if(this.enableZoom&&this.camera instanceof on)if(o)this.dispatchEvent(Fo),this.dispatchEvent(wa),this.updateTbState(s,!0),this._startCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let h=u/c;h=Dt.clamp(h,this.minDistance,this.maxDistance);const f=u*Math.tan(Dt.DEG2RAD*this._fovState*.5);let d=Dt.RAD2DEG*(Math.atan(f/h)*2);d=Dt.clamp(d,this.minFov,this.maxFov);const m=f/Math.tan(Dt.DEG2RAD*(d/2));c=u/m,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const A=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(m/u);this._m4_1.makeTranslation(A.x,A.y,A.z)}break}this.dispatchEvent(fi)}}),ze(this,"onSinglePanEnd",()=>{if(this._state==Gt.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const s=Math.abs((this._wPrev+this._wCurr)/2),o=this;this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(Gt.ANIMATION_ROTATE,!0);const l=o.calculateRotationAxis(o._cursorPosPrev,o._cursorPosCurr);o.onRotationAnim(a,l,Math.min(s,o.wMax))})}else this.updateTbState(Gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(fi);else this.updateTbState(Gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(fi)}else(this._state==Gt.PAN||this._state==Gt.IDLE)&&(this.updateTbState(Gt.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(fi));this.dispatchEvent(Fo)}),ze(this,"onDoubleTap",r=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(wa),this.setCenter(r.clientX,r.clientY);const s=this.unprojectOnObj(this.getCursorNDC(pn.x,pn.y,this.domElement),this.camera);if(s&&this.enableAnimations){const o=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(a){o.updateTbState(Gt.ANIMATION_FOCUS,!0),o.onFocusAnim(a,s,o._cameraMatrixState,o._gizmoMatrixState)})}else s&&!this.enableAnimations&&(this.updateTbState(Gt.FOCUS,!0),this.focus(s,this.scaleFactor),this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(fi))}this.dispatchEvent(Fo)}),ze(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(wa),this.updateTbState(Gt.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const r=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement,!0);r!==void 0&&this._startCursorPosition.copy(r),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),ze(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Gt.PAN&&(this.updateTbState(Gt.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const r=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement,!0);r!==void 0&&this._currentCursorPosition.copy(r),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(fi)}}),ze(this,"onDoublePanEnd",()=>{this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(Fo)}),ze(this,"onRotateStart",()=>{var r;this.enabled&&this.enableRotate&&(this.dispatchEvent(wa),this.updateTbState(Gt.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(r=this.camera)==null||r.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),ze(this,"onRotateMove",()=>{var r;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let s;this._state!=Gt.ZROTATE&&(this.updateTbState(Gt.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),s=(r=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement))==null?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):s=new D().setFromMatrixPosition(this._gizmoMatrixState);const o=Dt.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);s!==void 0&&this.applyTransformMatrix(this.zRotate(s,o)),this.dispatchEvent(fi)}}),ze(this,"onRotateEnd",()=>{this.updateTbState(Gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Fo)}),ze(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(wa),this.updateTbState(Gt.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),ze(this,"onPinchMove",()=>{var r,s;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const o=12;this._state!=Gt.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(Gt.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),o*this._devPxRatio);const a=this._currentFingerDistance/this._startFingerDistance;let l;this.enablePan?this.camera instanceof Qn?l=(r=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement))==null?void 0:r.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof on&&(l=(s=this.unprojectOnTbPlane(this.camera,pn.x,pn.y,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):l=this._gizmos.position,l!==void 0&&this.applyTransformMatrix(this.applyScale(a,l)),this.dispatchEvent(fi)}}),ze(this,"onPinchEnd",()=>{this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(Fo)}),ze(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(wa),this.updateTbState(Gt.SCALE,!0);let r=0,s=0;const o=this._touchCurrent.length;for(let a=0;a<o;a++)r+=this._touchCurrent[a].clientX,s+=this._touchCurrent[a].clientY;this.setCenter(r/o,s/o),this._startCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),ze(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let r=0,s=0;const o=this._touchCurrent.length;for(let y=0;y<o;y++)r+=this._touchCurrent[y].clientX,s+=this._touchCurrent[y].clientY;this.setCenter(r/o,s/o);const a=8;this._currentCursorPosition.setY(this.getCursorNDC(pn.x,pn.y,this.domElement).y*.5);const l=this._currentCursorPosition.y-this._startCursorPosition.y;let c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*a):l>0&&(c=Math.pow(this.scaleFactor,l*a)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const u=this._v3_1.distanceTo(this._gizmos.position);let h=u/c;h=Dt.clamp(h,this.minDistance,this.maxDistance);const f=u*Math.tan(Dt.DEG2RAD*this._fovState*.5);let d=Dt.RAD2DEG*(Math.atan(f/h)*2);d=Dt.clamp(d,this.minFov,this.maxFov);const m=f/Math.tan(Dt.DEG2RAD*(d/2));c=u/m,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(d),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));const A=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(m/u);this._m4_1.makeTranslation(A.x,A.y,A.z),this.dispatchEvent(fi)}}),ze(this,"onTriplePanEnd",()=>{this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(Fo)}),ze(this,"setCenter",(r,s)=>{pn.x=r,pn.y=s}),ze(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),ze(this,"setMouseAction",(r,s,o=null)=>{const a=["PAN","ROTATE","ZOOM","FOV"],l=[0,1,2,"WHEEL"],c=["CTRL","SHIFT",null];let u;if(!a.includes(r)||!l.includes(s)||!c.includes(o)||s=="WHEEL"&&r!="ZOOM"&&r!="FOV")return!1;switch(r){case"PAN":u=Gt.PAN;break;case"ROTATE":u=Gt.ROTATE;break;case"ZOOM":u=Gt.SCALE;break;case"FOV":u=Gt.FOV;break}const h={operation:r,mouse:s,key:o,state:u};for(let f=0;f<this.mouseActions.length;f++)if(this.mouseActions[f].mouse==h.mouse&&this.mouseActions[f].key==h.key)return this.mouseActions.splice(f,1,h),!0;return this.mouseActions.push(h),!0}),ze(this,"getOpFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.operation;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.operation}return null}),ze(this,"getOpStateFromAction",(r,s)=>{let o;for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==s)return o.state;if(s){for(let a=0;a<this.mouseActions.length;a++)if(o=this.mouseActions[a],o.mouse==r&&o.key==null)return o.state}return null}),ze(this,"getAngle",(r,s)=>Math.atan2(s.clientY-r.clientY,s.clientX-r.clientX)*180/Math.PI),ze(this,"updateTouchEvent",r=>{for(let s=0;s<this._touchCurrent.length;s++)if(this._touchCurrent[s].pointerId==r.pointerId){this._touchCurrent.splice(s,1,r);break}}),ze(this,"calculateAngularSpeed",(r,s,o,a)=>{const l=s-r,c=(a-o)/1e3;return c==0?0:l/c}),ze(this,"calculatePointersDistance",(r,s)=>Math.sqrt(Math.pow(s.clientX-r.clientX,2)+Math.pow(s.clientY-r.clientY,2))),ze(this,"calculateRotationAxis",(r,s)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(r,s).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),ze(this,"calculateTbRadius",r=>{const o=r.position.distanceTo(this._gizmos.position);if(r instanceof on){const a=Dt.DEG2RAD*r.fov*.5,l=Math.atan(r.aspect*Math.tan(a));return Math.tan(Math.min(a,l))*o*.67}else if(r instanceof Qn)return Math.min(r.top,r.right)*.67}),ze(this,"focus",(r,s,o=1)=>{if(this.camera){const a=r.clone();a.sub(this._gizmos.position).multiplyScalar(o),this._translationMatrix.makeTranslation(a.x,a.y,a.z);const l=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const c=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(s,this._gizmos.position)),this._gizmoMatrixState.copy(l),this._cameraMatrixState.copy(c)}}),ze(this,"drawGrid",()=>{if(this.scene){let o,a,l,c;if(this.camera instanceof Qn){const u=this.camera.right-this.camera.left,h=this.camera.bottom-this.camera.top;l=Math.max(u,h),c=l/20,o=l/this.camera.zoom*3,a=o/c*this.camera.zoom}else if(this.camera instanceof on){const u=this.camera.position.distanceTo(this._gizmos.position),h=Dt.DEG2RAD*this.camera.fov*.5,f=Math.atan(this.camera.aspect*Math.tan(h));l=Math.tan(Math.max(h,f))*u*2,c=l/20,o=l*3,a=o/c}this._grid==null&&this.camera&&(this._grid=new QQ(o,a,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),ze(this,"connect",r=>{r===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=r,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),ze(this,"dispose",()=>{var r,s,o,a,l;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(r=this.domElement)==null||r.removeEventListener("pointerdown",this.onPointerDown),(s=this.domElement)==null||s.removeEventListener("pointercancel",this.onPointerCancel),(o=this.domElement)==null||o.removeEventListener("wheel",this.onWheel),(a=this.domElement)==null||a.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(l=this.scene)==null||l.remove(this._gizmos),this.disposeGrid()}),ze(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),ze(this,"easeOutCubic",r=>1-Math.pow(1-r,3)),ze(this,"activateGizmos",r=>{for(const s of this._gizmos.children)s.material.setValues({opacity:r?1:.6})}),ze(this,"getCursorNDC",(r,s,o)=>{const a=o.getBoundingClientRect();return this._v2_1.setX((r-a.left)/a.width*2-1),this._v2_1.setY((a.bottom-s)/a.height*2-1),this._v2_1.clone()}),ze(this,"getCursorPosition",(r,s,o)=>(this._v2_1.copy(this.getCursorNDC(r,s,o)),this.camera instanceof Qn&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),ze(this,"setCamera",r=>{if(r){r.lookAt(this.target),r.updateMatrix(),r instanceof on&&(this._fov0=r.fov,this._fovState=r.fov),this._cameraMatrixState0.copy(r.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(r.projectionMatrix),this._zoom0=r.zoom,this._zoomState=this._zoom0,this._initialNear=r.near,this._nearPos0=r.position.distanceTo(this.target)-r.near,this._nearPos=this._initialNear,this._initialFar=r.far,this._farPos0=r.position.distanceTo(this.target)-r.far,this._farPos=this._initialFar,this._up0.copy(r.up),this._upState.copy(r.up),this.camera=r,this.camera.updateProjectionMatrix();const s=this.calculateTbRadius(r);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius)}}),ze(this,"makeGizmos",(r,s)=>{const a=new pf(0,0,s,s).getPoints(this._curvePts),l=new It().setFromPoints(a),c=new Gi({color:16744576,fog:!1,transparent:!0,opacity:.6}),u=new Gi({color:8454016,fog:!1,transparent:!0,opacity:.6}),h=new Gi({color:8421631,fog:!1,transparent:!0,opacity:.6}),f=new cn(l,c),d=new cn(l,u),m=new cn(l,h),A=Math.PI*.5;if(f.rotation.x=A,d.rotation.y=A,this._gizmoMatrixState0.identity().setPosition(r),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const y=1/this.camera.zoom;this._scaleMatrix.makeScale(y,y,y),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(r.x,r.y,r.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(f),this._gizmos.add(d),this._gizmos.add(m)}),ze(this,"onFocusAnim",(r,s,o,a)=>{if(this._timeStart==-1&&(this._timeStart=r),this._state==Gt.ANIMATION_FOCUS){const c=(r-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(a),c>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,this.scaleFactor),this._timeStart=-1,this.updateTbState(Gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(fi);else{const u=this.easeOutCubic(c),h=1-u+this.scaleFactor*u;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(s,h,u),this.dispatchEvent(fi);const f=this;this._animationId=window.requestAnimationFrame(function(d){f.onFocusAnim(d,s,o,a.clone())})}}else this._animationId=-1,this._timeStart=-1}),ze(this,"onRotationAnim",(r,s,o)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=r),this._state==Gt.ANIMATION_ROTATE){const a=(r-this._timeStart)/1e3;if(o+-this.dampingFactor*a>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(a,2)+o*a+0,this.applyTransformMatrix(this.rotate(s,this._angleCurrent)),this.dispatchEvent(fi);const c=this;this._animationId=window.requestAnimationFrame(function(u){c.onRotationAnim(u,s,o)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(Gt.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(fi)}else this._animationId=-1,this._timeStart=-1,this._state!=Gt.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(fi))}),ze(this,"pan",(r,s,o=!1)=>{if(this.camera){const a=r.clone().sub(s);if(this.camera instanceof Qn&&a.multiplyScalar(1/this.camera.zoom),this.camera instanceof on&&o){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const l=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);a.multiplyScalar(1/l)}this._v3_1.set(a.x,a.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return lo}),ze(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof on&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const r=this.calculateTbRadius(this.camera);r!==void 0&&(this._tbRadius=r),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(fi)}}),ze(this,"rotate",(r,s)=>{const o=this._gizmos.position;return this._translationMatrix.makeTranslation(-o.x,-o.y,-o.z),this._rotationMatrix.makeRotationAxis(r,-s),this._m4_1.makeTranslation(o.x,o.y,o.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),lo}),ze(this,"copyState",()=>{if(this.camera){const r=JSON.stringify(this.camera instanceof Qn?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(r)}}),ze(this,"pasteState",()=>{const r=this;navigator.clipboard.readText().then(function(o){r.setStateFromJSON(o)})}),ze(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof on&&(this._fov0=this.camera.fov))}),ze(this,"applyScale",(r,s,o=!0)=>{if(!this.camera)return;const a=s.clone();let l=1/r;if(this.camera instanceof Qn){this.camera.zoom=this._zoomState,this.camera.zoom*=r,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,l=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,l=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(l,l,l),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),a.sub(this._v3_1);const c=a.clone().multiplyScalar(l);return a.sub(c),this._m4_1.makeTranslation(a.x,a.y,a.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),lo}if(this.camera instanceof on){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let c=this._v3_1.distanceTo(a),u=c-c*l;const h=c-u;h<this.minDistance?(l=this.minDistance/c,u=c-c*l):h>this.maxDistance&&(l=this.maxDistance/c,u=c-c*l);let f=a.clone().sub(this._v3_1).normalize().multiplyScalar(u);if(this._m4_1.makeTranslation(f.x,f.y,f.z),o){const d=this._v3_2;c=d.distanceTo(a),u=c-c*l,f=a.clone().sub(this._v3_2).normalize().multiplyScalar(u),this._translationMatrix.makeTranslation(d.x,d.y,d.z),this._scaleMatrix.makeScale(l,l,l),this._m4_2.makeTranslation(f.x,f.y,f.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-d.x,-d.y,-d.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return lo}}),ze(this,"setFov",r=>{this.camera instanceof on&&(this.camera.fov=Dt.clamp(r,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),ze(this,"setTarget",(r,s,o)=>{if(this.camera){this.target.set(r,s,o),this._gizmos.position.set(r,s,o);const a=this.calculateTbRadius(this.camera);a!==void 0&&(this._tbRadius=a),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),ze(this,"zRotate",(r,s)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,s),this._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),this._m4_1.makeTranslation(r.x,r.y,r.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(r),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,s),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),lo)),ze(this,"unprojectOnObj",(r,s)=>{if(!this.scene)return null;const o=new rh;o.near=s.near,o.far=s.far,o.setFromCamera(r,s);const a=o.intersectObjects(this.scene.children,!0);for(let l=0;l<a.length;l++)if(a[l].object.uuid!=this._gizmos.uuid&&a[l].face)return a[l].point.clone();return null}),ze(this,"unprojectOnTbSurface",(r,s,o,a,l)=>{if(r instanceof Qn){this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const c=Math.pow(this._v2_1.x,2),u=Math.pow(this._v2_1.y,2),h=Math.pow(this._tbRadius,2);return c+u<=h*.5?this._v3_1.setZ(Math.sqrt(h-(c+u))):this._v3_1.setZ(h*.5/Math.sqrt(c+u)),this._v3_1}if(r instanceof on){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=r.position.distanceTo(this._gizmos.position),h=Math.pow(l,2),f=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(d==0)return c.set(this._v3_1.x,this._v3_1.y,l),c;const m=f/d,A=u;let y=Math.pow(m,2)+1,p=2*m*A,g=Math.pow(A,2)-h,v=Math.pow(p,2)-4*y*g;if(v>=0&&(this._v2_1.setX((-p-Math.sqrt(v))/(2*y)),this._v2_1.setY(m*this._v2_1.x+A),Dt.RAD2DEG*this._v2_1.angle()>=45)){const C=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(C),c.z+=u,c}y=m,p=A,g=-h*.5,v=Math.pow(p,2)-4*y*g,this._v2_1.setX((-p-Math.sqrt(v))/(2*y)),this._v2_1.setY(m*this._v2_1.x+A);const E=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(E),c.z+=u,c}}),ze(this,"unprojectOnTbPlane",(r,s,o,a,l=!1)=>{if(r instanceof Qn)return this._v2_1.copy(this.getCursorPosition(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(r instanceof on){this._v2_1.copy(this.getCursorNDC(s,o,a)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(r.projectionMatrixInverse);const c=this._v3_1.clone().normalize(),u=this._v3_1.z,h=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let f;if(l?f=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):f=r.position.distanceTo(this._gizmos.position),h==0)return c.set(0,0,0),c;const d=u/h,m=f,A=-m/d,y=Math.sqrt(Math.pow(m,2)+Math.pow(A,2));return c.multiplyScalar(y),c.z=0,c}}),ze(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof Qn&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof on&&(this._fovState=this.camera.fov))}),ze(this,"updateTbState",(r,s)=>{this._state=r,s&&this.updateMatrixState()}),ze(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const s=this.calculateTbRadius(this.camera);s!==void 0&&(this._tbRadius=s),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof Qn&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const s=Dt.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(s/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof on){const s=this.camera.position.distanceTo(this._gizmos.position);if(s>this.maxDistance+1e-6||s<this.minDistance-1e-6){const l=Dt.clamp(s,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(l/s,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=Dt.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const o=this._tbRadius,a=this.calculateTbRadius(this.camera);if(a!==void 0&&(this._tbRadius=a),o<this._tbRadius-1e-6||o>this._tbRadius+1e-6){const l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,c=this._tbRadius/l,h=new pf(0,0,c,c).getPoints(this._curvePts),f=new It().setFromPoints(h);for(const d in this._gizmos.children){const m=this._gizmos.children[d];m.geometry=f}}}this.camera.lookAt(this._gizmos.position)}}),ze(this,"setStateFromJSON",r=>{const s=JSON.parse(r);if(s.arcballState&&this.camera){this._cameraMatrixState.fromArray(s.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(s.arcballState.cameraUp),this.camera.near=s.arcballState.cameraNear,this.camera.far=s.arcballState.cameraFar,this.camera.zoom=s.arcballState.cameraZoom,this.camera instanceof on&&(this.camera.fov=s.arcballState.cameraFov),this._gizmoMatrixState.fromArray(s.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const o=this.calculateTbRadius(this.camera);o!==void 0&&(this._tbRadius=o);const a=new Oe().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(a),this.camera.lookAt(this._gizmos.position),this.updateTbState(Gt.IDLE,!1),this.dispatchEvent(fi)}}),this.camera=null,this.domElement=t,this.scene=i,this.mouseActions=[],this._mouseOp=null,this._v2_1=new Ee,this._v3_1=new D,this._v3_2=new D,this._m4_1=new Oe,this._m4_2=new Oe,this._quat=new St,this._translationMatrix=new Oe,this._rotationMatrix=new Oe,this._scaleMatrix=new Oe,this._rotationAxis=new D,this._cameraMatrixState=new Oe,this._cameraProjectionState=new Oe,this._fovState=1,this._upState=new D,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new Oe,this._up0=new D,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new Oe,this._gizmoMatrixState0=new Oe,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Yn.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new D,this._startCursorPosition=new D,this._grid=null,this._gridPosition=new D,this._gizmos=new Gs,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new D,this._cursorPosCurr=new D,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new D(0,0,0),this._currentTarget=new D(0,0,0),this._tbRadius=1,this._state=Gt.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if(e!=null&&e.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==Gt.ROTATE||this._state==Gt.ZROTATE||this._state==Gt.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e!=null&&e.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==Gt.SCALE||this._state==Gt.FOCUS||this._state==Gt.ANIMATION_FOCUS)&&this.camera){const t=this.calculateTbRadius(this.camera);if(t!==void 0&&(this._tbRadius=t),this.adjustNearFar){const i=this.camera.position.distanceTo(this._gizmos.position),r=new Bn;r.setFromObject(this._gizmos);const s=new vi;r.getBoundingSphere(s);const o=Math.max(this._nearPos0,s.radius+s.center.length()),a=i-this._initialNear,l=Math.min(o,a);this.camera.near=i-l;const c=Math.min(this._farPos0,-s.radius+s.center.length()),u=i-this._initialFar,h=Math.min(c,u);this.camera.far=i-h,this.camera.updateProjectionMatrix()}else{let i=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,i=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,i=!0),i&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(fi)}setTransformationMatrices(e=null,t=null){e?lo.camera?lo.camera.copy(e):lo.camera=e.clone():lo.camera=null,t?lo.gizmos?lo.gizmos.copy(t):lo.gizmos=t.clone():lo.gizmos=null}};var SAe=Object.defineProperty,CAe=(n,e,t)=>e in n?SAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ii=(n,e,t)=>(CAe(n,typeof e!="symbol"?e+"":e,t),t);function KF(n){n.preventDefault()}let MAe=class extends Or{constructor(e,t){super(),ii(this,"object"),ii(this,"domElement",null),ii(this,"movementSpeed",1),ii(this,"rollSpeed",.005),ii(this,"dragToLook",!1),ii(this,"autoForward",!1),ii(this,"changeEvent",{type:"change"}),ii(this,"EPS",1e-6),ii(this,"tmpQuaternion",new St),ii(this,"mouseStatus",0),ii(this,"movementSpeedMultiplier",1),ii(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),ii(this,"moveVector",new D(0,0,0)),ii(this,"rotationVector",new D(0,0,0)),ii(this,"keydown",i=>{if(!i.altKey){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),ii(this,"keyup",i=>{switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),ii(this,"pointerdown",i=>{if(this.dragToLook)this.mouseStatus++;else{switch(i.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),ii(this,"pointermove",i=>{if(!this.dragToLook||this.mouseStatus>0){const r=this.getContainerDimensions(),s=r.size[0]/2,o=r.size[1]/2;this.moveState.yawLeft=-(i.pageX-r.offset[0]-s)/s,this.moveState.pitchDown=(i.pageY-r.offset[1]-o)/o,this.updateRotationVector()}}),ii(this,"pointerup",i=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(i.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),ii(this,"lastQuaternion",new St),ii(this,"lastPosition",new D),ii(this,"update",i=>{const r=i*this.movementSpeed,s=i*this.rollSpeed;this.object.translateX(this.moveVector.x*r),this.object.translateY(this.moveVector.y*r),this.object.translateZ(this.moveVector.z*r),this.tmpQuaternion.set(this.rotationVector.x*s,this.rotationVector.y*s,this.rotationVector.z*s,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),ii(this,"updateMovementVector",()=>{const i=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-i+this.moveState.back}),ii(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),ii(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),ii(this,"connect",i=>{this.domElement=i,i instanceof Document||i.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",KF),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),ii(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",KF),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=e,t!==void 0&&this.connect(t),this.updateMovementVector(),this.updateRotationVector()}};var bAe=Object.defineProperty,TAe=(n,e,t)=>e in n?bAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sf=(n,e,t)=>(TAe(n,typeof e!="symbol"?e+"":e,t),t);class NE{constructor(){sf(this,"enabled",!0),sf(this,"needsSwap",!0),sf(this,"clear",!1),sf(this,"renderToScreen",!1)}setSize(e,t){}render(e,t,i,r,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class lc{constructor(e){sf(this,"camera",new Qn(-1,1,1,-1,0,1)),sf(this,"geometry",new dr(2,2)),sf(this,"mesh"),this.mesh=new ct(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}var IAe=Object.defineProperty,BAe=(n,e,t)=>e in n?IAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,T2=(n,e,t)=>(BAe(n,typeof e!="symbol"?e+"":e,t),t);class Wb extends NE{constructor(e,t="tDiffuse"){super(),T2(this,"textureID"),T2(this,"uniforms"),T2(this,"material"),T2(this,"fsQuad"),this.textureID=t,e instanceof Fn?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=ca.clone(e.uniforms),this.material=new Fn({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new lc(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const JF={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var PAe=Object.defineProperty,RAe=(n,e,t)=>e in n?PAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,i4=(n,e,t)=>(RAe(n,typeof e!="symbol"?e+"":e,t),t);class ZF extends NE{constructor(e,t){super(),i4(this,"scene"),i4(this,"camera"),i4(this,"inverse"),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class DAe extends NE{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}var LAe=Object.defineProperty,FAe=(n,e,t)=>e in n?LAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Oo=(n,e,t)=>(FAe(n,typeof e!="symbol"?e+"":e,t),t);class OAe{constructor(e,t){if(Oo(this,"renderer"),Oo(this,"_pixelRatio"),Oo(this,"_width"),Oo(this,"_height"),Oo(this,"renderTarget1"),Oo(this,"renderTarget2"),Oo(this,"writeBuffer"),Oo(this,"readBuffer"),Oo(this,"renderToScreen"),Oo(this,"passes",[]),Oo(this,"copyPass"),Oo(this,"clock"),this.renderer=e,t===void 0){const i={minFilter:Ut,magFilter:Ut,format:Dn},r=e.getSize(new Ee);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new Rn(this._width*this._pixelRatio,this._height*this._pixelRatio,i),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,JF===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),Wb===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Wb(JF),this.copyPass.material.blending=sa,this.clock=new Wm}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;const r=this.passes.length;for(let s=0;s<r;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}ZF!==void 0&&(o instanceof ZF?i=!0:o instanceof DAe&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Ee);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}var UAe=Object.defineProperty,zAe=(n,e,t)=>e in n?UAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fh=(n,e,t)=>(zAe(n,typeof e!="symbol"?e+"":e,t),t);class kAe extends NE{constructor(e,t,i,r,s=0){super(),Fh(this,"scene"),Fh(this,"camera"),Fh(this,"overrideMaterial"),Fh(this,"clearColor"),Fh(this,"clearAlpha"),Fh(this,"clearDepth",!1),Fh(this,"_oldClearColor",new We),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,t,i){let r=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}function Pm(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const of="srgb",vc="srgb-linear",$F=3001,NAe=3e3;class x8 extends Hi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new WAe(t)}),this.register(function(t){return new jAe(t)}),this.register(function(t){return new tve(t)}),this.register(function(t){return new nve(t)}),this.register(function(t){return new ive(t)}),this.register(function(t){return new YAe(t)}),this.register(function(t){return new qAe(t)}),this.register(function(t){return new KAe(t)}),this.register(function(t){return new JAe(t)}),this.register(function(t){return new VAe(t)}),this.register(function(t){return new ZAe(t)}),this.register(function(t){return new XAe(t)}),this.register(function(t){return new eve(t)}),this.register(function(t){return new $Ae(t)}),this.register(function(t){return new HAe(t)}),this.register(function(t){return new rve(t)}),this.register(function(t){return new sve(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Ac.extractUrlBase(e);o=Ac.resolveURL(c,this.path)}else o=Ac.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ri(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Pm(new Uint8Array(e.slice(0,4)))===Mj){try{o[Cn.KHR_BINARY_GLTF]=new ove(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Cn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Pm(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new yve(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],h=s.extensionsRequired||[];switch(u){case Cn.KHR_MATERIALS_UNLIT:o[u]=new QAe;break;case Cn.KHR_DRACO_MESH_COMPRESSION:o[u]=new ave(s,this.dracoLoader);break;case Cn.KHR_TEXTURE_TRANSFORM:o[u]=new lve;break;case Cn.KHR_MESH_QUANTIZATION:o[u]=new cve;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function GAe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Cn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class HAe{constructor(e){this.parser=e,this.name=Cn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new We(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],vc);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new hE(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new hA(u),c.distance=h;break;case"spot":c=new uE(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,rc(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class QAe{constructor(){this.name=Cn.KHR_MATERIALS_UNLIT}getMaterialType(){return mr}extendParams(e,t,i){const r=[];e.color=new We(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],vc),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,of))}return Promise.all(r)}}class VAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class WAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ee(a,a)}return Promise.all(s)}}class jAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class XAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class YAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new We(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],vc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,of)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class qAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class KAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new We().setRGB(a[0],a[1],a[2],vc),Promise.all(s)}}class JAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class ZAe{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new We().setRGB(a[0],a[1],a[2],vc),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,of)),Promise.all(s)}}class $Ae{constructor(e){this.parser=e,this.name=Cn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class eve{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class tve{constructor(e){this.parser=e,this.name=Cn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class nve{constructor(e){this.parser=e,this.name=Cn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class ive{constructor(e){this.parser=e,this.name=Cn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class rve{constructor(e){this.name=Cn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,h=r.byteStride,f=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,f,r.mode,r.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(d),u,h,f,r.mode,r.filter),d})})}else return null}}class sve{constructor(e){this.name=Cn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Go.TRIANGLES&&c.mode!==Go.TRIANGLE_STRIP&&c.mode!==Go.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],f=c[0].count,d=[];for(const m of h){const A=new Oe,y=new D,p=new St,g=new D(1,1,1),v=new NA(m.geometry,m.material,f);for(let E=0;E<f;E++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&p.fromBufferAttribute(l.ROTATION,E),l.SCALE&&g.fromBufferAttribute(l.SCALE,E),v.setMatrixAt(E,A.compose(y,p,g));for(const E in l)if(E==="_COLOR_0"){const S=l[E];v.instanceColor=new Qa(S.array,S.itemSize,S.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&m.geometry.setAttribute(E,l[E]);kt.prototype.copy.call(v,m),this.parser.assignFinalMaterial(v),d.push(v)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const Mj="glTF",o1=12,eO={JSON:1313821514,BIN:5130562};class ove{constructor(e){this.name=Cn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,o1);if(this.header={magic:Pm(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Mj)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-o1,r=new DataView(e,o1);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===eO.JSON){const l=new Uint8Array(e,o1+s,o);this.content=Pm(l)}else if(a===eO.BIN){const l=o1+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ave{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Cn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=jb[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=jb[u]||u.toLowerCase();if(o[u]!==void 0){const f=i.accessors[e.attributes[u]],d=sm[f.componentType];c[h]=d.name,l[h]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h,f){r.decodeDracoFile(u,function(d){for(const m in d.attributes){const A=d.attributes[m],y=l[m];y!==void 0&&(A.normalized=y)}h(d)},a,c,vc,f)})})}}class lve{constructor(){this.name=Cn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class cve{constructor(){this.name=Cn.KHR_MESH_QUANTIZATION}}class bj extends Vm{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,h=(i-t)/u,f=h*h,d=f*h,m=e*c,A=m-c,y=-2*d+3*f,p=d-f,g=1-y,v=p-f+h;for(let E=0;E!==a;E++){const S=o[A+E+a],C=o[A+E+l]*u,M=o[m+E+a],b=o[m+E]*u;s[E]=g*S+v*C+y*M+p*b}return s}}const uve=new St;class hve extends bj{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return uve.fromArray(s).normalize().toArray(s),s}}const Go={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tO={9728:rn,9729:Ut,9984:eA,9985:L3,9986:Kp,9987:yo},nO={33071:qn,33648:ym,10497:Fr},r4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...dj>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},fve={CUBICSPLINE:void 0,LINEAR:Sf,STEP:xm},s4={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function dve(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new zf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ss})),n.DefaultMaterial}function Oh(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function rc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function pve(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const f=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(f)}if(r){const f=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],f=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function mve(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function gve(n){let e;const t=n.extensions&&n.extensions[Cn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+o4(t.attributes):e=n.indices+":"+o4(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+o4(n.targets[i]);return e}function o4(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Xb(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ave(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const vve=new Oe;class yve{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GAe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Tl(this.options.manager):this.textureLoader=new LQ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ri(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Oh(s,a,r),rc(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Cn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Ac.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=r4[r.type],a=sm[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new zt(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=r4[r.type],c=sm[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,f=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let A,y;if(d&&d!==h){const p=Math.floor(f/d),g="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count;let v=t.cache.get(g);v||(A=new c(a,p*d,r.count*d/u),v=new zA(A,d/u),t.cache.add(g,v)),y=new Hs(v,l,f%d/u,m)}else a===null?A=new c(r.count*l):A=new c(a,f,r.count*l),y=new zt(A,l,m);if(r.sparse!==void 0){const p=r4.SCALAR,g=sm[r.sparse.indices.componentType],v=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,S=new g(o[1],v,r.sparse.count*p),C=new c(o[2],E,r.sparse.count*l);a!==null&&(y=new zt(y.array.slice(),y.itemSize,y.normalized));for(let M=0,b=S.length;M<b;M++){const T=S[M];if(y.setX(T,C[M*l]),l>=2&&y.setY(T,C[M*l+1]),l>=3&&y.setZ(T,C[M*l+2]),l>=4&&y.setW(T,C[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return u.magFilter=tO[f.magFilter]||Ut,u.minFilter=tO[f.minFilter]||yo,u.wrapS=nO[f.wrapS]||Fr,u.wrapT=nO[f.wrapT]||Fr,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const f=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(f,d){let m=f;t.isImageBitmapLoader===!0&&(m=function(A){const y=new In(A);y.needsUpdate=!0,f(y)}),t.load(Ac.resolveURL(h,s.path),m,void 0,d)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),rc(h,o),h.userData.mimeType=o.mimeType||Ave(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Cn.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Cn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Cn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===$F?of:vc),"colorSpace"in o?o.colorSpace=r:o.encoding=r===of?$F:NAe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new GA,Ji.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Gi,Ji.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return zf}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Cn.KHR_MATERIALS_UNLIT]){const h=r[Cn.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new We(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],vc),a.opacity=f[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,of)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Vn);const u=s.alphaMode||s4.OPAQUE;if(u===s4.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===s4.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==mr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ee(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&o!==mr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==mr){const h=s.emissiveFactor;a.emissive=new We().setRGB(h[0],h[1],h[2],vc)}return s.emissiveTexture!==void 0&&o!==mr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,of)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),rc(h,s),t.associations.set(h,{materials:e}),s.extensions&&Oh(r,h,s),h})}createUniqueName(e){const t=_n.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Cn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return iO(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=gve(c),h=r[u];if(h)o.push(h.promise);else{let f;c.extensions&&c.extensions[Cn.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=iO(new It,c,t),r[u]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?dve(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let d=0,m=u.length;d<m;d++){const A=u[d],y=o[d];let p;const g=c[d];if(y.mode===Go.TRIANGLES||y.mode===Go.TRIANGLE_STRIP||y.mode===Go.TRIANGLE_FAN||y.mode===void 0)p=s.isSkinnedMesh===!0?new kA(A,g):new ct(A,g),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),y.mode===Go.TRIANGLE_STRIP?p.geometry=WF(p.geometry,XI):y.mode===Go.TRIANGLE_FAN&&(p.geometry=WF(p.geometry,D_));else if(y.mode===Go.LINES)p=new Xa(A,g);else if(y.mode===Go.LINE_STRIP)p=new cn(A,g);else if(y.mode===Go.LINE_LOOP)p=new i6(A,g);else if(y.mode===Go.POINTS)p=new r6(A,g);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(p.geometry.morphAttributes).length>0&&mve(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),rc(p,s),y.extensions&&Oh(r,p,y),t.assignFinalMaterial(p),h.push(p)}for(let d=0,m=h.length;d<m;d++)t.associations.set(h[d],{meshes:e,primitives:d});if(h.length===1)return s.extensions&&Oh(r,h[0],s),h[0];const f=new Gs;s.extensions&&Oh(r,f,s),t.associations.set(f,{meshes:e});for(let d=0,m=h.length;d<m;d++)f.add(h[d]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new on(Dt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Qn(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),rc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const f=new Oe;s!==null&&f.fromArray(s.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Qm(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,f=r.channels.length;h<f;h++){const d=r.channels[h],m=r.samplers[d.sampler],A=d.target,y=A.node,p=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;A.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",p)),l.push(this.getDependency("accessor",g)),c.push(m),u.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const f=h[0],d=h[1],m=h[2],A=h[3],y=h[4],p=[];for(let g=0,v=f.length;g<v;g++){const E=f[g],S=d[g],C=m[g],M=A[g],b=y[g];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const T=i._createAnimationTracks(E,S,C,M,b);if(T)for(let I=0;I<T.length;I++)p.push(T[I])}return new Vu(s,void 0,p)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],f=c[2];f!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(f,vve)});for(let d=0,m=h.length;d<m;d++)u.add(h[d]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new wm:c.length>1?u=new Gs:c.length===1?u=c[0]:u=new kt,u!==c[0])for(let h=0,f=c.length;h<f;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=o),rc(u,s),s.extensions&&Oh(i,u,s),s.matrix!==void 0){const h=new Oe;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Gs;i.name&&(s.name=r.createUniqueName(i.name)),rc(s,i),i.extensions&&Oh(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[f,d]of r.associations)(f instanceof Ji||f instanceof In)&&h.set(f,d);return u.traverse(f=>{const d=r.associations.get(f);d!=null&&h.set(f,d)}),h};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Jc[s.path]===Jc.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a);let c;switch(Jc[s.path]){case Jc.weights:c=Qu;break;case Jc.rotation:c=bl;break;case Jc.position:case Jc.scale:c=Sc;break;default:switch(i.itemSize){case 1:c=Qu;break;case 2:case 3:default:c=Sc;break}break}const u=r.interpolation!==void 0?fve[r.interpolation]:Sf,h=this._getArrayFromAccessor(i);for(let f=0,d=l.length;f<d;f++){const m=new c(l[f]+"."+Jc[s.path],t.array,h,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Xb(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof bl?hve:bj;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function xve(n,e,t){const i=e.attributes,r=new Bn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new D(l[0],l[1],l[2]),new D(c[0],c[1],c[2])),a.normalized){const u=Xb(sm[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new D,l=new D;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const f=t.json.accessors[h.POSITION],d=f.min,m=f.max;if(d!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(m[2]))),f.normalized){const A=Xb(sm[f.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new vi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function iO(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=jb[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return rc(n,e),xve(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?pve(n,e.targets,t):n})}class _ve extends It{constructor(e,t,i,r){super();const s=[],o=[],a=[],l=new D,c=new Oe;c.makeRotationFromEuler(i),c.setPosition(t);const u=new Oe;u.copy(c).invert(),h(),this.setAttribute("position",new ft(s,3)),this.setAttribute("normal",new ft(o,3)),this.setAttribute("uv",new ft(a,2));function h(){let A,y=[];const p=new D,g=new D;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const v=e.geometry,E=v.attributes.position,S=v.attributes.normal;if(v.index!==null){const C=v.index;for(A=0;A<C.count;A++)p.fromBufferAttribute(E,C.getX(A)),g.fromBufferAttribute(S,C.getX(A)),f(y,p,g)}else for(A=0;A<E.count;A++)p.fromBufferAttribute(E,A),g.fromBufferAttribute(S,A),f(y,p,g);for(y=d(y,l.set(1,0,0)),y=d(y,l.set(-1,0,0)),y=d(y,l.set(0,1,0)),y=d(y,l.set(0,-1,0)),y=d(y,l.set(0,0,1)),y=d(y,l.set(0,0,-1)),A=0;A<y.length;A++){const C=y[A];a.push(.5+C.position.x/r.x,.5+C.position.y/r.y),C.position.applyMatrix4(c),s.push(C.position.x,C.position.y,C.position.z),o.push(C.normal.x,C.normal.y,C.normal.z)}}function f(A,y,p){y.applyMatrix4(e.matrixWorld),y.applyMatrix4(u),p.transformDirection(e.matrixWorld),A.push(new rO(y.clone(),p.clone()))}function d(A,y){const p=[],g=.5*Math.abs(r.dot(y));for(let v=0;v<A.length;v+=3){let E,S,C,M=0,b,T,I,F;const R=A[v+0].position.dot(y)-g,z=A[v+1].position.dot(y)-g,L=A[v+2].position.dot(y)-g;switch(E=R>0,S=z>0,C=L>0,M=(E?1:0)+(S?1:0)+(C?1:0),M){case 0:{p.push(A[v]),p.push(A[v+1]),p.push(A[v+2]);break}case 1:{if(E&&(b=A[v+1],T=A[v+2],I=m(A[v],b,y,g),F=m(A[v],T,y,g)),S){b=A[v],T=A[v+2],I=m(A[v+1],b,y,g),F=m(A[v+1],T,y,g),p.push(I),p.push(T.clone()),p.push(b.clone()),p.push(T.clone()),p.push(I.clone()),p.push(F);break}C&&(b=A[v],T=A[v+1],I=m(A[v+2],b,y,g),F=m(A[v+2],T,y,g)),p.push(b.clone()),p.push(T.clone()),p.push(I),p.push(F),p.push(I.clone()),p.push(T.clone());break}case 2:{E||(b=A[v].clone(),T=m(b,A[v+1],y,g),I=m(b,A[v+2],y,g),p.push(b),p.push(T),p.push(I)),S||(b=A[v+1].clone(),T=m(b,A[v+2],y,g),I=m(b,A[v],y,g),p.push(b),p.push(T),p.push(I)),C||(b=A[v+2].clone(),T=m(b,A[v],y,g),I=m(b,A[v+1],y,g),p.push(b),p.push(T),p.push(I));break}}}return p}function m(A,y,p,g){const v=A.position.dot(p)-g,E=y.position.dot(p)-g,S=v/(v-E);return new rO(new D(A.position.x+S*(y.position.x-A.position.x),A.position.y+S*(y.position.y-A.position.y),A.position.z+S*(y.position.z-A.position.z)),new D(A.normal.x+S*(y.normal.x-A.normal.x),A.normal.y+S*(y.normal.y-A.normal.y),A.normal.z+S*(y.normal.z-A.normal.z)))}}}class rO{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class Eve extends QA{constructor(e,t={}){const{bevelEnabled:i=!1,bevelSize:r=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...h}=t;if(o===void 0)super();else{const f=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(f,{...h,bevelEnabled:i,bevelSize:r,bevelThickness:s,depth:a})}this.type="TextGeometry"}}const wve={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},Sve={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Cve={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},a4=new Nm,l4=new D,Hd=new D,Sa=new D,ql=new D,rl=new D,Kl=new D,Jl=new D,a1=new D,l1=new D,c1=new D,I2=new D,u1=new D,h1=new D,f1=new D;class Mve{constructor(e,t,i){this.camera=e,this.scene=t,this.startPoint=new D,this.endPoint=new D,this.collection=[],this.deep=i||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(a4,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Hd.copy(e),Hd.x=Math.min(e.x,t.x),Hd.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),Sa.setFromMatrixPosition(this.camera.matrixWorld),ql.copy(Hd),rl.set(t.x,Hd.y,0),Kl.copy(t),Jl.set(Hd.x,t.y,0),ql.unproject(this.camera),rl.unproject(this.camera),Kl.unproject(this.camera),Jl.unproject(this.camera),u1.copy(ql).sub(Sa),h1.copy(rl).sub(Sa),f1.copy(Kl).sub(Sa),u1.normalize(),h1.normalize(),f1.normalize(),u1.multiplyScalar(this.deep),h1.multiplyScalar(this.deep),f1.multiplyScalar(this.deep),u1.add(Sa),h1.add(Sa),f1.add(Sa);var i=a4.planes;i[0].setFromCoplanarPoints(Sa,ql,rl),i[1].setFromCoplanarPoints(Sa,rl,Kl),i[2].setFromCoplanarPoints(Kl,Jl,Sa),i[3].setFromCoplanarPoints(Jl,ql,Sa),i[4].setFromCoplanarPoints(rl,Kl,Jl),i[5].setFromCoplanarPoints(f1,h1,u1),i[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),s=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);ql.set(r,s,-1),rl.set(o,s,-1),Kl.set(o,a,-1),Jl.set(r,a,-1),a1.set(r,s,1),l1.set(o,s,1),c1.set(o,a,1),I2.set(r,a,1),ql.unproject(this.camera),rl.unproject(this.camera),Kl.unproject(this.camera),Jl.unproject(this.camera),a1.unproject(this.camera),l1.unproject(this.camera),c1.unproject(this.camera),I2.unproject(this.camera);var i=a4.planes;i[0].setFromCoplanarPoints(ql,a1,l1),i[1].setFromCoplanarPoints(rl,l1,c1),i[2].setFromCoplanarPoints(c1,I2,Jl),i[3].setFromCoplanarPoints(I2,a1,ql),i[4].setFromCoplanarPoints(rl,Kl,Jl),i[5].setFromCoplanarPoints(c1,l1,a1),i[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),l4.copy(t.geometry.boundingSphere.center),l4.applyMatrix4(t.matrixWorld),e.containsPoint(l4)&&this.collection.push(t)),t.children.length>0)for(let i=0;i<t.children.length;i++)this.searchChildInFrustum(e,t.children[i])}}class bve{constructor(e,t=" .:-=+*#%@",i={}){const r=i.resolution||.15,s=i.scale||1,o=i.color||!1,a=i.alpha||!1,l=i.block||!1,c=i.invert||!1,u=i.strResolution||"low";let h,f;const d=document.createElement("div");d.style.cursor="default";const m=document.createElement("table");d.appendChild(m);let A,y,p;this.setSize=function(L,H){h=L,f=H,e.setSize(L,H),g()},this.render=function(L,H){e.render(L,H),z(m)},this.domElement=d;function g(){A=Math.floor(h*r),y=Math.floor(f*r),M.width=A,M.height=y,p=e.domElement,p.style.backgroundColor&&(m.rows[0].cells[0].style.backgroundColor=p.style.backgroundColor,m.rows[0].cells[0].style.color=p.style.color),m.cellSpacing=0,m.cellPadding=0;const L=m.style;L.whiteSpace="pre",L.margin="0px",L.padding="0px",L.letterSpacing=R+"px",L.fontFamily=S,L.fontSize=I+"px",L.lineHeight=F+"px",L.textAlign="left",L.textDecoration="none"}const v=" .,:;i1tfLCG08@".split(""),E=" CGO08@".split(""),S="courier new, monospace",C=e.domElement,M=document.createElement("canvas");if(!M.getContext)return;const b=M.getContext("2d");if(!b.getImageData)return;let T=o?E:v;t&&(T=t);const I=2/r*s,F=2/r*s;let R=0;if(u=="low")switch(s){case 1:R=-1;break;case 2:case 3:R=-2.1;break;case 4:R=-3.1;break;case 5:R=-4.15;break}if(u=="medium")switch(s){case 1:R=0;break;case 2:R=-1;break;case 3:R=-1.04;break;case 4:case 5:R=-2.1;break}if(u=="high")switch(s){case 1:case 2:R=0;break;case 3:case 4:case 5:R=-1;break}function z(L){b.clearRect(0,0,A,y),b.drawImage(C,0,0,A,y);const H=b.getImageData(0,0,A,y).data;let K="";for(let J=0;J<y;J+=2){for(let O=0;O<A;O++){const W=(J*A+O)*4,V=H[W],U=H[W+1],Y=H[W+2],$=H[W+3];let N,Q;Q=(.3*V+.59*U+.11*Y)/255,$==0&&(Q=1),N=Math.floor((1-Q)*(T.length-1)),c&&(N=T.length-N-1);let j=T[N];(j===void 0||j==" ")&&(j="&nbsp;"),o?K+="<span style='color:rgb("+V+","+U+","+Y+");"+(l?"background-color:rgb("+V+","+U+","+Y+");":"")+(a?"opacity:"+$/255+";":"")+"'>"+j+"</span>":K+=j}K+="<br/>"}L.innerHTML=`<tr><td style="display:block;width:${h}px;height:${f}px;overflow:hidden">${K}</td></tr>`}}}function Tj(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function Tve(n,e,t,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],h=s[a-c],f=r[c]/(u+h);r[c]=l+u*f,l=h*f}r[a]=l}return r}function Ive(n,e,t,i){const r=Tj(n,i,e),s=Tve(r,i,n,e),o=new Yt(0,0,0,0);for(let a=0;a<=n;++a){const l=t[r-n+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function Bve(n,e,t,i,r){const s=[];for(let h=0;h<=t;++h)s[h]=0;const o=[];for(let h=0;h<=i;++h)o[h]=s.slice(0);const a=[];for(let h=0;h<=t;++h)a[h]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let h=1;h<=t;++h){l[h]=e-r[n+1-h],c[h]=r[n+h]-e;let f=0;for(let d=0;d<h;++d){const m=c[d+1],A=l[h-d];a[h][d]=m+A;const y=a[d][h-1]/a[h][d];a[d][h]=f+m*y,f=A*y}a[h][h]=f}for(let h=0;h<=t;++h)o[0][h]=a[h][t];for(let h=0;h<=t;++h){let f=0,d=1;const m=[];for(let A=0;A<=t;++A)m[A]=s.slice(0);m[0][0]=1;for(let A=1;A<=i;++A){let y=0;const p=h-A,g=t-A;h>=A&&(m[d][0]=m[f][0]/a[g+1][p],y=m[d][0]*a[p][g]);const v=p>=-1?1:-p,E=h-1<=g?A-1:t-h;for(let C=v;C<=E;++C)m[d][C]=(m[f][C]-m[f][C-1])/a[g+1][p+C],y+=m[d][C]*a[p+C][g];h<=g&&(m[d][A]=-m[f][A-1]/a[g+1][h],y+=m[d][A]*a[h][g]),o[A][h]=y;const S=f;f=d,d=S}}let u=t;for(let h=1;h<=i;++h){for(let f=0;f<=t;++f)o[h][f]*=u;u*=t-h}return o}function Pve(n,e,t,i,r){const s=r<n?r:n,o=[],a=Tj(n,i,e),l=Bve(a,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const h=t[u].clone(),f=h.w;h.x*=f,h.y*=f,h.z*=f,c[u]=h}for(let u=0;u<=s;++u){const h=c[a-n].clone().multiplyScalar(l[u][0]);for(let f=1;f<=n;++f)h.add(c[a-n+f].clone().multiplyScalar(l[u][f]));o[u]=h}for(let u=s+1;u<=r+1;++u)o[u]=new Yt(0,0,0);return o}function Rve(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function Dve(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new D(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(Rve(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function Lve(n,e,t,i,r){const s=Pve(n,e,t,i,r);return Dve(s)}class sO extends fa{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new Yt(a.x,a.y,a.z,a.w)}}getPoint(e,t){const i=t||new D,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Ive(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t){const i=t||new D,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Lve(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let Sn,qi,zs;class _8 extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=s.path===""?Ac.extractUrlBase(e):s.path,a=new Ri(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(Nve(e))Sn=new kve().parse(e);else{const r=Rj(e);if(!Gve(r))throw new Error("THREE.FBXLoader: Unknown format.");if(aO(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+aO(r));Sn=new zve().parse(r)}const i=new Tl(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Fve(i,this.manager).parse(Sn)}}class Fve{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){qi=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new Ove().parse(r);return this.parseScene(r,s,i),zs}parseConnections(){const e=new Map;return"Connections"in Sn&&Sn.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Sn.Objects){const i=Sn.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Sn.Objects){const i=Sn.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?Fr:qn,i.wrapT=a===0?Fr:qn,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=qi.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new In):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new In):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in Sn.Objects){const i=Sn.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!qi.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new vg;break;case"lambert":a=new WA;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new vg;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new We().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new We().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new We().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new We().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new We().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new We().fromArray(e.SpecularColor.value));const s=this;return qi.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=Hu,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in Sn.Objects&&t in Sn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=qi.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Sn.Objects){const i=Sn.Objects.Deformer;for(const r in i){const s=i[r],o=qi.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Oe().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=qi.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){zs=new Gs;const r=this.parseModels(e.skeletons,t,i),s=Sn.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),qi.get(l.ID).parents.forEach(function(h){const f=r.get(h.ID);f!==void 0&&f.add(l)}),l.parent===null&&zs.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),zs.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=Bj(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new Uve().parse();zs.children.length===1&&zs.children[0].isGroup&&(zs.children[0].animations=a,zs=zs.children[0]),zs.animations=a}parseModels(e,t,i){const r=new Map,s=Sn.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=qi.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new wm;break;case"Null":default:u=new Gs;break}u.name=l.attrName?_n.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const h=s;s=new wm,s.matrixWorld.copy(c.transformLink),s.name=r?_n.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,h!==null&&s.add(h)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=Sn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new kt;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const h=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new on(u,c,s,o),h!==null&&t.setFocalLength(h);break;case 1:t=new Qn(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new kt;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=Sn.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new kt;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new We().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new hA(s,o,a,l);break;case 1:t=new hE(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=Dt.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=Dt.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new uE(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new hA(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new vg({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new kA(s,o),r.normalizeSkinWeights()):r=new ct(s,o),r}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new Gi({color:3342591,linewidth:1});return new cn(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=Pj(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&qi.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=Sn.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),zs.add(e.target)):e.lookAt(new D().fromArray(o))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];qi.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;qi.get(c).parents.forEach(function(h){i.has(h.ID)&&i.get(h.ID).bind(new Qm(o.bones),r[h.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Sn.Objects){const t=Sn.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Oe().fromArray(s.Matrix.a)}):e[r.Node]=new Oe().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Sn&&"AmbientColor"in Sn.GlobalSettings){const e=Sn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new We(t,i,r);zs.add(new x6(s,1))}}}}class Ove{parse(e){const t=new Map;if("Geometry"in Sn.Objects){const i=Sn.Objects.Geometry;for(const r in i){const s=qi.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],o=e.parents.map(function(h){return Sn.Objects.Model[h.ID]});if(o.length===0)return;const a=e.children.reduce(function(h,f){return r[f.ID]!==void 0&&(h=r[f.ID]),h},null);e.children.forEach(function(h){i.morphTargets[h.ID]!==void 0&&s.push(i.morphTargets[h.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Pj(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=Bj(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,i,r){const s=new It;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new ft(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new ft(a.colors,3)),t&&(s.setAttribute("skinIndex",new N3(a.weightsIndices,4)),s.setAttribute("skinWeight",new ft(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new Wt().getNormalMatrix(r),u=new ft(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){let h="uv"+(u+1).toString();u===0&&(h="uv"),s.setAttribute(h,new ft(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(h,f){h!==c&&(s.addGroup(u,f-u,c),c=h,u=f)}),s.groups.length>0){const h=s.groups[s.groups.length-1],f=h.start+h.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],h=[];const f=this;return e.vertexIndices.forEach(function(d,m){let A,y=!1;d<0&&(d=d^-1,y=!0);let p=[],g=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const v=B2(m,i,d,e.color);l.push(v[0],v[1],v[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(v){g.push(v.weight),p.push(v.id)}),g.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const v=[0,0,0,0],E=[0,0,0,0];g.forEach(function(S,C){let M=S,b=p[C];E.forEach(function(T,I,F){if(M>T){F[I]=M,M=T;const R=v[I];v[I]=b,b=R}})}),p=v,g=E}for(;g.length<4;)g.push(0),p.push(0);for(let v=0;v<4;++v)u.push(g[v]),h.push(p[v])}if(e.normal){const v=B2(m,i,d,e.normal);a.push(v[0],v[1],v[2])}e.material&&e.material.mappingType!=="AllSame"&&(A=B2(m,i,d,e.material)[0]),e.uv&&e.uv.forEach(function(v,E){const S=B2(m,i,d,v);c[E]===void 0&&(c[E]=[]),c[E].push(S[0]),c[E].push(S[1])}),r++,y&&(f.genFace(t,e,o,A,a,l,c,u,h,r),i++,r=0,o=[],a=[],l=[],c=[],u=[],h=[])}),t}genFace(e,t,i,r,s,o,a,l,c,u){for(let h=2;h<u;h++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(h-1)*3]]),e.vertex.push(t.vertexPositions[i[(h-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(h-1)*3+2]]),e.vertex.push(t.vertexPositions[i[h*3]]),e.vertex.push(t.vertexPositions[i[h*3+1]]),e.vertex.push(t.vertexPositions[i[h*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(h-1)*4]),e.vertexWeights.push(l[(h-1)*4+1]),e.vertexWeights.push(l[(h-1)*4+2]),e.vertexWeights.push(l[(h-1)*4+3]),e.vertexWeights.push(l[h*4]),e.vertexWeights.push(l[h*4+1]),e.vertexWeights.push(l[h*4+2]),e.vertexWeights.push(l[h*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(h-1)*4]),e.weightsIndices.push(c[(h-1)*4+1]),e.weightsIndices.push(c[(h-1)*4+2]),e.weightsIndices.push(c[(h-1)*4+3]),e.weightsIndices.push(c[h*4]),e.weightsIndices.push(c[h*4+1]),e.weightsIndices.push(c[h*4+2]),e.weightsIndices.push(c[h*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(h-1)*3]),e.colors.push(o[(h-1)*3+1]),e.colors.push(o[(h-1)*3+2]),e.colors.push(o[h*3]),e.colors.push(o[h*3+1]),e.colors.push(o[h*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(h-1)*3]),e.normal.push(s[(h-1)*3+1]),e.normal.push(s[(h-1)*3+2]),e.normal.push(s[h*3]),e.normal.push(s[h*3+1]),e.normal.push(s[h*3+2])),t.uv&&t.uv.forEach(function(f,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(h-1)*2]),e.uvs[d].push(a[d][(h-1)*2+1]),e.uvs[d].push(a[d][h*2]),e.uvs[d].push(a[d][h*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=Sn.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,i,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let m=0;m<l.length;m++){const A=l[m]*3;u[A]=a[m*3],u[A+1]=a[m*3+1],u[A+2]=a[m*3+2]}const h={vertexIndices:o,vertexPositions:u},f=this.genBuffers(h),d=new ft(f.vertex,3);d.name=s||i.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(sO===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new It;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new It;const i=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let h=0,f=o.length;h<f;h+=4)s.push(new Yt().fromArray(o,h));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=r.length-1-a;for(let h=0;h<i;++h)s.push(s[h])}const u=new sO(i,r,s,a,l).getPoints(s.length*12);return new It().setFromPoints(u)}}class Uve{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(Sn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Sn.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Sn.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(Hve),values:t[i].KeyValueFloat.a},s=qi.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=Sn.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],o=qi.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const h=qi.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(h!==void 0){const f=Sn.Objects.Model[h.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:f.attrName?_n.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};zs.traverse(function(m){m.ID===f.id&&(d.transform=m.matrix,m.userData.transformData&&(d.eulerOrder=m.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Oe),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),s[c]=d}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const h=qi.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID,f=qi.get(h).parents[0].ID,d=qi.get(f).parents[0].ID,m=qi.get(d).parents[0].ID,A=Sn.Objects.Model[m],y={modelName:A.attrName?_n.sanitizeNodeName(A.attrName):"",morphName:Sn.Objects.Deformer[h].attrName};s[c]=y}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=Sn.Objects.AnimationStack,i={};for(const r in t){const s=qi.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Vu(e.name,-1,t)}generateTracks(e){const t=[];let i=new D,r=new St,s=new D;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new Rr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new Sc(e+"."+r,s,o)}generateRotationTrack(e,t,i,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Dt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Dt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Dt.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,i);r!==void 0&&(r=r.map(Dt.degToRad),r.push(o),r=new Rr().fromArray(r),r=new St().setFromEuler(r)),s!==void 0&&(s=s.map(Dt.degToRad),s.push(o),s=new Rr().fromArray(s),s=new St().setFromEuler(s).invert());const c=new St,u=new Rr,h=[];for(let f=0;f<l.length;f+=3)u.set(l[f],l[f+1],l[f+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(h,f/3*4);return new bl(e+".quaternion",a,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=zs.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Qu(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[i]=o,r=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=t.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=i+a;const c=e.times[t-1],h=(e.times[t]-c)/o;let f=c+h;const d=[],m=[];for(;f<e.times[t];)d.push(f),f+=h,m.push(l),l+=a;e.times=lO(e.times,t,d),e.values=lO(e.values,t,m)}}}}class zve{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Ij,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let h=s.split(",").slice(3);h=h.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[c,u],Vve(s,h),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=u4(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=u4(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=u4(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class kve{parse(e){const t=new oO(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new Ij;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,i,f)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),h!==""&&(i.attrType=h),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=j1(new Uint8Array(e.getArrayBuffer(o))),l=new oO(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class oO{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),Pm(new Uint8Array(t))}}class Ij{add(e,t){this[e]=t}}function Nve(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===Rj(n,0,e.length)}function Gve(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function aO(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Hve(n){return n/46186158e3}const Qve=[];function B2(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return Wve(Qve,i.buffer,s,o)}const c4=new Rr,Qd=new D;function Bj(n){const e=new Oe,t=new Oe,i=new Oe,r=new Oe,s=new Oe,o=new Oe,a=new Oe,l=new Oe,c=new Oe,u=new Oe,h=new Oe,f=new Oe,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Qd.fromArray(n.translation)),n.preRotation){const I=n.preRotation.map(Dt.degToRad);I.push(n.eulerOrder),t.makeRotationFromEuler(c4.fromArray(I))}if(n.rotation){const I=n.rotation.map(Dt.degToRad);I.push(n.eulerOrder),i.makeRotationFromEuler(c4.fromArray(I))}if(n.postRotation){const I=n.postRotation.map(Dt.degToRad);I.push(n.eulerOrder),r.makeRotationFromEuler(c4.fromArray(I)),r.invert()}n.scale&&s.scale(Qd.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Qd.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(Qd.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Qd.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Qd.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const m=t.clone().multiply(i).multiply(r),A=new Oe;A.extractRotation(u);const y=new Oe;y.copyPosition(u);const p=y.clone().invert().multiply(u),g=A.clone().invert().multiply(p),v=s,E=new Oe;if(d===0)E.copy(A).multiply(m).multiply(g).multiply(v);else if(d===1)E.copy(A).multiply(g).multiply(m).multiply(v);else{const F=new Oe().scale(new D().setFromMatrixScale(h)).clone().invert(),R=g.clone().multiply(F);E.copy(A).multiply(m).multiply(R).multiply(v)}const S=c.clone().invert(),C=o.clone().invert();let M=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(S).multiply(a).multiply(o).multiply(s).multiply(C);const b=new Oe().copyPosition(M),T=u.clone().multiply(b);return f.copyPosition(T),M=f.clone().multiply(E),M.premultiply(u.invert()),M}function Pj(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function u4(n){return n.split(",").map(function(t){return parseFloat(t)})}function Rj(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Pm(new Uint8Array(n,e,t))}function Vve(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function Wve(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function lO(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}var jve=Object.defineProperty,Xve=(n,e,t)=>e in n?jve(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,E8=(n,e,t)=>(Xve(n,typeof e!="symbol"?e+"":e,t),t);class Yve extends Hi{constructor(e){super(e)}load(e,t,i,r){const s=new Ri(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);t&&t(l)},i,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new w8(e)}}class w8{constructor(e){E8(this,"data"),this.data=e}generateShapes(e,t=100,i){const r=[],s={letterSpacing:0,lineHeight:1,...i},o=qve(e,t,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}E8(w8,"isFont");E8(w8,"type");function qve(n,e,t,i){const r=Array.from(n),s=e/t.resolution,o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<r.length;u++){const h=r[u];if(h===`
`)l=0,c-=o*i.lineHeight;else{const f=Kve(h,s,l,c,t);f&&(l+=f.offsetX+i.letterSpacing,a.push(f.path))}}return a}function Kve(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const o=new tc;let a,l,c,u,h,f,d,m;if(s.o){const A=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,p=A.length;y<p;)switch(A[y++]){case"m":a=parseInt(A[y++])*e+t,l=parseInt(A[y++])*e+i,o.moveTo(a,l);break;case"l":a=parseInt(A[y++])*e+t,l=parseInt(A[y++])*e+i,o.lineTo(a,l);break;case"q":c=parseInt(A[y++])*e+t,u=parseInt(A[y++])*e+i,h=parseInt(A[y++])*e+t,f=parseInt(A[y++])*e+i,o.quadraticCurveTo(h,f,c,u);break;case"b":c=parseInt(A[y++])*e+t,u=parseInt(A[y++])*e+i,h=parseInt(A[y++])*e+t,f=parseInt(A[y++])*e+i,d=parseInt(A[y++])*e+t,m=parseInt(A[y++])*e+i,o.bezierCurveTo(h,f,d,m,c,u);break}}return{offsetX:s.ha*e,path:o}}class Jve extends In{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=rn,this.minFilter=rn,this.wrapR=qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zve{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Dj=0,cO=2,$ve=0,eye=0,tye=2,nye=0,iye=0,rye=1,Yb=2,sye=0,Lj=1,oye=10,aye=64,Fj=0,Oj=9,Uj=15,zj=16,kj=22,Nj=37,Gj=43,Hj=76,Qj=83,Vj=97,Wj=100,jj=103,Xj=109,Yj=165,qj=166;class lye{constructor(){this.vkFormat=Fj,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=Dj,this.levels=[],this.dataFormatDescriptor=[{vendorId:eye,descriptorType:$ve,descriptorBlockSize:0,versionNumber:tye,colorModel:nye,colorPrimaries:Lj,transferFunction:Yb,flags:iye,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class d1{constructor(e,t,i,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian),i=e+2**32*t;return this._offset+=8,i}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const i=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}}const gs=[171,75,84,88,32,50,48,187,13,10,26,10];function uO(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Buffer.from(n).toString("utf8")}function cye(n){const e=new Uint8Array(n.buffer,n.byteOffset,gs.length);if(e[0]!==gs[0]||e[1]!==gs[1]||e[2]!==gs[2]||e[3]!==gs[3]||e[4]!==gs[4]||e[5]!==gs[5]||e[6]!==gs[6]||e[7]!==gs[7]||e[8]!==gs[8]||e[9]!==gs[9]||e[10]!==gs[10]||e[11]!==gs[11])throw new Error("Missing KTX 2.0 identifier.");const t=new lye,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new d1(n,gs.length,i,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const s=r._nextUint32();t.supercompressionScheme=r._nextUint32();const o=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),f=s*3*8,d=new d1(n,gs.length+i,f,!0);for(let V=0;V<s;V++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const m=new d1(n,o,a,!0),A={vendorId:m._skip(4)._nextUint16(),descriptorType:m._nextUint16(),versionNumber:m._nextUint16(),descriptorBlockSize:m._nextUint16(),colorModel:m._nextUint8(),colorPrimaries:m._nextUint8(),transferFunction:m._nextUint8(),flags:m._nextUint8(),texelBlockDimension:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],bytesPlane:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],samples:[]},g=(A.descriptorBlockSize/4-6)/4;for(let V=0;V<g;V++){const U={bitOffset:m._nextUint16(),bitLength:m._nextUint8(),channelType:m._nextUint8(),samplePosition:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};U.channelType&aye?(U.sampleLower=m._nextInt32(),U.sampleUpper=m._nextInt32()):(U.sampleLower=m._nextUint32(),U.sampleUpper=m._nextUint32()),A.samples[V]=U}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(A);const v=new d1(n,l,c,!0);for(;v._offset<c;){const V=v._nextUint32(),U=v._scan(V),Y=uO(U);if(t.keyValue[Y]=v._nextUint8Array(V-U.byteLength-1),Y.match(/^ktx/i)){const N=uO(t.keyValue[Y]);t.keyValue[Y]=N.substring(0,N.lastIndexOf("\0"))}const $=V%4?4-V%4:0;v._skip($)}if(h<=0)return t;const E=new d1(n,u,h,!0),S=E._nextUint16(),C=E._nextUint16(),M=E._nextUint32(),b=E._nextUint32(),T=E._nextUint32(),I=E._nextUint32(),F=[];for(let V=0;V<s;V++)F.push({imageFlags:E._nextUint32(),rgbSliceByteOffset:E._nextUint32(),rgbSliceByteLength:E._nextUint32(),alphaSliceByteOffset:E._nextUint32(),alphaSliceByteLength:E._nextUint32()});const R=u+E._offset,z=R+M,L=z+b,H=L+T,K=new Uint8Array(n.buffer,n.byteOffset+R,M),J=new Uint8Array(n.buffer,n.byteOffset+z,b),O=new Uint8Array(n.buffer,n.byteOffset+L,T),W=new Uint8Array(n.buffer,n.byteOffset+H,I);return t.globalData={endpointCount:S,selectorCount:C,imageDescs:F,endpointsData:K,selectorsData:J,tablesData:O,extendedData:W},t}let p1,Zl,qb;const h4={env:{emscripten_notify_memory_growth:function(n){qb=new Uint8Array(Zl.exports.memory.buffer)}}};class uye{init(){return p1||(typeof fetch<"u"?p1=fetch("data:application/wasm;base64,"+hO).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,h4)).then(this._init):p1=WebAssembly.instantiate(Buffer.from(hO,"base64"),h4).then(this._init),p1)}_init(e){Zl=e.instance,h4.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Zl)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,r=Zl.exports.malloc(i);qb.set(e,r),t=t||Number(Zl.exports.ZSTD_findDecompressedSize(r,i));const s=Zl.exports.malloc(t),o=Zl.exports.ZSTD_decompress(s,t,r,i),a=qb.slice(s,s+o);return Zl.exports.free(r),Zl.exports.free(s),a}}const hO="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class hye extends Of{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ml),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class fye extends Of{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qn}}var dye=Object.defineProperty,pye=(n,e,t)=>e in n?dye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,GE=(n,e,t)=>(pye(n,typeof e!="symbol"?e+"":e,t),t);const Kj=3e3,Jj=3001,fO="",mye="display-p3",gye="display-p3-linear",Aye="srgb-linear",S8="srgb",f4=new WeakMap;let d4=0,p4;const X1=class extends Hi{constructor(n){super(n),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Zve,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(n){return this.transcoderPath=n,this}setWorkerLimit(n){return this.workerPool.setWorkerLimit(n),this}detectSupport(n){return this.workerConfig={astcSupported:n.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:n.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:n.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:n.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:n.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:n.extensions.has("WEBGL_compressed_texture_pvrtc")||n.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},n.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const n=new Ri(this.manager);n.setPath(this.transcoderPath),n.setWithCredentials(this.withCredentials);const e=n.loadAsync("basis_transcoder.js"),t=new Ri(this.manager);t.setPath(this.transcoderPath),t.setResponseType("arraybuffer"),t.setWithCredentials(this.withCredentials);const i=t.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,i]).then(([r,s])=>{const o=X1.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(X1.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(X1.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(X1.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=s,this.workerPool.setWorkerCreator(()=>{const l=new Worker(this.workerSourceURL),c=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:c},[c]),l})}),d4>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),d4++}return this.transcoderPending}load(n,e,t,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new Ri(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(n,s=>{if(f4.has(s))return f4.get(s).promise.then(e).catch(i);this._createTexture(s).then(o=>e?e(o):null).catch(i)},t,i)}_createTextureFrom(n,e){const{faces:t,width:i,height:r,format:s,type:o,error:a,dfdFlags:l}=n;if(o==="error")return Promise.reject(a);let c;if(e.faceCount===6)c=new hye(t,s,$n);else{const h=t[0].mipmaps;c=e.layerCount>1?new fye(h,i,r,e.layerCount,s,$n):new Of(h,i,r,s,$n)}c.minFilter=t[0].mipmaps.length===1?Ut:yo,c.magFilter=Ut,c.generateMipmaps=!1,c.needsUpdate=!0;const u=Zj(e);return"colorSpace"in c?c.colorSpace=u:c.encoding=u===S8?Jj:Kj,c.premultiplyAlpha=!!(l&rye),c}async _createTexture(n,e={}){const t=cye(new Uint8Array(n));if(t.vkFormat!==Fj)return yye(t);const i=e,r=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:n,taskConfig:i},[n])).then(s=>this._createTextureFrom(s.data,t));return f4.set(n,{promise:r}),r}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),d4--,this}};let Qf=X1;GE(Qf,"BasisFormat",{ETC1S:0,UASTC_4x4:1});GE(Qf,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});GE(Qf,"EngineFormat",{RGBAFormat:Dn,RGBA_ASTC_4x4_Format:R_,RGBA_BPTC_Format:dg,RGBA_ETC2_EAC_Format:P_,RGBA_PVRTC_4BPPV1_Format:I_,RGBA_S3TC_DXT5_Format:fg,RGB_ETC1_Format:WI,RGB_ETC2_Format:B_,RGB_PVRTC_4BPPV1_Format:T_,RGB_S3TC_DXT1_Format:hg});GE(Qf,"BasisWorker",function(){let n,e,t;const i=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(m){const A=m.data;switch(A.type){case"init":n=A.config,o(A.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:y,buffers:p,width:g,height:v,hasAlpha:E,format:S,dfdFlags:C}=a(A.buffer);self.postMessage({type:"transcode",id:A.id,faces:y,width:g,height:v,hasAlpha:E,format:S,dfdFlags:C},p)}catch(y){console.error(y),self.postMessage({type:"error",id:A.id,error:y.message})}});break}});function o(m){e=new Promise(A=>{t={wasmBinary:m,onRuntimeInitialized:A},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(m){const A=new t.KTX2File(new Uint8Array(m));function y(){A.close(),A.delete()}if(!A.isValid())throw y(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const p=A.isUASTC()?s.UASTC_4x4:s.ETC1S,g=A.getWidth(),v=A.getHeight(),E=A.getLayers()||1,S=A.getLevels(),C=A.getFaces(),M=A.getHasAlpha(),b=A.getDFDFlags(),{transcoderFormat:T,engineFormat:I}=h(p,g,v,M);if(!g||!v||!S)throw y(),new Error("THREE.KTX2Loader:	Invalid texture");if(!A.startTranscoding())throw y(),new Error("THREE.KTX2Loader: .startTranscoding failed");const F=[],R=[];for(let z=0;z<C;z++){const L=[];for(let H=0;H<S;H++){const K=[];let J,O;for(let V=0;V<E;V++){const U=A.getImageLevelInfo(H,V,z);z===0&&H===0&&V===0&&(U.origWidth%4!==0||U.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),S>1?(J=U.origWidth,O=U.origHeight):(J=U.width,O=U.height);const Y=new Uint8Array(A.getImageTranscodedSizeInBytes(H,V,0,T));if(!A.transcodeImage(Y,H,V,z,T,0,-1,-1))throw y(),new Error("THREE.KTX2Loader: .transcodeImage failed.");K.push(Y)}const W=d(K);L.push({data:W,width:J,height:O}),R.push(W.buffer)}F.push({mipmaps:L,width:g,height:v,format:I})}return y(),{faces:F,buffers:R,width:g,height:v,hasAlpha:M,format:I,dfdFlags:b}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(m,A){return m.priorityETC1S-A.priorityETC1S}),u=l.sort(function(m,A){return m.priorityUASTC-A.priorityUASTC});function h(m,A,y,p){let g,v;const E=m===s.ETC1S?c:u;for(let S=0;S<E.length;S++){const C=E[S];if(n[C.if]&&C.basisFormat.includes(m)&&!(p&&C.transcoderFormat.length<2)&&!(C.needsPowerOfTwo&&!(f(A)&&f(y))))return g=C.transcoderFormat[p?1:0],v=C.engineFormat[p?1:0],{transcoderFormat:g,engineFormat:v}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),g=r.RGBA32,v=i.RGBAFormat,{transcoderFormat:g,engineFormat:v}}function f(m){return m<=2?!0:(m&m-1)===0&&m!==0}function d(m){if(m.length===1)return m[0];let A=0;for(let g=0;g<m.length;g++){const v=m[g];A+=v.byteLength}const y=new Uint8Array(A);let p=0;for(let g=0;g<m.length;g++){const v=m[g];y.set(v,p),p+=v.byteLength}return y}});const vye=new Set([Dn,cu,ea]),m4={[Xj]:Dn,[Vj]:Dn,[Nj]:Dn,[Gj]:Dn,[jj]:cu,[Qj]:cu,[zj]:cu,[kj]:cu,[Wj]:ea,[Hj]:ea,[Uj]:ea,[Oj]:ea,[qj]:nA,[Yj]:nA},g4={[Xj]:En,[Vj]:Ln,[Nj]:$n,[Gj]:$n,[jj]:En,[Qj]:Ln,[zj]:$n,[kj]:$n,[Wj]:En,[Hj]:Ln,[Uj]:$n,[Oj]:$n,[qj]:$n,[Yj]:$n};async function yye(n){const{vkFormat:e}=n;if(m4[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;n.supercompressionScheme===cO&&(p4||(p4=new Promise(async o=>{const a=new uye;await a.init(),o(a)})),t=await p4);const i=[];for(let o=0;o<n.levels.length;o++){const a=Math.max(1,n.pixelWidth>>o),l=Math.max(1,n.pixelHeight>>o),c=n.pixelDepth?Math.max(1,n.pixelDepth>>o):0,u=n.levels[o];let h;if(n.supercompressionScheme===Dj)h=u.levelData;else if(n.supercompressionScheme===cO)h=t.decode(u.levelData,u.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let f;g4[e]===En?f=new Float32Array(h.buffer,h.byteOffset,h.byteLength/Float32Array.BYTES_PER_ELEMENT):g4[e]===Ln?f=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/Uint16Array.BYTES_PER_ELEMENT):f=h,i.push({data:f,width:a,height:l,depth:c})}let r;if(vye.has(m4[e]))r=n.pixelDepth===0?new qs(i[0].data,n.pixelWidth,n.pixelHeight):new Jve(i[0].data,n.pixelWidth,n.pixelHeight,n.pixelDepth);else{if(n.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new Of(i,n.pixelWidth,n.pixelHeight)}r.mipmaps=i,r.type=g4[e],r.format=m4[e],r.needsUpdate=!0;const s=Zj(n);return"colorSpace"in r?r.colorSpace=s:r.encoding=s===S8?Jj:Kj,Promise.resolve(r)}function Zj(n){const e=n.dataFormatDescriptor[0];return e.colorPrimaries===Lj?e.transferFunction===Yb?S8:Aye:e.colorPrimaries===oye?e.transferFunction===Yb?mye:gye:(e.colorPrimaries===sye||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),fO)}class xye extends cE{constructor(e){super(e),this.type=Ln}parse(e){const o=function(b,T){switch(b){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(T||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(T||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(T||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(T||""))}},u=`
`,h=function(b,T,I){T=T||1024;let R=b.pos,z=-1,L=0,H="",K=String.fromCharCode.apply(null,new Uint16Array(b.subarray(R,R+128)));for(;0>(z=K.indexOf(u))&&L<T&&R<b.byteLength;)H+=K,L+=K.length,R+=128,K+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(R,R+128)));return-1<z?(b.pos+=L+z+1,H+K.slice(0,z)):!1},f=function(b){const T=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,z=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,L={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let H,K;for((b.pos>=b.byteLength||!(H=h(b)))&&o(1,"no header found"),(K=H.match(T))||o(3,"bad initial token"),L.valid|=1,L.programtype=K[1],L.string+=H+`
`;H=h(b),H!==!1;){if(L.string+=H+`
`,H.charAt(0)==="#"){L.comments+=H+`
`;continue}if((K=H.match(I))&&(L.gamma=parseFloat(K[1])),(K=H.match(F))&&(L.exposure=parseFloat(K[1])),(K=H.match(R))&&(L.valid|=2,L.format=K[1]),(K=H.match(z))&&(L.valid|=4,L.height=parseInt(K[1],10),L.width=parseInt(K[2],10)),L.valid&2&&L.valid&4)break}return L.valid&2||o(3,"missing format specifier"),L.valid&4||o(3,"missing image size specifier"),L},d=function(b,T,I){const F=T;if(F<8||F>32767||b[0]!==2||b[1]!==2||b[2]&128)return new Uint8Array(b);F!==(b[2]<<8|b[3])&&o(3,"wrong scanline width");const R=new Uint8Array(4*T*I);R.length||o(4,"unable to allocate buffer space");let z=0,L=0;const H=4*F,K=new Uint8Array(4),J=new Uint8Array(H);let O=I;for(;O>0&&L<b.byteLength;){L+4>b.byteLength&&o(1),K[0]=b[L++],K[1]=b[L++],K[2]=b[L++],K[3]=b[L++],(K[0]!=2||K[1]!=2||(K[2]<<8|K[3])!=F)&&o(3,"bad rgbe scanline format");let W=0,V;for(;W<H&&L<b.byteLength;){V=b[L++];const Y=V>128;if(Y&&(V-=128),(V===0||W+V>H)&&o(3,"bad scanline data"),Y){const $=b[L++];for(let N=0;N<V;N++)J[W++]=$}else J.set(b.subarray(L,L+V),W),W+=V,L+=V}const U=F;for(let Y=0;Y<U;Y++){let $=0;R[z]=J[Y+$],$+=F,R[z+1]=J[Y+$],$+=F,R[z+2]=J[Y+$],$+=F,R[z+3]=J[Y+$],z+=4}O--}return R},m=function(b,T,I,F){const R=b[T+3],z=Math.pow(2,R-128)/255;I[F+0]=b[T+0]*z,I[F+1]=b[T+1]*z,I[F+2]=b[T+2]*z,I[F+3]=1},A=function(b,T,I,F){const R=b[T+3],z=Math.pow(2,R-128)/255;I[F+0]=La.toHalfFloat(Math.min(b[T+0]*z,65504)),I[F+1]=La.toHalfFloat(Math.min(b[T+1]*z,65504)),I[F+2]=La.toHalfFloat(Math.min(b[T+2]*z,65504)),I[F+3]=La.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const p=f(y),g=p.width,v=p.height,E=d(y.subarray(y.pos),g,v);let S,C,M;switch(this.type){case En:M=E.length/4;const b=new Float32Array(M*4);for(let I=0;I<M;I++)m(E,I*4,b,I*4);S=b,C=En;break;case Ln:M=E.length/4;const T=new Uint16Array(M*4);for(let I=0;I<M;I++)A(E,I*4,T,I*4);S=T,C=Ln;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:g,height:v,data:S,header:p.string,gamma:p.gamma,exposure:p.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case En:case Ln:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Ut,o.magFilter=Ut,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const m1="colorSpace"in new In;class _ye extends cE{constructor(e){super(e),this.type=Ln}parse(e){const T=Math.pow(2.7182818,2.2);function I(ee,G){for(var ie=0,ue=0;ue<65536;++ue)(ue==0||ee[ue>>3]&1<<(ue&7))&&(G[ie++]=ue);for(var ae=ie-1;ie<65536;)G[ie++]=0;return ae}function F(ee){for(var G=0;G<16384;G++)ee[G]={},ee[G].len=0,ee[G].lit=0,ee[G].p=null}const R={l:0,c:0,lc:0};function z(ee,G,ie,ue,ae){for(;ie<ee;)G=G<<8|le(ue,ae),ie+=8;ie-=ee,R.l=G>>ie&(1<<ee)-1,R.c=G,R.lc=ie}const L=new Array(59);function H(ee){for(var G=0;G<=58;++G)L[G]=0;for(var G=0;G<65537;++G)L[ee[G]]+=1;for(var ie=0,G=58;G>0;--G){var ue=ie+L[G]>>1;L[G]=ie,ie=ue}for(var G=0;G<65537;++G){var ae=ee[G];ae>0&&(ee[G]=ae|L[ae]++<<6)}}function K(ee,G,ie,ue,ae,pe,Ue){for(var ke=ie,je=0,Xe=0;ae<=pe;ae++){if(ke.value-ie.value>ue)return!1;z(6,je,Xe,ee,ke);var $e=R.l;if(je=R.c,Xe=R.lc,Ue[ae]=$e,$e==63){if(ke.value-ie.value>ue)throw"Something wrong with hufUnpackEncTable";z(8,je,Xe,ee,ke);var Be=R.l+6;if(je=R.c,Xe=R.lc,ae+Be>pe+1)throw"Something wrong with hufUnpackEncTable";for(;Be--;)Ue[ae++]=0;ae--}else if($e>=59){var Be=$e-59+2;if(ae+Be>pe+1)throw"Something wrong with hufUnpackEncTable";for(;Be--;)Ue[ae++]=0;ae--}}H(Ue)}function J(ee){return ee&63}function O(ee){return ee>>6}function W(ee,G,ie,ue){for(;G<=ie;G++){var ae=O(ee[G]),pe=J(ee[G]);if(ae>>pe)throw"Invalid table entry";if(pe>14){var Ue=ue[ae>>pe-14];if(Ue.len)throw"Invalid table entry";if(Ue.lit++,Ue.p){var ke=Ue.p;Ue.p=new Array(Ue.lit);for(var je=0;je<Ue.lit-1;++je)Ue.p[je]=ke[je]}else Ue.p=new Array(1);Ue.p[Ue.lit-1]=G}else if(pe)for(var Xe=0,je=1<<14-pe;je>0;je--){var Ue=ue[(ae<<14-pe)+Xe];if(Ue.len||Ue.p)throw"Invalid table entry";Ue.len=pe,Ue.lit=G,Xe++}}return!0}const V={c:0,lc:0};function U(ee,G,ie,ue){ee=ee<<8|le(ie,ue),G+=8,V.c=ee,V.lc=G}const Y={c:0,lc:0};function $(ee,G,ie,ue,ae,pe,Ue,ke,je,Xe){if(ee==G){ue<8&&(U(ie,ue,ae,Ue),ie=V.c,ue=V.lc),ue-=8;var $e=ie>>ue,$e=new Uint8Array([$e])[0];if(je.value+$e>Xe)return!1;for(var Be=ke[je.value-1];$e-- >0;)ke[je.value++]=Be}else if(je.value<Xe)ke[je.value++]=ee;else return!1;Y.c=ie,Y.lc=ue}function N(ee){return ee&65535}function Q(ee){var G=N(ee);return G>32767?G-65536:G}const j={a:0,b:0};function X(ee,G){var ie=Q(ee),ue=Q(G),ae=ue,pe=ie+(ae&1)+(ae>>1),Ue=pe,ke=pe-ae;j.a=Ue,j.b=ke}function se(ee,G){var ie=N(ee),ue=N(G),ae=ie-(ue>>1)&65535,pe=ue+ae-32768&65535;j.a=pe,j.b=ae}function ve(ee,G,ie,ue,ae,pe,Ue){for(var ke=Ue<16384,je=ie>ae?ae:ie,Xe=1,$e;Xe<=je;)Xe<<=1;for(Xe>>=1,$e=Xe,Xe>>=1;Xe>=1;){for(var Be=0,xt=Be+pe*(ae-$e),dt=pe*Xe,ht=pe*$e,Bt=ue*Xe,Nt=ue*$e,Rt,_t,Ht,bt;Be<=xt;Be+=ht){for(var $t=Be,On=Be+ue*(ie-$e);$t<=On;$t+=Nt){var Kt=$t+Bt,Un=$t+dt,yn=Un+Bt;ke?(X(ee[$t+G],ee[Un+G]),Rt=j.a,Ht=j.b,X(ee[Kt+G],ee[yn+G]),_t=j.a,bt=j.b,X(Rt,_t),ee[$t+G]=j.a,ee[Kt+G]=j.b,X(Ht,bt),ee[Un+G]=j.a,ee[yn+G]=j.b):(se(ee[$t+G],ee[Un+G]),Rt=j.a,Ht=j.b,se(ee[Kt+G],ee[yn+G]),_t=j.a,bt=j.b,se(Rt,_t),ee[$t+G]=j.a,ee[Kt+G]=j.b,se(Ht,bt),ee[Un+G]=j.a,ee[yn+G]=j.b)}if(ie&Xe){var Un=$t+dt;ke?X(ee[$t+G],ee[Un+G]):se(ee[$t+G],ee[Un+G]),Rt=j.a,ee[Un+G]=j.b,ee[$t+G]=Rt}}if(ae&Xe)for(var $t=Be,On=Be+ue*(ie-$e);$t<=On;$t+=Nt){var Kt=$t+Bt;ke?X(ee[$t+G],ee[Kt+G]):se(ee[$t+G],ee[Kt+G]),Rt=j.a,ee[Kt+G]=j.b,ee[$t+G]=Rt}$e=Xe,Xe>>=1}return Be}function de(ee,G,ie,ue,ae,pe,Ue,ke,je,Xe){for(var $e=0,Be=0,xt=ke,dt=Math.trunc(ae.value+(pe+7)/8);ae.value<dt;)for(U($e,Be,ie,ae),$e=V.c,Be=V.lc;Be>=14;){var ht=$e>>Be-14&16383,Bt=G[ht];if(Bt.len)Be-=Bt.len,$(Bt.lit,Ue,$e,Be,ie,ue,ae,je,Xe,xt),$e=Y.c,Be=Y.lc;else{if(!Bt.p)throw"hufDecode issues";var Nt;for(Nt=0;Nt<Bt.lit;Nt++){for(var Rt=J(ee[Bt.p[Nt]]);Be<Rt&&ae.value<dt;)U($e,Be,ie,ae),$e=V.c,Be=V.lc;if(Be>=Rt&&O(ee[Bt.p[Nt]])==($e>>Be-Rt&(1<<Rt)-1)){Be-=Rt,$(Bt.p[Nt],Ue,$e,Be,ie,ue,ae,je,Xe,xt),$e=Y.c,Be=Y.lc;break}}if(Nt==Bt.lit)throw"hufDecode issues"}}var _t=8-pe&7;for($e>>=_t,Be-=_t;Be>0;){var Bt=G[$e<<14-Be&16383];if(Bt.len)Be-=Bt.len,$(Bt.lit,Ue,$e,Be,ie,ue,ae,je,Xe,xt),$e=Y.c,Be=Y.lc;else throw"hufDecode issues"}return!0}function he(ee,G,ie,ue,ae,pe){var Ue={value:0},ke=ie.value,je=et(G,ie),Xe=et(G,ie);ie.value+=4;var $e=et(G,ie);if(ie.value+=4,je<0||je>=65537||Xe<0||Xe>=65537)throw"Something wrong with HUF_ENCSIZE";var Be=new Array(65537),xt=new Array(16384);F(xt);var dt=ue-(ie.value-ke);if(K(ee,G,ie,dt,je,Xe,Be),$e>8*(ue-(ie.value-ke)))throw"Something wrong with hufUncompress";W(Be,je,Xe,xt),de(Be,xt,ee,G,ie,$e,Xe,pe,ae,Ue)}function te(ee,G,ie){for(var ue=0;ue<ie;++ue)G[ue]=ee[G[ue]]}function xe(ee){for(var G=1;G<ee.length;G++){var ie=ee[G-1]+ee[G]-128;ee[G]=ie}}function ce(ee,G){for(var ie=0,ue=Math.floor((ee.length+1)/2),ae=0,pe=ee.length-1;!(ae>pe||(G[ae++]=ee[ie++],ae>pe));)G[ae++]=ee[ue++]}function me(ee){for(var G=ee.byteLength,ie=new Array,ue=0,ae=new DataView(ee);G>0;){var pe=ae.getInt8(ue++);if(pe<0){var Ue=-pe;G-=Ue+1;for(var ke=0;ke<Ue;ke++)ie.push(ae.getUint8(ue++))}else{var Ue=pe;G-=2;for(var je=ae.getUint8(ue++),ke=0;ke<Ue+1;ke++)ie.push(je)}}return ie}function ye(ee,G,ie,ue,ae,pe){var Kt=new DataView(pe.buffer),Ue=ie[ee.idx[0]].width,ke=ie[ee.idx[0]].height,je=3,Xe=Math.floor(Ue/8),$e=Math.ceil(Ue/8),Be=Math.ceil(ke/8),xt=Ue-($e-1)*8,dt=ke-(Be-1)*8,ht={value:0},Bt=new Array(je),Nt=new Array(je),Rt=new Array(je),_t=new Array(je),Ht=new Array(je);for(let en=0;en<je;++en)Ht[en]=G[ee.idx[en]],Bt[en]=en<1?0:Bt[en-1]+$e*Be,Nt[en]=new Float32Array(64),Rt[en]=new Uint16Array(64),_t[en]=new Uint16Array($e*64);for(let en=0;en<Be;++en){var bt=8;en==Be-1&&(bt=dt);var $t=8;for(let Pn=0;Pn<$e;++Pn){Pn==$e-1&&($t=xt);for(let sn=0;sn<je;++sn)Rt[sn].fill(0),Rt[sn][0]=ae[Bt[sn]++],Me(ht,ue,Rt[sn]),oe(Rt[sn],Nt[sn]),ne(Nt[sn]);we(Nt);for(let sn=0;sn<je;++sn)be(Nt[sn],_t[sn],Pn*64)}let ti=0;for(let Pn=0;Pn<je;++Pn){const sn=ie[ee.idx[Pn]].type;for(let ai=8*en;ai<8*en+bt;++ai){ti=Ht[Pn][ai];for(let Bs=0;Bs<Xe;++Bs){const Qi=Bs*64+(ai&7)*8;Kt.setUint16(ti+0*2*sn,_t[Pn][Qi+0],!0),Kt.setUint16(ti+1*2*sn,_t[Pn][Qi+1],!0),Kt.setUint16(ti+2*2*sn,_t[Pn][Qi+2],!0),Kt.setUint16(ti+3*2*sn,_t[Pn][Qi+3],!0),Kt.setUint16(ti+4*2*sn,_t[Pn][Qi+4],!0),Kt.setUint16(ti+5*2*sn,_t[Pn][Qi+5],!0),Kt.setUint16(ti+6*2*sn,_t[Pn][Qi+6],!0),Kt.setUint16(ti+7*2*sn,_t[Pn][Qi+7],!0),ti+=8*2*sn}}if(Xe!=$e)for(let ai=8*en;ai<8*en+bt;++ai){const Bs=Ht[Pn][ai]+8*Xe*2*sn,Qi=Xe*64+(ai&7)*8;for(let Zs=0;Zs<$t;++Zs)Kt.setUint16(Bs+Zs*2*sn,_t[Pn][Qi+Zs],!0)}}}for(var On=new Uint16Array(Ue),Kt=new DataView(pe.buffer),Un=0;Un<je;++Un){ie[ee.idx[Un]].decoded=!0;var yn=ie[ee.idx[Un]].type;if(ie[Un].type==2)for(var kn=0;kn<ke;++kn){const en=Ht[Un][kn];for(var Jn=0;Jn<Ue;++Jn)On[Jn]=Kt.getUint16(en+Jn*2*yn,!0);for(var Jn=0;Jn<Ue;++Jn)Kt.setFloat32(en+Jn*2*yn,_e(On[Jn]),!0)}}}function Me(ee,G,ie){for(var ue,ae=1;ae<64;)ue=G[ee.value],ue==65280?ae=64:ue>>8==255?ae+=ue&255:(ie[ae]=ue,ae++),ee.value++}function oe(ee,G){G[0]=_e(ee[0]),G[1]=_e(ee[1]),G[2]=_e(ee[5]),G[3]=_e(ee[6]),G[4]=_e(ee[14]),G[5]=_e(ee[15]),G[6]=_e(ee[27]),G[7]=_e(ee[28]),G[8]=_e(ee[2]),G[9]=_e(ee[4]),G[10]=_e(ee[7]),G[11]=_e(ee[13]),G[12]=_e(ee[16]),G[13]=_e(ee[26]),G[14]=_e(ee[29]),G[15]=_e(ee[42]),G[16]=_e(ee[3]),G[17]=_e(ee[8]),G[18]=_e(ee[12]),G[19]=_e(ee[17]),G[20]=_e(ee[25]),G[21]=_e(ee[30]),G[22]=_e(ee[41]),G[23]=_e(ee[43]),G[24]=_e(ee[9]),G[25]=_e(ee[11]),G[26]=_e(ee[18]),G[27]=_e(ee[24]),G[28]=_e(ee[31]),G[29]=_e(ee[40]),G[30]=_e(ee[44]),G[31]=_e(ee[53]),G[32]=_e(ee[10]),G[33]=_e(ee[19]),G[34]=_e(ee[23]),G[35]=_e(ee[32]),G[36]=_e(ee[39]),G[37]=_e(ee[45]),G[38]=_e(ee[52]),G[39]=_e(ee[54]),G[40]=_e(ee[20]),G[41]=_e(ee[22]),G[42]=_e(ee[33]),G[43]=_e(ee[38]),G[44]=_e(ee[46]),G[45]=_e(ee[51]),G[46]=_e(ee[55]),G[47]=_e(ee[60]),G[48]=_e(ee[21]),G[49]=_e(ee[34]),G[50]=_e(ee[37]),G[51]=_e(ee[47]),G[52]=_e(ee[50]),G[53]=_e(ee[56]),G[54]=_e(ee[59]),G[55]=_e(ee[61]),G[56]=_e(ee[35]),G[57]=_e(ee[36]),G[58]=_e(ee[48]),G[59]=_e(ee[49]),G[60]=_e(ee[57]),G[61]=_e(ee[58]),G[62]=_e(ee[62]),G[63]=_e(ee[63])}function ne(ee){const G=.5*Math.cos(.7853975),ie=.5*Math.cos(3.14159/16),ue=.5*Math.cos(3.14159/8),ae=.5*Math.cos(3*3.14159/16),pe=.5*Math.cos(5*3.14159/16),Ue=.5*Math.cos(3*3.14159/8),ke=.5*Math.cos(7*3.14159/16);for(var je=new Array(4),Xe=new Array(4),$e=new Array(4),Be=new Array(4),xt=0;xt<8;++xt){var dt=xt*8;je[0]=ue*ee[dt+2],je[1]=Ue*ee[dt+2],je[2]=ue*ee[dt+6],je[3]=Ue*ee[dt+6],Xe[0]=ie*ee[dt+1]+ae*ee[dt+3]+pe*ee[dt+5]+ke*ee[dt+7],Xe[1]=ae*ee[dt+1]-ke*ee[dt+3]-ie*ee[dt+5]-pe*ee[dt+7],Xe[2]=pe*ee[dt+1]-ie*ee[dt+3]+ke*ee[dt+5]+ae*ee[dt+7],Xe[3]=ke*ee[dt+1]-pe*ee[dt+3]+ae*ee[dt+5]-ie*ee[dt+7],$e[0]=G*(ee[dt+0]+ee[dt+4]),$e[3]=G*(ee[dt+0]-ee[dt+4]),$e[1]=je[0]+je[3],$e[2]=je[1]-je[2],Be[0]=$e[0]+$e[1],Be[1]=$e[3]+$e[2],Be[2]=$e[3]-$e[2],Be[3]=$e[0]-$e[1],ee[dt+0]=Be[0]+Xe[0],ee[dt+1]=Be[1]+Xe[1],ee[dt+2]=Be[2]+Xe[2],ee[dt+3]=Be[3]+Xe[3],ee[dt+4]=Be[3]-Xe[3],ee[dt+5]=Be[2]-Xe[2],ee[dt+6]=Be[1]-Xe[1],ee[dt+7]=Be[0]-Xe[0]}for(var ht=0;ht<8;++ht)je[0]=ue*ee[16+ht],je[1]=Ue*ee[16+ht],je[2]=ue*ee[48+ht],je[3]=Ue*ee[48+ht],Xe[0]=ie*ee[8+ht]+ae*ee[24+ht]+pe*ee[40+ht]+ke*ee[56+ht],Xe[1]=ae*ee[8+ht]-ke*ee[24+ht]-ie*ee[40+ht]-pe*ee[56+ht],Xe[2]=pe*ee[8+ht]-ie*ee[24+ht]+ke*ee[40+ht]+ae*ee[56+ht],Xe[3]=ke*ee[8+ht]-pe*ee[24+ht]+ae*ee[40+ht]-ie*ee[56+ht],$e[0]=G*(ee[ht]+ee[32+ht]),$e[3]=G*(ee[ht]-ee[32+ht]),$e[1]=je[0]+je[3],$e[2]=je[1]-je[2],Be[0]=$e[0]+$e[1],Be[1]=$e[3]+$e[2],Be[2]=$e[3]-$e[2],Be[3]=$e[0]-$e[1],ee[0+ht]=Be[0]+Xe[0],ee[8+ht]=Be[1]+Xe[1],ee[16+ht]=Be[2]+Xe[2],ee[24+ht]=Be[3]+Xe[3],ee[32+ht]=Be[3]-Xe[3],ee[40+ht]=Be[2]-Xe[2],ee[48+ht]=Be[1]-Xe[1],ee[56+ht]=Be[0]-Xe[0]}function we(ee){for(var G=0;G<64;++G){var ie=ee[0][G],ue=ee[1][G],ae=ee[2][G];ee[0][G]=ie+1.5747*ae,ee[1][G]=ie-.1873*ue-.4682*ae,ee[2][G]=ie+1.8556*ue}}function be(ee,G,ie){for(var ue=0;ue<64;++ue)G[ie+ue]=La.toHalfFloat(st(ee[ue]))}function st(ee){return ee<=1?Math.sign(ee)*Math.pow(Math.abs(ee),2.2):Math.sign(ee)*Math.pow(T,Math.abs(ee)-1)}function re(ee){return new DataView(ee.array.buffer,ee.offset.value,ee.size)}function Z(ee){var G=ee.viewer.buffer.slice(ee.offset.value,ee.offset.value+ee.size),ie=new Uint8Array(me(G)),ue=new Uint8Array(ie.length);return xe(ie),ce(ie,ue),new DataView(ue.buffer)}function ge(ee){var G=ee.array.slice(ee.offset.value,ee.offset.value+ee.size),ie=j1(G),ue=new Uint8Array(ie.length);return xe(ie),ce(ie,ue),new DataView(ue.buffer)}function Fe(ee){for(var G=ee.viewer,ie={value:ee.offset.value},ue=new Uint16Array(ee.width*ee.scanlineBlockSize*(ee.channels*ee.type)),ae=new Uint8Array(8192),pe=0,Ue=new Array(ee.channels),ke=0;ke<ee.channels;ke++)Ue[ke]={},Ue[ke].start=pe,Ue[ke].end=Ue[ke].start,Ue[ke].nx=ee.width,Ue[ke].ny=ee.lines,Ue[ke].size=ee.type,pe+=Ue[ke].nx*Ue[ke].ny*Ue[ke].size;var je=Ie(G,ie),Xe=Ie(G,ie);if(Xe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(je<=Xe)for(var ke=0;ke<Xe-je+1;ke++)ae[ke+je]=Re(G,ie);var $e=new Uint16Array(65536),Be=I(ae,$e),xt=et(G,ie);he(ee.array,G,ie,xt,ue,pe);for(var ke=0;ke<ee.channels;++ke)for(var dt=Ue[ke],ht=0;ht<Ue[ke].size;++ht)ve(ue,dt.start+ht,dt.nx,dt.size,dt.ny,dt.nx*dt.size,Be);te($e,ue,pe);for(var Bt=0,Nt=new Uint8Array(ue.buffer.byteLength),Rt=0;Rt<ee.lines;Rt++)for(var _t=0;_t<ee.channels;_t++){var dt=Ue[_t],Ht=dt.nx*dt.size,bt=new Uint8Array(ue.buffer,dt.end*2,Ht*2);Nt.set(bt,Bt),Bt+=Ht*2,dt.end+=Ht}return new DataView(Nt.buffer)}function Ce(ee){var G=ee.array.slice(ee.offset.value,ee.offset.value+ee.size),ie=j1(G);const ue=ee.lines*ee.channels*ee.width,ae=ee.type==1?new Uint16Array(ue):new Uint32Array(ue);let pe=0,Ue=0;const ke=new Array(4);for(let je=0;je<ee.lines;je++)for(let Xe=0;Xe<ee.channels;Xe++){let $e=0;switch(ee.type){case 1:ke[0]=pe,ke[1]=ke[0]+ee.width,pe=ke[1]+ee.width;for(let Be=0;Be<ee.width;++Be){const xt=ie[ke[0]++]<<8|ie[ke[1]++];$e+=xt,ae[Ue]=$e,Ue++}break;case 2:ke[0]=pe,ke[1]=ke[0]+ee.width,ke[2]=ke[1]+ee.width,pe=ke[2]+ee.width;for(let Be=0;Be<ee.width;++Be){const xt=ie[ke[0]++]<<24|ie[ke[1]++]<<16|ie[ke[2]++]<<8;$e+=xt,ae[Ue]=$e,Ue++}break}}return new DataView(ae.buffer)}function Le(ee){var G=ee.viewer,ie={value:ee.offset.value},ue=new Uint8Array(ee.width*ee.lines*(ee.channels*ee.type*2)),ae={version:qe(G,ie),unknownUncompressedSize:qe(G,ie),unknownCompressedSize:qe(G,ie),acCompressedSize:qe(G,ie),dcCompressedSize:qe(G,ie),rleCompressedSize:qe(G,ie),rleUncompressedSize:qe(G,ie),rleRawSize:qe(G,ie),totalAcUncompressedCount:qe(G,ie),totalDcUncompressedCount:qe(G,ie),acCompression:qe(G,ie)};if(ae.version<2)throw"EXRLoader.parse: "+yi.compression+" version "+ae.version+" is unsupported";for(var pe=new Array,Ue=Ie(G,ie)-2;Ue>0;){var ke=Qe(G.buffer,ie),je=Re(G,ie),Xe=je>>2&3,$e=(je>>4)-1,Be=new Int8Array([$e])[0],xt=Re(G,ie);pe.push({name:ke,index:Be,type:xt,compression:Xe}),Ue-=ke.length+3}for(var dt=yi.channels,ht=new Array(ee.channels),Bt=0;Bt<ee.channels;++Bt){var Nt=ht[Bt]={},Rt=dt[Bt];Nt.name=Rt.name,Nt.compression=0,Nt.decoded=!1,Nt.type=Rt.pixelType,Nt.pLinear=Rt.pLinear,Nt.width=ee.width,Nt.height=ee.lines}for(var _t={idx:new Array(3)},Ht=0;Ht<ee.channels;++Ht)for(var Nt=ht[Ht],Bt=0;Bt<pe.length;++Bt){var bt=pe[Bt];Nt.name==bt.name&&(Nt.compression=bt.compression,bt.index>=0&&(_t.idx[bt.index]=Ht),Nt.offset=Ht)}if(ae.acCompressedSize>0)switch(ae.acCompression){case 0:var Kt=new Uint16Array(ae.totalAcUncompressedCount);he(ee.array,G,ie,ae.acCompressedSize,Kt,ae.totalAcUncompressedCount);break;case 1:var $t=ee.array.slice(ie.value,ie.value+ae.totalAcUncompressedCount),On=j1($t),Kt=new Uint16Array(On.buffer);ie.value+=ae.totalAcUncompressedCount;break}if(ae.dcCompressedSize>0){var Un={array:ee.array,offset:ie,size:ae.dcCompressedSize},yn=new Uint16Array(ge(Un).buffer);ie.value+=ae.dcCompressedSize}if(ae.rleRawSize>0){var $t=ee.array.slice(ie.value,ie.value+ae.rleCompressedSize),On=j1($t),kn=me(On.buffer);ie.value+=ae.rleCompressedSize}for(var Jn=0,en=new Array(ht.length),Bt=0;Bt<en.length;++Bt)en[Bt]=new Array;for(var ti=0;ti<ee.lines;++ti)for(var Pn=0;Pn<ht.length;++Pn)en[Pn].push(Jn),Jn+=ht[Pn].width*ee.type*2;ye(_t,en,ht,Kt,yn,ue);for(var Bt=0;Bt<ht.length;++Bt){var Nt=ht[Bt];if(!Nt.decoded)switch(Nt.compression){case 2:for(var sn=0,ai=0,ti=0;ti<ee.lines;++ti){for(var Bs=en[Bt][sn],Qi=0;Qi<Nt.width;++Qi){for(var Zs=0;Zs<2*Nt.type;++Zs)ue[Bs++]=kn[ai+Zs*Nt.width*Nt.height];ai++}sn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ue.buffer)}function Qe(ee,G){for(var ie=new Uint8Array(ee),ue=0;ie[G.value+ue]!=0;)ue+=1;var ae=new TextDecoder().decode(ie.slice(G.value,G.value+ue));return G.value=G.value+ue+1,ae}function He(ee,G,ie){var ue=new TextDecoder().decode(new Uint8Array(ee).slice(G.value,G.value+ie));return G.value=G.value+ie,ue}function De(ee,G){var ie=tt(ee,G),ue=et(ee,G);return[ie,ue]}function at(ee,G){var ie=et(ee,G),ue=et(ee,G);return[ie,ue]}function tt(ee,G){var ie=ee.getInt32(G.value,!0);return G.value=G.value+4,ie}function et(ee,G){var ie=ee.getUint32(G.value,!0);return G.value=G.value+4,ie}function le(ee,G){var ie=ee[G.value];return G.value=G.value+1,ie}function Re(ee,G){var ie=ee.getUint8(G.value);return G.value=G.value+1,ie}const qe=function(ee,G){let ie;return"getBigInt64"in DataView.prototype?ie=Number(ee.getBigInt64(G.value,!0)):ie=ee.getUint32(G.value+4,!0)+Number(ee.getUint32(G.value,!0)<<32),G.value+=8,ie};function it(ee,G){var ie=ee.getFloat32(G.value,!0);return G.value+=4,ie}function Ae(ee,G){return La.toHalfFloat(it(ee,G))}function _e(ee){var G=(ee&31744)>>10,ie=ee&1023;return(ee>>15?-1:1)*(G?G===31?ie?NaN:1/0:Math.pow(2,G-15)*(1+ie/1024):6103515625e-14*(ie/1024))}function Ie(ee,G){var ie=ee.getUint16(G.value,!0);return G.value+=2,ie}function rt(ee,G){return _e(Ie(ee,G))}function nt(ee,G,ie,ue){for(var ae=ie.value,pe=[];ie.value<ae+ue-1;){var Ue=Qe(G,ie),ke=tt(ee,ie),je=Re(ee,ie);ie.value+=3;var Xe=tt(ee,ie),$e=tt(ee,ie);pe.push({name:Ue,pixelType:ke,pLinear:je,xSampling:Xe,ySampling:$e})}return ie.value+=1,pe}function pt(ee,G){var ie=it(ee,G),ue=it(ee,G),ae=it(ee,G),pe=it(ee,G),Ue=it(ee,G),ke=it(ee,G),je=it(ee,G),Xe=it(ee,G);return{redX:ie,redY:ue,greenX:ae,greenY:pe,blueX:Ue,blueY:ke,whiteX:je,whiteY:Xe}}function Pt(ee,G){var ie=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ue=Re(ee,G);return ie[ue]}function Qt(ee,G){var ie=et(ee,G),ue=et(ee,G),ae=et(ee,G),pe=et(ee,G);return{xMin:ie,yMin:ue,xMax:ae,yMax:pe}}function Tt(ee,G){var ie=["INCREASING_Y"],ue=Re(ee,G);return ie[ue]}function Lt(ee,G){var ie=it(ee,G),ue=it(ee,G);return[ie,ue]}function bn(ee,G){var ie=it(ee,G),ue=it(ee,G),ae=it(ee,G);return[ie,ue,ae]}function Tn(ee,G,ie,ue,ae){if(ue==="string"||ue==="stringvector"||ue==="iccProfile")return He(G,ie,ae);if(ue==="chlist")return nt(ee,G,ie,ae);if(ue==="chromaticities")return pt(ee,ie);if(ue==="compression")return Pt(ee,ie);if(ue==="box2i")return Qt(ee,ie);if(ue==="lineOrder")return Tt(ee,ie);if(ue==="float")return it(ee,ie);if(ue==="v2f")return Lt(ee,ie);if(ue==="v3f")return bn(ee,ie);if(ue==="int")return tt(ee,ie);if(ue==="rational")return De(ee,ie);if(ue==="timecode")return at(ee,ie);if(ue==="preview")return ie.value+=ae,"skipped";ie.value+=ae}function oi(ee,G,ie){const ue={};if(ee.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ue.version=ee.getUint8(4);const ae=ee.getUint8(5);ue.spec={singleTile:!!(ae&2),longName:!!(ae&4),deepFormat:!!(ae&8),multiPart:!!(ae&16)},ie.value=8;for(var pe=!0;pe;){var Ue=Qe(G,ie);if(Ue==0)pe=!1;else{var ke=Qe(G,ie),je=et(ee,ie),Xe=Tn(ee,G,ie,ke,je);Xe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ke}'.`):ue[Ue]=Xe}}if(ae&-5)throw console.error("EXRHeader:",ue),"THREE.EXRLoader: provided file is currently unsupported.";return ue}function xr(ee,G,ie,ue,ae){const pe={size:0,viewer:G,array:ie,offset:ue,width:ee.dataWindow.xMax-ee.dataWindow.xMin+1,height:ee.dataWindow.yMax-ee.dataWindow.yMin+1,channels:ee.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ee.channels[0].pixelType,uncompress:null,getter:null,format:null,[m1?"colorSpace":"encoding"]:null};switch(ee.compression){case"NO_COMPRESSION":pe.lines=1,pe.uncompress=re;break;case"RLE_COMPRESSION":pe.lines=1,pe.uncompress=Z;break;case"ZIPS_COMPRESSION":pe.lines=1,pe.uncompress=ge;break;case"ZIP_COMPRESSION":pe.lines=16,pe.uncompress=ge;break;case"PIZ_COMPRESSION":pe.lines=32,pe.uncompress=Fe;break;case"PXR24_COMPRESSION":pe.lines=16,pe.uncompress=Ce;break;case"DWAA_COMPRESSION":pe.lines=32,pe.uncompress=Le;break;case"DWAB_COMPRESSION":pe.lines=256,pe.uncompress=Le;break;default:throw"EXRLoader.parse: "+ee.compression+" is unsupported"}if(pe.scanlineBlockSize=pe.lines,pe.type==1)switch(ae){case En:pe.getter=rt,pe.inputSize=2;break;case Ln:pe.getter=Ie,pe.inputSize=2;break}else if(pe.type==2)switch(ae){case En:pe.getter=it,pe.inputSize=4;break;case Ln:pe.getter=Ae,pe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+pe.type+" for "+ee.compression+".";pe.blockCount=(ee.dataWindow.yMax+1)/pe.scanlineBlockSize;for(var Ue=0;Ue<pe.blockCount;Ue++)qe(G,ue);pe.outputChannels=pe.channels==3?4:pe.channels;const ke=pe.width*pe.height*pe.outputChannels;switch(ae){case En:pe.byteArray=new Float32Array(ke),pe.channels<pe.outputChannels&&pe.byteArray.fill(1,0,ke);break;case Ln:pe.byteArray=new Uint16Array(ke),pe.channels<pe.outputChannels&&pe.byteArray.fill(15360,0,ke);break;default:console.error("THREE.EXRLoader: unsupported type: ",ae);break}return pe.bytesPerLine=pe.width*pe.inputSize*pe.channels,pe.outputChannels==4?pe.format=Dn:pe.format=ea,m1?pe.colorSpace="srgb-linear":pe.encoding=3e3,pe}const _r=new DataView(e),Zi=new Uint8Array(e),lr={value:0},yi=oi(_r,e,lr),qt=xr(yi,_r,Zi,lr,this.type),Li={value:0},Js={R:0,G:1,B:2,A:3,Y:0};for(let ee=0;ee<qt.height/qt.scanlineBlockSize;ee++){const G=et(_r,lr);qt.size=et(_r,lr),qt.lines=G+qt.scanlineBlockSize>qt.height?qt.height-G:qt.scanlineBlockSize;const ue=qt.size<qt.lines*qt.bytesPerLine?qt.uncompress(qt):re(qt);lr.value+=qt.size;for(let ae=0;ae<qt.scanlineBlockSize;ae++){const pe=ae+ee*qt.scanlineBlockSize;if(pe>=qt.height)break;for(let Ue=0;Ue<qt.channels;Ue++){const ke=Js[yi.channels[Ue].name];for(let je=0;je<qt.width;je++){Li.value=(ae*(qt.channels*qt.width)+Ue*qt.width+je)*qt.inputSize;const Xe=(qt.height-1-pe)*(qt.width*qt.outputChannels)+je*qt.outputChannels+ke;qt.byteArray[Xe]=qt.getter(ue,Li)}}}}return{header:yi,width:qt.width,height:qt.height,data:qt.byteArray,format:qt.format,[m1?"colorSpace":"encoding"]:qt[m1?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){m1?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Ut,o.magFilter=Ut,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const Eye="srgb";class bg extends Hi{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,i,r){const s=this,o=new Ri(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this;function i(N,Q){if(N.nodeType!==1)return;const j=E(N);let X=!1,se=null;switch(N.nodeName){case"svg":Q=m(N,Q);break;case"style":s(N);break;case"g":Q=m(N,Q);break;case"path":Q=m(N,Q),N.hasAttribute("d")&&(se=r(N));break;case"rect":Q=m(N,Q),se=l(N);break;case"polygon":Q=m(N,Q),se=c(N);break;case"polyline":Q=m(N,Q),se=u(N);break;case"circle":Q=m(N,Q),se=h(N);break;case"ellipse":Q=m(N,Q),se=f(N);break;case"line":Q=m(N,Q),se=d(N);break;case"defs":X=!0;break;case"use":Q=m(N,Q);const he=(N.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),te=N.viewportElement.getElementById(he);te?i(te,Q):console.warn("SVGLoader: 'use node' references non-existent node id: "+he);break}se&&(Q.fill!==void 0&&Q.fill!=="none"&&se.color.setStyle(Q.fill,Eye),C(se,U),R.push(se),se.userData={node:N,style:Q});const ve=N.childNodes;for(let de=0;de<ve.length;de++){const he=ve[de];X&&he.nodeName!=="style"&&he.nodeName!=="defs"||i(he,Q)}j&&(L.pop(),L.length>0?U.copy(L[L.length-1]):U.identity())}function r(N){const Q=new tc,j=new Ee,X=new Ee,se=new Ee;let ve=!0,de=!1;const he=N.getAttribute("d");if(he===""||he==="none")return null;const te=he.match(/[a-df-z][^a-df-z]*/gi);for(let xe=0,ce=te.length;xe<ce;xe++){const me=te[xe],ye=me.charAt(0),Me=me.slice(1).trim();ve===!0&&(de=!0,ve=!1);let oe;switch(ye){case"M":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=2)j.x=oe[ne+0],j.y=oe[ne+1],X.x=j.x,X.y=j.y,ne===0?Q.moveTo(j.x,j.y):Q.lineTo(j.x,j.y),ne===0&&se.copy(j);break;case"H":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne++)j.x=oe[ne],X.x=j.x,X.y=j.y,Q.lineTo(j.x,j.y),ne===0&&de===!0&&se.copy(j);break;case"V":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne++)j.y=oe[ne],X.x=j.x,X.y=j.y,Q.lineTo(j.x,j.y),ne===0&&de===!0&&se.copy(j);break;case"L":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=2)j.x=oe[ne+0],j.y=oe[ne+1],X.x=j.x,X.y=j.y,Q.lineTo(j.x,j.y),ne===0&&de===!0&&se.copy(j);break;case"C":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=6)Q.bezierCurveTo(oe[ne+0],oe[ne+1],oe[ne+2],oe[ne+3],oe[ne+4],oe[ne+5]),X.x=oe[ne+2],X.y=oe[ne+3],j.x=oe[ne+4],j.y=oe[ne+5],ne===0&&de===!0&&se.copy(j);break;case"S":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=4)Q.bezierCurveTo(A(j.x,X.x),A(j.y,X.y),oe[ne+0],oe[ne+1],oe[ne+2],oe[ne+3]),X.x=oe[ne+0],X.y=oe[ne+1],j.x=oe[ne+2],j.y=oe[ne+3],ne===0&&de===!0&&se.copy(j);break;case"Q":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=4)Q.quadraticCurveTo(oe[ne+0],oe[ne+1],oe[ne+2],oe[ne+3]),X.x=oe[ne+0],X.y=oe[ne+1],j.x=oe[ne+2],j.y=oe[ne+3],ne===0&&de===!0&&se.copy(j);break;case"T":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=2){const be=A(j.x,X.x),st=A(j.y,X.y);Q.quadraticCurveTo(be,st,oe[ne+0],oe[ne+1]),X.x=be,X.y=st,j.x=oe[ne+0],j.y=oe[ne+1],ne===0&&de===!0&&se.copy(j)}break;case"A":oe=y(Me,[3,4],7);for(let ne=0,we=oe.length;ne<we;ne+=7){if(oe[ne+5]==j.x&&oe[ne+6]==j.y)continue;const be=j.clone();j.x=oe[ne+5],j.y=oe[ne+6],X.x=j.x,X.y=j.y,o(Q,oe[ne],oe[ne+1],oe[ne+2],oe[ne+3],oe[ne+4],be,j),ne===0&&de===!0&&se.copy(j)}break;case"m":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=2)j.x+=oe[ne+0],j.y+=oe[ne+1],X.x=j.x,X.y=j.y,ne===0?Q.moveTo(j.x,j.y):Q.lineTo(j.x,j.y),ne===0&&se.copy(j);break;case"h":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne++)j.x+=oe[ne],X.x=j.x,X.y=j.y,Q.lineTo(j.x,j.y),ne===0&&de===!0&&se.copy(j);break;case"v":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne++)j.y+=oe[ne],X.x=j.x,X.y=j.y,Q.lineTo(j.x,j.y),ne===0&&de===!0&&se.copy(j);break;case"l":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=2)j.x+=oe[ne+0],j.y+=oe[ne+1],X.x=j.x,X.y=j.y,Q.lineTo(j.x,j.y),ne===0&&de===!0&&se.copy(j);break;case"c":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=6)Q.bezierCurveTo(j.x+oe[ne+0],j.y+oe[ne+1],j.x+oe[ne+2],j.y+oe[ne+3],j.x+oe[ne+4],j.y+oe[ne+5]),X.x=j.x+oe[ne+2],X.y=j.y+oe[ne+3],j.x+=oe[ne+4],j.y+=oe[ne+5],ne===0&&de===!0&&se.copy(j);break;case"s":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=4)Q.bezierCurveTo(A(j.x,X.x),A(j.y,X.y),j.x+oe[ne+0],j.y+oe[ne+1],j.x+oe[ne+2],j.y+oe[ne+3]),X.x=j.x+oe[ne+0],X.y=j.y+oe[ne+1],j.x+=oe[ne+2],j.y+=oe[ne+3],ne===0&&de===!0&&se.copy(j);break;case"q":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=4)Q.quadraticCurveTo(j.x+oe[ne+0],j.y+oe[ne+1],j.x+oe[ne+2],j.y+oe[ne+3]),X.x=j.x+oe[ne+0],X.y=j.y+oe[ne+1],j.x+=oe[ne+2],j.y+=oe[ne+3],ne===0&&de===!0&&se.copy(j);break;case"t":oe=y(Me);for(let ne=0,we=oe.length;ne<we;ne+=2){const be=A(j.x,X.x),st=A(j.y,X.y);Q.quadraticCurveTo(be,st,j.x+oe[ne+0],j.y+oe[ne+1]),X.x=be,X.y=st,j.x=j.x+oe[ne+0],j.y=j.y+oe[ne+1],ne===0&&de===!0&&se.copy(j)}break;case"a":oe=y(Me,[3,4],7);for(let ne=0,we=oe.length;ne<we;ne+=7){if(oe[ne+5]==0&&oe[ne+6]==0)continue;const be=j.clone();j.x+=oe[ne+5],j.y+=oe[ne+6],X.x=j.x,X.y=j.y,o(Q,oe[ne],oe[ne+1],oe[ne+2],oe[ne+3],oe[ne+4],be,j),ne===0&&de===!0&&se.copy(j)}break;case"Z":case"z":Q.currentPath.autoClose=!0,Q.currentPath.curves.length>0&&(j.copy(se),Q.currentPath.currentPoint.copy(j),ve=!0);break;default:console.warn(me)}de=!1}return Q}function s(N){if(!(!N.sheet||!N.sheet.cssRules||!N.sheet.cssRules.length))for(let Q=0;Q<N.sheet.cssRules.length;Q++){const j=N.sheet.cssRules[Q];if(j.type!==1)continue;const X=j.selectorText.split(/,/gm).filter(Boolean).map(se=>se.trim());for(let se=0;se<X.length;se++){const ve=Object.fromEntries(Object.entries(j.style).filter(([,de])=>de!==""));z[X[se]]=Object.assign(z[X[se]]||{},ve)}}}function o(N,Q,j,X,se,ve,de,he){if(Q==0||j==0){N.lineTo(he.x,he.y);return}X=X*Math.PI/180,Q=Math.abs(Q),j=Math.abs(j);const te=(de.x-he.x)/2,xe=(de.y-he.y)/2,ce=Math.cos(X)*te+Math.sin(X)*xe,me=-Math.sin(X)*te+Math.cos(X)*xe;let ye=Q*Q,Me=j*j;const oe=ce*ce,ne=me*me,we=oe/ye+ne/Me;if(we>1){const He=Math.sqrt(we);Q=He*Q,j=He*j,ye=Q*Q,Me=j*j}const be=ye*ne+Me*oe,st=(ye*Me-be)/be;let re=Math.sqrt(Math.max(0,st));se===ve&&(re=-re);const Z=re*Q*me/j,ge=-re*j*ce/Q,Fe=Math.cos(X)*Z-Math.sin(X)*ge+(de.x+he.x)/2,Ce=Math.sin(X)*Z+Math.cos(X)*ge+(de.y+he.y)/2,Le=a(1,0,(ce-Z)/Q,(me-ge)/j),Qe=a((ce-Z)/Q,(me-ge)/j,(-ce-Z)/Q,(-me-ge)/j)%(Math.PI*2);N.currentPath.absellipse(Fe,Ce,Q,j,Le,Le+Qe,ve===0,X)}function a(N,Q,j,X){const se=N*j+Q*X,ve=Math.sqrt(N*N+Q*Q)*Math.sqrt(j*j+X*X);let de=Math.acos(Math.max(-1,Math.min(1,se/ve)));return N*X-Q*j<0&&(de=-de),de}function l(N){const Q=v(N.getAttribute("x")||0),j=v(N.getAttribute("y")||0),X=v(N.getAttribute("rx")||N.getAttribute("ry")||0),se=v(N.getAttribute("ry")||N.getAttribute("rx")||0),ve=v(N.getAttribute("width")),de=v(N.getAttribute("height")),he=1-.551915024494,te=new tc;return te.moveTo(Q+X,j),te.lineTo(Q+ve-X,j),(X!==0||se!==0)&&te.bezierCurveTo(Q+ve-X*he,j,Q+ve,j+se*he,Q+ve,j+se),te.lineTo(Q+ve,j+de-se),(X!==0||se!==0)&&te.bezierCurveTo(Q+ve,j+de-se*he,Q+ve-X*he,j+de,Q+ve-X,j+de),te.lineTo(Q+X,j+de),(X!==0||se!==0)&&te.bezierCurveTo(Q+X*he,j+de,Q,j+de-se*he,Q,j+de-se),te.lineTo(Q,j+se),(X!==0||se!==0)&&te.bezierCurveTo(Q,j+se*he,Q+X*he,j,Q+X,j),te}function c(N){function Q(ve,de,he){const te=v(de),xe=v(he);se===0?X.moveTo(te,xe):X.lineTo(te,xe),se++}const j=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,X=new tc;let se=0;return N.getAttribute("points").replace(j,Q),X.currentPath.autoClose=!0,X}function u(N){function Q(ve,de,he){const te=v(de),xe=v(he);se===0?X.moveTo(te,xe):X.lineTo(te,xe),se++}const j=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,X=new tc;let se=0;return N.getAttribute("points").replace(j,Q),X.currentPath.autoClose=!1,X}function h(N){const Q=v(N.getAttribute("cx")||0),j=v(N.getAttribute("cy")||0),X=v(N.getAttribute("r")||0),se=new Pu;se.absarc(Q,j,X,0,Math.PI*2);const ve=new tc;return ve.subPaths.push(se),ve}function f(N){const Q=v(N.getAttribute("cx")||0),j=v(N.getAttribute("cy")||0),X=v(N.getAttribute("rx")||0),se=v(N.getAttribute("ry")||0),ve=new Pu;ve.absellipse(Q,j,X,se,0,Math.PI*2);const de=new tc;return de.subPaths.push(ve),de}function d(N){const Q=v(N.getAttribute("x1")||0),j=v(N.getAttribute("y1")||0),X=v(N.getAttribute("x2")||0),se=v(N.getAttribute("y2")||0),ve=new tc;return ve.moveTo(Q,j),ve.lineTo(X,se),ve.currentPath.autoClose=!1,ve}function m(N,Q){Q=Object.assign({},Q);let j={};if(N.hasAttribute("class")){const de=N.getAttribute("class").split(/\s/).filter(Boolean).map(he=>he.trim());for(let he=0;he<de.length;he++)j=Object.assign(j,z["."+de[he]])}N.hasAttribute("id")&&(j=Object.assign(j,z["#"+N.getAttribute("id")]));function X(de,he,te){te===void 0&&(te=function(ce){return ce.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),ce}),N.hasAttribute(de)&&(Q[he]=te(N.getAttribute(de))),j[de]&&(Q[he]=te(j[de])),N.style&&N.style[de]!==""&&(Q[he]=te(N.style[de]))}function se(de){return Math.max(0,Math.min(1,v(de)))}function ve(de){return Math.max(0,v(de))}return X("fill","fill"),X("fill-opacity","fillOpacity",se),X("fill-rule","fillRule"),X("opacity","opacity",se),X("stroke","stroke"),X("stroke-opacity","strokeOpacity",se),X("stroke-width","strokeWidth",ve),X("stroke-linejoin","strokeLineJoin"),X("stroke-linecap","strokeLineCap"),X("stroke-miterlimit","strokeMiterLimit",ve),X("visibility","visibility"),Q}function A(N,Q){return N-(Q-N)}function y(N,Q,j){if(typeof N!="string")throw new TypeError("Invalid input: "+typeof N);const X={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},se=0,ve=1,de=2,he=3;let te=se,xe=!0,ce="",me="";const ye=[];function Me(be,st,re){const Z=new SyntaxError('Unexpected character "'+be+'" at index '+st+".");throw Z.partial=re,Z}function oe(){ce!==""&&(me===""?ye.push(Number(ce)):ye.push(Number(ce)*Math.pow(10,Number(me)))),ce="",me=""}let ne;const we=N.length;for(let be=0;be<we;be++){if(ne=N[be],Array.isArray(Q)&&Q.includes(ye.length%j)&&X.FLAGS.test(ne)){te=ve,ce=ne,oe();continue}if(te===se){if(X.WHITESPACE.test(ne))continue;if(X.DIGIT.test(ne)||X.SIGN.test(ne)){te=ve,ce=ne;continue}if(X.POINT.test(ne)){te=de,ce=ne;continue}X.COMMA.test(ne)&&(xe&&Me(ne,be,ye),xe=!0)}if(te===ve){if(X.DIGIT.test(ne)){ce+=ne;continue}if(X.POINT.test(ne)){ce+=ne,te=de;continue}if(X.EXP.test(ne)){te=he;continue}X.SIGN.test(ne)&&ce.length===1&&X.SIGN.test(ce[0])&&Me(ne,be,ye)}if(te===de){if(X.DIGIT.test(ne)){ce+=ne;continue}if(X.EXP.test(ne)){te=he;continue}X.POINT.test(ne)&&ce[ce.length-1]==="."&&Me(ne,be,ye)}if(te===he){if(X.DIGIT.test(ne)){me+=ne;continue}if(X.SIGN.test(ne)){if(me===""){me+=ne;continue}me.length===1&&X.SIGN.test(me)&&Me(ne,be,ye)}}X.WHITESPACE.test(ne)?(oe(),te=se,xe=!1):X.COMMA.test(ne)?(oe(),te=se,xe=!0):X.SIGN.test(ne)?(oe(),te=ve,ce=ne):X.POINT.test(ne)?(oe(),te=de,ce=ne):Me(ne,be,ye)}return oe(),ye}const p=["mm","cm","in","pt","pc","px"],g={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function v(N){let Q="px";if(typeof N=="string"||N instanceof String)for(let X=0,se=p.length;X<se;X++){const ve=p[X];if(N.endsWith(ve)){Q=ve,N=N.substring(0,N.length-ve.length);break}}let j;return Q==="px"&&t.defaultUnit!=="px"?j=g.in[t.defaultUnit]/t.defaultDPI:(j=g[Q][t.defaultUnit],j<0&&(j=g[Q].in*t.defaultDPI)),j*parseFloat(N)}function E(N){if(!(N.hasAttribute("transform")||N.nodeName==="use"&&(N.hasAttribute("x")||N.hasAttribute("y"))))return null;const Q=S(N);return L.length>0&&Q.premultiply(L[L.length-1]),U.copy(Q),L.push(Q),Q}function S(N){const Q=new Wt,j=H;if(N.nodeName==="use"&&(N.hasAttribute("x")||N.hasAttribute("y"))){const X=v(N.getAttribute("x")),se=v(N.getAttribute("y"));Q.translate(X,se)}if(N.hasAttribute("transform")){const X=N.getAttribute("transform").split(")");for(let se=X.length-1;se>=0;se--){const ve=X[se].trim();if(ve==="")continue;const de=ve.indexOf("("),he=ve.length;if(de>0&&de<he){const te=ve.slice(0,de),xe=y(ve.slice(de+1));switch(j.identity(),te){case"translate":if(xe.length>=1){const ce=xe[0];let me=0;xe.length>=2&&(me=xe[1]),j.translate(ce,me)}break;case"rotate":if(xe.length>=1){let ce=0,me=0,ye=0;ce=xe[0]*Math.PI/180,xe.length>=3&&(me=xe[1],ye=xe[2]),K.makeTranslation(-me,-ye),J.makeRotation(ce),O.multiplyMatrices(J,K),K.makeTranslation(me,ye),j.multiplyMatrices(K,O)}break;case"scale":if(xe.length>=1){const ce=xe[0];let me=ce;xe.length>=2&&(me=xe[1]),j.scale(ce,me)}break;case"skewX":xe.length===1&&j.set(1,Math.tan(xe[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":xe.length===1&&j.set(1,0,0,Math.tan(xe[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":xe.length===6&&j.set(xe[0],xe[2],xe[4],xe[1],xe[3],xe[5],0,0,1);break}}Q.premultiply(j)}}return Q}function C(N,Q){function j(de){V.set(de.x,de.y,1).applyMatrix3(Q),de.set(V.x,V.y)}function X(de){const he=de.xRadius,te=de.yRadius,xe=Math.cos(de.aRotation),ce=Math.sin(de.aRotation),me=new D(he*xe,he*ce,0),ye=new D(-te*ce,te*xe,0),Me=me.applyMatrix3(Q),oe=ye.applyMatrix3(Q),ne=H.set(Me.x,oe.x,0,Me.y,oe.y,0,0,0,1),we=K.copy(ne).invert(),re=J.copy(we).transpose().multiply(we).elements,Z=F(re[0],re[1],re[4]),ge=Math.sqrt(Z.rt1),Fe=Math.sqrt(Z.rt2);if(de.xRadius=1/ge,de.yRadius=1/Fe,de.aRotation=Math.atan2(Z.sn,Z.cs),!((de.aEndAngle-de.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const Le=K.set(ge,0,0,0,Fe,0,0,0,1),Qe=J.set(Z.cs,Z.sn,0,-Z.sn,Z.cs,0,0,0,1),He=Le.multiply(Qe).multiply(ne),De=at=>{const{x:tt,y:et}=new D(Math.cos(at),Math.sin(at),0).applyMatrix3(He);return Math.atan2(et,tt)};de.aStartAngle=De(de.aStartAngle),de.aEndAngle=De(de.aEndAngle),M(Q)&&(de.aClockwise=!de.aClockwise)}}function se(de){const he=T(Q),te=I(Q);de.xRadius*=he,de.yRadius*=te;const xe=he>Number.EPSILON?Math.atan2(Q.elements[1],Q.elements[0]):Math.atan2(-Q.elements[3],Q.elements[4]);de.aRotation+=xe,M(Q)&&(de.aStartAngle*=-1,de.aEndAngle*=-1,de.aClockwise=!de.aClockwise)}const ve=N.subPaths;for(let de=0,he=ve.length;de<he;de++){const xe=ve[de].curves;for(let ce=0;ce<xe.length;ce++){const me=xe[ce];me.isLineCurve?(j(me.v1),j(me.v2)):me.isCubicBezierCurve?(j(me.v0),j(me.v1),j(me.v2),j(me.v3)):me.isQuadraticBezierCurve?(j(me.v0),j(me.v1),j(me.v2)):me.isEllipseCurve&&(W.set(me.aX,me.aY),j(W),me.aX=W.x,me.aY=W.y,b(Q)?X(me):se(me))}}}function M(N){const Q=N.elements;return Q[0]*Q[4]-Q[1]*Q[3]<0}function b(N){const Q=N.elements,j=Q[0]*Q[3]+Q[1]*Q[4];if(j===0)return!1;const X=T(N),se=I(N);return Math.abs(j/(X*se))>Number.EPSILON}function T(N){const Q=N.elements;return Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1])}function I(N){const Q=N.elements;return Math.sqrt(Q[3]*Q[3]+Q[4]*Q[4])}function F(N,Q,j){let X,se,ve,de,he;const te=N+j,xe=N-j,ce=Math.sqrt(xe*xe+4*Q*Q);return te>0?(X=.5*(te+ce),he=1/X,se=N*he*j-Q*he*Q):te<0?se=.5*(te-ce):(X=.5*ce,se=-.5*ce),xe>0?ve=xe+ce:ve=xe-ce,Math.abs(ve)>2*Math.abs(Q)?(he=-2*Q/ve,de=1/Math.sqrt(1+he*he),ve=he*de):Math.abs(Q)===0?(ve=1,de=0):(he=-.5*ve/Q,ve=1/Math.sqrt(1+he*he),de=he*ve),xe>0&&(he=ve,ve=-de,de=he),{rt1:X,rt2:se,cs:ve,sn:de}}const R=[],z={},L=[],H=new Wt,K=new Wt,J=new Wt,O=new Wt,W=new Ee,V=new D,U=new Wt,Y=new DOMParser().parseFromString(e,"image/svg+xml");return i(Y.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:R,xml:Y.documentElement}}static createShapes(e){const i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},r={loc:i.ORIGIN,t:0};function s(A,y,p,g){const v=A.x,E=y.x,S=p.x,C=g.x,M=A.y,b=y.y,T=p.y,I=g.y,F=(C-S)*(M-T)-(I-T)*(v-S),R=(E-v)*(M-T)-(b-M)*(v-S),z=(I-T)*(E-v)-(C-S)*(b-M),L=F/z,H=R/z;if(z===0&&F!==0||L<=0||L>=1||H<0||H>1)return null;if(F===0&&z===0){for(let K=0;K<2;K++)if(o(K===0?p:g,A,y),r.loc==i.ORIGIN){const J=K===0?p:g;return{x:J.x,y:J.y,t:r.t}}else if(r.loc==i.BETWEEN){const J=+(v+r.t*(E-v)).toPrecision(10),O=+(M+r.t*(b-M)).toPrecision(10);return{x:J,y:O,t:r.t}}return null}else{for(let O=0;O<2;O++)if(o(O===0?p:g,A,y),r.loc==i.ORIGIN){const W=O===0?p:g;return{x:W.x,y:W.y,t:r.t}}const K=+(v+L*(E-v)).toPrecision(10),J=+(M+L*(b-M)).toPrecision(10);return{x:K,y:J,t:L}}}function o(A,y,p){const g=p.x-y.x,v=p.y-y.y,E=A.x-y.x,S=A.y-y.y,C=g*S-E*v;if(A.x===y.x&&A.y===y.y){r.loc=i.ORIGIN,r.t=0;return}if(A.x===p.x&&A.y===p.y){r.loc=i.DESTINATION,r.t=1;return}if(C<-Number.EPSILON){r.loc=i.LEFT;return}if(C>Number.EPSILON){r.loc=i.RIGHT;return}if(g*E<0||v*S<0){r.loc=i.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(E*E+S*S)){r.loc=i.BEYOND;return}let M;g!==0?M=E/g:M=S/v,r.loc=i.BETWEEN,r.t=M}function a(A,y){const p=[],g=[];for(let v=1;v<A.length;v++){const E=A[v-1],S=A[v];for(let C=1;C<y.length;C++){const M=y[C-1],b=y[C],T=s(E,S,M,b);T!==null&&p.find(I=>I.t<=T.t+Number.EPSILON&&I.t>=T.t-Number.EPSILON)===void 0&&(p.push(T),g.push(new Ee(T.x,T.y)))}}return g}function l(A,y,p){const g=new Ee;y.getCenter(g);const v=[];return p.forEach(E=>{E.boundingBox.containsPoint(g)&&a(A,E.points).forEach(C=>{v.push({identifier:E.identifier,isCW:E.isCW,point:C})})}),v.sort((E,S)=>E.point.x-S.point.x),v}function c(A,y,p,g,v){(v==null||v==="")&&(v="nonzero");const E=new Ee;A.boundingBox.getCenter(E);const S=[new Ee(p,E.y),new Ee(g,E.y)],C=l(S,A.boundingBox,y);C.sort((R,z)=>R.point.x-z.point.x);const M=[],b=[];C.forEach(R=>{R.identifier===A.identifier?M.push(R):b.push(R)});const T=M[0].point.x,I=[];let F=0;for(;F<b.length&&b[F].point.x<T;)I.length>0&&I[I.length-1]===b[F].identifier?I.pop():I.push(b[F].identifier),F++;if(I.push(A.identifier),v==="evenodd"){const R=I.length%2===0,z=I[I.length-2];return{identifier:A.identifier,isHole:R,for:z}}else if(v==="nonzero"){let R=!0,z=null,L=null;for(let H=0;H<I.length;H++){const K=I[H];R?(L=y[K].isCW,R=!1,z=K):L!==y[K].isCW&&(L=y[K].isCW,R=!0)}return{identifier:A.identifier,isHole:R,for:z}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let u=999999999,h=-999999999,f=e.subPaths.map(A=>{const y=A.getPoints();let p=-999999999,g=999999999,v=-999999999,E=999999999;for(let S=0;S<y.length;S++){const C=y[S];C.y>p&&(p=C.y),C.y<g&&(g=C.y),C.x>v&&(v=C.x),C.x<E&&(E=C.x)}return h<=v&&(h=v+1),u>=E&&(u=E-1),{curves:A.curves,points:y,isCW:Na.isClockWise(y),identifier:-1,boundingBox:new NQ(new Ee(E,g),new Ee(v,p))}});f=f.filter(A=>A.points.length>1);for(let A=0;A<f.length;A++)f[A].identifier=A;const d=f.map(A=>c(A,f,u,h,e.userData?e.userData.style.fillRule:void 0)),m=[];return f.forEach(A=>{if(!d[A.identifier].isHole){const p=new gc;p.curves=A.curves,d.filter(v=>v.isHole&&v.for===A.identifier).forEach(v=>{const E=f[v.identifier],S=new Pu;S.curves=E.curves,p.holes.push(S)}),m.push(p)}}),m}static getStrokeStyle(e,t,i,r,s){return e=e!==void 0?e:1,t=t!==void 0?t:"#000",i=i!==void 0?i:"miter",r=r!==void 0?r:"butt",s=s!==void 0?s:4,{strokeColor:t,strokeWidth:e,strokeLineJoin:i,strokeLineCap:r,strokeMiterLimit:s}}static pointsToStroke(e,t,i,r){const s=[],o=[],a=[];if(bg.pointsToStrokeWithBuffers(e,t,i,r,s,o,a)===0)return null;const l=new It;return l.setAttribute("position",new ft(s,3)),l.setAttribute("normal",new ft(o,3)),l.setAttribute("uv",new ft(a,2)),l}static pointsToStrokeWithBuffers(e,t,i,r,s,o,a,l){const c=new Ee,u=new Ee,h=new Ee,f=new Ee,d=new Ee,m=new Ee,A=new Ee,y=new Ee,p=new Ee,g=new Ee,v=new Ee,E=new Ee,S=new Ee,C=new Ee,M=new Ee,b=new Ee,T=new Ee;i=i!==void 0?i:12,r=r!==void 0?r:.001,l=l!==void 0?l:0,e=xe(e);const I=e.length;if(I<2)return 0;const F=e[0].equals(e[I-1]);let R,z=e[0],L;const H=t.strokeWidth/2,K=1/(I-1);let J=0,O,W,V,U,Y=!1,$=0,N=l*3,Q=l*2;j(e[0],e[1],c).multiplyScalar(H),y.copy(e[0]).sub(c),p.copy(e[0]).add(c),g.copy(y),v.copy(p);for(let ce=1;ce<I;ce++){R=e[ce],ce===I-1?F?L=e[1]:L=void 0:L=e[ce+1];const me=c;if(j(z,R,me),h.copy(me).multiplyScalar(H),E.copy(R).sub(h),S.copy(R).add(h),O=J+K,W=!1,L!==void 0){j(R,L,u),h.copy(u).multiplyScalar(H),C.copy(R).sub(h),M.copy(R).add(h),V=!0,h.subVectors(L,z),me.dot(h)<0&&(V=!1),ce===1&&(Y=V),h.subVectors(L,R),h.normalize();const ye=Math.abs(me.dot(h));if(ye>Number.EPSILON){const Me=H/ye;h.multiplyScalar(-Me),f.subVectors(R,z),d.copy(f).setLength(Me).add(h),b.copy(d).negate();const oe=d.length(),ne=f.length();f.divideScalar(ne),m.subVectors(L,R);const we=m.length();switch(m.divideScalar(we),f.dot(b)<ne&&m.dot(b)<we&&(W=!0),T.copy(d).add(R),b.add(R),U=!1,W?V?(M.copy(b),S.copy(b)):(C.copy(b),E.copy(b)):ve(),t.strokeLineJoin){case"bevel":de(V,W,O);break;case"round":he(V,W),V?se(R,E,C,O,0):se(R,M,S,O,1);break;case"miter":case"miter-clip":default:const be=H*t.strokeMiterLimit/oe;if(be<1)if(t.strokeLineJoin!=="miter-clip"){de(V,W,O);break}else he(V,W),V?(m.subVectors(T,E).multiplyScalar(be).add(E),A.subVectors(T,C).multiplyScalar(be).add(C),X(E,O,0),X(m,O,0),X(R,O,.5),X(R,O,.5),X(m,O,0),X(A,O,0),X(R,O,.5),X(A,O,0),X(C,O,0)):(m.subVectors(T,S).multiplyScalar(be).add(S),A.subVectors(T,M).multiplyScalar(be).add(M),X(S,O,1),X(m,O,1),X(R,O,.5),X(R,O,.5),X(m,O,1),X(A,O,1),X(R,O,.5),X(A,O,1),X(M,O,1));else W?(V?(X(p,J,1),X(y,J,0),X(T,O,0),X(p,J,1),X(T,O,0),X(b,O,1)):(X(p,J,1),X(y,J,0),X(T,O,1),X(y,J,0),X(b,O,0),X(T,O,1)),V?C.copy(T):M.copy(T)):V?(X(E,O,0),X(T,O,0),X(R,O,.5),X(R,O,.5),X(T,O,0),X(C,O,0)):(X(S,O,1),X(T,O,1),X(R,O,.5),X(R,O,.5),X(T,O,1),X(M,O,1)),U=!0;break}}else ve()}else ve();!F&&ce===I-1&&te(e[0],g,v,V,!0,J),J=O,z=R,y.copy(C),p.copy(M)}if(!F)te(R,E,S,V,!1,O);else if(W&&s){let ce=T,me=b;Y!==V&&(ce=b,me=T),V?(U||Y)&&(me.toArray(s,0*3),me.toArray(s,3*3),U&&ce.toArray(s,1*3)):(U||!Y)&&(me.toArray(s,1*3),me.toArray(s,3*3),U&&ce.toArray(s,0*3))}return $;function j(ce,me,ye){return ye.subVectors(me,ce),ye.set(-ye.y,ye.x).normalize()}function X(ce,me,ye){s&&(s[N]=ce.x,s[N+1]=ce.y,s[N+2]=0,o&&(o[N]=0,o[N+1]=0,o[N+2]=1),N+=3,a&&(a[Q]=me,a[Q+1]=ye,Q+=2)),$+=3}function se(ce,me,ye,Me,oe){c.copy(me).sub(ce).normalize(),u.copy(ye).sub(ce).normalize();let ne=Math.PI;const we=c.dot(u);Math.abs(we)<1&&(ne=Math.abs(Math.acos(we))),ne/=i,h.copy(me);for(let be=0,st=i-1;be<st;be++)f.copy(h).rotateAround(ce,ne),X(h,Me,oe),X(f,Me,oe),X(ce,Me,.5),h.copy(f);X(f,Me,oe),X(ye,Me,oe),X(ce,Me,.5)}function ve(){X(p,J,1),X(y,J,0),X(E,O,0),X(p,J,1),X(E,O,0),X(S,O,1)}function de(ce,me,ye){me?ce?(X(p,J,1),X(y,J,0),X(E,O,0),X(p,J,1),X(E,O,0),X(b,O,1),X(E,ye,0),X(C,ye,0),X(b,ye,.5)):(X(p,J,1),X(y,J,0),X(S,O,1),X(y,J,0),X(b,O,0),X(S,O,1),X(S,ye,1),X(b,ye,0),X(M,ye,1)):ce?(X(E,ye,0),X(C,ye,0),X(R,ye,.5)):(X(S,ye,1),X(M,ye,0),X(R,ye,.5))}function he(ce,me){me&&(ce?(X(p,J,1),X(y,J,0),X(E,O,0),X(p,J,1),X(E,O,0),X(b,O,1),X(E,J,0),X(R,O,.5),X(b,O,1),X(R,O,.5),X(C,J,0),X(b,O,1)):(X(p,J,1),X(y,J,0),X(S,O,1),X(y,J,0),X(b,O,0),X(S,O,1),X(S,J,1),X(b,O,0),X(R,O,.5),X(R,O,.5),X(b,O,0),X(M,J,1)))}function te(ce,me,ye,Me,oe,ne){switch(t.strokeLineCap){case"round":oe?se(ce,ye,me,ne,.5):se(ce,me,ye,ne,.5);break;case"square":if(oe)c.subVectors(me,ce),u.set(c.y,-c.x),h.addVectors(c,u).add(ce),f.subVectors(u,c).add(ce),Me?(h.toArray(s,1*3),f.toArray(s,0*3),f.toArray(s,3*3)):(h.toArray(s,1*3),a[3*2+1]===1?f.toArray(s,3*3):h.toArray(s,3*3),f.toArray(s,0*3));else{c.subVectors(ye,ce),u.set(c.y,-c.x),h.addVectors(c,u).add(ce),f.subVectors(u,c).add(ce);const we=s.length;Me?(h.toArray(s,we-1*3),f.toArray(s,we-2*3),f.toArray(s,we-4*3)):(f.toArray(s,we-2*3),h.toArray(s,we-1*3),f.toArray(s,we-4*3))}break}}function xe(ce){let me=!1;for(let Me=1,oe=ce.length-1;Me<oe;Me++)if(ce[Me].distanceTo(ce[Me+1])<r){me=!0;break}if(!me)return ce;const ye=[];ye.push(ce[0]);for(let Me=1,oe=ce.length-1;Me<oe;Me++)ce[Me].distanceTo(ce[Me+1])>=r&&ye.push(ce[Me]);return ye.push(ce[ce.length-1]),ye}}}const A4=new WeakMap;class wye extends Hi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Ri(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(A4.has(e)){const l=A4.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),A4.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new It;e.index&&t.setIndex(new zt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new zt(o,a))}return t}_loadLibrary(e,t){const i=new Ri(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Sye.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Sye(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const h=u.draco,f=new h.Decoder,d=new h.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const m=t(h,f,d,c),A=m.attributes.map(y=>y.array.buffer);m.index&&A.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},A)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{h.destroy(d),h.destroy(f)}});break}};function t(o,a,l,c){const u=c.attributeIDs,h=c.attributeTypes;let f,d;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)f=new o.Mesh,d=a.DecodeBufferToMesh(l,f);else if(m===o.POINT_CLOUD)f=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const A={index:null,attributes:[]};for(const y in u){const p=self[h[y]];let g,v;if(c.useUniqueIDs)v=u[y],g=a.GetAttributeByUniqueId(f,v);else{if(v=a.GetAttributeId(f,o[u[y]]),v===-1)continue;g=a.GetAttribute(f,v)}A.attributes.push(r(o,a,f,y,p,g))}return m===o.TRIANGULAR_MESH&&(A.index=i(o,a,f)),o.destroy(f),A}function i(o,a,l){const u=l.num_faces()*3,h=u*4,f=o._malloc(h);a.GetTrianglesUInt32Array(l,h,f);const d=new Uint32Array(o.HEAPF32.buffer,f,u).slice();return o._free(f),{array:d,itemSize:1}}function r(o,a,l,c,u,h){const f=h.num_components(),m=l.num_points()*f,A=m*u.BYTES_PER_ELEMENT,y=s(o,u),p=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,h,y,A,p);const g=new u(o.HEAPF32.buffer,p,m).slice();return o._free(p),{name:c,array:g,itemSize:f}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const dO=new Bn,P2=new D;class HE extends jA{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new ft(e,3)),this.setAttribute("uv",new ft(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new O_(t,6,1);return this.setAttribute("instanceStart",new Hs(i,3,0)),this.setAttribute("instanceEnd",new Hs(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new O_(i,t*2,1);return this.setAttribute("instanceColorStart",new Hs(r,t,0)),this.setAttribute("instanceColorEnd",new Hs(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new d6(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),dO.setFromBufferAttribute(t),this.boundingBox.union(dO))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vi),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)P2.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(P2)),P2.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(P2));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class $j extends HE{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class QE extends Fn{constructor(e){super({type:"LineMaterial",uniforms:ca.clone(ca.merge([gt.common,gt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ee(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(ja.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const pO=new D,mO=new D,kr=new Yt,Nr=new Yt,sl=new Yt,v4=new D,y4=new Oe,ns=new Ga,gO=new D,R2=new Bn,D2=new vi,ol=new Yt;let vl,Kb,eX,mf;function AO(n,e,t){return ol.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),ol.multiplyScalar(1/ol.w),ol.x=mf/t.width,ol.y=mf/t.height,ol.applyMatrix4(n.projectionMatrixInverse),ol.multiplyScalar(1/ol.w),Math.abs(Math.max(ol.x,ol.y))}function Cye(n,e){for(let t=0,i=Kb.count;t<i;t++){ns.start.fromBufferAttribute(Kb,t),ns.end.fromBufferAttribute(eX,t);const r=new D,s=new D;vl.distanceSqToSegment(ns.start,ns.end,s,r),s.distanceTo(r)<mf*.5&&e.push({point:s,pointOnLine:r,distance:vl.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function Mye(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;vl.at(1,sl),sl.w=1,sl.applyMatrix4(e.matrixWorldInverse),sl.applyMatrix4(i),sl.multiplyScalar(1/sl.w),sl.x*=s.x/2,sl.y*=s.y/2,sl.z=0,v4.copy(sl),y4.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,f=l.count;h<f;h++){if(kr.fromBufferAttribute(l,h),Nr.fromBufferAttribute(c,h),kr.w=1,Nr.w=1,kr.applyMatrix4(y4),Nr.applyMatrix4(y4),kr.z>u&&Nr.z>u)continue;if(kr.z>u){const g=kr.z-Nr.z,v=(kr.z-u)/g;kr.lerp(Nr,v)}else if(Nr.z>u){const g=Nr.z-kr.z,v=(Nr.z-u)/g;Nr.lerp(kr,v)}kr.applyMatrix4(i),Nr.applyMatrix4(i),kr.multiplyScalar(1/kr.w),Nr.multiplyScalar(1/Nr.w),kr.x*=s.x/2,kr.y*=s.y/2,Nr.x*=s.x/2,Nr.y*=s.y/2,ns.start.copy(kr),ns.start.z=0,ns.end.copy(Nr),ns.end.z=0;const m=ns.closestPointToPointParameter(v4,!0);ns.at(m,gO);const A=Dt.lerp(kr.z,Nr.z,m),y=A>=-1&&A<=1,p=v4.distanceTo(gO)<mf*.5;if(y&&p){ns.start.fromBufferAttribute(l,h),ns.end.fromBufferAttribute(c,h),ns.start.applyMatrix4(o),ns.end.applyMatrix4(o);const g=new D,v=new D;vl.distanceSqToSegment(ns.start,ns.end,v,g),t.push({point:v,pointOnLine:g,distance:vl.origin.distanceTo(v),object:n,face:null,faceIndex:h,uv:null,uv2:null})}}}class tX extends ct{constructor(e=new HE,t=new QE({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)pO.fromBufferAttribute(t,o),mO.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+pO.distanceTo(mO);const s=new O_(r,2,1);return e.setAttribute("instanceDistanceStart",new Hs(s,1,0)),e.setAttribute("instanceDistanceEnd",new Hs(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;vl=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;mf=l.linewidth+s,Kb=a.attributes.instanceStart,eX=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),D2.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=mf*.5;else{const h=Math.max(r.near,D2.distanceToPoint(vl.origin));c=AO(r,h,l.resolution)}if(D2.radius+=c,vl.intersectsSphere(D2)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),R2.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=mf*.5;else{const h=Math.max(r.near,R2.distanceToPoint(vl.origin));u=AO(r,h,l.resolution)}R2.expandByScalar(u),vl.intersectsBox(R2)!==!1&&(i?Cye(this,t):Mye(this,r,t))}}class nX extends tX{constructor(e=new $j,t=new QE({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}let L2;const x4=()=>{if(L2)return L2;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const f=new Uint8Array(h.length);for(let m=0;m<h.length;++m){const A=h.charCodeAt(m);f[m]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let d=0;for(let m=0;m<h.length;++m)f[d++]=f[m]<60?i[f[m]]:(f[m]-60)*64+f[++m];return f.buffer.slice(0,d)}function l(h,f,d,m,A,y){const p=s.exports.sbrk,g=d+3&-4,v=p(g*m),E=p(A.length),S=new Uint8Array(s.exports.memory.buffer);S.set(A,E);const C=h(v,d,m,E,A.length);if(C===0&&y&&y(v,g,m),f.set(S.subarray(v,v+d*m)),p(v-p(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return L2={ready:o,supported:!0,decodeVertexBuffer(h,f,d,m,A){l(s.exports.meshopt_decodeVertexBuffer,h,f,d,m,s.exports[c[A]])},decodeIndexBuffer(h,f,d,m){l(s.exports.meshopt_decodeIndexBuffer,h,f,d,m)},decodeIndexSequence(h,f,d,m){l(s.exports.meshopt_decodeIndexSequence,h,f,d,m)},decodeGltfBuffer(h,f,d,m,A,y){l(s.exports[u[A]],h,f,d,m,s.exports[c[y]])}},L2};function bye(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const iX=w.createContext([]);function Tye({box:n,multiple:e,children:t,onChange:i,onChangePointerUp:r,border:s="1px solid #55aaff",backgroundColor:o="rgba(75, 160, 255, 0.1)",filter:a=c=>c,...l}){const[c,u]=w.useState(!1),{setEvents:h,camera:f,raycaster:d,gl:m,controls:A,size:y,get:p}=Se(),[g,v]=w.useState(!1),[E,S]=w.useReducer((T,{object:I,shift:F})=>I===void 0?[]:Array.isArray(I)?I:F?T.includes(I)?T.filter(R=>R!==I):[I,...T]:T[0]===I?[]:[I],[]);w.useEffect(()=>{c?i==null||i(E):r==null||r(E)},[E,c]);const C=w.useCallback(T=>{T.stopPropagation(),S({object:a([T.object])[0],shift:e&&T.shiftKey})},[]),M=w.useCallback(T=>!g&&S({}),[g]),b=w.useRef(null);return w.useEffect(()=>{if(!n||!e)return;const T=new Mve(f,b.current),I=document.createElement("div");I.style.pointerEvents="none",I.style.border=s,I.style.backgroundColor=o,I.style.position="fixed";const F=new Ee,R=new Ee,z=new Ee,L=p().events.enabled,H=A==null?void 0:A.enabled;let K=!1;function J(Q,j){const{offsetX:X,offsetY:se}=Q,{width:ve,height:de}=y;j.set(X/ve*2-1,-(se/de)*2+1)}function O(Q){var j;A&&(A.enabled=!1),h({enabled:!1}),u(K=!0),(j=m.domElement.parentElement)==null||j.appendChild(I),I.style.left=`${Q.clientX}px`,I.style.top=`${Q.clientY}px`,I.style.width="0px",I.style.height="0px",F.x=Q.clientX,F.y=Q.clientY}function W(Q){z.x=Math.max(F.x,Q.clientX),z.y=Math.max(F.y,Q.clientY),R.x=Math.min(F.x,Q.clientX),R.y=Math.min(F.y,Q.clientY),I.style.left=`${R.x}px`,I.style.top=`${R.y}px`,I.style.width=`${z.x-R.x}px`,I.style.height=`${z.y-R.y}px`}function V(){if(K){var Q;A&&(A.enabled=H),h({enabled:L}),u(K=!1),(Q=I.parentElement)==null||Q.removeChild(I)}}function U(Q){Q.shiftKey&&(O(Q),J(Q,T.startPoint))}let Y=[];function $(Q){if(K){W(Q),J(Q,T.endPoint);const j=T.select().sort(X=>X.uuid).filter(X=>X.isMesh);bye(j,Y)||(Y=j,S({object:a(j)}))}}function N(Q){K&&V()}return document.addEventListener("pointerdown",U,{passive:!0}),document.addEventListener("pointermove",$,{passive:!0,capture:!0}),document.addEventListener("pointerup",N,{passive:!0}),()=>{document.removeEventListener("pointerdown",U),document.removeEventListener("pointermove",$,!0),document.removeEventListener("pointerup",N)}},[y.width,y.height,d,f,A,m]),w.createElement("group",Ye({ref:b,onClick:C,onPointerOver:()=>v(!0),onPointerOut:()=>v(!1),onPointerMissed:M},l),w.createElement(iX.Provider,{value:E},t))}function Iye(){return w.useContext(iX)}const Bye=w.forwardRef(function({children:e,follow:t=!0,lockX:i=!1,lockY:r=!1,lockZ:s=!1,...o},a){const l=w.useRef(null),c=w.useRef(null),u=new St;return yt(({camera:h})=>{if(!t||!c.current)return;const f=c.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(u),h.getWorldQuaternion(l.current.quaternion).premultiply(u.invert()),i&&(c.current.rotation.x=f.x),r&&(c.current.rotation.y=f.y),s&&(c.current.rotation.z=f.z)}),w.useImperativeHandle(a,()=>c.current,[]),w.createElement("group",Ye({ref:c,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},o),w.createElement("group",{ref:l},e))}),Pye=w.forwardRef(({children:n,depth:e=-1,...t},i)=>{const r=w.useRef(null);return w.useImperativeHandle(i,()=>r.current,[]),yt(({camera:s})=>{r.current.quaternion.copy(s.quaternion),r.current.position.copy(s.position)}),w.createElement("group",Ye({ref:r},t),w.createElement("group",{"position-z":-e},n))}),Rye=new D,Dye=new D,Lye=new D,Fye=(n,e,t)=>{const i=t.width/2,r=t.height/2;e.updateMatrixWorld(!1);const s=n.project(e);return s.x=s.x*i+i,s.y=-(s.y*r)+r,s},Oye=(n,e,t,i=1)=>{const r=Rye.set(n.x/t.width*2-1,-(n.y/t.height)*2+1,i);return r.unproject(e),r},VE=(n,e,t,i)=>{const r=Fye(Lye.copy(n),t,i);let s=0;for(let o=0;o<2;++o){const a=Dye.copy(r).setComponent(o,r.getComponent(o)+e),l=Oye(a,t,i,a.z);s=Math.max(s,n.distanceTo(l))}return s},Uye=new D,zye=w.forwardRef(({scale:n=1,...e},t)=>{const i=w.useRef(null);return w.useImperativeHandle(t,()=>i.current,[]),yt(r=>{const s=i.current;if(!s)return;const o=VE(s.getWorldPosition(Uye),n,r.camera,r.size);s.scale.setScalar(o*n)}),w.createElement("object3D",Ye({ref:i},e))}),Va=w.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},c){var u,h;const f=Se(p=>p.size),d=w.useMemo(()=>o?new tX:new nX,[o]),[m]=w.useState(()=>new QE),A=(i==null||(u=i[0])==null?void 0:u.length)===4?4:3,y=w.useMemo(()=>{const p=o?new HE:new $j,g=e.map(v=>{const E=Array.isArray(v);return v instanceof D||v instanceof Yt?[v.x,v.y,v.z]:v instanceof Ee?[v.x,v.y,0]:E&&v.length===3?[v[0],v[1],v[2]]:E&&v.length===2?[v[0],v[1],0]:v});if(p.setPositions(g.flat()),i){t=16777215;const v=i.map(E=>E instanceof We?E.toArray():E);p.setColors(v.flat(),A)}return p},[e,o,i,A]);return w.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),w.useLayoutEffect(()=>{a?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[a,m]),w.useEffect(()=>()=>{y.dispose(),m.dispose()},[y]),w.createElement("primitive",Ye({object:d,ref:c},l),w.createElement("primitive",{object:y,attach:"geometry"}),w.createElement("primitive",Ye({object:m,attach:"material",color:t,vertexColors:!!i,resolution:[f.width,f.height],linewidth:(h=r??s)!==null&&h!==void 0?h:1,dashed:a,transparent:A===4},l)))}),kye=new D,Nye=w.forwardRef(function({start:e=[0,0,0],end:t=[0,0,0],mid:i,segments:r=20,...s},o){const a=w.useRef(null);w.useImperativeHandle(o,()=>a.current);const[l]=w.useState(()=>new K3(void 0,void 0,void 0)),c=w.useCallback((h,f,d,m=20)=>(h instanceof D?l.v0.copy(h):l.v0.set(...h),f instanceof D?l.v2.copy(f):l.v2.set(...f),d instanceof D?l.v1.copy(d):Array.isArray(d)?l.v1.set(...d):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(kye.set(0,l.v0.y-l.v2.y,0))),l.getPoints(m)),[]);w.useLayoutEffect(()=>{a.current.setPoints=(h,f,d)=>{const m=c(h,f,d);a.current.geometry&&a.current.geometry.setPositions(m.map(A=>A.toArray()).flat())}},[]);const u=w.useMemo(()=>c(e,t,i,r),[e,t,i,r]);return w.createElement(Va,Ye({ref:a,points:u},s))}),Gye=w.forwardRef(function({start:e,end:t,midA:i,midB:r,segments:s=20,...o},a){const l=w.useMemo(()=>{const c=e instanceof D?e:new D(...e),u=t instanceof D?t:new D(...t),h=i instanceof D?i:new D(...i),f=r instanceof D?r:new D(...r);return new a6(c,h,f,u).getPoints(s)},[e,t,i,r,s]);return w.createElement(Va,Ye({ref:a,points:l},o))}),Hye=w.forwardRef(function({points:e,closed:t=!1,curveType:i="centripetal",tension:r=.5,segments:s=20,vertexColors:o,...a},l){const c=w.useMemo(()=>{const f=e.map(d=>d instanceof D?d:new D(...d));return new Y3(f,t,i,r)},[e,t,i,r]),u=w.useMemo(()=>c.getPoints(s),[c,s]),h=w.useMemo(()=>{if(!o||o.length<2)return;if(o.length===s+1)return o;const f=o.map(A=>A instanceof We?A:new We(...A));t&&f.push(f[0].clone());const d=[f[0]],m=s/(f.length-1);for(let A=1;A<s;A++){const y=A%m/m,p=Math.floor(A/m);d.push(f[p].clone().lerp(f[p+1],y))}return d.push(f[f.length-1]),d},[o,s]);return w.createElement(Va,Ye({ref:l,points:u,vertexColors:h},a))}),Qye=w.forwardRef(({url:n,distance:e=1,loop:t=!0,autoplay:i,...r},s)=>{const o=w.useRef(null);w.useImperativeHandle(s,()=>o.current,[]);const a=Se(({camera:u})=>u),[l]=w.useState(()=>new OQ),c=hi(FQ,n);return w.useEffect(()=>{const u=o.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(t),i&&!u.isPlaying&&u.play())},[c,a,e,t]),w.useEffect(()=>{const u=o.current;return a.add(l),()=>{a.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),w.createElement("positionalAudio",Ye({ref:o,args:[l]},r))});function Vye(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var c=r.init;c===void 0&&(c=function(){});var u=r.getTransferables;if(u===void 0&&(u=null),!n[o])try{l=l.map(function(f){return f&&f.isWorkerModule&&(e(f,function(d){if(d instanceof Error)throw d}),f=n[f.id].value),f}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var h=null;typeof c=="function"?h=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:h,getTransferables:u},s(h)}catch(f){f&&f.noLog||console.error(f),s(f)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=n[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(h){return s(h instanceof Error?h:new Error(""+h))}):u(c)}catch(h){s(h)}function u(h){try{var f=n[a].getTransferables&&n[a].getTransferables(h);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),s(h,f)}catch(d){console.error(d),s(d)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function Wye(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var rX=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return rX=function(){return n},n},jye=0,Xye=0,_4=!1,Tg=Object.create(null),Ig=Object.create(null),Jb=Object.create(null);function qm(n){if((!n||typeof n.init!="function")&&!_4)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId;if(!rX())return Wye(n);r==null&&(r="#default");var s="workerModule"+ ++jye,o=n.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(_4=!0,c=qm({workerId:r,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+jx(c)+`
)}`}),_4=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=vO(r,"registerModule",l.workerModuleData);var h=function(){a=null,Ig[r].delete(h)};(Ig[r]||(Ig[r]=new Set)).add(h)}return a.then(function(f){var d=f.isCallable;if(d)return vO(r,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:jx(t),getTransferables:i&&jx(i)},l}function Yye(n){Ig[n]&&Ig[n].forEach(function(e){e()}),Tg[n]&&(Tg[n].terminate(),delete Tg[n])}function jx(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function qye(n){var e=Tg[n];if(!e){var t=jx(Vye);e=Tg[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=Jb[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Jb[s],o(r)}}return e}function vO(n,e,t){return new Promise(function(i,r){var s=++Xye;Jb[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},qye(n).postMessage({messageId:s,action:e,data:t})})}function sX(){var n=function(e){function t(W,V,U,Y,$,N,Q,j){var X=1-Q;j.x=X*X*W+2*X*Q*U+Q*Q*$,j.y=X*X*V+2*X*Q*Y+Q*Q*N}function i(W,V,U,Y,$,N,Q,j,X,se){var ve=1-X;se.x=ve*ve*ve*W+3*ve*ve*X*U+3*ve*X*X*$+X*X*X*Q,se.y=ve*ve*ve*V+3*ve*ve*X*Y+3*ve*X*X*N+X*X*X*j}function r(W,V){for(var U=/([MLQCZ])([^MLQCZ]*)/g,Y,$,N,Q,j;Y=U.exec(W);){var X=Y[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(se){return parseFloat(se)});switch(Y[1]){case"M":Q=$=X[0],j=N=X[1];break;case"L":(X[0]!==Q||X[1]!==j)&&V("L",Q,j,Q=X[0],j=X[1]);break;case"Q":{V("Q",Q,j,Q=X[2],j=X[3],X[0],X[1]);break}case"C":{V("C",Q,j,Q=X[4],j=X[5],X[0],X[1],X[2],X[3]);break}case"Z":(Q!==$||j!==N)&&V("L",Q,j,$,N);break}}}function s(W,V,U){U===void 0&&(U=16);var Y={x:0,y:0};r(W,function($,N,Q,j,X,se,ve,de,he){switch($){case"L":V(N,Q,j,X);break;case"Q":{for(var te=N,xe=Q,ce=1;ce<U;ce++)t(N,Q,se,ve,j,X,ce/(U-1),Y),V(te,xe,Y.x,Y.y),te=Y.x,xe=Y.y;break}case"C":{for(var me=N,ye=Q,Me=1;Me<U;Me++)i(N,Q,se,ve,de,he,j,X,Me/(U-1),Y),V(me,ye,Y.x,Y.y),me=Y.x,ye=Y.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(W,V){var U=W.getContext?W.getContext("webgl",c):W,Y=l.get(U);if(!Y){let ve=function(me){var ye=N[me];if(!ye&&(ye=N[me]=U.getExtension(me),!ye))throw new Error(me+" not supported");return ye},de=function(me,ye){var Me=U.createShader(ye);return U.shaderSource(Me,me),U.compileShader(Me),Me},he=function(me,ye,Me,oe){if(!Q[me]){var ne={},we={},be=U.createProgram();U.attachShader(be,de(ye,U.VERTEX_SHADER)),U.attachShader(be,de(Me,U.FRAGMENT_SHADER)),U.linkProgram(be),Q[me]={program:be,transaction:function(re){U.useProgram(be),re({setUniform:function(ge,Fe){for(var Ce=[],Le=arguments.length-2;Le-- >0;)Ce[Le]=arguments[Le+2];var Qe=we[Fe]||(we[Fe]=U.getUniformLocation(be,Fe));U["uniform"+ge].apply(U,[Qe].concat(Ce))},setAttribute:function(ge,Fe,Ce,Le,Qe){var He=ne[ge];He||(He=ne[ge]={buf:U.createBuffer(),loc:U.getAttribLocation(be,ge),data:null}),U.bindBuffer(U.ARRAY_BUFFER,He.buf),U.vertexAttribPointer(He.loc,Fe,U.FLOAT,!1,0,0),U.enableVertexAttribArray(He.loc),$?U.vertexAttribDivisor(He.loc,Le):ve("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(He.loc,Le),Qe!==He.data&&(U.bufferData(U.ARRAY_BUFFER,Qe,Ce),He.data=Qe)}})}}}Q[me].transaction(oe)},te=function(me,ye){X++;try{U.activeTexture(U.TEXTURE0+X);var Me=j[me];Me||(Me=j[me]=U.createTexture(),U.bindTexture(U.TEXTURE_2D,Me),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.NEAREST),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.NEAREST)),U.bindTexture(U.TEXTURE_2D,Me),ye(Me,X)}finally{X--}},xe=function(me,ye,Me){var oe=U.createFramebuffer();se.push(oe),U.bindFramebuffer(U.FRAMEBUFFER,oe),U.activeTexture(U.TEXTURE0+ye),U.bindTexture(U.TEXTURE_2D,me),U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,me,0);try{Me(oe)}finally{U.deleteFramebuffer(oe),U.bindFramebuffer(U.FRAMEBUFFER,se[--se.length-1]||null)}},ce=function(){N={},Q={},j={},X=-1,se.length=0};var $=typeof WebGL2RenderingContext<"u"&&U instanceof WebGL2RenderingContext,N={},Q={},j={},X=-1,se=[];U.canvas.addEventListener("webglcontextlost",function(me){ce(),me.preventDefault()},!1),l.set(U,Y={gl:U,isWebGL2:$,getExtension:ve,withProgram:he,withTexture:te,withTextureFramebuffer:xe,handleContextLoss:ce})}V(Y)}function h(W,V,U,Y,$,N,Q,j){Q===void 0&&(Q=15),j===void 0&&(j=null),u(W,function(X){var se=X.gl,ve=X.withProgram,de=X.withTexture;de("copy",function(he,te){se.texImage2D(se.TEXTURE_2D,0,se.RGBA,$,N,0,se.RGBA,se.UNSIGNED_BYTE,V),ve("copy",o,a,function(xe){var ce=xe.setUniform,me=xe.setAttribute;me("aUV",2,se.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ce("1i","image",te),se.bindFramebuffer(se.FRAMEBUFFER,j||null),se.disable(se.BLEND),se.colorMask(Q&8,Q&4,Q&2,Q&1),se.viewport(U,Y,$,N),se.scissor(U,Y,$,N),se.drawArrays(se.TRIANGLES,0,3)})})})}function f(W,V,U){var Y=W.width,$=W.height;u(W,function(N){var Q=N.gl,j=new Uint8Array(Y*$*4);Q.readPixels(0,0,Y,$,Q.RGBA,Q.UNSIGNED_BYTE,j),W.width=V,W.height=U,h(Q,j,0,0,Y,$)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:h,resizeWebGLCanvasWithoutClearing:f});function m(W,V,U,Y,$,N){N===void 0&&(N=1);var Q=new Uint8Array(W*V),j=Y[2]-Y[0],X=Y[3]-Y[1],se=[];s(U,function(me,ye,Me,oe){se.push({x1:me,y1:ye,x2:Me,y2:oe,minX:Math.min(me,Me),minY:Math.min(ye,oe),maxX:Math.max(me,Me),maxY:Math.max(ye,oe)})}),se.sort(function(me,ye){return me.maxX-ye.maxX});for(var ve=0;ve<W;ve++)for(var de=0;de<V;de++){var he=xe(Y[0]+j*(ve+.5)/W,Y[1]+X*(de+.5)/V),te=Math.pow(1-Math.abs(he)/$,N)/2;he<0&&(te=1-te),te=Math.max(0,Math.min(255,Math.round(te*255))),Q[de*W+ve]=te}return Q;function xe(me,ye){for(var Me=1/0,oe=1/0,ne=se.length;ne--;){var we=se[ne];if(we.maxX+oe<=me)break;if(me+oe>we.minX&&ye-oe<we.maxY&&ye+oe>we.minY){var be=p(me,ye,we.x1,we.y1,we.x2,we.y2);be<Me&&(Me=be,oe=Math.sqrt(Me))}}return ce(me,ye)&&(oe=-oe),oe}function ce(me,ye){for(var Me=0,oe=se.length;oe--;){var ne=se[oe];if(ne.maxX<=me)break;var we=ne.y1>ye!=ne.y2>ye&&me<(ne.x2-ne.x1)*(ye-ne.y1)/(ne.y2-ne.y1)+ne.x1;we&&(Me+=ne.y1<ne.y2?1:-1)}return Me!==0}}function A(W,V,U,Y,$,N,Q,j,X,se){N===void 0&&(N=1),j===void 0&&(j=0),X===void 0&&(X=0),se===void 0&&(se=0),y(W,V,U,Y,$,N,Q,null,j,X,se)}function y(W,V,U,Y,$,N,Q,j,X,se,ve){N===void 0&&(N=1),X===void 0&&(X=0),se===void 0&&(se=0),ve===void 0&&(ve=0);for(var de=m(W,V,U,Y,$,N),he=new Uint8Array(de.length*4),te=0;te<de.length;te++)he[te*4+ve]=de[te];h(Q,he,X,se,W,V,1<<3-ve,j)}function p(W,V,U,Y,$,N){var Q=$-U,j=N-Y,X=Q*Q+j*j,se=X?Math.max(0,Math.min(1,((W-U)*Q+(V-Y)*j)/X)):0,ve=W-(U+se*Q),de=V-(Y+se*j);return ve*ve+de*de}var g=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:A,generateIntoFramebuffer:y}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),M=null,b=!1,T={},I=new WeakMap;function F(W){if(!b&&!H(W))throw new Error("WebGL generation not supported")}function R(W,V,U,Y,$,N,Q){if(N===void 0&&(N=1),Q===void 0&&(Q=null),!Q&&(Q=M,!Q)){var j=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!j)throw new Error("OffscreenCanvas or DOM canvas not supported");Q=M=j.getContext("webgl",{depth:!1})}F(Q);var X=new Uint8Array(W*V*4);u(Q,function(he){var te=he.gl,xe=he.withTexture,ce=he.withTextureFramebuffer;xe("readable",function(me,ye){te.texImage2D(te.TEXTURE_2D,0,te.RGBA,W,V,0,te.RGBA,te.UNSIGNED_BYTE,null),ce(me,ye,function(Me){L(W,V,U,Y,$,N,te,Me,0,0,0),te.readPixels(0,0,W,V,te.RGBA,te.UNSIGNED_BYTE,X)})})});for(var se=new Uint8Array(W*V),ve=0,de=0;ve<X.length;ve+=4)se[de++]=X[ve];return se}function z(W,V,U,Y,$,N,Q,j,X,se){N===void 0&&(N=1),j===void 0&&(j=0),X===void 0&&(X=0),se===void 0&&(se=0),L(W,V,U,Y,$,N,Q,null,j,X,se)}function L(W,V,U,Y,$,N,Q,j,X,se,ve){N===void 0&&(N=1),X===void 0&&(X=0),se===void 0&&(se=0),ve===void 0&&(ve=0),F(Q);var de=[];s(U,function(he,te,xe,ce){de.push(he,te,xe,ce)}),de=new Float32Array(de),u(Q,function(he){var te=he.gl,xe=he.isWebGL2,ce=he.getExtension,me=he.withProgram,ye=he.withTexture,Me=he.withTextureFramebuffer,oe=he.handleContextLoss;if(ye("rawDistances",function(ne,we){(W!==ne._lastWidth||V!==ne._lastHeight)&&te.texImage2D(te.TEXTURE_2D,0,te.RGBA,ne._lastWidth=W,ne._lastHeight=V,0,te.RGBA,te.UNSIGNED_BYTE,null),me("main",v,E,function(be){var st=be.setAttribute,re=be.setUniform,Z=!xe&&ce("ANGLE_instanced_arrays"),ge=!xe&&ce("EXT_blend_minmax");st("aUV",2,te.STATIC_DRAW,0,C),st("aLineSegment",4,te.DYNAMIC_DRAW,1,de),re.apply(void 0,["4f","uGlyphBounds"].concat(Y)),re("1f","uMaxDistance",$),re("1f","uExponent",N),Me(ne,we,function(Fe){te.enable(te.BLEND),te.colorMask(!0,!0,!0,!0),te.viewport(0,0,W,V),te.scissor(0,0,W,V),te.blendFunc(te.ONE,te.ONE),te.blendEquationSeparate(te.FUNC_ADD,xe?te.MAX:ge.MAX_EXT),te.clear(te.COLOR_BUFFER_BIT),xe?te.drawArraysInstanced(te.TRIANGLES,0,3,de.length/4):Z.drawArraysInstancedANGLE(te.TRIANGLES,0,3,de.length/4)})}),me("post",o,S,function(be){be.setAttribute("aUV",2,te.STATIC_DRAW,0,C),be.setUniform("1i","tex",we),te.bindFramebuffer(te.FRAMEBUFFER,j),te.disable(te.BLEND),te.colorMask(ve===0,ve===1,ve===2,ve===3),te.viewport(X,se,W,V),te.scissor(X,se,W,V),te.drawArrays(te.TRIANGLES,0,3)})}),te.isContextLost())throw oe(),new Error("webgl context lost")})}function H(W){var V=!W||W===M?T:W.canvas||W,U=I.get(V);if(U===void 0){b=!0;var Y=null;try{var $=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],N=R(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,W);U=N&&$.length===N.length&&N.every(function(Q,j){return Q===$[j]}),U||(Y="bad trial run results",console.info($,N))}catch(Q){U=!1,Y=Q.message}Y&&console.warn("WebGL SDF generation not supported:",Y),b=!1,I.set(V,U)}return U}var K=Object.freeze({__proto__:null,generate:R,generateIntoCanvas:z,generateIntoFramebuffer:L,isSupported:H});function J(W,V,U,Y,$,N){$===void 0&&($=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),N===void 0&&(N=1);try{return R.apply(K,arguments)}catch(Q){return console.info("WebGL SDF generation failed, falling back to JS",Q),m.apply(g,arguments)}}function O(W,V,U,Y,$,N,Q,j,X,se){$===void 0&&($=Math.max(Y[2]-Y[0],Y[3]-Y[1])/2),N===void 0&&(N=1),j===void 0&&(j=0),X===void 0&&(X=0),se===void 0&&(se=0);try{return z.apply(K,arguments)}catch(ve){return console.info("WebGL SDF generation failed, falling back to JS",ve),A.apply(g,arguments)}}return e.forEachPathCommand=r,e.generate=J,e.generateIntoCanvas=O,e.javascript=g,e.pathToLineSegments=s,e.webgl=K,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function Kye(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(oe,ne){i[oe]=1<<ne+1,r[i[oe]]=oe}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function h(){if(!u){u=new Map;var oe=function(we){if(t.hasOwnProperty(we)){var be=0;t[we].split(",").forEach(function(st){var re=st.split("+"),Z=re[0],ge=re[1];Z=parseInt(Z,36),ge=ge?parseInt(ge,36):0,u.set(be+=Z,i[we]);for(var Fe=0;Fe<ge;Fe++)u.set(++be,i[we])})}};for(var ne in t)oe(ne)}}function f(oe){return h(),u.get(oe.codePointAt(0))||i.L}function d(oe){return r[f(oe)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function A(oe,ne){var we=36,be=0,st=new Map,re=ne&&new Map,Z;return oe.split(",").forEach(function ge(Fe){if(Fe.indexOf("+")!==-1)for(var Ce=+Fe;Ce--;)ge(Z);else{Z=Fe;var Le=Fe.split(">"),Qe=Le[0],He=Le[1];Qe=String.fromCodePoint(be+=parseInt(Qe,we)),He=String.fromCodePoint(be+=parseInt(He,we)),st.set(Qe,He),ne&&re.set(He,Qe)}}),{map:st,reverseMap:re}}var y,p,g;function v(){if(!y){var oe=A(m.pairs,!0),ne=oe.map,we=oe.reverseMap;y=ne,p=we,g=A(m.canonical,!1).map}}function E(oe){return v(),y.get(oe)||null}function S(oe){return v(),p.get(oe)||null}function C(oe){return v(),g.get(oe)||null}var M=i.L,b=i.R,T=i.EN,I=i.ES,F=i.ET,R=i.AN,z=i.CS,L=i.B,H=i.S,K=i.ON,J=i.BN,O=i.NSM,W=i.AL,V=i.LRO,U=i.RLO,Y=i.LRE,$=i.RLE,N=i.PDF,Q=i.LRI,j=i.RLI,X=i.FSI,se=i.PDI;function ve(oe,ne){for(var we=125,be=new Uint32Array(oe.length),st=0;st<oe.length;st++)be[st]=f(oe[st]);var re=new Map;function Z(wr,fs){var Vi=be[wr];be[wr]=fs,re.set(Vi,re.get(Vi)-1),Vi&a&&re.set(a,re.get(a)-1),re.set(fs,(re.get(fs)||0)+1),fs&a&&re.set(a,(re.get(a)||0)+1)}for(var ge=new Uint8Array(oe.length),Fe=new Map,Ce=[],Le=null,Qe=0;Qe<oe.length;Qe++)Le||Ce.push(Le={start:Qe,end:oe.length-1,level:ne==="rtl"?1:ne==="ltr"?0:Xf(Qe,!1)}),be[Qe]&L&&(Le.end=Qe,Le=null);for(var He=$|Y|U|V|s|se|N|L,De=function(wr){return wr+(wr&1?1:2)},at=function(wr){return wr+(wr&1?2:1)},tt=0;tt<Ce.length;tt++){Le=Ce[tt];var et=[{_level:Le.level,_override:0,_isolate:0}],le=void 0,Re=0,qe=0,it=0;re.clear();for(var Ae=Le.start;Ae<=Le.end;Ae++){var _e=be[Ae];if(le=et[et.length-1],re.set(_e,(re.get(_e)||0)+1),_e&a&&re.set(a,(re.get(a)||0)+1),_e&He)if(_e&($|Y)){ge[Ae]=le._level;var Ie=(_e===$?at:De)(le._level);Ie<=we&&!Re&&!qe?et.push({_level:Ie,_override:0,_isolate:0}):Re||qe++}else if(_e&(U|V)){ge[Ae]=le._level;var rt=(_e===U?at:De)(le._level);rt<=we&&!Re&&!qe?et.push({_level:rt,_override:_e&U?b:M,_isolate:0}):Re||qe++}else if(_e&s){_e&X&&(_e=Xf(Ae+1,!0)===1?j:Q),ge[Ae]=le._level,le._override&&Z(Ae,le._override);var nt=(_e===j?at:De)(le._level);nt<=we&&Re===0&&qe===0?(it++,et.push({_level:nt,_override:0,_isolate:1,_isolInitIndex:Ae})):Re++}else if(_e&se){if(Re>0)Re--;else if(it>0){for(qe=0;!et[et.length-1]._isolate;)et.pop();var pt=et[et.length-1]._isolInitIndex;pt!=null&&(Fe.set(pt,Ae),Fe.set(Ae,pt)),et.pop(),it--}le=et[et.length-1],ge[Ae]=le._level,le._override&&Z(Ae,le._override)}else _e&N?(Re===0&&(qe>0?qe--:!le._isolate&&et.length>1&&(et.pop(),le=et[et.length-1])),ge[Ae]=le._level):_e&L&&(ge[Ae]=Le.level);else ge[Ae]=le._level,le._override&&_e!==J&&Z(Ae,le._override)}for(var Pt=[],Qt=null,Tt=Le.start;Tt<=Le.end;Tt++){var Lt=be[Tt];if(!(Lt&l)){var bn=ge[Tt],Tn=Lt&s,oi=Lt===se;Qt&&bn===Qt._level?(Qt._end=Tt,Qt._endsWithIsolInit=Tn):Pt.push(Qt={_start:Tt,_end:Tt,_level:bn,_startsWithPDI:oi,_endsWithIsolInit:Tn})}}for(var xr=[],_r=0;_r<Pt.length;_r++){var Zi=Pt[_r];if(!Zi._startsWithPDI||Zi._startsWithPDI&&!Fe.has(Zi._start)){for(var lr=[Qt=Zi],yi=void 0;Qt&&Qt._endsWithIsolInit&&(yi=Fe.get(Qt._end))!=null;)for(var qt=_r+1;qt<Pt.length;qt++)if(Pt[qt]._start===yi){lr.push(Qt=Pt[qt]);break}for(var Li=[],Js=0;Js<lr.length;Js++)for(var ee=lr[Js],G=ee._start;G<=ee._end;G++)Li.push(G);for(var ie=ge[Li[0]],ue=Le.level,ae=Li[0]-1;ae>=0;ae--)if(!(be[ae]&l)){ue=ge[ae];break}var pe=Li[Li.length-1],Ue=ge[pe],ke=Le.level;if(!(be[pe]&s)){for(var je=pe+1;je<=Le.end;je++)if(!(be[je]&l)){ke=ge[je];break}}xr.push({_seqIndices:Li,_sosType:Math.max(ue,ie)%2?b:M,_eosType:Math.max(ke,Ue)%2?b:M})}}for(var Xe=0;Xe<xr.length;Xe++){var $e=xr[Xe],Be=$e._seqIndices,xt=$e._sosType,dt=$e._eosType,ht=ge[Be[0]]&1?b:M;if(re.get(O))for(var Bt=0;Bt<Be.length;Bt++){var Nt=Be[Bt];if(be[Nt]&O){for(var Rt=xt,_t=Bt-1;_t>=0;_t--)if(!(be[Be[_t]]&l)){Rt=be[Be[_t]];break}Z(Nt,Rt&(s|se)?K:Rt)}}if(re.get(T))for(var Ht=0;Ht<Be.length;Ht++){var bt=Be[Ht];if(be[bt]&T)for(var $t=Ht-1;$t>=-1;$t--){var On=$t===-1?xt:be[Be[$t]];if(On&o){On===W&&Z(bt,R);break}}}if(re.get(W))for(var Kt=0;Kt<Be.length;Kt++){var Un=Be[Kt];be[Un]&W&&Z(Un,b)}if(re.get(I)||re.get(z))for(var yn=1;yn<Be.length-1;yn++){var kn=Be[yn];if(be[kn]&(I|z)){for(var Jn=0,en=0,ti=yn-1;ti>=0&&(Jn=be[Be[ti]],!!(Jn&l));ti--);for(var Pn=yn+1;Pn<Be.length&&(en=be[Be[Pn]],!!(en&l));Pn++);Jn===en&&(be[kn]===I?Jn===T:Jn&(T|R))&&Z(kn,Jn)}}if(re.get(T))for(var sn=0;sn<Be.length;sn++){var ai=Be[sn];if(be[ai]&T){for(var Bs=sn-1;Bs>=0&&be[Be[Bs]]&(F|l);Bs--)Z(Be[Bs],T);for(sn++;sn<Be.length&&be[Be[sn]]&(F|l|T);sn++)be[Be[sn]]!==T&&Z(Be[sn],T)}}if(re.get(F)||re.get(I)||re.get(z))for(var Qi=0;Qi<Be.length;Qi++){var Zs=Be[Qi];if(be[Zs]&(F|I|z)){Z(Zs,K);for(var Bl=Qi-1;Bl>=0&&be[Be[Bl]]&l;Bl--)Z(Be[Bl],K);for(var Pl=Qi+1;Pl<Be.length&&be[Be[Pl]]&l;Pl++)Z(Be[Pl],K)}}if(re.get(T))for(var Rl=0,oh=xt;Rl<Be.length;Rl++){var uv=Be[Rl],Jm=be[uv];Jm&T?oh===M&&Z(uv,M):Jm&o&&(oh=Jm)}if(re.get(a)){var Dl=b|T|R,Vf=Dl|M,qa=[];{for(var Rc=[],Ka=0;Ka<Be.length;Ka++)if(be[Be[Ka]]&a){var xn=oe[Be[Ka]],Zm=void 0;if(E(xn)!==null)if(Rc.length<63)Rc.push({char:xn,seqIndex:Ka});else break;else if((Zm=S(xn))!==null)for(var Ll=Rc.length-1;Ll>=0;Ll--){var Wf=Rc[Ll].char;if(Wf===Zm||Wf===S(C(xn))||E(C(Wf))===xn){qa.push([Rc[Ll].seqIndex,Ka]),Rc.length=Ll;break}}}qa.sort(function(wr,fs){return wr[0]-fs[0]})}for(var $m=0;$m<qa.length;$m++){for(var hv=qa[$m],Ci=hv[0],ah=hv[1],fv=!1,cs=0,e0=Ci+1;e0<ah;e0++){var lh=Be[e0];if(be[lh]&Vf){fv=!0;var $s=be[lh]&Dl?b:M;if($s===ht){cs=$s;break}}}if(fv&&!cs){cs=xt;for(var t0=Ci-1;t0>=0;t0--){var dv=Be[t0];if(be[dv]&Vf){var eo=be[dv]&Dl?b:M;eo!==ht?cs=eo:cs=ht;break}}}if(cs){if(be[Be[Ci]]=be[Be[ah]]=cs,cs!==ht){for(var us=Ci+1;us<Be.length;us++)if(!(be[Be[us]]&l)){f(oe[Be[us]])&O&&(be[Be[us]]=cs);break}}if(cs!==ht){for(var Ja=ah+1;Ja<Be.length;Ja++)if(!(be[Be[Ja]]&l)){f(oe[Be[Ja]])&O&&(be[Be[Ja]]=cs);break}}}}for(var So=0;So<Be.length;So++)if(be[Be[So]]&a){for(var n0=So,i0=So,Ps=xt,ch=So-1;ch>=0;ch--)if(be[Be[ch]]&l)n0=ch;else{Ps=be[Be[ch]]&Dl?b:M;break}for(var uh=dt,hh=So+1;hh<Be.length;hh++)if(be[Be[hh]]&(a|l))i0=hh;else{uh=be[Be[hh]]&Dl?b:M;break}for(var hs=n0;hs<=i0;hs++)be[Be[hs]]=Ps===uh?Ps:ht;So=i0}}}for(var Er=Le.start;Er<=Le.end;Er++){var jf=ge[Er],da=be[Er];if(jf&1?da&(M|T|R)&&ge[Er]++:da&b?ge[Er]++:da&(R|T)&&(ge[Er]+=2),da&l&&(ge[Er]=Er===0?Le.level:ge[Er-1]),Er===Le.end||f(oe[Er])&(H|L))for(var Dc=Er;Dc>=0&&f(oe[Dc])&c;Dc--)ge[Dc]=Le.level}}return{levels:ge,paragraphs:Ce};function Xf(wr,fs){for(var Vi=wr;Vi<oe.length;Vi++){var Wi=be[Vi];if(Wi&(b|W))return 1;if(Wi&(L|M)||fs&&Wi===se)return 0;if(Wi&s){var to=pv(Vi);Vi=to===-1?oe.length:to}}return 0}function pv(wr){for(var fs=1,Vi=wr+1;Vi<oe.length;Vi++){var Wi=be[Vi];if(Wi&L)break;if(Wi&se){if(--fs===0)return Vi}else Wi&s&&fs++}return-1}}var de="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",he;function te(){if(!he){var oe=A(de,!0),ne=oe.map,we=oe.reverseMap;we.forEach(function(be,st){ne.set(st,be)}),he=ne}}function xe(oe){return te(),he.get(oe)||null}function ce(oe,ne,we,be){var st=oe.length;we=Math.max(0,we==null?0:+we),be=Math.min(st-1,be==null?st-1:+be);for(var re=new Map,Z=we;Z<=be;Z++)if(ne[Z]&1){var ge=xe(oe[Z]);ge!==null&&re.set(Z,ge)}return re}function me(oe,ne,we,be){var st=oe.length;we=Math.max(0,we==null?0:+we),be=Math.min(st-1,be==null?st-1:+be);var re=[];return ne.paragraphs.forEach(function(Z){var ge=Math.max(we,Z.start),Fe=Math.min(be,Z.end);if(ge<Fe){for(var Ce=ne.levels.slice(ge,Fe+1),Le=Fe;Le>=ge&&f(oe[Le])&c;Le--)Ce[Le]=Z.level;for(var Qe=Z.level,He=1/0,De=0;De<Ce.length;De++){var at=Ce[De];at>Qe&&(Qe=at),at<He&&(He=at|1)}for(var tt=Qe;tt>=He;tt--)for(var et=0;et<Ce.length;et++)if(Ce[et]>=tt){for(var le=et;et+1<Ce.length&&Ce[et+1]>=tt;)et++;et>le&&re.push([le+ge,et+ge])}}}),re}function ye(oe,ne,we,be){var st=Me(oe,ne,we,be),re=[].concat(oe);return st.forEach(function(Z,ge){re[ge]=(ne.levels[Z]&1?xe(oe[Z]):null)||oe[Z]}),re.join("")}function Me(oe,ne,we,be){for(var st=me(oe,ne,we,be),re=[],Z=0;Z<oe.length;Z++)re[Z]=Z;return st.forEach(function(ge){for(var Fe=ge[0],Ce=ge[1],Le=re.slice(Fe,Ce+1),Qe=Le.length;Qe--;)re[Ce-Qe]=Le[Qe]}),re}return e.closingToOpeningBracket=S,e.getBidiCharType=f,e.getBidiCharTypeName=d,e.getCanonicalBracket=C,e.getEmbeddingLevels=ve,e.getMirroredCharacter=xe,e.getMirroredCharactersMap=ce,e.getReorderSegments=me,e.getReorderedIndices=Me,e.getReorderedString=ye,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const oX=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Zb(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=Xt[r];return s?Zb(s):i}return n.replace(e,t)}const Gr=[];for(let n=0;n<256;n++)Gr[n]=(n<16?"0":"")+n.toString(16);function Jye(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Gr[n&255]+Gr[n>>8&255]+Gr[n>>16&255]+Gr[n>>24&255]+"-"+Gr[e&255]+Gr[e>>8&255]+"-"+Gr[e>>16&15|64]+Gr[e>>24&255]+"-"+Gr[t&63|128]+Gr[t>>8&255]+"-"+Gr[t>>16&255]+Gr[t>>24&255]+Gr[i&255]+Gr[i>>8&255]+Gr[i>>16&255]+Gr[i>>24&255]).toUpperCase()}const Uh=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Zye=Date.now(),yO=new WeakMap,xO=new Map;let $ye=1e10;function $b(n,e){const t=i2e(e);let i=yO.get(n);if(i||yO.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(c,u){n.onBeforeCompile.call(this,c,u);const h=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let f=xO[h];if(!f){const d=e2e(this,c,e,t);f=xO[h]=d}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,Uh(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-Zye}}),this[r]&&this[r](c)},o=function(){return a(e.chained?n:n.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:n}),Object.defineProperty(u,"id",{value:$ye++}),u.uuid=Jye(),u.uniforms=Uh({},c.uniforms,e.uniforms),u.defines=Uh({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=Uh({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[r]=c}},copy:{writable:!0,configurable:!0,value:function(c){return n.copy.call(this,c),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Uh(this.extensions,c.extensions),Uh(this.defines,c.defines),Uh(this.uniforms,ca.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new n.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=$b(n.isDerivedMaterial?n.getDepthMaterial():new UA({depthPacking:z3}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=$b(n.isDerivedMaterial?n.getDistanceMaterial():new Q3,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function e2e(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:h,fragmentColorTransform:f,customRewriter:d,timeUniform:m}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",h=h||"",(l||d)&&(e=Zb(e)),(f||d)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=Zb(t)),d){let A=d({vertexShader:e,fragmentShader:t});e=A.vertexShader,t=A.fragmentShader}if(f){let A=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(A.push(y),"")),h=`${f}
${A.join(`
`)}
${h}`}if(m){const A=`
uniform float ${m};
`;s=A+s,c=A+c}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(A,y,p,g)=>/\battribute\s+vec[23]\s+$/.test(g.substr(0,p))?y:`troika_${y}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=_O(e,r,s,o,a),t=_O(t,r,c,u,h),{vertexShader:e,fragmentShader:t}}function _O(n,e,t,i,r){return(i||r||t)&&(n=n.replace(oX,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function t2e(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let n2e=0;const EO=new Map;function i2e(n){const e=JSON.stringify(n,t2e);let t=EO.get(e);return t==null&&EO.set(e,t=++n2e),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function r2e(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var h=s.readUint(o,a);a+=4,c.push(e._readFont(o,h))}return c}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:r,_offset:a},h={},f=0;f<l;f++){var d=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var m=o.readUint(r,s);s+=4;var A=o.readUint(r,s);s+=4,h[d]={offset:m,length:A}}for(f=0;f<c.length;f++){var y=c[f];h[y]&&(u[y.trim()]=e[y.trim()].parse(r,h[y].offset,h[y].length,u))}return u},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),c=o+12,u=0;u<l;u++){var h=a.readASCII(r,c,4);c+=4,a.readUint(r,c),c+=4;var f=a.readUint(r,c);if(c+=4,a.readUint(r,c),c+=4,h==s)return f}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var c=r[s++]<<8|r[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var c=e._bin,u={},h=s;c.readFixed(r,s),s+=4;var f=c.readUshort(r,s);s+=2;var d=c.readUshort(r,s);s+=2;var m=c.readUshort(r,s);return s+=2,u.scriptList=e._lctf.readScriptList(r,h+f),u.featureList=e._lctf.readFeatureList(r,h+d),u.lookupList=e._lctf.readLookupList(r,h+m,l),u},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var f=a.readUshort(r,s);s+=2;var d=e._lctf.readLookupTable(r,l+f,o);c.push(d)}return c},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(r,s),s+=2,c.flag=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var h=c.ltype,f=0;f<u;f++){var d=a.readUshort(r,s);s+=2;var m=o(r,h,l+d,c);c.tabs.push(m)}return c},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var c=o.readUshort(r,s);s+=2;var u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++)a.push(c+h),a.push(c+h),a.push(o.readUshort(r,s)),s+=2}if(l==2){var f=o.readUshort(r,s);for(s+=2,h=0;h<f;h++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readASCII(r,s,4);s+=4;var f=o.readUshort(r,s);s+=2;var d=e._lctf.readFeatureTable(r,a+f);d.tag=h.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(r,s);s+=2,l.tab=[];for(var h=0;h<u;h++)l.tab.push(o.readUshort(r,s+2*h));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readASCII(r,s,4);s+=4;var f=o.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readScriptTable(r,a+f)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},c=o.readUshort(r,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(r,a+c));var u=o.readUshort(r,s);s+=2;for(var h=0;h<u;h++){var f=o.readASCII(r,s,4);s+=4;var d=o.readUshort(r,s);s+=2,l[f.trim()]=e._lctf.readLangSysTable(r,a+d)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(r,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var h=[];s=e.CFF.readIndex(r,s,h);var f=[];for(u=0;u<h.length-1;u++)f.push(e.CFF.readDict(r,s+h[u],s+h[u+1]));s+=h[h.length-1];var d=f[0],m=[];s=e.CFF.readIndex(r,s,m);var A=[];for(u=0;u<m.length-1;u++)A.push(a.readASCII(r,s+m[u],m[u+1]-m[u]));if(s+=m[m.length-1],e.CFF.readSubrs(r,s,d),d.CharStrings){s=d.CharStrings,m=[],s=e.CFF.readIndex(r,s,m);var y=[];for(u=0;u<m.length-1;u++)y.push(a.readBytes(r,s+m[u],m[u+1]-m[u]));d.CharStrings=y}if(d.ROS){s=d.FDArray;var p=[];for(s=e.CFF.readIndex(r,s,p),d.FDArray=[],u=0;u<p.length-1;u++){var g=e.CFF.readDict(r,s+p[u],s+p[u+1]);e.CFF._readFDict(r,g,A),d.FDArray.push(g)}s+=p[p.length-1],s=d.FDSelect,d.FDSelect=[];var v=r[s];if(s++,v!=3)throw v;var E=a.readUshort(r,s);for(s+=2,u=0;u<E+1;u++)d.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,A),d},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var h=0;h<l.length-1;h++)o.Subrs.push(a.readBytes(r,s+l[h],l[h+1]-l[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=r[s];s++;for(var u=0;u<c;u++)a.push(r[s+u]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],c=r[s];if(s++,c==0)for(var u=0;u<o;u++){var h=a.readUshort(r,s);s+=2,l.push(h)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){h=a.readUshort(r,s),s+=2;var f=0;for(c==1?(f=r[s],s++):(f=a.readUshort(r,s),s+=2),u=0;u<=f;u++)l.push(h),h++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,c=r[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(r[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(r,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(r,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],c=r[s+1];r[s+2],r[s+3],r[s+4];var u=1,h=null,f=null;l<=20&&(h=l,u=1),l==12&&(h=100*l+c,u=2),21<=l&&l<=27&&(h=l,u=1),l==28&&(f=a.readShort(r,s+1),u=3),29<=l&&l<=31&&(h=l,u=1),32<=l&&l<=246&&(f=l-139,u=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,u=2),l==255&&(f=a.readInt(r,s+1)/65535,u=5),o.val=f??"o"+h,o.size=u},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,d=null,m=null;u<=20&&(d=u,f=1),u==12&&(d=100*u+h,f=2),u!=19&&u!=20||(d=u,f=2),21<=u&&u<=27&&(d=u,f=1),u==28&&(m=l.readShort(r,s+1),f=3),29<=u&&u<=31&&(d=u,f=1),32<=u&&u<=246&&(m=u-139,f=1),247<=u&&u<=250&&(m=256*(u-247)+h+108,f=2),251<=u&&u<=254&&(m=256*-(u-251)-h-108,f=2),u==255&&(m=l.readInt(r,s+1)/65535,f=5),c.push(m??"o"+d),s+=f}return c},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,d=null,m=null;if(u==28&&(m=a.readShort(r,s+1),f=3),u==29&&(m=a.readInt(r,s+1),f=5),32<=u&&u<=246&&(m=u-139,f=1),247<=u&&u<=250&&(m=256*(u-247)+h+108,f=2),251<=u&&u<=254&&(m=256*-(u-251)-h-108,f=2),u==255)throw m=a.readInt(r,s+1)/65535,f=5,"unknown number";if(u==30){var A=[];for(f=1;;){var y=r[s+f];f++;var p=y>>4,g=15&y;if(p!=15&&A.push(p),g!=15&&A.push(g),g==15)break}for(var v="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<A.length;S++)v+=E[A[S]];m=parseFloat(v)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],f=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],f=2)),d!=null?(l[d]=c.length==1?c[0]:c,c=[]):c.push(m),s+=f}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;var u=[];l.tables=[];for(var h=0;h<c;h++){var f=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;var m=a.readUint(r,s);s+=4;var A="p"+f+"e"+d,y=u.indexOf(m);if(y==-1){var p;y=l.tables.length,u.push(m);var g=a.readUshort(r,m);g==0?p=e.cmap.parse0(r,m):g==4?p=e.cmap.parse4(r,m):g==6?p=e.cmap.parse6(r,m):g==12?p=e.cmap.parse12(r,m):console.debug("unknown format: "+g,f,d,m),l.tables.push(p)}if(l[A]!=null)throw"multiple tables for one platform+encoding";l[A]=y}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(r[s+c]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var c=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2;var h=u/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,h),s+=2*h,s+=2,l.startCount=o.readUshorts(r,s,h),s+=2*h,l.idDelta=[];for(var f=0;f<h;f++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,h),s+=2*h,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,h=o.readUint(r,u+0),f=o.readUint(r,u+4),d=o.readUint(r,u+8);a.groups.push([h,f,d])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var h=o.readUshort(a,l);if(l+=2,a.length-l<h)return null;c.instructions=o.readBytes(a,l,h),l+=h;var f=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<f;u++){var d=a[l];if(l++,c.flags.push(d),(8&d)!=0){var m=a[l];l++;for(var A=0;A<m;A++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<f;u++){var y=(2&c.flags[u])!=0,p=(16&c.flags[u])!=0;y?(c.xs.push(p?a[l]:-a[l]),l++):p?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<f;u++)y=(4&c.flags[u])!=0,p=(32&c.flags[u])!=0,y?(c.ys.push(p?a[l]:-a[l]),l++):p?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var g=0,v=0;for(u=0;u<f;u++)g+=c.xs[u],v+=c.ys[u],c.xs[u]=g,c.ys[u]=v}else{var E;c.parts=[];do{E=o.readUshort(a,l),l+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(S),S.glyphIndex=o.readUshort(a,l),l+=2,1&E){var C=o.readShort(a,l);l+=2;var M=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,M=o.readInt8(a,l),l++;2&E?(S.m.tx=C,S.m.ty=M):(S.p1=C,S.p2=M),8&E?(S.m.a=S.m.d=o.readF2dot14(a,l),l+=2):64&E?(S.m.a=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2):128&E&&(S.m.a=o.readF2dot14(a,l),l+=2,S.m.b=o.readF2dot14(a,l),l+=2,S.m.c=o.readF2dot14(a,l),l+=2,S.m.d=o.readF2dot14(a,l),l+=2)}while(32&E);if(256&E){var b=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<b;u++)c.instr.push(a[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(r,s,o,a){var l=s;s+=4;var c=e._bin.readUshort(r,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(r,l+c)}},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var h=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,h+c)}if(s==1&&u.fmt==1){var f=l.readUshort(r,o);o+=2,f!=0&&(u.pos=e.GPOS.readValueRecord(r,o,f))}else if(s==2&&u.fmt>=1&&u.fmt<=2){f=l.readUshort(r,o),o+=2;var d=l.readUshort(r,o);o+=2;var m=e._lctf.numOfOnes(f),A=e._lctf.numOfOnes(d);if(u.fmt==1){u.pairsets=[];var y=l.readUshort(r,o);o+=2;for(var p=0;p<y;p++){var g=c+l.readUshort(r,o);o+=2;var v=l.readUshort(r,g);g+=2;for(var E=[],S=0;S<v;S++){var C=l.readUshort(r,g);g+=2,f!=0&&(R=e.GPOS.readValueRecord(r,g,f),g+=2*m),d!=0&&(z=e.GPOS.readValueRecord(r,g,d),g+=2*A),E.push({gid2:C,val1:R,val2:z})}u.pairsets.push(E)}}if(u.fmt==2){var M=l.readUshort(r,o);o+=2;var b=l.readUshort(r,o);o+=2;var T=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);for(o+=2,u.classDef1=e._lctf.readClassDef(r,c+M),u.classDef2=e._lctf.readClassDef(r,c+b),u.matrix=[],p=0;p<T;p++){var F=[];for(S=0;S<I;S++){var R=null,z=null;f!=0&&(R=e.GPOS.readValueRecord(r,o,f),o+=2*m),d!=0&&(z=e.GPOS.readValueRecord(r,o,d),o+=2*A),F.push({val1:R,val2:z})}u.matrix.push(F)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,o)+c),u.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,o+2)+c),u.markClassCount=l.readUshort(r,o+4),u.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,o+6)+c),u.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,o+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var L=l.readUshort(r,o);o+=2;var H=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=L;else if(a.ltype!=L)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,c+H)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(r,s,o){var a=e._bin,l=[],c=s,u=a.readUshort(r,s);s+=2;for(var h=0;h<u;h++){for(var f=[],d=0;d<o;d++)f.push(e.GPOS.readAnchorRecord(r,c+a.readUshort(r,s))),s+=2;l.push(f)}return l},e.GPOS.readMarkArray=function(r,s){var o=e._bin,a=[],l=s,c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=e.GPOS.readAnchorRecord(r,o.readUshort(r,s+2)+l);h.markClass=o.readUshort(r,s),a.push(h),s+=4}return a},e.GPOS.readAnchorRecord=function(r,s){var o=e._bin,a={};return a.fmt=o.readUshort(r,s),a.x=o.readShort(r,s+2),a.y=o.readShort(r,s+4),a},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var h=l.readUshort(r,o);o+=2,u.coverage=e._lctf.readCoverage(r,c+h)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(r,o),o+=2;else if(u.fmt==2){var f=l.readUshort(r,o);o+=2,u.newg=l.readUshorts(r,o,f),o+=2*u.newg.length}}else if(s==2&&u.fmt==1){f=l.readUshort(r,o),o+=2,u.seqs=[];for(var d=0;d<f;d++){var m=l.readUshort(r,o)+c;o+=2;var A=l.readUshort(r,m);u.seqs.push(l.readUshorts(r,m+2,A))}}else if(s==4)for(u.vals=[],f=l.readUshort(r,o),o+=2,d=0;d<f;d++){var y=l.readUshort(r,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(r,c+y))}else if(s==5&&u.fmt==2){if(u.fmt==2){var p=l.readUshort(r,o);o+=2,u.cDef=e._lctf.readClassDef(r,c+p),u.scset=[];var g=l.readUshort(r,o);for(o+=2,d=0;d<g;d++){var v=l.readUshort(r,o);o+=2,u.scset.push(v==0?null:e.GSUB.readSubClassSet(r,c+v))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){f=l.readUshort(r,o),o+=2;for(var E=[],S=0;S<f;S++)E.push(e._lctf.readCoverage(r,c+l.readUshort(r,o+2*S)));o+=2*f,d==0&&(u.backCvg=E),d==1&&(u.inptCvg=E),d==2&&(u.ahedCvg=E)}f=l.readUshort(r,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(r,o,f)}}else{if(s==7&&u.fmt==1){var C=l.readUshort(r,o);o+=2;var M=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=C;else if(a.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,c+M)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],c=o(r,s);s+=2;for(var u=0;u<c;u++){var h=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+h))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),c=o(r,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,c),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+h))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(r,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(r,s,u),s+=2*a[l[c]].length}return u=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],c=o.readUshort(r,s);s+=2;for(var u=0;u<c;u++){var h=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+h))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,h=0,f=0;f<a.maxp.numGlyphs;f++)f<a.hhea.numberOfHMetrics&&(u=l.readUshort(r,s),s+=2,h=l.readShort(r,s),s+=2),c.aWidth.push(u),c.lsBearing.push(h);return c},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,c=l.readUshort(r,s);if(s+=2,c==1)return e.kern.parseV1(r,s-2,o,a);var u=l.readUshort(r,s);s+=2;for(var h={glyph1:[],rval:[]},f=0;f<u;f++){s+=2,o=l.readUshort(r,s),s+=2;var d=l.readUshort(r,s);s+=2;var m=d>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(r,s,h)}return h},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var c=l.readUint(r,s);s+=4;for(var u={glyph1:[],rval:[]},h=0;h<c;h++){l.readUint(r,s),s+=4;var f=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var d=f>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(r,s,u)}return u},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var u=0;u<c;u++){var h=a.readUshort(r,s);s+=2;var f=a.readUshort(r,s);s+=2;var d=a.readShort(r,s);s+=2,h!=l&&(o.glyph1.push(h),o.rval.push({glyph2:[],vals:[]}));var m=o.rval[o.rval.length-1];m.glyph2.push(f),m.vals.push(d),l=h}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,h=a.maxp.numGlyphs+1;if(u==0)for(var f=0;f<h;f++)c.push(l.readUshort(r,s+(f<<1))<<1);if(u==1)for(f=0;f<h;f++)c.push(l.readUint(r,s+(f<<2)));return c},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},c=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var u,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=s+=2,d=0;d<c;d++){var m=a.readUshort(r,s);s+=2;var A=a.readUshort(r,s);s+=2;var y=a.readUshort(r,s);s+=2;var p=a.readUshort(r,s);s+=2;var g=a.readUshort(r,s);s+=2;var v=a.readUshort(r,s);s+=2;var E,S=h[p],C=f+12*c+v;if(m==0)E=a.readUnicode(r,C,g/2);else if(m==3&&A==0)E=a.readUnicode(r,C,g/2);else if(A==0)E=a.readASCII(r,C,g);else if(A==1)E=a.readUnicode(r,C,g/2);else if(A==3)E=a.readUnicode(r,C,g/2);else{if(m!=1)throw"unknown encoding "+A+", platformID: "+m;E=a.readASCII(r,C,g),console.debug("reading unknown MAC encoding "+A+" as ASCII")}var M="p"+m+","+y.toString(16);l[M]==null&&(l[M]={}),l[M][S!==void 0?S:p]=E,l[M]._lang=y}for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==1033)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==0)return l[b];for(var b in l)if(l[b].postScriptName!=null&&l[b]._lang==3084)return l[b];for(var b in l)if(l[b].postScriptName!=null)return l[b];for(var b in l){u=b;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var h=l.groups[u];if(h[0]<=s&&s<=h[1])return h[2]+(s-h[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},c=r.CFF,u=r.CFF.Private;if(c.ROS){for(var h=0;c.FDSelect[h+2]<=s;)h+=2;u=c.FDArray[c.FDSelect[h+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,c,u,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,h=c==l?a:c+1,f=1&r.flags[c],d=1&r.flags[u],m=1&r.flags[h],A=r.xs[c],y=r.ys[c];if(c==a)if(f){if(!d){e.U.P.moveTo(s,A,y);continue}e.U.P.moveTo(s,r.xs[u],r.ys[u])}else d?e.U.P.moveTo(s,r.xs[u],r.ys[u]):e.U.P.moveTo(s,(r.xs[u]+A)/2,(r.ys[u]+y)/2);f?d&&e.U.P.lineTo(s,A,y):m?e.U.P.qcurveTo(s,A,y,r.xs[h],r.ys[h]):e.U.P.qcurveTo(s,A,y,(A+r.xs[h])/2,(y+r.ys[h])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},c=r.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,h=0;h<l.crds.length;h+=2){var f=l.crds[h],d=l.crds[h+1];o.crds.push(f*u.a+d*u.b+u.tx),o.crds.push(f*u.c+d*u.d+u.ty)}for(h=0;h<l.cmds.length;h++)o.cmds.push(l.cmds[h])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,h=o.tabs[c];if(!h.coverage||(u=e._lctf.coverageIndex(h.coverage,r[s]))!=-1){if(o.ltype==1)r[s],h.fmt==1?r[s]=r[s]+h.delta:r[s]=h.newg[u];else if(o.ltype==4)for(var f=h.vals[u],d=0;d<f.length;d++){var m=f[d],A=m.chain.length;if(!(A>l)){for(var y=!0,p=0,g=0;g<A;g++){for(;r[s+p+(1+g)]==-1;)p++;m.chain[g]!=r[s+p+(1+g)]&&(y=!1)}if(y){for(r[s]=m.nglyph,g=0;g<A+p;g++)r[s+g+1]=-1;break}}}else if(o.ltype==5&&h.fmt==2)for(var v=e._lctf.getInterval(h.cDef,r[s]),E=h.cDef[v+2],S=h.scset[E],C=0;C<S.length;C++){var M=S[C],b=M.input;if(!(b.length>l)){for(y=!0,g=0;g<b.length;g++){var T=e._lctf.getInterval(h.cDef,r[s+1+g]);if(v==-1&&h.cDef[T+2]!=b[g]){y=!1;break}}if(y){var I=M.substLookupRecords;for(d=0;d<I.length;d+=2)I[d],I[d+1]}}}else if(o.ltype==6&&h.fmt==3){if(!e.U._glsCovered(r,h.backCvg,s-h.backCvg.length)||!e.U._glsCovered(r,h.inptCvg,s)||!e.U._glsCovered(r,h.ahedCvg,s+h.inptCvg.length))continue;var F=h.lookupRec;for(C=0;C<F.length;C+=2){v=F[C];var R=a[F[C+1]];e.U._applySubs(r,s+v,R,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var h=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,f=e.U.glyphToPath(r,u),d=0;d<f.crds.length;d+=2)a.crds.push(f.crds[d]+l),a.crds.push(f.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<f.cmds.length;d++)a.cmds.push(f.cmds[d]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(r,u,h))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,c,u){r.cmds.push("C"),r.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var c=s.stack,u=s.nStems,h=s.haveWidth,f=s.width,d=s.open,m=0,A=s.x,y=s.y,p=0,g=0,v=0,E=0,S=0,C=0,M=0,b=0,T=0,I=0,F={val:0,size:0};m<r.length;){e.CFF.getCharString(r,m,F);var R=F.val;if(m+=F.size,R=="o1"||R=="o18")c.length%2!=0&&!h&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(R=="o3"||R=="o23")c.length%2!=0&&!h&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0;else if(R=="o4")c.length>1&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),d&&e.U.P.closePath(l),y+=c.pop(),e.U.P.moveTo(l,A,y),d=!0;else if(R=="o5")for(;c.length>0;)A+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,A,y);else if(R=="o6"||R=="o7")for(var z=c.length,L=R=="o6",H=0;H<z;H++){var K=c.shift();L?A+=K:y+=K,L=!L,e.U.P.lineTo(l,A,y)}else if(R=="o8"||R=="o24"){z=c.length;for(var J=0;J+6<=z;)p=A+c.shift(),g=y+c.shift(),v=p+c.shift(),E=g+c.shift(),A=v+c.shift(),y=E+c.shift(),e.U.P.curveTo(l,p,g,v,E,A,y),J+=6;R=="o24"&&(A+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,A,y))}else{if(R=="o11")break;if(R=="o1234"||R=="o1235"||R=="o1236"||R=="o1237")R=="o1234"&&(g=y,v=(p=A+c.shift())+c.shift(),I=E=g+c.shift(),C=E,b=y,A=(M=(S=(T=v+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,p,g,v,E,T,I),e.U.P.curveTo(l,S,C,M,b,A,y)),R=="o1235"&&(p=A+c.shift(),g=y+c.shift(),v=p+c.shift(),E=g+c.shift(),T=v+c.shift(),I=E+c.shift(),S=T+c.shift(),C=I+c.shift(),M=S+c.shift(),b=C+c.shift(),A=M+c.shift(),y=b+c.shift(),c.shift(),e.U.P.curveTo(l,p,g,v,E,T,I),e.U.P.curveTo(l,S,C,M,b,A,y)),R=="o1236"&&(p=A+c.shift(),g=y+c.shift(),v=p+c.shift(),I=E=g+c.shift(),C=E,M=(S=(T=v+c.shift())+c.shift())+c.shift(),b=C+c.shift(),A=M+c.shift(),e.U.P.curveTo(l,p,g,v,E,T,I),e.U.P.curveTo(l,S,C,M,b,A,y)),R=="o1237"&&(p=A+c.shift(),g=y+c.shift(),v=p+c.shift(),E=g+c.shift(),T=v+c.shift(),I=E+c.shift(),S=T+c.shift(),C=I+c.shift(),M=S+c.shift(),b=C+c.shift(),Math.abs(M-A)>Math.abs(b-y)?A=M+c.shift():y=b+c.shift(),e.U.P.curveTo(l,p,g,v,E,T,I),e.U.P.curveTo(l,S,C,M,b,A,y));else if(R=="o14"){if(c.length>0&&!h&&(f=c.shift()+o.nominalWidthX,h=!0),c.length==4){var O=c.shift(),W=c.shift(),V=c.shift(),U=c.shift(),Y=e.CFF.glyphBySE(o,V),$=e.CFF.glyphBySE(o,U);e.U._drawCFF(o.CharStrings[Y],s,o,a,l),s.x=O,s.y=W,e.U._drawCFF(o.CharStrings[$],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(R=="o19"||R=="o20")c.length%2!=0&&!h&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,h=!0,m+=u+7>>3;else if(R=="o21")c.length>2&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),y+=c.pop(),A+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,A,y),d=!0;else if(R=="o22")c.length>1&&!h&&(f=c.shift()+a.nominalWidthX,h=!0),A+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,A,y),d=!0;else if(R=="o25"){for(;c.length>6;)A+=c.shift(),y+=c.shift(),e.U.P.lineTo(l,A,y);p=A+c.shift(),g=y+c.shift(),v=p+c.shift(),E=g+c.shift(),A=v+c.shift(),y=E+c.shift(),e.U.P.curveTo(l,p,g,v,E,A,y)}else if(R=="o26")for(c.length%2&&(A+=c.shift());c.length>0;)p=A,g=y+c.shift(),A=v=p+c.shift(),y=(E=g+c.shift())+c.shift(),e.U.P.curveTo(l,p,g,v,E,A,y);else if(R=="o27")for(c.length%2&&(y+=c.shift());c.length>0;)g=y,v=(p=A+c.shift())+c.shift(),E=g+c.shift(),A=v+c.shift(),y=E,e.U.P.curveTo(l,p,g,v,E,A,y);else if(R=="o10"||R=="o29"){var N=R=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var Q=c.pop(),j=N.Subrs[Q+N.Bias];s.x=A,s.y=y,s.nStems=u,s.haveWidth=h,s.width=f,s.open=d,e.U._drawCFF(j,s,o,a,l),A=s.x,y=s.y,u=s.nStems,h=s.haveWidth,f=s.width,d=s.open}}else if(R=="o30"||R=="o31"){var X=c.length,se=(J=0,R=="o31");for(J+=X-(z=-3&X);J<z;)se?(g=y,v=(p=A+c.shift())+c.shift(),y=(E=g+c.shift())+c.shift(),z-J==5?(A=v+c.shift(),J++):A=v,se=!1):(p=A,g=y+c.shift(),v=p+c.shift(),E=g+c.shift(),A=v+c.shift(),z-J==5?(y=E+c.shift(),J++):y=E,se=!0),e.U.P.curveTo(l,p,g,v,E,A,y),J+=4}else{if((R+"").charAt(0)=="o")throw console.debug("Unknown operation: "+R,r),R;c.push(R)}}}s.x=A,s.y=y,s.nStems=u,s.haveWidth=h,s.width=f,s.open=d};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function s2e(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(R,z){for(var L=new t(31),H=0;H<31;++H)L[H]=z+=1<<R[H-1];var K=new i(L[30]);for(H=1;H<30;++H)for(var J=L[H];J<L[H+1];++J)K[J]=J-L[H]<<5|H;return[L,K]},l=a(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=a(s,0)[0],f=new t(32768),d=0;d<32768;++d){var m=(43690&d)>>>1|(21845&d)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,f[d]=((65280&m)>>>8|(255&m)<<8)>>>1}var A=function(R,z,L){for(var H=R.length,K=0,J=new t(z);K<H;++K)++J[R[K]-1];var O,W=new t(z);for(K=0;K<z;++K)W[K]=W[K-1]+J[K-1]<<1;{O=new t(1<<z);var V=15-z;for(K=0;K<H;++K)if(R[K])for(var U=K<<4|R[K],Y=z-R[K],$=W[R[K]-1]++<<Y,N=$|(1<<Y)-1;$<=N;++$)O[f[$]>>>V]=U}return O},y=new e(288);for(d=0;d<144;++d)y[d]=8;for(d=144;d<256;++d)y[d]=9;for(d=256;d<280;++d)y[d]=7;for(d=280;d<288;++d)y[d]=8;var p=new e(32);for(d=0;d<32;++d)p[d]=5;var g=A(y,9),v=A(p,5),E=function(R){for(var z=R[0],L=1;L<R.length;++L)R[L]>z&&(z=R[L]);return z},S=function(R,z,L){var H=z/8|0;return(R[H]|R[H+1]<<8)>>(7&z)&L},C=function(R,z){var L=z/8|0;return(R[L]|R[L+1]<<8|R[L+2]<<16)>>(7&z)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],b=function(R,z,L){var H=new Error(z||M[R]);if(H.code=R,Error.captureStackTrace&&Error.captureStackTrace(H,b),!L)throw H;return H},T=function(R,z,L){var H=R.length;if(!H||L&&!L.l&&H<5)return z||new e(0);var K=!z||L,J=!L||L.i;L||(L={}),z||(z=new e(3*H));var O,W=function(le){var Re=z.length;if(le>Re){var qe=new e(Math.max(2*Re,le));qe.set(z),z=qe}},V=L.f||0,U=L.p||0,Y=L.b||0,$=L.l,N=L.d,Q=L.m,j=L.n,X=8*H;do{if(!$){L.f=V=S(R,U,1);var se=S(R,U+1,3);if(U+=3,!se){var ve=R[(we=((O=U)/8|0)+(7&O&&1)+4)-4]|R[we-3]<<8,de=we+ve;if(de>H){J&&b(0);break}K&&W(Y+ve),z.set(R.subarray(we,de),Y),L.b=Y+=ve,L.p=U=8*de;continue}if(se==1)$=g,N=v,Q=9,j=5;else if(se==2){var he=S(R,U,31)+257,te=S(R,U+10,15)+4,xe=he+S(R,U+5,31)+1;U+=14;for(var ce=new e(xe),me=new e(19),ye=0;ye<te;++ye)me[o[ye]]=S(R,U+3*ye,7);U+=3*te;var Me=E(me),oe=(1<<Me)-1,ne=A(me,Me);for(ye=0;ye<xe;){var we,be=ne[S(R,U,oe)];if(U+=15&be,(we=be>>>4)<16)ce[ye++]=we;else{var st=0,re=0;for(we==16?(re=3+S(R,U,3),U+=2,st=ce[ye-1]):we==17?(re=3+S(R,U,7),U+=3):we==18&&(re=11+S(R,U,127),U+=7);re--;)ce[ye++]=st}}var Z=ce.subarray(0,he),ge=ce.subarray(he);Q=E(Z),j=E(ge),$=A(Z,Q),N=A(ge,j)}else b(1);if(U>X){J&&b(0);break}}K&&W(Y+131072);for(var Fe=(1<<Q)-1,Ce=(1<<j)-1,Le=U;;Le=U){var Qe=(st=$[C(R,U)&Fe])>>>4;if((U+=15&st)>X){J&&b(0);break}if(st||b(2),Qe<256)z[Y++]=Qe;else{if(Qe==256){Le=U,$=null;break}var He=Qe-254;if(Qe>264){var De=r[ye=Qe-257];He=S(R,U,(1<<De)-1)+c[ye],U+=De}var at=N[C(R,U)&Ce],tt=at>>>4;if(at||b(3),U+=15&at,ge=h[tt],tt>3&&(De=s[tt],ge+=C(R,U)&(1<<De)-1,U+=De),U>X){J&&b(0);break}K&&W(Y+131072);for(var et=Y+He;Y<et;Y+=4)z[Y]=z[Y-ge],z[Y+1]=z[Y+1-ge],z[Y+2]=z[Y+2-ge],z[Y+3]=z[Y+3-ge];Y=et}}L.l=$,L.p=Le,L.b=Y,$&&(V=1,L.m=Q,L.d=N,L.n=j)}while(!V);return Y==z.length?z:function(le,Re,qe){(qe==null||qe>le.length)&&(qe=le.length);var it=new(le instanceof t?t:le instanceof i?i:e)(qe-Re);return it.set(le.subarray(Re,qe)),it}(z,0,Y)},I=new e(0),F=typeof TextDecoder<"u"&&new TextDecoder;try{F.decode(I,{stream:!0})}catch{}return n.convert_streams=function(R){var z=new DataView(R),L=0;function H(){var he=z.getUint16(L);return L+=2,he}function K(){var he=z.getUint32(L);return L+=4,he}function J(he){ve.setUint16(de,he),de+=2}function O(he){ve.setUint32(de,he),de+=4}for(var W={signature:K(),flavor:K(),length:K(),numTables:H(),reserved:H(),totalSfntSize:K(),majorVersion:H(),minorVersion:H(),metaOffset:K(),metaLength:K(),metaOrigLength:K(),privOffset:K(),privLength:K()},V=0;Math.pow(2,V)<=W.numTables;)V++;V--;for(var U=16*Math.pow(2,V),Y=16*W.numTables-U,$=12,N=[],Q=0;Q<W.numTables;Q++)N.push({tag:K(),offset:K(),compLength:K(),origLength:K(),origChecksum:K()}),$+=16;var j,X=new Uint8Array(12+16*N.length+N.reduce(function(he,te){return he+te.origLength+4},0)),se=X.buffer,ve=new DataView(se),de=0;return O(W.flavor),J(W.numTables),J(U),J(V),J(Y),N.forEach(function(he){O(he.tag),O(he.origChecksum),O($),O(he.origLength),he.outOffset=$,($+=he.origLength)%4!=0&&($+=4-$%4)}),N.forEach(function(he){var te,xe=R.slice(he.offset,he.offset+he.compLength);if(he.compLength!=he.origLength){var ce=new Uint8Array(he.origLength);te=new Uint8Array(xe,2),T(te,ce)}else ce=new Uint8Array(xe);X.set(ce,he.outOffset);var me=0;($=he.outOffset+he.origLength)%4!=0&&(me=4-$%4),X.set(new Uint8Array(me).buffer,he.outOffset+he.origLength),j=$+me}),se.slice(0,j)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function o2e(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,c=32;let u;function h(M){if(!u){const b={R:s,L:r,D:o,C:l,U:c,T:a};u=new Map;for(let T in i){let I=0;i[T].split(",").forEach(F=>{let[R,z]=F.split("+");R=parseInt(R,36),z=z?parseInt(z,36):0,u.set(I+=R,b[T]);for(let L=z;L--;)u.set(++I,b[T])})}}return u.get(M)||c}const f=1,d=2,m=3,A=4,y=[null,"isol","init","fina","medi"];function p(M){const b=new Uint8Array(M.length);let T=c,I=f,F=-1;for(let R=0;R<M.length;R++){const z=M.codePointAt(R);let L=h(z)|0,H=f;L&a||(T&(r|o|l)?L&(s|o|l)?(H=m,(I===f||I===m)&&b[F]++):L&(r|c)&&(I===d||I===A)&&b[F]--:T&(s|c)&&(I===d||I===A)&&b[F]--,I=b[R]=H,T=L,F=R,z>65535&&R++)}return b}function g(M,b){const T=[];for(let F=0;F<b.length;F++){const R=b.codePointAt(F);R>65535&&F++,T.push(n.U.codeToGlyph(M,R))}const I=M.GSUB;if(I){const{lookupList:F,featureList:R}=I;let z;const L=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,H=[];R.forEach(K=>{if(L.test(K.tag))for(let J=0;J<K.tab.length;J++){if(H[K.tab[J]])continue;H[K.tab[J]]=!0;const O=F[K.tab[J]],W=/^(isol|init|fina|medi)$/.test(K.tag);W&&!z&&(z=p(b));for(let V=0;V<T.length;V++)(!z||!W||y[z[V]]===K.tag)&&n.U._applySubs(T,V,O,F)}})}return T}function v(M,b){const T=new Int16Array(b.length*3);let I=0;for(;I<b.length;I++){const L=b[I];if(L===-1)continue;T[I*3+2]=M.hmtx.aWidth[L];const H=M.GPOS;if(H){const K=H.lookupList;for(let J=0;J<K.length;J++){const O=K[J];for(let W=0;W<O.tabs.length;W++){const V=O.tabs[W];if(O.ltype===1){if(n._lctf.coverageIndex(V.coverage,L)!==-1&&V.pos){z(V.pos,I);break}}else if(O.ltype===2){let U=null,Y=F();if(Y!==-1){const $=n._lctf.coverageIndex(V.coverage,b[Y]);if($!==-1){if(V.fmt===1){const N=V.pairsets[$];for(let Q=0;Q<N.length;Q++)N[Q].gid2===L&&(U=N[Q])}else if(V.fmt===2){const N=n.U._getGlyphClass(b[Y],V.classDef1),Q=n.U._getGlyphClass(L,V.classDef2);U=V.matrix[N][Q]}if(U){U.val1&&z(U.val1,Y),U.val2&&z(U.val2,I);break}}}}else if(O.ltype===4){const U=n._lctf.coverageIndex(V.markCoverage,L);if(U!==-1){const Y=F(R),$=Y===-1?-1:n._lctf.coverageIndex(V.baseCoverage,b[Y]);if($!==-1){const N=V.markArray[U],Q=V.baseArray[$][N.markClass];T[I*3]=Q.x-N.x+T[Y*3]-T[Y*3+2],T[I*3+1]=Q.y-N.y+T[Y*3+1];break}}}else if(O.ltype===6){const U=n._lctf.coverageIndex(V.mark1Coverage,L);if(U!==-1){const Y=F();if(Y!==-1){const $=b[Y];if(E(M,$)===3){const N=n._lctf.coverageIndex(V.mark2Coverage,$);if(N!==-1){const Q=V.mark1Array[U],j=V.mark2Array[N][Q.markClass];T[I*3]=j.x-Q.x+T[Y*3]-T[Y*3+2],T[I*3+1]=j.y-Q.y+T[Y*3+1];break}}}}}}}}else if(M.kern&&!M.cff){const K=F();if(K!==-1){const J=M.kern.glyph1.indexOf(b[K]);if(J!==-1){const O=M.kern.rval[J].glyph2.indexOf(L);O!==-1&&(T[K*3+2]+=M.kern.rval[J].vals[O])}}}}return T;function F(L){for(let H=I-1;H>=0;H--)if(b[H]!==-1&&(!L||L(b[H])))return H;return-1}function R(L){return E(M,L)===1}function z(L,H){for(let K=0;K<3;K++)T[H*3+K]+=L[K]||0}}function E(M,b){const T=M.GDEF&&M.GDEF.glyphClassDef;return T?n.U._getGlyphClass(b,T):0}function S(...M){for(let b=0;b<M.length;b++)if(typeof M[b]=="number")return M[b]}function C(M){const b=Object.create(null),T=M["OS/2"],I=M.hhea,F=M.head.unitsPerEm,R=S(T&&T.sTypoAscender,I&&I.ascender,F),z={unitsPerEm:F,ascender:R,descender:S(T&&T.sTypoDescender,I&&I.descender,0),capHeight:S(T&&T.sCapHeight,R),xHeight:S(T&&T.sxHeight,R),lineGap:S(T&&T.sTypoLineGap,I&&I.lineGap),supportsCodePoint(L){return n.U.codeToGlyph(M,L)>0},forEachGlyph(L,H,K,J){let O=0;const W=1/z.unitsPerEm*H,V=g(M,L);let U=0;const Y=v(M,V);return V.forEach(($,N)=>{if($!==-1){let Q=b[$];if(!Q){const{cmds:j,crds:X}=n.U.glyphToPath(M,$);let se="",ve=0;for(let ce=0,me=j.length;ce<me;ce++){const ye=t[j[ce]];se+=j[ce];for(let Me=1;Me<=ye;Me++)se+=(Me>1?",":"")+X[ve++]}let de,he,te,xe;if(X.length){de=he=1/0,te=xe=-1/0;for(let ce=0,me=X.length;ce<me;ce+=2){let ye=X[ce],Me=X[ce+1];ye<de&&(de=ye),Me<he&&(he=Me),ye>te&&(te=ye),Me>xe&&(xe=Me)}}else de=te=he=xe=0;Q=b[$]={index:$,advanceWidth:M.hmtx.aWidth[$],xMin:de,yMin:he,xMax:te,yMax:xe,path:se}}J.call(null,Q,O+Y[N*3]*W,Y[N*3+1]*W,U),O+=Y[N*3+2]*W,K&&(O+=K*H)}U+=L.codePointAt(U)>65535?2:1}),O}};return z}return function(b){const T=new Uint8Array(b,0,4),I=n._bin.readASCII(T,0,4);if(I==="wOFF")b=e(b);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return C(n.parse(b)[0])}}const a2e=qm({name:"Typr Font Parser",dependencies:[r2e,s2e,o2e],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function l2e(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(v){var E=v>>5;this.buckets.set(E,(this.buckets.get(E)||0)|1<<(31&v))},e.prototype.has=function(v){var E=this.buckets.get(v>>5);return E!==void 0&&(E&1<<(31&v))!=0},e.prototype.serialize=function(){var v=[];return this.buckets.forEach(function(E,S){v.push((+S).toString(36)+":"+E.toString(36))}),v.join(",")},e.prototype.deserialize=function(v){var E=this;this.buckets.clear(),v.split(",").forEach(function(S){var C=S.split(":");E.buckets.set(parseInt(C[0],36),parseInt(C[1],36))})};var t=Math.pow(2,8),i=t-1,r=~i;function s(v){var E=function(C){return C&r}(v).toString(16),S=function(C){return(C&r)+t-1}(v).toString(16);return"codepoint-index/plane"+(v>>16)+"/"+E+"-"+S+".json"}function o(v,E){var S=v&i,C=E.codePointAt(S/6|0);return((C=(C||48)-48)&1<<S%6)!=0}function a(v,E){var S;(S=v,S.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(C){return C.split("-").map(function(M){return parseInt(M.trim(),16)})})).forEach(function(C){var M=C[0],b=C[1];b===void 0&&(b=M),E(M,b)})}function l(v,E){a(v,function(S,C){for(var M=S;M<=C;M++)E(M)})}var c={},u={},h=new WeakMap,f="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(v){var E=h.get(v);return E||(E=new e,l(v.ranges,function(S){return E.add(S)}),h.set(v,E)),E}var m,A=new Map;function y(v,E,S){return v[E]?E:v[S]?S:function(C){for(var M in C)return M}(v)}function p(v,E){var S=E;if(!v.includes(S)){S=1/0;for(var C=0;C<v.length;C++)Math.abs(v[C]-E)<Math.abs(S-E)&&(S=v[C])}return S}function g(v){return m||(m=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(E){m.add(E)})),m.has(v)}return n.CodePointSet=e,n.clearCache=function(){c={},u={}},n.getFontsForString=function(v,E){E===void 0&&(E={});var S,C=E.lang;C===void 0&&(C=new RegExp("\\p{Script=Hangul}","u").test(S=v)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(S)?"ja":"en");var M=E.category;M===void 0&&(M="sans-serif");var b=E.style;b===void 0&&(b="normal");var T=E.weight;T===void 0&&(T=400);var I=(E.dataUrl||f).replace(/\/$/g,""),F=new Map,R=new Uint8Array(v.length),z={},L={},H=new Array(v.length),K=new Map,J=!1;function O(U){var Y=A.get(U);return Y||(Y=fetch(I+"/"+U).then(function($){if(!$.ok)throw new Error($.statusText);return $.json().then(function(N){if(!Array.isArray(N)||N[0]!==1)throw new Error("Incorrect schema version; need 1, got "+N[0]);return N[1]})}).catch(function($){if(I!==f)return J||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+$.message),J=!0),I=f,A.delete(U),O(U);throw $}),A.set(U,Y)),Y}for(var W=function(U){var Y=v.codePointAt(U),$=s(Y);H[U]=$,c[$]||K.has($)||K.set($,O($).then(function(N){c[$]=N})),Y>65535&&(U++,V=U)},V=0;V<v.length;V++)W(V);return Promise.all(K.values()).then(function(){K.clear();for(var U=function($){var N=v.codePointAt($),Q=null,j=c[H[$]],X=void 0;for(var se in j){var ve=L[se];if(ve===void 0&&(ve=L[se]=new RegExp(se).test(C||"en")),ve){for(var de in X=se,j[se])if(o(N,j[se][de])){Q=de;break}break}}if(!Q){e:for(var he in j)if(he!==X){for(var te in j[he])if(o(N,j[he][te])){Q=te;break e}}}Q||(console.debug("No font coverage for U+"+N.toString(16)),Q="latin"),H[$]=Q,u[Q]||K.has(Q)||K.set(Q,O("font-meta/"+Q+".json").then(function(xe){u[Q]=xe})),N>65535&&($++,Y=$)},Y=0;Y<v.length;Y++)U(Y);return Promise.all(K.values())}).then(function(){for(var U,Y=null,$=0;$<v.length;$++){var N=v.codePointAt($);if(Y&&(g(N)||d(Y).has(N)))R[$]=R[$-1];else{Y=u[H[$]];var Q=z[Y.id];if(!Q){var j=Y.typeforms,X=y(j,M,"sans-serif"),se=y(j[X],b,"normal"),ve=p((U=j[X])===null||U===void 0?void 0:U[se],T);Q=z[Y.id]=I+"/font-files/"+Y.id+"/"+X+"."+se+"."+ve+".woff"}var de=F.get(Q);de==null&&(de=F.size,F.set(Q,de)),R[$]=de}N>65535&&($++,R[$]=R[$-1])}return{fontUrls:Array.from(F.keys()),chars:R}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function c2e(n,e){const t=Object.create(null),i=Object.create(null);function r(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=n(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],r(o,c=>{c.src=o,t[o]=c,i[o].forEach(u=>u(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:h="normal",unicodeFontsURL:f}={}){const d=new Uint8Array(o.length),m=[];o.length||g();const A=new Map,y=[];if(u!=="italic"&&(u="normal"),typeof h!="number"&&(h=h==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(E=>!E.lang||E.lang.test(l)).reverse(),c.length){let M=0;(function b(T=0){for(let I=T,F=o.length;I<F;I++){const R=o.codePointAt(I);if(M===1&&m[d[I-1]].supportsCodePoint(R)||/\s/.test(o[I]))d[I]=d[I-1],M===2&&(y[y.length-1][1]=I);else for(let z=d[I],L=c.length;z<=L;z++)if(z===L){const H=M===2?y[y.length-1]:y[y.length]=[I,I];H[1]=I,M=2}else{d[I]=z;const{src:H,unicodeRange:K}=c[z];if(!K||v(R,K)){const J=t[H];if(!J){s(H,()=>{b(I)});return}if(J.supportsCodePoint(R)){let O=A.get(J);typeof O!="number"&&(O=m.length,m.push(J),A.set(J,O)),d[I]=O,M=1;break}}}R>65535&&I+1<F&&(d[I+1]=d[I],I++,M===2&&(y[y.length-1][1]=I))}p()})()}else y.push([0,o.length-1]),p();function p(){if(y.length){const E=y.map(S=>o.substring(S[0],S[1]+1)).join(`
`);e.getFontsForString(E,{lang:l||void 0,style:u,weight:h,dataUrl:f}).then(({fontUrls:S,chars:C})=>{const M=m.length;let b=0;y.forEach(I=>{for(let F=0,R=I[1]-I[0];F<=R;F++)d[I[0]+F]=C[b++]+M;b++});let T=0;S.forEach((I,F)=>{s(I,R=>{m[F+M]=R,++T===S.length&&g()})})})}else g()}function g(){a({chars:d,fonts:m})}function v(E,S){for(let C=0;C<S.length;C++){const[M,b=M]=S[C];if(M<=E&&E<=b)return!0}return!1}}}const u2e=qm({name:"FontResolver",dependencies:[c2e,a2e,l2e],init(n,e,t){return n(e,t())}});function h2e(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:m,lang:A,fonts:y,style:p,weight:g,preResolvedFonts:v,unicodeFontsURL:E},S){const C=({chars:M,fonts:b})=>{let T,I;const F=[];for(let R=0;R<M.length;R++)M[R]!==I?(I=M[R],F.push(T={start:R,end:R,fontObj:b[M[R]]})):T.end=R;S(F)};v?C(v):n(m,C,{lang:A,fonts:y,style:p,weight:g,unicodeFontsURL:E})}function a({text:m="",font:A,lang:y,sdfGlyphSize:p=64,fontSize:g=400,fontWeight:v=1,fontStyle:E="normal",letterSpacing:S=0,lineHeight:C="normal",maxWidth:M=1/0,direction:b,textAlign:T="left",textIndent:I=0,whiteSpace:F="normal",overflowWrap:R="normal",anchorX:z=0,anchorY:L=0,metricsOnly:H=!1,unicodeFontsURL:K,preResolvedFonts:J=null,includeCaretPositions:O=!1,chunkedBoundsSize:W=8192,colorRanges:V=null},U){const Y=h(),$={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),g=+g,S=+S,M=+M,C=C||"normal",I=+I,o({text:m,lang:y,style:E,weight:v,fonts:typeof A=="string"?[{src:A}]:A,unicodeFontsURL:K,preResolvedFonts:J},N=>{$.fontLoad=h()-Y;const Q=isFinite(M);let j=null,X=null,se=null,ve=null,de=null,he=null,te=null,xe=null,ce=0,me=0,ye=F!=="nowrap";const Me=new Map,oe=h();let ne=I,we=0,be=new f;const st=[be];N.forEach(Ce=>{const{fontObj:Le}=Ce,{ascender:Qe,descender:He,unitsPerEm:De,lineGap:at,capHeight:tt,xHeight:et}=Le;let le=Me.get(Le);if(!le){const _e=g/De,Ie=C==="normal"?(Qe-He+at)*_e:C*g,rt=(Ie-(Qe-He)*_e)/2,nt=Math.min(Ie,(Qe-He)*_e),pt=(Qe+He)/2*_e+nt/2;le={index:Me.size,src:Le.src,fontObj:Le,fontSizeMult:_e,unitsPerEm:De,ascender:Qe*_e,descender:He*_e,capHeight:tt*_e,xHeight:et*_e,lineHeight:Ie,baseline:-rt-Qe*_e,caretTop:pt,caretBottom:pt-nt},Me.set(Le,le)}const{fontSizeMult:Re}=le,qe=m.slice(Ce.start,Ce.end+1);let it,Ae;Le.forEachGlyph(qe,g,S,(_e,Ie,rt,nt)=>{Ie+=we,nt+=Ce.start,it=Ie,Ae=_e;const pt=m.charAt(nt),Pt=_e.advanceWidth*Re,Qt=be.count;let Tt;if("isEmpty"in _e||(_e.isWhitespace=!!pt&&new RegExp(r).test(pt),_e.canBreakAfter=!!pt&&s.test(pt),_e.isEmpty=_e.xMin===_e.xMax||_e.yMin===_e.yMax||i.test(pt)),!_e.isWhitespace&&!_e.isEmpty&&me++,ye&&Q&&!_e.isWhitespace&&Ie+Pt+ne>M&&Qt){if(be.glyphAt(Qt-1).glyphObj.canBreakAfter)Tt=new f,ne=-Ie;else for(let bn=Qt;bn--;)if(bn===0&&R==="break-word"){Tt=new f,ne=-Ie;break}else if(be.glyphAt(bn).glyphObj.canBreakAfter){Tt=be.splitAt(bn+1);const Tn=Tt.glyphAt(0).x;ne-=Tn;for(let oi=Tt.count;oi--;)Tt.glyphAt(oi).x-=Tn;break}Tt&&(be.isSoftWrapped=!0,be=Tt,st.push(be),ce=M)}let Lt=be.glyphAt(be.count);Lt.glyphObj=_e,Lt.x=Ie+ne,Lt.y=rt,Lt.width=Pt,Lt.charIndex=nt,Lt.fontData=le,pt===`
`&&(be=new f,st.push(be),ne=-(Ie+Pt+S*g)+I)}),we=it+Ae.advanceWidth*Re+S*g});let re=0;st.forEach(Ce=>{let Le=!0;for(let Qe=Ce.count;Qe--;){const He=Ce.glyphAt(Qe);Le&&!He.glyphObj.isWhitespace&&(Ce.width=He.x+He.width,Ce.width>ce&&(ce=Ce.width),Le=!1);let{lineHeight:De,capHeight:at,xHeight:tt,baseline:et}=He.fontData;De>Ce.lineHeight&&(Ce.lineHeight=De);const le=et-Ce.baseline;le<0&&(Ce.baseline+=le,Ce.cap+=le,Ce.ex+=le),Ce.cap=Math.max(Ce.cap,Ce.baseline+at),Ce.ex=Math.max(Ce.ex,Ce.baseline+tt)}Ce.baseline-=re,Ce.cap-=re,Ce.ex-=re,re+=Ce.lineHeight});let Z=0,ge=0;if(z&&(typeof z=="number"?Z=-z:typeof z=="string"&&(Z=-ce*(z==="left"?0:z==="center"?.5:z==="right"?1:c(z)))),L&&(typeof L=="number"?ge=-L:typeof L=="string"&&(ge=L==="top"?0:L==="top-baseline"?-st[0].baseline:L==="top-cap"?-st[0].cap:L==="top-ex"?-st[0].ex:L==="middle"?re/2:L==="bottom"?re:L==="bottom-baseline"?-st[st.length-1].baseline:c(L)*re)),!H){const Ce=e.getEmbeddingLevels(m,b);j=new Uint16Array(me),X=new Uint8Array(me),se=new Float32Array(me*2),ve={},te=[1/0,1/0,-1/0,-1/0],xe=[],O&&(he=new Float32Array(m.length*4)),V&&(de=new Uint8Array(me*3));let Le=0,Qe=-1,He=-1,De,at;if(st.forEach((tt,et)=>{let{count:le,width:Re}=tt;if(le>0){let qe=0;for(let nt=le;nt--&&tt.glyphAt(nt).glyphObj.isWhitespace;)qe++;let it=0,Ae=0;if(T==="center")it=(ce-Re)/2;else if(T==="right")it=ce-Re;else if(T==="justify"&&tt.isSoftWrapped){let nt=0;for(let pt=le-qe;pt--;)tt.glyphAt(pt).glyphObj.isWhitespace&&nt++;Ae=(ce-Re)/nt}if(Ae||it){let nt=0;for(let pt=0;pt<le;pt++){let Pt=tt.glyphAt(pt);const Qt=Pt.glyphObj;Pt.x+=it+nt,Ae!==0&&Qt.isWhitespace&&pt<le-qe&&(nt+=Ae,Pt.width+=Ae)}}const _e=e.getReorderSegments(m,Ce,tt.glyphAt(0).charIndex,tt.glyphAt(tt.count-1).charIndex);for(let nt=0;nt<_e.length;nt++){const[pt,Pt]=_e[nt];let Qt=1/0,Tt=-1/0;for(let Lt=0;Lt<le;Lt++)if(tt.glyphAt(Lt).charIndex>=pt){let bn=Lt,Tn=Lt;for(;Tn<le;Tn++){let oi=tt.glyphAt(Tn);if(oi.charIndex>Pt)break;Tn<le-qe&&(Qt=Math.min(Qt,oi.x),Tt=Math.max(Tt,oi.x+oi.width))}for(let oi=bn;oi<Tn;oi++){const xr=tt.glyphAt(oi);xr.x=Tt-(xr.x+xr.width-Qt)}break}}let Ie;const rt=nt=>Ie=nt;for(let nt=0;nt<le;nt++){const pt=tt.glyphAt(nt);Ie=pt.glyphObj;const Pt=Ie.index,Qt=Ce.levels[pt.charIndex]&1;if(Qt){const Tt=e.getMirroredCharacter(m[pt.charIndex]);Tt&&pt.fontData.fontObj.forEachGlyph(Tt,0,0,rt)}if(O){const{charIndex:Tt,fontData:Lt}=pt,bn=pt.x+Z,Tn=pt.x+pt.width+Z;he[Tt*4]=Qt?Tn:bn,he[Tt*4+1]=Qt?bn:Tn,he[Tt*4+2]=tt.baseline+Lt.caretBottom+ge,he[Tt*4+3]=tt.baseline+Lt.caretTop+ge;const oi=Tt-Qe;oi>1&&u(he,Qe,oi),Qe=Tt}if(V){const{charIndex:Tt}=pt;for(;Tt>He;)He++,V.hasOwnProperty(He)&&(at=V[He])}if(!Ie.isWhitespace&&!Ie.isEmpty){const Tt=Le++,{fontSizeMult:Lt,src:bn,index:Tn}=pt.fontData,oi=ve[bn]||(ve[bn]={});oi[Pt]||(oi[Pt]={path:Ie.path,pathBounds:[Ie.xMin,Ie.yMin,Ie.xMax,Ie.yMax]});const xr=pt.x+Z,_r=pt.y+tt.baseline+ge;se[Tt*2]=xr,se[Tt*2+1]=_r;const Zi=xr+Ie.xMin*Lt,lr=_r+Ie.yMin*Lt,yi=xr+Ie.xMax*Lt,qt=_r+Ie.yMax*Lt;Zi<te[0]&&(te[0]=Zi),lr<te[1]&&(te[1]=lr),yi>te[2]&&(te[2]=yi),qt>te[3]&&(te[3]=qt),Tt%W===0&&(De={start:Tt,end:Tt,rect:[1/0,1/0,-1/0,-1/0]},xe.push(De)),De.end++;const Li=De.rect;if(Zi<Li[0]&&(Li[0]=Zi),lr<Li[1]&&(Li[1]=lr),yi>Li[2]&&(Li[2]=yi),qt>Li[3]&&(Li[3]=qt),j[Tt]=Pt,X[Tt]=Tn,V){const Js=Tt*3;de[Js]=at>>16&255,de[Js+1]=at>>8&255,de[Js+2]=at&255}}}}}),he){const tt=m.length-Qe;tt>1&&u(he,Qe,tt)}}const Fe=[];Me.forEach(({index:Ce,src:Le,unitsPerEm:Qe,ascender:He,descender:De,lineHeight:at,capHeight:tt,xHeight:et})=>{Fe[Ce]={src:Le,unitsPerEm:Qe,ascender:He,descender:De,lineHeight:at,capHeight:tt,xHeight:et}}),$.typesetting=h()-oe,U({glyphIds:j,glyphFontIndices:X,glyphPositions:se,glyphData:ve,fontData:Fe,caretPositions:he,glyphColors:de,chunkedBounds:xe,fontSize:g,topBaseline:ge+st[0].baseline,blockBounds:[Z,ge-re,Z+ce,ge],visibleBounds:te,timings:$})})}function l(m,A){a({...m,metricsOnly:!0},y=>{const[p,g,v,E]=y.blockBounds;A({width:v-p,height:E-g})})}function c(m){let A=m.match(/^([\d.]+)%$/),y=A?parseFloat(A[1]):NaN;return isNaN(y)?0:y/100}function u(m,A,y){const p=m[A*4],g=m[A*4+1],v=m[A*4+2],E=m[A*4+3],S=(g-p)/y;for(let C=0;C<y;C++){const M=(A+C)*4;m[M]=p+S*C,m[M+1]=p+S*(C+1),m[M+2]=v,m[M+3]=E}}function h(){return(self.performance||Date).now()}function f(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return f.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(m){let A=f.flyweight;return A.data=this.data,A.index=m,A},splitAt(m){let A=new f;return A.data=this.data.splice(m*d.length),A}},f.flyweight=d.reduce((m,A,y,p)=>(Object.defineProperty(m,A,{get(){return this.data[this.index*d.length+y]},set(g){this.data[this.index*d.length+y]=g}}),m),{data:null,index:0}),{typeset:a,measure:l}}const gf=()=>(self.performance||Date).now(),WE=sX();let wO;function f2e(n,e,t,i,r,s,o,a,l,c,u=!0){return u?p2e(n,e,t,i,r,s,o,a,l,c).then(null,h=>(wO||(console.warn("WebGL SDF generation failed, falling back to JS",h),wO=!0),CO(n,e,t,i,r,s,o,a,l,c))):CO(n,e,t,i,r,s,o,a,l,c)}const Xx=[],d2e=5;let eT=0;function aX(){const n=gf();for(;Xx.length&&gf()-n<d2e;)Xx.shift()();eT=Xx.length?setTimeout(aX,0):0}const p2e=(...n)=>new Promise((e,t)=>{Xx.push(()=>{const i=gf();try{WE.webgl.generateIntoCanvas(...n),e({timing:gf()-i})}catch(r){t(r)}}),eT||(eT=setTimeout(aX,0))}),m2e=4,g2e=2e3,SO={};let A2e=0;function CO(n,e,t,i,r,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+A2e++%m2e;let h=SO[u];return h||(h=SO[u]={workerModule:qm({name:u,workerId:u,dependencies:[sX,gf],init(f,d){const m=f().javascript.generate;return function(...A){const y=d();return{textureData:m(...A),timing:d()-y}}},getTransferables(f){return[f.textureData.buffer]}}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(n,e,t,i,r,s).then(({textureData:f,timing:d})=>{const m=gf(),A=new Uint8Array(f.length*4);for(let y=0;y<f.length;y++)A[y*4+c]=f[y];return WE.webglUtils.renderImageData(o,A,a,l,n,e,1<<3-c),d+=gf()-m,--h.requests===0&&(h.idleTimer=setTimeout(()=>{Yye(u)},g2e)),{timing:d}})}function v2e(n){n._warm||(WE.webgl.isSupported(n),n._warm=!0)}const y2e=WE.webglUtils.resizeWebGLCanvasWithoutClearing,yp={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},x2e=new We;function Vd(){return(self.performance||Date).now()}const MO=Object.create(null);function lX(n,e){n=w2e({},n);const t=Vd(),{defaultFontURL:i}=yp,r=[];if(i&&r.push({label:"default",src:bO(i)}),n.font&&r.push({label:"user",src:bO(n.font)}),n.font=r,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||yp.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||yp.unicodeFontsURL,n.colorRanges!=null){let f={};for(let d in n.colorRanges)if(n.colorRanges.hasOwnProperty(d)){let m=n.colorRanges[d];typeof m!="number"&&(m=x2e.set(m).getHex()),f[d]=m}n.colorRanges=f}Object.freeze(n);const{textureWidth:s,sdfExponent:o}=yp,{sdfGlyphSize:a}=n,l=s/a*4;let c=MO[a];if(!c){const f=document.createElement("canvas");f.width=s,f.height=a*256/l,c=MO[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:f,sdfTexture:new In(f,void 0,void 0,void 0,Ut,Ut),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,_2e(c)}const{sdfTexture:u,sdfCanvas:h}=c;C2e(n).then(f=>{const{glyphIds:d,glyphFontIndices:m,fontData:A,glyphPositions:y,fontSize:p,timings:g}=f,v=[],E=new Float32Array(d.length*4);let S=0,C=0;const M=Vd(),b=A.map(z=>{let L=c.glyphsByFont.get(z.src);return L||c.glyphsByFont.set(z.src,L=new Map),L});d.forEach((z,L)=>{const H=m[L],{src:K,unitsPerEm:J}=A[H];let O=b[H].get(z);if(!O){const{path:$,pathBounds:N}=f.glyphData[K][z],Q=Math.max(N[2]-N[0],N[3]-N[1])/a*(yp.sdfMargin*a+.5),j=c.glyphCount++,X=[N[0]-Q,N[1]-Q,N[2]+Q,N[3]+Q];b[H].set(z,O={path:$,atlasIndex:j,sdfViewBox:X}),v.push(O)}const{sdfViewBox:W}=O,V=y[C++],U=y[C++],Y=p/J;E[S++]=V+W[0]*Y,E[S++]=U+W[1]*Y,E[S++]=V+W[2]*Y,E[S++]=U+W[3]*Y,d[L]=O.atlasIndex}),g.quads=(g.quads||0)+(Vd()-M);const T=Vd();g.sdf={};const I=h.height,F=Math.ceil(c.glyphCount/l),R=Math.pow(2,Math.ceil(Math.log2(F*a)));R>I&&(console.info(`Increasing SDF texture size ${I}->${R}`),y2e(h,s,R),u.dispose()),Promise.all(v.map(z=>cX(z,c,n.gpuAccelerateSDF).then(({timing:L})=>{g.sdf[z.atlasIndex]=L}))).then(()=>{v.length&&!c.contextLost&&(uX(c),u.needsUpdate=!0),g.sdfTotal=Vd()-T,g.total=Vd()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:E,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{c.contextLost||v2e(h)})}function cX({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=yp,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),h=u%(a/i)*i,f=Math.floor(u/(a/i))*i,d=e%4;return f2e(i,i,n,t,c,l,r,h,f,d,o)}function _2e(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(cX(s,n,!0))})}),Promise.all(i).then(()=>{uX(n),n.sdfTexture.needsUpdate=!0})})}function E2e({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;lX({font:n,sdfGlyphSize:t,text:r},i)}function w2e(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let F2;function bO(n){return F2||(F2=typeof document>"u"?{}:document.createElement("a")),F2.href=n,F2.href}function uX(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const S2e=qm({name:"Typesetter",dependencies:[h2e,u2e,Kye],init(n,e,t){return n(e,t())}}),C2e=qm({name:"Typesetter",dependencies:[S2e],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}}),TO={};function M2e(n){let e=TO[n];if(!e){const t=new dr(1,1,n,n),i=t.clone(),r=t.attributes,s=i.attributes,o=new It,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new ft([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...t.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=TO[n]=o}return e}const b2e="aTroikaGlyphBounds",IO="aTroikaGlyphIndex",T2e="aTroikaGlyphColor";class I2e extends jA{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new vi,this.boundingBox=new Bn}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Ni?t/2:0,e===Vn?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=M2e(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){E4(this,b2e,e,4),E4(this,IO,t,1),E4(this,T2e,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=r/2,h=r*2,f=Math.abs(t),d=e[0]/f,m=e[2]/f,A=s((d+u)/h)!==s((m+u)/h)?-f:o(l(d)*f,l(m)*f),y=s((d-u)/h)!==s((m-u)/h)?f:a(l(d)*f,l(m)*f),p=s((d+r)/h)!==s((m+r)/h)?f*2:a(f-c(d)*f,f-c(m)*f);i.min.set(A,e[1],t<0?-p:0),i.max.set(y,e[3],t<0?0:p)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(IO).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function E4(n,e,t,i){const r=n.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(n.setAttribute(e,new Qa(t,i)),delete n._maxInstanceCount,n.dispose()):r&&n.deleteAttribute(e)}const B2e=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,P2e=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,R2e=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,D2e=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function L2e(n){const e=$b(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ee},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Yt(0,0,0,0)},uTroikaClipRect:{value:new Yt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ee},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new We},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Wt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:B2e,vertexTransform:P2e,fragmentDefs:R2e,fragmentColorTransform:D2e,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(oX,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const C8=new mr({color:16777215,side:Vn,transparent:!0}),BO=8421504,PO=new Oe,O2=new D,w4=new D,g1=[],F2e=new D,S4="+x+y";function RO(n){return Array.isArray(n)?n[0]:n}let hX=()=>{const n=new ct(new dr(1,1),C8);return hX=()=>n,n},fX=()=>{const n=new ct(new dr(1,1,32,1),C8);return fX=()=>n,n};const O2e={type:"syncstart"},U2e={type:"synccomplete"},dX=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],z2e=dX.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let pX=class extends ct{constructor(){const e=new I2e;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=BO,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=S4,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(O2e),lX({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(U2e),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Ss}onAfterRender(e,t,i,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=C8.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=L2e(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return RO(this.material).getDepthMaterial()}get customDistanceMaterial(){return RO(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let c=0,u=0,h=0,f,d,m,A=0,y=0;if(t){let{outlineWidth:g,outlineOffsetX:v,outlineOffsetY:E,outlineBlur:S,outlineOpacity:C}=this;c=this._parsePercent(g)||0,u=Math.max(0,this._parsePercent(S)||0),f=C,A=this._parsePercent(v)||0,y=this._parsePercent(E)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(m=this.strokeColor,i.uTroikaStrokeColor.value.set(m??BO),d=this.strokeOpacity,d==null&&(d=1)),f=this.fillOpacity;i.uTroikaDistanceOffset.value=c,i.uTroikaPositionOffset.value.set(A,y),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=h,i.uTroikaStrokeOpacity.value=d,i.uTroikaFillOpacity.value=f??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&p.length===4)i.uTroikaClipRect.value.fromArray(p);else{const g=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-g,l[1]-g,l[2]+g,l[3]+g)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new We;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||S4;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==S4&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,h,f]=l;O2.set(0,0,0)[u]=c==="-"?1:-1,w4.set(0,0,0)[f]=h==="-"?-1:1,PO.lookAt(F2e,O2.cross(w4),w4),a.setFromMatrix4(PO)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ee){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Ee){return O2.copy(e),this.localPositionToTextCoords(this.worldToLocal(O2),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?fX():hX(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let h=s[0]+c.getX(u)*(s[2]-s[0]);const f=s[1]+c.getY(u)*(s[3]-s[1]);let d=0;r&&(d=r-Math.cos(h/r)*r,h=Math.sin(h/r)*r),l.setXYZ(u,h,f,d)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,g1.length=0,o.raycast(e,g1);for(let u=0;u<g1.length;u++)g1[u].object=this,t.push(g1[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,z2e.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};dX.forEach(n=>{const e="_private_"+n;Object.defineProperty(pX.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const k2e=w.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},c)=>{const u=Se(({invalidate:m})=>m),[h]=w.useState(()=>new pX),[f,d]=w.useMemo(()=>{const m=[];let A="";return w.Children.forEach(s,y=>{typeof y=="string"||typeof y=="number"?A+=y:m.push(y)}),[m,A]},[s]);return Ic(()=>new Promise(m=>E2e({font:i,characters:o},m)),["troika-text",i,o]),w.useLayoutEffect(()=>void h.sync(()=>{u(),a&&a(h)})),w.useEffect(()=>()=>h.dispose(),[h]),w.createElement("primitive",Ye({object:h,ref:c,font:i,text:d,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),f)});let C4=null;async function N2e(n){return typeof n=="string"?await(await fetch(n)).json():n}function G2e(n){return C4||(C4=new Yve),C4.parse(n)}async function mX(n){const e=await N2e(n);return G2e(e)}function jE(n){return Ic(mX,[n])}jE.preload=n=>JQ(mX,[n]);jE.clear=n=>gE([n]);const H2e=["string","number"],Q2e=n=>{let e="";const t=[];return w.Children.forEach(n,i=>{H2e.includes(typeof i)?e+=i+"":t.push(i)}),[e,...t]},gX=w.forwardRef(({font:n,letterSpacing:e=0,lineHeight:t=1,size:i=1,height:r=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:h,children:f,...d},m)=>{w.useMemo(()=>si({RenamedTextGeometry:Eve}),[]);const A=w.useRef(null),y=jE(n),p=w.useMemo(()=>({font:y,size:i,height:r,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:t}),[y,i,r,s,o,a,c,l,u,e,t]),[g,...v]=w.useMemo(()=>Q2e(f),[f]),E=w.useMemo(()=>[g,p],[g,p]);return w.useLayoutEffect(()=>{h&&(A.current.geometry=Sge(A.current.geometry,h),A.current.geometry.computeVertexNormals())},[E,h]),w.useImperativeHandle(m,()=>A.current,[]),w.createElement("mesh",Ye({},d,{ref:A}),w.createElement("renamedTextGeometry",{args:E}),v)}),V2e=()=>{try{var n=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&n.getContext("webgl2"))}catch{return!1}},W2e=w.forwardRef(({children:n,multisamping:e=8,renderIndex:t=1,disableRender:i,disableGamma:r,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:c,type:u,...h},f)=>{w.useMemo(()=>si({EffectComposer:OAe,RenderPass:kAe,ShaderPass:Wb}),[]);const d=w.useRef(null);w.useImperativeHandle(f,()=>d.current,[]);const{scene:m,camera:A,gl:y,size:p,viewport:g}=Se(),[v]=w.useState(()=>{const S=new Rn(p.width,p.height,{type:u||Ln,format:Dn,depthBuffer:o,stencilBuffer:a,anisotropy:l});return u===$n&&c!=null&&("colorSpace"in S?S.texture.colorSpace=c:S.texture.encoding=c),S.samples=e,S});w.useEffect(()=>{var S,C;(S=d.current)==null||S.setSize(p.width,p.height),(C=d.current)==null||C.setPixelRatio(g.dpr)},[y,p,g.dpr]),yt(()=>{var S;i||(S=d.current)==null||S.render()},t);const E=[];return s||E.push(w.createElement("renderPass",{key:"renderpass",attach:`passes-${E.length}`,args:[m,A]})),r||E.push(w.createElement("shaderPass",{attach:`passes-${E.length}`,key:"gammapass",args:[wve]})),w.Children.forEach(n,S=>{S&&E.push(w.cloneElement(S,{key:E.length,attach:`passes-${E.length}`}))}),w.createElement("effectComposer",Ye({ref:d,args:[y,v]},h),E)});let tT=function(n){return n.Linear="linear",n.Radial="radial",n}({});function j2e({stops:n,colors:e,size:t=1024,width:i=16,type:r=tT.Linear,innerCircleRadius:s=0,outerCircleRadius:o="auto",...a}){const l=Se(u=>u.gl),c=w.useMemo(()=>{const u=document.createElement("canvas"),h=u.getContext("2d");u.width=i,u.height=t;let f;if(r===tT.Linear)f=h.createLinearGradient(0,0,0,t);else{const A=u.width/2,y=u.height/2,p=o!=="auto"?Math.abs(Number(o)):Math.sqrt(A**2+y**2);f=h.createRadialGradient(A,y,Math.abs(s),A,y,p)}const d=new We;let m=n.length;for(;m--;)f.addColorStop(n[m],d.set(e[m]).getStyle());return h.save(),h.fillStyle=f,h.fillRect(0,0,i,t),h.restore(),u},[n]);return w.createElement("canvasTexture",Ye({colorSpace:l.outputColorSpace,args:[c],attach:"map"},a))}function wo(n,e,t,i){const r=class extends Fn{constructor(o={}){const a=Object.entries(n);super({uniforms:a.reduce((l,[c,u])=>{const h=ca.clone({[c]:{value:u}});return{...l,...h}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),i&&i(this)}};return r.key=Dt.generateUUID(),r}const om=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function sh(n,e){const t=Se(s=>s.gl),i=hi(Tl,om(n)?Object.values(n):n);return w.useLayoutEffect(()=>{e==null||e(i)},[e]),w.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof In?s=[i]:om(i)&&(s=Object.values(i)),s.forEach(o=>{o instanceof In&&t.initTexture(o)})}},[t,i]),w.useMemo(()=>{if(om(n)){const s={};let o=0;for(const a in n)s[a]=i[o++];return s}else return i},[n,i])}sh.preload=n=>hi.preload(Tl,n);sh.clear=n=>hi.clear(Tl,n);const X2e=({children:n,input:e,onLoad:t})=>{const i=sh(e,t);return w.createElement(w.Fragment,null,n==null?void 0:n(i))},Y2e=()=>parseInt(ja.replace(/\D+/g,"")),Ts=Y2e(),DO=wo({color:new We("white"),scale:new Ee(1,1),imageBounds:new Ee(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),AX=w.forwardRef(({children:n,color:e,segments:t=1,scale:i=1,zoom:r=1,grayscale:s=0,opacity:o=1,radius:a=0,texture:l,toneMapped:c,transparent:u,side:h,...f},d)=>{si({ImageMaterial:DO});const m=w.useRef(null),A=Se(v=>v.size),y=Array.isArray(i)?[i[0],i[1]]:[i,i],p=[l.image.width,l.image.height],g=Math.max(A.width,A.height);return w.useImperativeHandle(d,()=>m.current,[]),w.useLayoutEffect(()=>{m.current.geometry.parameters&&m.current.material.scale.set(y[0]*m.current.geometry.parameters.width,y[1]*m.current.geometry.parameters.height)},[]),w.createElement("mesh",Ye({ref:m,scale:Array.isArray(i)?[...i,1]:i},f),w.createElement("planeGeometry",{args:[1,1,t,t]}),w.createElement("imageMaterial",{color:e,map:l,zoom:r,grayscale:s,opacity:o,scale:y,imageBounds:p,resolution:g,radius:a,toneMapped:c,transparent:u,side:h,key:DO.key}),n)}),q2e=w.forwardRef(({url:n,...e},t)=>{const i=sh(n);return w.createElement(AX,Ye({},e,{texture:i,ref:t}))}),K2e=w.forwardRef(({url:n,...e},t)=>w.createElement(AX,Ye({},e,{ref:t}))),J2e=w.forwardRef((n,e)=>{if(n.url)return w.createElement(q2e,Ye({},n,{ref:e}));if(n.texture)return w.createElement(K2e,Ye({},n,{ref:e}));throw new Error("<Image /> requires a url or texture")}),vX=w.forwardRef(({threshold:n=15,geometry:e,...t},i)=>{const r=w.useRef(null);w.useImperativeHandle(i,()=>r.current,[]);const s=w.useMemo(()=>[0,0,0,1,0,0],[]),o=w.useRef(),a=w.useRef();return w.useLayoutEffect(()=>{const l=r.current.parent,c=e??(l==null?void 0:l.geometry);if(!c||o.current===c&&a.current===n)return;o.current=c,a.current=n;const h=new f6(c,n).attributes.position.array;r.current.geometry.setPositions(h),r.current.geometry.attributes.instanceStart.needsUpdate=!0,r.current.geometry.attributes.instanceEnd.needsUpdate=!0,r.current.computeLineDistances()}),w.createElement(Va,Ye({segments:!0,points:s,ref:r,raycast:()=>null},t))}),LO=wo({screenspace:!1,color:new We("black"),opacity:1,thickness:.05,size:new Ee},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform bool screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function Z2e({color:n="black",opacity:e=1,transparent:t=!1,screenspace:i=!1,toneMapped:r=!0,polygonOffset:s=!1,polygonOffsetFactor:o=0,renderOrder:a=0,thickness:l=.05,angle:c=Math.PI,...u}){const h=w.useRef(),[f]=w.useState(()=>new LO({side:Ni})),{gl:d}=Se(),m=d.getDrawingBufferSize(new Ee);w.useMemo(()=>si({OutlinesMaterial:LO}),[]);const A=w.useRef(0),y=w.useRef();return w.useLayoutEffect(()=>{const p=h.current;if(!p)return;const g=p.parent;if(g&&g.geometry&&(A.current!==c||y.current!==g.geometry)){var v;A.current=c,y.current=g.geometry;let E=(v=p.children)==null?void 0:v[0];E&&(c&&E.geometry.dispose(),p.remove(E)),g.skeleton?(E=new kA,E.material=f,E.bind(g.skeleton,g.bindMatrix),p.add(E)):g.isInstancedMesh?(E=new NA(g.geometry,f,g.count),E.instanceMatrix=g.instanceMatrix,p.add(E)):(E=new ct,E.material=f,p.add(E)),E.geometry=c?fj(g.geometry,c):g.geometry}}),w.useLayoutEffect(()=>{const p=h.current;if(!p)return;const g=p.children[0];g&&(g.renderOrder=a,sr(g.material,{transparent:t,thickness:l,color:n,opacity:e,size:m,screenspace:i,toneMapped:r,polygonOffset:s,polygonOffsetFactor:o}))}),w.useEffect(()=>()=>{const p=h.current;if(!p)return;const g=p.children[0];g&&(c&&g.geometry.dispose(),p.remove(g))},[]),w.createElement("group",Ye({ref:h},u))}var $2e=Object.defineProperty,exe=(n,e,t)=>e in n?$2e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wn=(n,e,t)=>(exe(n,typeof e!="symbol"?e+"":e,t),t);function M4(n,e,t,i,r){let s;if(n=n.subarray||n.slice?n:n.buffer,t=t.subarray||t.slice?t:t.buffer,n=e?n.subarray?n.subarray(e,r&&e+r):n.slice(e,r&&e+r):n,t.set)t.set(n,i);else for(s=0;s<n.length;s++)t[s+i]=n[s];return t}function txe(n){return n instanceof Float32Array?n:n instanceof It?n.getAttribute("position").array:n.map(e=>{const t=Array.isArray(e);return e instanceof D?[e.x,e.y,e.z]:e instanceof Ee?[e.x,e.y,0]:t&&e.length===3?[e[0],e[1],e[2]]:t&&e.length===2?[e[0],e[1],0]:e}).flat()}class nxe extends It{constructor(){super(),Wn(this,"type","MeshLine"),Wn(this,"isMeshLine",!0),Wn(this,"positions",[]),Wn(this,"previous",[]),Wn(this,"next",[]),Wn(this,"side",[]),Wn(this,"width",[]),Wn(this,"indices_array",[]),Wn(this,"uvs",[]),Wn(this,"counters",[]),Wn(this,"widthCallback",null),Wn(this,"_attributes"),Wn(this,"_points",[]),Wn(this,"points"),Wn(this,"matrixWorld",new Oe),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,t){if(e=txe(e),this._points=e,this.widthCallback=t??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof D)for(let i=0;i<e.length;i++){const r=e[i],s=i/(e.length-1);this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(s),this.counters.push(s)}else for(let i=0;i<e.length;i+=3){const r=i/(e.length-1);this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r)}this.process()}compareV3(e,t){const i=e*6,r=t*6;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const t=e*6;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let t,i;this.compareV3(0,e-1)?i=this.copyV3(e-2):i=this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),this.widthCallback?t=this.widthCallback(r/(e-1)):t=1,this.width.push(t),this.width.push(t),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=r*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}this.compareV3(e-1,0)?i=this.copyV3(1):i=this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new zt(new Float32Array(this.positions),3),previous:new zt(new Float32Array(this.previous),3),next:new zt(new Float32Array(this.next),3),side:new zt(new Float32Array(this.side),1),width:new zt(new Float32Array(this.width),1),uv:new zt(new Float32Array(this.uvs),2),index:new zt(new Uint16Array(this.indices_array),1),counters:new zt(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:t,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=r.length;M4(r,0,s,0,a),M4(r,6,r,0,a-6),r[a-6]=e,r[a-5]=t,r[a-4]=i,r[a-3]=e,r[a-2]=t,r[a-1]=i,M4(r,6,o,0,a-6),o[a-6]=e,o[a-5]=t,o[a-4]=i,o[a-3]=e,o[a-2]=t,o[a-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const ixe=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,rxe=parseInt(ja.replace(/\D+/g,"")),sxe=rxe>=154?"colorspace_fragment":"encodings_fragment",oxe=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${sxe}>
  }
`;class axe extends Fn{constructor(e){super({uniforms:{...gt.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new We(16777215)},gradient:{value:[new We(16711680),new We(65280)]},opacity:{value:1},resolution:{value:new Ee(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new Ee(1,1)}},vertexShader:ixe,fragmentShader:oxe}),Wn(this,"lineWidth"),Wn(this,"map"),Wn(this,"useMap"),Wn(this,"alphaMap"),Wn(this,"useAlphaMap"),Wn(this,"color"),Wn(this,"gradient"),Wn(this,"resolution"),Wn(this,"sizeAttenuation"),Wn(this,"dashArray"),Wn(this,"dashOffset"),Wn(this,"dashRatio"),Wn(this,"useDash"),Wn(this,"useGradient"),Wn(this,"visibility"),Wn(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(t){this.uniforms.gradient.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=t!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(t){this.uniforms.useGradient.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const yX={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},lxe=(n,e=1)=>(n.set(n.subarray(e)),n.fill(-1/0,-e),n);function xX(n,e){const{length:t,local:i,decay:r,interval:s,stride:o}={...yX,...e},a=w.useRef(),[l]=w.useState(()=>new D);w.useLayoutEffect(()=>{n&&(a.current=Float32Array.from({length:t*10*3},(h,f)=>n.position.getComponent(f%3)))},[t,n]);const c=w.useRef(new D),u=w.useRef(0);return yt(()=>{if(n&&a.current){if(u.current===0){let h;i?h=n.position:(n.getWorldPosition(l),h=l);const f=1*r;for(let d=0;d<f;d++)h.distanceTo(c.current)<o||(lxe(a.current,3),a.current.set(h.toArray(),a.current.length-3));c.current.copy(h)}u.current++,u.current=u.current%s}}),a}const cxe=w.forwardRef((n,e)=>{const{children:t}=n,{width:i,length:r,decay:s,local:o,stride:a,interval:l}={...yX,...n},{color:c="hotpink",attenuation:u,target:h}=n,f=Se(E=>E.size),d=Se(E=>E.scene),m=w.useRef(null),[A,y]=w.useState(null),p=xX(A,{length:r,decay:s,local:o,stride:a,interval:l});w.useEffect(()=>{const E=(h==null?void 0:h.current)||m.current.children.find(S=>S instanceof kt);E&&y(E)},[p,h]);const g=w.useMemo(()=>new nxe,[]),v=w.useMemo(()=>{var E;const S=new axe({lineWidth:.1*i,color:c,sizeAttenuation:1,resolution:new Ee(f.width,f.height)});let C;if(t)if(Array.isArray(t))C=t.find(M=>{const b=M;return typeof b.type=="string"&&b.type==="meshLineMaterial"});else{const M=t;typeof M.type=="string"&&M.type==="meshLineMaterial"&&(C=M)}return typeof((E=C)==null?void 0:E.props)=="object"&&S.setValues(C.props),S},[i,c,f,t]);return w.useEffect(()=>{v.uniforms.resolution.value.set(f.width,f.height)},[f]),yt(()=>{p.current&&g.setPoints(p.current,u)}),w.createElement("group",null,Bc(w.createElement("mesh",{ref:e,geometry:g,material:v}),d),w.createElement("group",{ref:m},t))});function _X(n,e=16,t,i,r){const[s,o]=w.useState(()=>{const a=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new Qa(Float32Array.from(a),16)});return w.useLayoutEffect(()=>{if(typeof n.current>"u")return;const a=new Kge(n.current);i&&a.setWeightAttribute(i),a.build();const l=new D,c=new D,u=new We,h=new kt;n.current.updateMatrixWorld(!0);for(let f=0;f<e;f++)a.sample(l,c,u),typeof t=="function"?t({dummy:h,sampledMesh:n.current,position:l,normal:c,color:u},f):h.position.copy(l),h.updateMatrix(),r!=null&&r.current&&r.current.setMatrixAt(f,h.matrix),h.matrix.toArray(s.array,f*16);r!=null&&r.current&&(r.current.instanceMatrix.needsUpdate=!0),s.needsUpdate=!0,o(new Qa(s.array,s.itemSize).copy(s))},[n,r,i,e,t]),s}function uxe({children:n,weight:e,transform:t,instances:i,mesh:r,count:s=16,...o}){const a=w.useRef(null),l=w.useRef(null),c=w.useRef(null);return w.useLayoutEffect(()=>{var u,h;l.current=(u=i==null?void 0:i.current)!==null&&u!==void 0?u:a.current.children.find(f=>f.hasOwnProperty("instanceMatrix")),c.current=(h=r==null?void 0:r.current)!==null&&h!==void 0?h:a.current.children.find(f=>f.type==="Mesh")},[n,r==null?void 0:r.current,i==null?void 0:i.current]),_X(c,s,t,e,l),w.createElement("group",Ye({ref:a},o),n)}const hxe=({compute:n,name:e,...t})=>{const[i]=w.useState(()=>new zt(new Float32Array(0),1)),r=w.useRef(null);return w.useLayoutEffect(()=>{if(r.current){var s;const o=(s=r.current.parent)!==null&&s!==void 0?s:r.current.__r3f.parent,a=n(o);r.current.copy(a)}},[n]),w.createElement("primitive",Ye({ref:r,object:i,attach:`attributes-${e}`},t))};function fxe(n,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:t,inject:i,castShadow:r,receiveShadow:s}){let o={};for(const a of e)o[a]=n[a];return t&&(o.geometry&&t!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&t!=="geometriesOnly"&&(o.material=o.material.clone())),i&&(typeof i=="function"?o={...o,children:i(n)}:w.isValidElement(i)?o={...o,children:i}:o={...o,...i}),n instanceof ct&&(r&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const wA=w.forwardRef(({isChild:n=!1,object:e,children:t,deep:i,castShadow:r,receiveShadow:s,inject:o,keys:a,...l},c)=>{const u={keys:a,deep:i,inject:o,castShadow:r,receiveShadow:s};if(e=w.useMemo(()=>{if(n===!1&&!Array.isArray(e)){let m=!1;if(e.traverse(A=>{A.isSkinnedMesh&&(m=!0)}),m)return qge.clone(e)}return e},[e,n]),Array.isArray(e))return w.createElement("group",Ye({},l,{ref:c}),e.map(m=>w.createElement(wA,Ye({key:m.uuid,object:m},u))),t);const{children:h,...f}=fxe(e,u),d=e.type[0].toLowerCase()+e.type.slice(1);return w.createElement(d,Ye({},f,l,{ref:c}),e.children.map(m=>m.type==="Bone"?w.createElement("primitive",Ye({key:m.uuid,object:m},u)):w.createElement(wA,Ye({key:m.uuid,object:m},u,{isChild:!0}))),t,h)}),M8=w.createContext(null),dxe=w.forwardRef(({resolution:n=28,maxPolyCount:e=1e4,enableUvs:t=!1,enableColors:i=!1,children:r,...s},o)=>{const a=w.useRef(null);w.useImperativeHandle(o,()=>a.current,[]);const l=w.useMemo(()=>new zge(n,null,t,i,e),[n,e,t,i]),c=w.useMemo(()=>({getParent:()=>a}),[]);return yt(()=>{l.update(),l.reset()},-1),w.createElement(w.Fragment,null,w.createElement("primitive",Ye({object:l,ref:a},s),w.createElement(M8.Provider,{value:c},r)))}),pxe=w.forwardRef(({strength:n=.5,subtract:e=12,color:t,...i},r)=>{const{getParent:s}=w.useContext(M8),o=w.useMemo(()=>s(),[s]),a=w.useRef(null);w.useImperativeHandle(r,()=>a.current,[]);const l=new D;return yt(c=>{!o.current||!a.current||(a.current.getWorldPosition(l),o.current.addBall(.5+l.x*.5,.5+l.y*.5,.5+l.z*.5,n,e,t))}),w.createElement("group",Ye({ref:a},i))}),mxe=w.forwardRef(({planeType:n="x",strength:e=.5,subtract:t=12,...i},r)=>{const{getParent:s}=w.useContext(M8),o=w.useMemo(()=>s(),[s]),a=w.useRef(null);w.useImperativeHandle(r,()=>a.current,[]);const l=w.useMemo(()=>n==="x"?"addPlaneX":n==="y"?"addPlaneY":"addPlaneZ",[n]);return yt(()=>{!o.current||!a.current||o.current[l](e,t)}),w.createElement("group",Ye({ref:a},i))});function gxe(n){return Array.isArray(n)}function b4(n=[0,0,0]){return gxe(n)?n:n instanceof D||n instanceof Rr?[n.x,n.y,n.z]:[n,n,n]}const Axe=w.forwardRef(function({debug:e,depthTest:t=!1,polygonOffsetFactor:i=-10,map:r,mesh:s,children:o,position:a,rotation:l,scale:c,...u},h){const f=w.useRef(null);w.useImperativeHandle(h,()=>f.current);const d=w.useRef(null);return w.useLayoutEffect(()=>{const m=(s==null?void 0:s.current)||f.current.parent,A=f.current;if(!(m instanceof ct))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const y={position:new D,rotation:new Rr,scale:new D(1,1,1)};if(m){sr(y,{position:a,scale:c});const p=m.matrixWorld.clone();if(m.matrixWorld.identity(),!l||typeof l=="number"){const g=new kt;g.position.copy(y.position),g.lookAt(m.position),typeof l=="number"&&g.rotateZ(l),sr(y,{rotation:g.rotation})}else sr(y,{rotation:l});return A.geometry=new _ve(m,y.position,y.rotation,y.scale),d.current&&(sr(d.current,y),d.current.traverse(g=>g.raycast=()=>null)),m.matrixWorld=p,()=>{A.geometry.dispose()}}},[s,...b4(a),...b4(c),...b4(l)]),w.createElement("mesh",Ye({ref:f,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":i,"material-depthTest":t,"material-map":r},u),o,e&&w.createElement("mesh",{ref:d},w.createElement("boxGeometry",null),w.createElement("meshNormalMaterial",{wireframe:!0}),w.createElement("axesHelper",null)))}),vxe=w.forwardRef(function({src:e,skipFill:t,skipStrokes:i,fillMaterial:r,strokeMaterial:s,fillMeshProps:o,strokeMeshProps:a,...l},c){const u=hi(bg,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),h=w.useMemo(()=>i?[]:u.paths.map(f=>{var d;return((d=f.userData)==null?void 0:d.style.stroke)===void 0||f.userData.style.stroke==="none"?null:f.subPaths.map(m=>bg.pointsToStroke(m.getPoints(),f.userData.style))}),[u,i]);return w.useEffect(()=>()=>h.forEach(f=>f&&f.map(d=>d.dispose())),[h]),w.createElement("object3D",Ye({ref:c},l),w.createElement("object3D",{scale:[1,-1,1]},u.paths.map((f,d)=>{var m,A;return w.createElement(w.Fragment,{key:d},!t&&((m=f.userData)==null?void 0:m.style.fill)!==void 0&&f.userData.style.fill!=="none"&&bg.createShapes(f).map((y,p)=>w.createElement("mesh",Ye({key:p},o),w.createElement("shapeGeometry",{args:[y]}),w.createElement("meshBasicMaterial",Ye({color:f.userData.style.fill,opacity:f.userData.style.fillOpacity,transparent:!0,side:Vn,depthWrite:!1},r)))),!i&&((A=f.userData)==null?void 0:A.style.stroke)!==void 0&&f.userData.style.stroke!=="none"&&f.subPaths.map((y,p)=>w.createElement("mesh",Ye({key:p,geometry:h[d][p]},a),w.createElement("meshBasicMaterial",Ye({color:f.userData.style.stroke,opacity:f.userData.style.strokeOpacity,transparent:!0,side:Vn,depthWrite:!1},s)))))})))});let U2=null,EX="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function wX(n,e,t){return i=>{t&&t(i),n&&(U2||(U2=new wye),U2.setDecoderPath(typeof n=="string"?n:EX),i.setDRACOLoader(U2)),e&&i.setMeshoptDecoder(typeof x4=="function"?x4():x4)}}function lv(n,e=!0,t=!0,i){return hi(x8,n,wX(e,t,i))}lv.preload=(n,e=!0,t=!0,i)=>hi.preload(x8,n,wX(e,t,i));lv.clear=n=>hi.clear(x8,n);lv.setDecoderPath=n=>{EX=n};const yxe=w.forwardRef(({src:n,useDraco:e,useMeshOpt:t,extendLoader:i,...r},s)=>{const{scene:o}=lv(n,e,t,i);return w.createElement(wA,Ye({ref:s},r,{object:o}))});function xxe({renderIndex:n=1,bgColor:e="black",fgColor:t="white",characters:i=" .:-+*=%@#",invert:r=!0,color:s=!1,resolution:o=.15}){const{size:a,gl:l,scene:c,camera:u}=Se(),h=w.useMemo(()=>{const f=new bve(l,i,{invert:r,color:s,resolution:o});return f.domElement.style.position="absolute",f.domElement.style.top="0px",f.domElement.style.left="0px",f.domElement.style.pointerEvents="none",f},[i,r,s,o]);return w.useLayoutEffect(()=>{h.domElement.style.color=t,h.domElement.style.backgroundColor=e},[t,e]),w.useEffect(()=>(l.domElement.style.opacity="0",l.domElement.parentNode.appendChild(h.domElement),()=>{l.domElement.style.opacity="1",l.domElement.parentNode.removeChild(h.domElement)}),[h]),w.useEffect(()=>{h.setSize(a.width,a.height)},[h,a]),yt(f=>{h.render(c,u)},n),w.createElement(w.Fragment,null)}const FO=wo({alphaTest:0,viewport:new Ee(1980,1080),focal:1e3,centerAndScaleTexture:null,covAndColorTexture:null},`
    precision highp sampler2D;
    precision highp usampler2D;
    out vec4 vColor;
    out vec3 vPosition;
    uniform vec2 resolution;
    uniform vec2 viewport;
    uniform float focal;
    attribute uint splatIndex;
    uniform sampler2D centerAndScaleTexture;
    uniform usampler2D covAndColorTexture;    

    vec2 unpackInt16(in uint value) {
      int v = int(value);
      int v0 = v >> 16;
      int v1 = (v & 0xFFFF);
      if((v & 0x8000) != 0)
        v1 |= 0xFFFF0000;
      return vec2(float(v1), float(v0));
    }

    void main () {
      ivec2 texSize = textureSize(centerAndScaleTexture, 0);
      ivec2 texPos = ivec2(splatIndex%uint(texSize.x), splatIndex/uint(texSize.x));
      vec4 centerAndScaleData = texelFetch(centerAndScaleTexture, texPos, 0);
      vec4 center = vec4(centerAndScaleData.xyz, 1);
      vec4 camspace = modelViewMatrix * center;
      vec4 pos2d = projectionMatrix * camspace;

      float bounds = 1.2 * pos2d.w;
      if (pos2d.z < -pos2d.w || pos2d.x < -bounds || pos2d.x > bounds
        || pos2d.y < -bounds || pos2d.y > bounds) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
      }

      uvec4 covAndColorData = texelFetch(covAndColorTexture, texPos, 0);
      vec2 cov3D_M11_M12 = unpackInt16(covAndColorData.x) * centerAndScaleData.w;
      vec2 cov3D_M13_M22 = unpackInt16(covAndColorData.y) * centerAndScaleData.w;
      vec2 cov3D_M23_M33 = unpackInt16(covAndColorData.z) * centerAndScaleData.w;
      mat3 Vrk = mat3(
        cov3D_M11_M12.x, cov3D_M11_M12.y, cov3D_M13_M22.x,
        cov3D_M11_M12.y, cov3D_M13_M22.y, cov3D_M23_M33.x,
        cov3D_M13_M22.x, cov3D_M23_M33.x, cov3D_M23_M33.y
      );

      mat3 J = mat3(
        focal / camspace.z, 0., -(focal * camspace.x) / (camspace.z * camspace.z),
        0., focal / camspace.z, -(focal * camspace.y) / (camspace.z * camspace.z),
        0., 0., 0.
      );

      mat3 W = transpose(mat3(modelViewMatrix));
      mat3 T = W * J;
      mat3 cov = transpose(T) * Vrk * T;
      vec2 vCenter = vec2(pos2d) / pos2d.w;
      float diagonal1 = cov[0][0] + 0.3;
      float offDiagonal = cov[0][1];
      float diagonal2 = cov[1][1] + 0.3;
      float mid = 0.5 * (diagonal1 + diagonal2);
      float radius = length(vec2((diagonal1 - diagonal2) / 2.0, offDiagonal));
      float lambda1 = mid + radius;
      float lambda2 = max(mid - radius, 0.1);
      vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));
      vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
      vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);
      uint colorUint = covAndColorData.w;
      vColor = vec4(
        float(colorUint & uint(0xFF)) / 255.0,
        float((colorUint >> uint(8)) & uint(0xFF)) / 255.0,
        float((colorUint >> uint(16)) & uint(0xFF)) / 255.0,
        float(colorUint >> uint(24)) / 255.0
      );
      vPosition = position;

      gl_Position = vec4(
        vCenter 
          + position.x * v2 / viewport * 2.0 
          + position.y * v1 / viewport * 2.0, pos2d.z / pos2d.w, 1.0);
    }
    `,`
    #include <alphatest_pars_fragment>
    #include <alphahash_pars_fragment>
    in vec4 vColor;
    in vec3 vPosition;
    void main () {
      float A = -dot(vPosition.xy, vPosition.xy);
      if (A < -4.0) discard;
      float B = exp(A) * vColor.a;
      vec4 diffuseColor = vec4(vColor.rgb, B);
      #include <alphatest_fragment>
      #include <alphahash_fragment>
      gl_FragColor = diffuseColor;
      #include <tonemapping_fragment>
      #include <${parseInt(ja.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `);function _xe(n){let e=null,t=0;function i(r,s=!1){const o=e.length/16,a=-1e-4;let l=-1/0,c=1/0;const u=new Float32Array(o),h=new Int32Array(u.buffer),f=new Int32Array(o);let d=0;for(let g=0;g<o;g++){const v=r[0]*e[g*16+12]+r[1]*e[g*16+13]+r[2]*e[g*16+14]+r[3];(s||v<0&&e[g*16+15]>a*v)&&(u[d]=v,f[d]=g,d++,v>l&&(l=v),v<c&&(c=v))}const m=(256*256-1)/(l-c),A=new Uint32Array(256*256);for(let g=0;g<d;g++)h[g]=(u[g]-c)*m|0,A[h[g]]++;const y=new Uint32Array(256*256);for(let g=1;g<256*256;g++)y[g]=y[g-1]+A[g-1];const p=new Uint32Array(d);for(let g=0;g<d;g++)p[y[h[g]]++]=f[g];return p}n.onmessage=r=>{if(r.data.method=="push"){t===0&&(e=new Float32Array(r.data.length));const s=new Float32Array(r.data.matrices);e.set(s,t),t+=s.length}else if(r.data.method=="sort"&&e!==null){const s=i(new Float32Array(r.data.view),r.data.hashed);n.postMessage({indices:s,key:r.data.key},[s.buffer])}}}class Exe extends Hi{constructor(...e){super(...e),this.gl=null,this.chunkSize=25e3}load(e,t,i,r){const s={gl:this.gl,url:this.manager.resolveURL(e),worker:new Worker(URL.createObjectURL(new Blob(["(",_xe.toString(),")(self)"],{type:"application/javascript"}))),manager:this.manager,update:(o,a,l)=>Cxe(a,s,o,l),connect:o=>Mxe(s,o),loading:!1,loaded:!1,loadedVertexCount:0,chunkSize:this.chunkSize,totalDownloadBytes:0,numVertices:0,rowLength:32,maxVertexes:0,bufferTextureWidth:0,bufferTextureHeight:0,stream:null,centerAndScaleData:null,covAndColorData:null,covAndColorTexture:null,centerAndScaleTexture:null,onProgress:i};wxe(s).then(t).catch(o=>{r==null||r(o),s.manager.itemError(s.url)})}}async function wxe(n){n.manager.itemStart(n.url);const e=await fetch(n.url);if(e.body===null)throw"Failed to fetch file";let t=e.headers.get("Content-Length");const i=t?parseInt(t):void 0;if(i==null)throw"Failed to get content length";n.stream=e.body.getReader(),n.totalDownloadBytes=i,n.numVertices=Math.floor(n.totalDownloadBytes/n.rowLength);const r=n.gl.getContext();let s=r.getParameter(r.MAX_TEXTURE_SIZE);return n.maxVertexes=s*s,n.numVertices>n.maxVertexes&&(n.numVertices=n.maxVertexes),n.bufferTextureWidth=s,n.bufferTextureHeight=Math.floor((n.numVertices-1)/s)+1,n.centerAndScaleData=new Float32Array(n.bufferTextureWidth*n.bufferTextureHeight*4),n.covAndColorData=new Uint32Array(n.bufferTextureWidth*n.bufferTextureHeight*4),n.centerAndScaleTexture=new qs(n.centerAndScaleData,n.bufferTextureWidth,n.bufferTextureHeight,Dn,En),n.centerAndScaleTexture.needsUpdate=!0,n.covAndColorTexture=new qs(n.covAndColorData,n.bufferTextureWidth,n.bufferTextureHeight,wf,ss),n.covAndColorTexture.internalFormat="RGBA32UI",n.covAndColorTexture.needsUpdate=!0,n}async function Sxe(n){n.loading=!0;let e=0,t=0;const i=[];let r=0;const s=n.totalDownloadBytes!==0;for(;;)try{const{value:o,done:a}=await n.stream.read();if(a)break;if(e+=o.length,n.totalDownloadBytes!=null){const c=e/n.totalDownloadBytes*100;if(n.onProgress&&c-r>1){const u=new ProgressEvent("progress",{lengthComputable:s,loaded:e,total:n.totalDownloadBytes});n.onProgress(u),r=c}}i.push(o);const l=e-t;if(n.totalDownloadBytes!=null&&l>n.rowLength*n.chunkSize){let c=Math.floor(l/n.rowLength);const u=new Uint8Array(l);let h=0;for(const m of i)u.set(m,h),h+=m.length;if(i.length=0,l>c*n.rowLength){const m=new Uint8Array(l-c*n.rowLength);m.set(u.subarray(l-m.length,l),0),i.push(m)}const f=new Uint8Array(c*n.rowLength);f.set(u.subarray(0,f.byteLength),0);const d=OO(n,f.buffer,c);if(n.worker.postMessage({method:"push",src:n.url,length:n.numVertices*16,matrices:d.buffer},[d.buffer]),t+=c*n.rowLength,n.onProgress){const m=new ProgressEvent("progress",{lengthComputable:s,loaded:n.totalDownloadBytes,total:n.totalDownloadBytes});n.onProgress(m)}}}catch(o){console.error(o);break}if(e-t>0){let o=new Uint8Array(i.reduce((u,h)=>u+h.length,0)),a=0;for(const u of i)o.set(u,a),a+=u.length;let l=Math.floor(o.byteLength/n.rowLength);const c=OO(n,o.buffer,l);n.worker.postMessage({method:"push",src:n.url,length:l*16,matrices:c.buffer},[c.buffer])}n.loaded=!0,n.manager.itemEnd(n.url)}function Cxe(n,e,t,i){if(n.updateMatrixWorld(),e.gl.getCurrentViewport(t.viewport),t.material.viewport.x=t.viewport.z,t.material.viewport.y=t.viewport.w,t.material.focal=t.viewport.w/2*Math.abs(n.projectionMatrix.elements[5]),t.ready){if(i&&t.sorted)return;t.ready=!1;const r=new Float32Array([t.modelViewMatrix.elements[2],-t.modelViewMatrix.elements[6],t.modelViewMatrix.elements[10],t.modelViewMatrix.elements[14]]);e.worker.postMessage({method:"sort",src:e.url,key:t.uuid,view:r.buffer,hashed:i},[r.buffer]),i&&e.loaded&&(t.sorted=!0)}}function Mxe(n,e){n.loading||Sxe(n),e.ready=!1,e.pm=new Oe,e.vm1=new Oe,e.vm2=new Oe,e.viewport=new Yt;let t=new Uint32Array(n.bufferTextureWidth*n.bufferTextureHeight);const i=new Qa(t,1,!1);i.setUsage(os);const r=e.geometry=new jA,s=new Float32Array(6*3),o=new zt(s,3);r.setAttribute("position",o),o.setXYZ(2,-2,2,0),o.setXYZ(1,2,2,0),o.setXYZ(0,-2,-2,0),o.setXYZ(5,-2,-2,0),o.setXYZ(4,2,2,0),o.setXYZ(3,2,-2,0),o.needsUpdate=!0,r.setAttribute("splatIndex",i),r.instanceCount=1;function a(c){if(e&&c.data.key===e.uuid){let u=new Uint32Array(c.data.indices);r.attributes.splatIndex.set(u),r.attributes.splatIndex.needsUpdate=!0,r.instanceCount=u.length,e.ready=!0}}n.worker.addEventListener("message",a);async function l(){for(;;){const c=n.gl.properties.get(n.centerAndScaleTexture),u=n.gl.properties.get(n.covAndColorTexture);if(c!=null&&c.__webglTexture&&u!=null&&u.__webglTexture&&n.loadedVertexCount>0)break;await new Promise(h=>setTimeout(h,10))}e.ready=!0}return l(),()=>n.worker.removeEventListener("message",a)}function OO(n,e,t){const i=n.gl.getContext();if(n.loadedVertexCount+t>n.maxVertexes&&(t=n.maxVertexes-n.loadedVertexCount),t<=0)throw"Failed to parse file";const r=new Uint8Array(e),s=new Float32Array(e),o=new Float32Array(t*16),a=new Uint8Array(n.covAndColorData.buffer),l=new Int16Array(n.covAndColorData.buffer);for(let c=0;c<t;c++){const u=new St(-(r[32*c+28+1]-128)/128,(r[32*c+28+2]-128)/128,(r[32*c+28+3]-128)/128,-(r[32*c+28+0]-128)/128);u.invert();const h=new D(s[8*c+0],s[8*c+1],-s[8*c+2]),f=new D(s[8*c+3+0],s[8*c+3+1],s[8*c+3+2]),d=new Oe;d.makeRotationFromQuaternion(u),d.transpose(),d.scale(f);const m=d.clone();d.transpose(),d.premultiply(m),d.setPosition(h);const A=[0,1,2,5,6,10];let y=0;for(let v=0;v<A.length;v++)Math.abs(d.elements[A[v]])>y&&(y=Math.abs(d.elements[A[v]]));let p=n.loadedVertexCount*4+c*4;n.centerAndScaleData[p+0]=h.x,n.centerAndScaleData[p+1]=-h.y,n.centerAndScaleData[p+2]=h.z,n.centerAndScaleData[p+3]=y/32767,p=n.loadedVertexCount*8+c*4*2;for(let v=0;v<A.length;v++)l[p+v]=d.elements[A[v]]*32767/y;p=n.loadedVertexCount*16+(c*4+3)*4;const g=new We(r[32*c+24+0]/255,r[32*c+24+1]/255,r[32*c+24+2]/255);g.convertSRGBToLinear(),a[p+0]=g.r*255,a[p+1]=g.g*255,a[p+2]=g.b*255,a[p+3]=r[32*c+24+3],d.elements[15]=Math.max(f.x,f.y,f.z)*r[32*c+24+3]/255;for(let v=0;v<16;v++)o[c*16+v]=d.elements[v]}for(;t>0;){let c=0,u=0;const h=n.loadedVertexCount%n.bufferTextureWidth,f=Math.floor(n.loadedVertexCount/n.bufferTextureWidth);n.loadedVertexCount%n.bufferTextureWidth!=0?(c=Math.min(n.bufferTextureWidth,h+t)-h,u=1):Math.floor(t/n.bufferTextureWidth)>0?(c=n.bufferTextureWidth,u=Math.floor(t/n.bufferTextureWidth)):(c=t%n.bufferTextureWidth,u=1);const d=n.gl.properties.get(n.centerAndScaleTexture);i.bindTexture(i.TEXTURE_2D,d.__webglTexture),i.texSubImage2D(i.TEXTURE_2D,0,h,f,c,u,i.RGBA,i.FLOAT,n.centerAndScaleData,n.loadedVertexCount*4);const m=n.gl.properties.get(n.covAndColorTexture);i.bindTexture(i.TEXTURE_2D,m.__webglTexture),i.texSubImage2D(i.TEXTURE_2D,0,h,f,c,u,i.RGBA_INTEGER,i.UNSIGNED_INT,n.covAndColorData,n.loadedVertexCount*4),n.gl.resetState(),n.loadedVertexCount+=c*u,t-=c*u}return o}function bxe({src:n,toneMapped:e=!1,alphaTest:t=0,alphaHash:i=!1,chunkSize:r=25e3,...s}){si({SplatMaterial:FO});const o=w.useRef(null),a=Se(u=>u.gl),l=Se(u=>u.camera),c=hi(Exe,n,u=>{u.gl=a,u.chunkSize=r});return w.useLayoutEffect(()=>c.connect(o.current),[n]),yt(()=>c.update(o.current,l,i)),w.createElement("mesh",Ye({ref:o,frustumCulled:!1},s),w.createElement("splatMaterial",{key:`${n}/${t}/${i}${FO.key}`,transparent:!i,depthTest:!0,alphaTest:i?0:t,centerAndScaleTexture:c.centerAndScaleTexture,covAndColorTexture:c.covAndColorTexture,depthWrite:i?!0:t>0,blending:i?bu:P3,blendSrcAlpha:R3,alphaHash:!!i,toneMapped:e}))}function Es(n,e,t){const i=Se(f=>f.size),r=Se(f=>f.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=typeof e=="number"?e:i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...u}=a,h=w.useMemo(()=>{const f=new Rn(s,o,{minFilter:Ut,magFilter:Ut,type:Ln,...u});return c&&(f.depthTexture=new Hm(s,o,En)),f.samples=l,f},[]);return w.useLayoutEffect(()=>{h.setSize(s,o),l&&(h.samples=l)},[l,h,s,o]),w.useEffect(()=>()=>h.dispose(),[]),h}const Txe=({children:n,width:e,height:t,...i})=>{const r=Es(e,t,i);return w.createElement(w.Fragment,null,n==null?void 0:n(r))},Ixe=n=>typeof n=="function",SX=w.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...s},o)=>{const a=Se(({set:y})=>y),l=Se(({camera:y})=>y),c=Se(({size:y})=>y),u=w.useRef(null);w.useImperativeHandle(o,()=>u.current,[]);const h=w.useRef(null),f=Es(e);w.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[c,s]),w.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),w.useLayoutEffect(()=>{if(r){const y=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:y}))}},[u,r,a]);let d=0,m=null;const A=Ixe(i);return yt(y=>{A&&(t===1/0||d<t)&&(h.current.visible=!1,y.gl.setRenderTarget(f),m=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,u.current),y.scene.background=m,y.gl.setRenderTarget(null),h.current.visible=!0,d++)}),w.createElement(w.Fragment,null,w.createElement("orthographicCamera",Ye({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:u},s),!A&&i),w.createElement("group",{ref:h},A&&i(f.texture)))}),Bxe=n=>typeof n=="function",Pxe=w.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=Se(({set:y})=>y),l=Se(({camera:y})=>y),c=Se(({size:y})=>y),u=w.useRef(null);w.useImperativeHandle(o,()=>u.current,[]);const h=w.useRef(null),f=Es(e);w.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),w.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let d=0,m=null;const A=Bxe(r);return yt(y=>{A&&(t===1/0||d<t)&&(h.current.visible=!1,y.gl.setRenderTarget(f),m=y.scene.background,n&&(y.scene.background=n),y.gl.render(y.scene,u.current),y.scene.background=m,y.gl.setRenderTarget(null),h.current.visible=!0,d++)}),w.useLayoutEffect(()=>{if(i){const y=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:y}))}},[u,i,a]),w.createElement(w.Fragment,null,w.createElement("perspectiveCamera",Ye({ref:u},s),!A&&r),w.createElement("group",{ref:h},A&&r(f.texture)))});function CX({resolution:n=256,near:e=.1,far:t=1e3,envMap:i,fog:r}={}){const s=Se(({gl:f})=>f),o=Se(({scene:f})=>f),a=w.useMemo(()=>{const f=new km(n);return f.texture.type=Ln,f},[n]);w.useEffect(()=>()=>{a.dispose()},[a]);const l=w.useMemo(()=>new G3(e,t,a),[e,t,a]);let c,u;const h=w.useCallback(()=>{c=o.fog,u=o.background,o.background=i||u,o.fog=r||c,l.update(s,o),o.fog=c,o.background=u},[s,o,l]);return{fbo:a,camera:l,update:h}}function Rxe({children:n,frames:e=1/0,resolution:t,near:i,far:r,envMap:s,fog:o,...a}){const l=w.useRef(null),{fbo:c,camera:u,update:h}=CX({resolution:t,near:i,far:r,envMap:s,fog:o});let f=0;return yt(()=>{l.current&&(e===1/0||f<e)&&(l.current.visible=!1,h(),l.current.visible=!0,f++)}),w.createElement("group",a,w.createElement("primitive",{object:u}),w.createElement("group",{ref:l},n==null?void 0:n(c.texture)))}const Dxe=w.forwardRef((n,e)=>{const{camera:t,onChange:i,makeDefault:r,...s}=n,o=Se(f=>f.camera),a=Se(f=>f.invalidate),l=Se(f=>f.get),c=Se(f=>f.set),u=t||o,h=w.useMemo(()=>new dAe(u),[u]);return w.useEffect(()=>{const f=d=>{a(),i&&i(d)};return h==null||h.addEventListener==null||h.addEventListener("change",f),()=>h==null||h.removeEventListener==null?void 0:h.removeEventListener("change",f)},[i,h,a]),yt(()=>h==null?void 0:h.update(),-1),w.useEffect(()=>{const f=h;return f==null||f.connect(),()=>f==null?void 0:f.dispose()},[h]),w.useEffect(()=>{if(r){const f=l().controls;return c({controls:h}),()=>c({controls:f})}},[r,h]),h?w.createElement("primitive",Ye({ref:e,object:h},s)):null}),Lxe=w.forwardRef(({domElement:n,...e},t)=>{const{onChange:i,makeDefault:r,...s}=e,o=Se(m=>m.invalidate),a=Se(m=>m.camera),l=Se(m=>m.gl),c=Se(m=>m.events),u=Se(m=>m.get),h=Se(m=>m.set),f=n||c.connected||l.domElement,d=w.useMemo(()=>new MAe(a),[a]);return w.useEffect(()=>(d.connect(f),()=>void d.dispose()),[f,d,o]),w.useEffect(()=>{const m=A=>{o(),i&&i(A)};return d.addEventListener==null||d.addEventListener("change",m),()=>d.removeEventListener==null?void 0:d.removeEventListener("change",m)},[i,o]),w.useEffect(()=>{if(r){const m=u().controls;return h({controls:d}),()=>h({controls:m})}},[r,d]),yt((m,A)=>d.update(A)),w.createElement("primitive",Ye({ref:t,object:d,args:[a,f]},s))}),Fxe=w.forwardRef((n={enableDamping:!0},e)=>{const{domElement:t,camera:i,makeDefault:r,onChange:s,onStart:o,onEnd:a,...l}=n,c=Se(g=>g.invalidate),u=Se(g=>g.camera),h=Se(g=>g.gl),f=Se(g=>g.events),d=Se(g=>g.set),m=Se(g=>g.get),A=t||f.connected||h.domElement,y=i||u,p=w.useMemo(()=>new xAe(y),[y]);return w.useEffect(()=>{p.connect(A);const g=v=>{c(),s&&s(v)};return p.addEventListener("change",g),o&&p.addEventListener("start",o),a&&p.addEventListener("end",a),()=>{p.dispose(),p.removeEventListener("change",g),o&&p.removeEventListener("start",o),a&&p.removeEventListener("end",a)}},[s,o,a,p,c,A]),w.useEffect(()=>{if(r){const g=m().controls;return d({controls:p}),()=>d({controls:g})}},[r,p]),yt(()=>p.update(),-1),w.createElement("primitive",Ye({ref:e,object:p,enableDamping:!0},l))}),Oxe=w.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const h=Se(C=>C.invalidate),f=Se(C=>C.camera),d=Se(C=>C.gl),m=Se(C=>C.events),A=Se(C=>C.setEvents),y=Se(C=>C.set),p=Se(C=>C.get),g=Se(C=>C.performance),v=e||f,E=i||m.connected||d.domElement,S=w.useMemo(()=>new Cj(v),[v]);return yt(()=>{S.enabled&&S.update()},-1),w.useEffect(()=>(s&&S.connect(s===!0?E:s),S.connect(E),()=>void S.dispose()),[s,E,t,S,h]),w.useEffect(()=>{const C=T=>{h(),t&&g.regress(),o&&o(T)},M=T=>{a&&a(T)},b=T=>{l&&l(T)};return S.addEventListener("change",C),S.addEventListener("start",M),S.addEventListener("end",b),()=>{S.removeEventListener("start",M),S.removeEventListener("end",b),S.removeEventListener("change",C)}},[o,a,l,S,h,A]),w.useEffect(()=>{if(n){const C=p().controls;return y({controls:S}),()=>y({controls:C})}},[n,S]),w.createElement("primitive",Ye({ref:u,object:S,enableDamping:r},c))}),Uxe=w.forwardRef(({makeDefault:n,camera:e,domElement:t,regress:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const{invalidate:c,camera:u,gl:h,events:f,set:d,get:m,performance:A,viewport:y}=Se(),p=e||u,g=t||f.connected||h.domElement,v=w.useMemo(()=>new gAe(p),[p]);return yt(()=>{v.enabled&&v.update()},-1),w.useEffect(()=>(v.connect(g),()=>void v.dispose()),[g,i,v,c]),w.useEffect(()=>{const E=S=>{c(),i&&A.regress(),r&&r(S)};return v.addEventListener("change",E),s&&v.addEventListener("start",s),o&&v.addEventListener("end",o),()=>{s&&v.removeEventListener("start",s),o&&v.removeEventListener("end",o),v.removeEventListener("change",E)}},[r,s,o,v,c]),w.useEffect(()=>{v.handleResize()},[y]),w.useEffect(()=>{if(n){const E=m().controls;return d({controls:v}),()=>d({controls:E})}},[n,v]),w.createElement("primitive",Ye({ref:l,object:v},a))}),zxe=w.forwardRef(({camera:n,makeDefault:e,regress:t,domElement:i,onChange:r,onStart:s,onEnd:o,...a},l)=>{const c=Se(v=>v.invalidate),u=Se(v=>v.camera),h=Se(v=>v.gl),f=Se(v=>v.events),d=Se(v=>v.set),m=Se(v=>v.get),A=Se(v=>v.performance),y=n||u,p=i||f.connected||h.domElement,g=w.useMemo(()=>new wAe(y),[y]);return yt(()=>{g.enabled&&g.update()},-1),w.useEffect(()=>(g.connect(p),()=>void g.dispose()),[p,t,g,c]),w.useEffect(()=>{const v=E=>{c(),t&&A.regress(),r&&r(E)};return g.addEventListener("change",v),s&&g.addEventListener("start",s),o&&g.addEventListener("end",o),()=>{g.removeEventListener("change",v),s&&g.removeEventListener("start",s),o&&g.removeEventListener("end",o)}},[r,s,o]),w.useEffect(()=>{if(e){const v=m().controls;return d({controls:g}),()=>d({controls:v})}},[e,g]),w.createElement("primitive",Ye({ref:l,object:g},a))}),kxe=w.forwardRef(({children:n,domElement:e,onChange:t,onMouseDown:i,onMouseUp:r,onObjectChange:s,object:o,makeDefault:a,camera:l,enabled:c,axis:u,mode:h,translationSnap:f,rotationSnap:d,scaleSnap:m,space:A,size:y,showX:p,showY:g,showZ:v,...E},S)=>{const C=Se(U=>U.controls),M=Se(U=>U.gl),b=Se(U=>U.events),T=Se(U=>U.camera),I=Se(U=>U.invalidate),F=Se(U=>U.get),R=Se(U=>U.set),z=l||T,L=e||b.connected||M.domElement,H=w.useMemo(()=>new nAe(z,L),[z,L]),K=w.useRef(null);w.useLayoutEffect(()=>(o?H.attach(o instanceof kt?o:o.current):K.current instanceof kt&&H.attach(K.current),()=>void H.detach()),[o,n,H]),w.useEffect(()=>{if(C){const U=Y=>C.enabled=!Y.value;return H.addEventListener("dragging-changed",U),()=>H.removeEventListener("dragging-changed",U)}},[H,C]);const J=w.useRef(),O=w.useRef(),W=w.useRef(),V=w.useRef();return w.useLayoutEffect(()=>void(J.current=t),[t]),w.useLayoutEffect(()=>void(O.current=i),[i]),w.useLayoutEffect(()=>void(W.current=r),[r]),w.useLayoutEffect(()=>void(V.current=s),[s]),w.useEffect(()=>{const U=Q=>{I(),J.current==null||J.current(Q)},Y=Q=>O.current==null?void 0:O.current(Q),$=Q=>W.current==null?void 0:W.current(Q),N=Q=>V.current==null?void 0:V.current(Q);return H.addEventListener("change",U),H.addEventListener("mouseDown",Y),H.addEventListener("mouseUp",$),H.addEventListener("objectChange",N),()=>{H.removeEventListener("change",U),H.removeEventListener("mouseDown",Y),H.removeEventListener("mouseUp",$),H.removeEventListener("objectChange",N)}},[I,H]),w.useEffect(()=>{if(a){const U=F().controls;return R({controls:H}),()=>R({controls:U})}},[a,H]),w.createElement(w.Fragment,null,w.createElement("primitive",{ref:S,object:H,enabled:c,axis:u,mode:h,translationSnap:f,rotationSnap:d,scaleSnap:m,space:A,size:y,showX:p,showY:g,showZ:v}),w.createElement("group",Ye({ref:K},E),n))}),Nxe=w.forwardRef(({domElement:n,selector:e,onChange:t,onLock:i,onUnlock:r,enabled:s=!0,makeDefault:o,...a},l)=>{const{camera:c,...u}=a,h=Se(S=>S.setEvents),f=Se(S=>S.gl),d=Se(S=>S.camera),m=Se(S=>S.invalidate),A=Se(S=>S.events),y=Se(S=>S.get),p=Se(S=>S.set),g=c||d,v=n||A.connected||f.domElement,E=w.useMemo(()=>new uAe(g),[g]);return w.useEffect(()=>{if(s){E.connect(v);const S=y().events.compute;return h({compute(C,M){const b=M.size.width/2,T=M.size.height/2;M.pointer.set(b/M.size.width*2-1,-(T/M.size.height)*2+1),M.raycaster.setFromCamera(M.pointer,M.camera)}}),()=>{E.disconnect(),h({compute:S})}}},[s,E]),w.useEffect(()=>{const S=b=>{m(),t&&t(b)};E.addEventListener("change",S),i&&E.addEventListener("lock",i),r&&E.addEventListener("unlock",r);const C=()=>E.lock(),M=e?Array.from(document.querySelectorAll(e)):[document];return M.forEach(b=>b&&b.addEventListener("click",C)),()=>{E.removeEventListener("change",S),i&&E.removeEventListener("lock",i),r&&E.removeEventListener("unlock",r),M.forEach(b=>b?b.removeEventListener("click",C):void 0)}},[t,i,r,e,E,m]),w.useEffect(()=>{if(o){const S=y().controls;return p({controls:E}),()=>p({controls:S})}},[o,E]),w.createElement("primitive",Ye({ref:l,object:E},u))}),Gxe=w.forwardRef(({domElement:n,makeDefault:e,...t},i)=>{const r=Se(h=>h.camera),s=Se(h=>h.gl),o=Se(h=>h.events),a=Se(h=>h.get),l=Se(h=>h.set),c=n||o.connected||s.domElement,[u]=w.useState(()=>new $ge(r,c));return w.useEffect(()=>{if(e){const h=a().controls;return l({controls:u}),()=>l({controls:h})}},[e,u]),yt((h,f)=>{u.update(f)},-1),u?w.createElement("primitive",Ye({ref:i,object:u},t)):null});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const bi={LEFT:1,RIGHT:2,MIDDLE:4},Ze=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Wd={NONE:0,IN:1,OUT:-1};function zh(n){return n.isPerspectiveCamera}function tu(n){return n.isOrthographicCamera}const jd=Math.PI*2,UO=Math.PI/2,MX=1e-5,A1=Math.PI/180;function Ca(n,e,t){return Math.max(e,Math.min(t,n))}function li(n,e=MX){return Math.abs(n)<e}function jn(n,e,t=MX){return li(n-e,t)}function zO(n,e){return Math.round(n/e)*e}function v1(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function y1(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function z2(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const u=e,h=r*i;c=Ca(c,-h,h),e=n-c;const f=(t.value+o*c)*s;t.value=(t.value-o*f)*l;let d=e+(c+f)*l;return u-n>0==d>u&&(d=u,t.value=(d-u)/s),d}function kO(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const a=2/i,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,h=e.y,f=e.z,d=n.x-u,m=n.y-h,A=n.z-f;const y=u,p=h,g=f,v=r*i,E=v*v,S=d*d+m*m+A*A;if(S>E){const H=Math.sqrt(S);d=d/H*v,m=m/H*v,A=A/H*v}u=n.x-d,h=n.y-m,f=n.z-A;const C=(t.x+a*d)*s,M=(t.y+a*m)*s,b=(t.z+a*A)*s;t.x=(t.x-a*C)*c,t.y=(t.y-a*M)*c,t.z=(t.z-a*b)*c,o.x=u+(d+C)*c,o.y=h+(m+M)*c,o.z=f+(A+b)*c;const T=y-n.x,I=p-n.y,F=g-n.z,R=o.x-y,z=o.y-p,L=o.z-g;return T*R+I*z+F*L>0&&(o.x=y,o.y=p,o.z=g,t.x=(o.x-y)/s,t.y=(o.y-p)/s,t.z=(o.z-g)/s),o}function T4(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function I4(n,e){return tu(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Hxe{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}var B4;const Qxe="2.8.5",k2=1/8,Vxe=/Mac/.test((B4=globalThis==null?void 0:globalThis.navigator)===null||B4===void 0?void 0:B4.platform);let nn,NO,N2,P4,Os,mn,Hn,Xd,x1,al,ll,kh,GO,HO,Uo,_1,Yd,QO,R4,VO,D4,L4,G2,F4=class nT extends Hxe{static install(e){nn=e.THREE,NO=Object.freeze(new nn.Vector3(0,0,0)),N2=Object.freeze(new nn.Vector3(0,1,0)),P4=Object.freeze(new nn.Vector3(0,0,1)),Os=new nn.Vector2,mn=new nn.Vector3,Hn=new nn.Vector3,Xd=new nn.Vector3,x1=new nn.Vector3,al=new nn.Vector3,ll=new nn.Vector3,kh=new nn.Vector3,GO=new nn.Vector3,HO=new nn.Vector3,Uo=new nn.Spherical,_1=new nn.Spherical,Yd=new nn.Box3,QO=new nn.Box3,R4=new nn.Sphere,VO=new nn.Quaternion,D4=new nn.Quaternion,L4=new nn.Matrix4,G2=new nn.Raycaster}static get ACTION(){return Ze}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ze.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Wd.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new nn.Vector3,this._focalOffsetVelocity=new nn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(p,g,v)=>{let E,S;if(zh(this._camera)){const C=mn.copy(this._camera.position).sub(this._target),M=this._camera.getEffectiveFOV()*A1,b=C.length()*Math.tan(M*.5);E=this.truckSpeed*p*b/this._elementRect.height,S=this.truckSpeed*g*b/this._elementRect.height}else if(tu(this._camera)){const C=this._camera;E=p*(C.right-C.left)/C.zoom/this._elementRect.width,S=g*(C.top-C.bottom)/C.zoom/this._elementRect.height}else return;this.verticalDragToForward?(v?this.setFocalOffset(this._focalOffsetEnd.x+E,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(E,0,!0),this.forward(-S,!0)):v?this.setFocalOffset(this._focalOffsetEnd.x+E,this._focalOffsetEnd.y+S,this._focalOffsetEnd.z,!0):this.truck(E,S,!0)},this._rotateInternal=(p,g)=>{const v=jd*this.azimuthRotateSpeed*p/this._elementRect.height,E=jd*this.polarRotateSpeed*g/this._elementRect.height;this.rotate(v,E,!0)},this._dollyInternal=(p,g,v)=>{const E=Math.pow(.95,-p*this.dollySpeed),S=this._sphericalEnd.radius,C=this._sphericalEnd.radius*E,M=Ca(C,this.minDistance,this.maxDistance),b=M-C;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(C,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(b,!0),this._dollyToNoClamp(M,!0)):this._dollyToNoClamp(M,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?C:M)-S,this._dollyControlCoord.set(g,v)),this._lastDollyDirection=Math.sign(-p)},this._zoomInternal=(p,g,v)=>{const E=Math.pow(.95,p*this.dollySpeed),S=this._zoom,C=this._zoom*E;this.zoomTo(C,!0),this.dollyToCursor&&(this._changedZoom+=C-S,this._dollyControlCoord.set(g,v))},typeof nn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new nn.Quaternion().setFromUnitVectors(this._camera.up,N2),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Ze.NONE,this._target=new nn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new nn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new nn.Spherical().setFromVector3(mn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new nn.Vector3,new nn.Vector3,new nn.Vector3,new nn.Vector3],this._updateNearPlaneCorners(),this._boundary=new nn.Box3(new nn.Vector3(-1/0,-1/0,-1/0),new nn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new nn.Vector2,this.mouseButtons={left:Ze.ROTATE,middle:Ze.DOLLY,right:Ze.TRUCK,wheel:zh(this._camera)?Ze.DOLLY:tu(this._camera)?Ze.ZOOM:Ze.NONE},this.touches={one:Ze.TOUCH_ROTATE,two:zh(this._camera)?Ze.TOUCH_DOLLY_TRUCK:tu(this._camera)?Ze.TOUCH_ZOOM_TRUCK:Ze.NONE,three:Ze.TOUCH_TRUCK};const i=new nn.Vector2,r=new nn.Vector2,s=new nn.Vector2,o=p=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),S=p.clientX/E.width,C=p.clientY/E.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}const g=p.pointerType!=="mouse"?null:(p.buttons&bi.LEFT)===bi.LEFT?bi.LEFT:(p.buttons&bi.MIDDLE)===bi.MIDDLE?bi.MIDDLE:(p.buttons&bi.RIGHT)===bi.RIGHT?bi.RIGHT:null;if(g!==null){const E=this._findPointerByMouseButton(g);E&&this._disposePointer(E)}if((p.buttons&bi.LEFT)===bi.LEFT&&this._lockedPointer)return;const v={pointerId:p.pointerId,clientX:p.clientX,clientY:p.clientY,deltaX:0,deltaY:0,mouseButton:g};this._activePointers.push(v),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,f(p)},a=p=>{p.cancelable&&p.preventDefault();const g=p.pointerId,v=this._lockedPointer||this._findPointerById(g);if(v){if(v.clientX=p.clientX,v.clientY=p.clientY,v.deltaX=p.movementX,v.deltaY=p.movementY,this._state=0,p.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(p.buttons&bi.LEFT)===bi.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(p.buttons&bi.MIDDLE)===bi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(p.buttons&bi.RIGHT)===bi.RIGHT&&(this._state=this._state|this.mouseButtons.right);d()}},l=p=>{const g=this._findPointerById(p.pointerId);if(!(g&&g===this._lockedPointer)){if(g&&this._disposePointer(g),p.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Ze.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Ze.NONE;m()}};let c=-1;const u=p=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Ze.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),M=p.clientX/C.width,b=p.clientY/C.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||b<this._interactiveArea.top||b>this._interactiveArea.bottom)return}if(p.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ze.ROTATE||this.mouseButtons.wheel===Ze.TRUCK){const C=performance.now();c-C<1e3&&this._getClientRect(this._elementRect),c=C}const g=Vxe?-1:-3,v=p.deltaMode===1?p.deltaY/g:p.deltaY/(g*10),E=this.dollyToCursor?(p.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,S=this.dollyToCursor?(p.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ze.ROTATE:{this._rotateInternal(p.deltaX,p.deltaY),this._isUserControllingRotate=!0;break}case Ze.TRUCK:{this._truckInternal(p.deltaX,p.deltaY,!1),this._isUserControllingTruck=!0;break}case Ze.OFFSET:{this._truckInternal(p.deltaX,p.deltaY,!0),this._isUserControllingOffset=!0;break}case Ze.DOLLY:{this._dollyInternal(-v,E,S),this._isUserControllingDolly=!0;break}case Ze.ZOOM:{this._zoomInternal(-v,E,S),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},h=p=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===nT.ACTION.NONE){const g=p instanceof PointerEvent?p.pointerId:0,v=this._findPointerById(g);v&&this._disposePointer(v),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}p.preventDefault()}},f=p=>{if(!this._enabled)return;if(T4(this._activePointers,Os),this._getClientRect(this._elementRect),i.copy(Os),r.copy(Os),this._activePointers.length>=2){const v=Os.x-this._activePointers[1].clientX,E=Os.y-this._activePointers[1].clientY,S=Math.sqrt(v*v+E*E);s.set(0,S);const C=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,M=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(C,M)}if(this._state=0,!p)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in p&&p.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(p.buttons&bi.LEFT)===bi.LEFT&&(this._state=this._state|this.mouseButtons.left),(p.buttons&bi.MIDDLE)===bi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(p.buttons&bi.RIGHT)===bi.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Ze.ROTATE)===Ze.ROTATE||(this._state&Ze.TOUCH_ROTATE)===Ze.TOUCH_ROTATE||(this._state&Ze.TOUCH_DOLLY_ROTATE)===Ze.TOUCH_DOLLY_ROTATE||(this._state&Ze.TOUCH_ZOOM_ROTATE)===Ze.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Ze.TRUCK)===Ze.TRUCK||(this._state&Ze.TOUCH_TRUCK)===Ze.TOUCH_TRUCK||(this._state&Ze.TOUCH_DOLLY_TRUCK)===Ze.TOUCH_DOLLY_TRUCK||(this._state&Ze.TOUCH_ZOOM_TRUCK)===Ze.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Ze.DOLLY)===Ze.DOLLY||(this._state&Ze.TOUCH_DOLLY)===Ze.TOUCH_DOLLY||(this._state&Ze.TOUCH_DOLLY_TRUCK)===Ze.TOUCH_DOLLY_TRUCK||(this._state&Ze.TOUCH_DOLLY_OFFSET)===Ze.TOUCH_DOLLY_OFFSET||(this._state&Ze.TOUCH_DOLLY_ROTATE)===Ze.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Ze.ZOOM)===Ze.ZOOM||(this._state&Ze.TOUCH_ZOOM)===Ze.TOUCH_ZOOM||(this._state&Ze.TOUCH_ZOOM_TRUCK)===Ze.TOUCH_ZOOM_TRUCK||(this._state&Ze.TOUCH_ZOOM_OFFSET)===Ze.TOUCH_ZOOM_OFFSET||(this._state&Ze.TOUCH_ZOOM_ROTATE)===Ze.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Ze.OFFSET)===Ze.OFFSET||(this._state&Ze.TOUCH_OFFSET)===Ze.TOUCH_OFFSET||(this._state&Ze.TOUCH_DOLLY_OFFSET)===Ze.TOUCH_DOLLY_OFFSET||(this._state&Ze.TOUCH_ZOOM_OFFSET)===Ze.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},d=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,T4(this._activePointers,Os);const g=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,v=g?-g.deltaX:r.x-Os.x,E=g?-g.deltaY:r.y-Os.y;if(r.copy(Os),((this._state&Ze.ROTATE)===Ze.ROTATE||(this._state&Ze.TOUCH_ROTATE)===Ze.TOUCH_ROTATE||(this._state&Ze.TOUCH_DOLLY_ROTATE)===Ze.TOUCH_DOLLY_ROTATE||(this._state&Ze.TOUCH_ZOOM_ROTATE)===Ze.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(v,E),this._isUserControllingRotate=!0),(this._state&Ze.DOLLY)===Ze.DOLLY||(this._state&Ze.ZOOM)===Ze.ZOOM){const S=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,M=this.dollyDragInverted?-1:1;(this._state&Ze.DOLLY)===Ze.DOLLY?(this._dollyInternal(M*E*k2,S,C),this._isUserControllingDolly=!0):(this._zoomInternal(M*E*k2,S,C),this._isUserControllingZoom=!0)}if((this._state&Ze.TOUCH_DOLLY)===Ze.TOUCH_DOLLY||(this._state&Ze.TOUCH_ZOOM)===Ze.TOUCH_ZOOM||(this._state&Ze.TOUCH_DOLLY_TRUCK)===Ze.TOUCH_DOLLY_TRUCK||(this._state&Ze.TOUCH_ZOOM_TRUCK)===Ze.TOUCH_ZOOM_TRUCK||(this._state&Ze.TOUCH_DOLLY_OFFSET)===Ze.TOUCH_DOLLY_OFFSET||(this._state&Ze.TOUCH_ZOOM_OFFSET)===Ze.TOUCH_ZOOM_OFFSET||(this._state&Ze.TOUCH_DOLLY_ROTATE)===Ze.TOUCH_DOLLY_ROTATE||(this._state&Ze.TOUCH_ZOOM_ROTATE)===Ze.TOUCH_ZOOM_ROTATE){const S=Os.x-this._activePointers[1].clientX,C=Os.y-this._activePointers[1].clientY,M=Math.sqrt(S*S+C*C),b=s.y-M;s.set(0,M);const T=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,I=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ze.TOUCH_DOLLY)===Ze.TOUCH_DOLLY||(this._state&Ze.TOUCH_DOLLY_ROTATE)===Ze.TOUCH_DOLLY_ROTATE||(this._state&Ze.TOUCH_DOLLY_TRUCK)===Ze.TOUCH_DOLLY_TRUCK||(this._state&Ze.TOUCH_DOLLY_OFFSET)===Ze.TOUCH_DOLLY_OFFSET?(this._dollyInternal(b*k2,T,I),this._isUserControllingDolly=!0):(this._zoomInternal(b*k2,T,I),this._isUserControllingZoom=!0)}((this._state&Ze.TRUCK)===Ze.TRUCK||(this._state&Ze.TOUCH_TRUCK)===Ze.TOUCH_TRUCK||(this._state&Ze.TOUCH_DOLLY_TRUCK)===Ze.TOUCH_DOLLY_TRUCK||(this._state&Ze.TOUCH_ZOOM_TRUCK)===Ze.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(v,E,!1),this._isUserControllingTruck=!0),((this._state&Ze.OFFSET)===Ze.OFFSET||(this._state&Ze.TOUCH_OFFSET)===Ze.TOUCH_OFFSET||(this._state&Ze.TOUCH_DOLLY_OFFSET)===Ze.TOUCH_DOLLY_OFFSET||(this._state&Ze.TOUCH_ZOOM_OFFSET)===Ze.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(v,E,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},m=()=>{T4(this._activePointers,Os),r.copy(Os),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",A),this._domElement.ownerDocument.addEventListener("pointerlockerror",y),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),f())},this.unlockPointer=()=>{var p,g,v;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(p=this._domElement)===null||p===void 0||p.ownerDocument.exitPointerLock(),(g=this._domElement)===null||g===void 0||g.ownerDocument.removeEventListener("pointerlockchange",A),(v=this._domElement)===null||v===void 0||v.ownerDocument.removeEventListener("pointerlockerror",y),this.cancel()};const A=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},y=()=>{this.unlockPointer()};this._addAllEventListeners=p=>{this._domElement=p,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",u,{passive:!1}),this._domElement.addEventListener("contextmenu",h)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",u,{passive:!1}),this._domElement.removeEventListener("contextmenu",h),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",A),this._domElement.ownerDocument.removeEventListener("pointerlockerror",y))},this.cancel=()=>{this._state!==Ze.NONE&&(this._state=Ze.NONE,this._activePointers.length=0,m())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Ca(e.width,0,1),this._interactiveArea.height=Ca(e.height,0,1),this._interactiveArea.x=Ca(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Ca(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Ca(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Ca(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||jn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&jn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Wd.NONE,this._changedDolly=0,this._dollyToNoClamp(Ca(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=jn(o,this._spherical.radius);if(!(i>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||jn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(x1).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||jn(this._target.x,this._targetEnd.x,this.restThreshold)&&jn(this._target.y,this._targetEnd.y,this.restThreshold)&&jn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Ca(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||jn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),al.setFromMatrixColumn(this._camera.matrix,0),ll.setFromMatrixColumn(this._camera.matrix,1),al.multiplyScalar(e),ll.multiplyScalar(-t);const r=mn.copy(al).add(ll),s=Hn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){mn.setFromMatrixColumn(this._camera.matrix,0),mn.crossVectors(this._camera.up,mn),mn.multiplyScalar(e);const i=Hn.copy(this._targetEnd).add(mn);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return mn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+mn.x,this._targetEnd.y+mn.y,this._targetEnd.z+mn.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=mn.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||jn(this._target.x,this._targetEnd.x,this.restThreshold)&&jn(this._target.y,this._targetEnd.y,this.restThreshold)&&jn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const a=mn.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?Yd.copy(e):Yd.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=zO(this._sphericalEnd.theta,UO),h=zO(this._sphericalEnd.phi,UO);l.push(this.rotateTo(u,h,t));const f=mn.setFromSpherical(this._sphericalEnd).normalize(),d=VO.setFromUnitVectors(f,P4),m=jn(Math.abs(f.y),1);m&&d.multiply(D4.setFromAxisAngle(N2,u)),d.multiply(this._yAxisUpSpaceInverse);const A=QO.makeEmpty();Hn.copy(c.min).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.min).setX(c.max.x).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.min).setY(c.max.y).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.max).setZ(c.min.z).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.min).setZ(c.max.z).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.max).setY(c.min.y).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.max).setX(c.min.x).applyQuaternion(d),A.expandByPoint(Hn),Hn.copy(c.max).applyQuaternion(d),A.expandByPoint(Hn),A.min.x-=r,A.min.y-=o,A.max.x+=s,A.max.y+=a,d.setFromUnitVectors(P4,f),m&&d.premultiply(D4.invert()),d.premultiply(this._yAxisUpSpace);const y=A.getSize(mn),p=A.getCenter(Hn).applyQuaternion(d);if(zh(this._camera)){const g=this.getDistanceToFitBox(y.x,y.y,y.z,i);l.push(this.moveTo(p.x,p.y,p.z,t)),l.push(this.dollyTo(g,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(tu(this._camera)){const g=this._camera,v=g.right-g.left,E=g.top-g.bottom,S=i?Math.max(v/y.x,E/y.y):Math.min(v/y.x,E/y.y);l.push(this.moveTo(p.x,p.y,p.z,t)),l.push(this.zoomTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const i=[],s="isObject3D"in e?nT.createBoundingSphere(e,R4):R4.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),zh(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(tu(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);i.push(this.zoomTo(c,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Wd.NONE,this._changedDolly=0;const l=Hn.set(r,s,o),c=mn.set(e,t,i);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||jn(this._target.x,this._targetEnd.x,this.restThreshold)&&jn(this._target.y,this._targetEnd.y,this.restThreshold)&&jn(this._target.z,this._targetEnd.z,this.restThreshold)&&jn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&jn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&jn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,i,r,s,o,a,l,c,u,h,f,d,m=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Wd.NONE,this._changedDolly=0;const A=mn.set(r,s,o),y=Hn.set(e,t,i);Uo.setFromVector3(y.sub(A).applyQuaternion(this._yAxisUpSpace));const p=Xd.set(u,h,f),g=Hn.set(a,l,c);_1.setFromVector3(g.sub(p).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(A.lerp(p,d));const v=_1.theta-Uo.theta,E=_1.phi-Uo.phi,S=_1.radius-Uo.radius;this._sphericalEnd.set(Uo.radius+S*d,Uo.phi+E*d,Uo.theta+v*d),this.normalizeRotations(),this._needsUpdate=!0,m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const C=!m||jn(this._target.x,this._targetEnd.x,this.restThreshold)&&jn(this._target.y,this._targetEnd.y,this.restThreshold)&&jn(this._target.z,this._targetEnd.z,this.restThreshold)&&jn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&jn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&jn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(C)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(mn),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=Ca(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||jn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&jn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&jn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),al.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ll.setFromMatrixColumn(this._camera.matrixWorldInverse,1),kh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=mn.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);al.multiplyScalar(o.x),ll.multiplyScalar(o.y),kh.multiplyScalar(o.z),mn.copy(al).add(ll).add(kh),mn.z=mn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-mn.x,mn.y,-mn.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new nn.Vector4,typeof e=="number"?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(I4(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*A1,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(I4(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*A1,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new nn.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new nn.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new nn.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new nn.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%jd,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=jd),this._spherical.theta+=jd*Math.round((this._sphericalEnd.theta-this._spherical.theta)/jd)}reset(e=!1){if(!jn(this._camera.up.x,this._cameraUp0.x)||!jn(this._camera.up.y,this._cameraUp0.y)||!jn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(mn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,N2),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=mn.subVectors(this._target,this._camera.position).normalize(),t=Hn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(mn);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=GO.subVectors(this._targetEnd,this._target),o=HO.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(li(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=z2(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(li(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=z2(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(li(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=z2(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(li(s.x)&&li(s.y)&&li(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;kO(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(li(o.x)&&li(o.y)&&li(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;kO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(li(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=z2(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(zh(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,f=this._camera,d=this._getCameraDirection(x1),m=mn.copy(d).cross(f.up).normalize();m.lengthSq()===0&&(m.x=1);const A=Hn.crossVectors(m,d),y=this._sphericalEnd.radius*Math.tan(f.getEffectiveFOV()*A1*.5),g=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,v=Xd.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*y*f.aspect)).add(A.multiplyScalar(this._dollyControlCoord.y*y)),E=mn.copy(this._targetEnd).lerp(v,g),S=this._lastDollyDirection===Wd.IN&&this._spherical.radius<=this.minDistance,C=this._lastDollyDirection===Wd.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(S||C)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const b=Hn.copy(d).multiplyScalar(-h);E.add(b)}this._boundary.clampPoint(E,E);const M=Hn.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(M),this._changedDolly-=h,li(this._changedDolly)&&(this._changedDolly=0)}else if(tu(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,f=this._camera,d=mn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(f.near+f.far)/(f.near-f.far)).unproject(f),m=Hn.set(0,0,-1).applyQuaternion(f.quaternion),A=Xd.copy(d).add(m.multiplyScalar(-d.dot(f.up))),p=-(this._zoom-h-this._zoom)/this._zoom,g=this._getCameraDirection(x1),v=this._targetEnd.dot(g),E=mn.copy(this._targetEnd).lerp(A,p),S=E.dot(g),C=g.multiplyScalar(S-v);E.sub(C),this._boundary.clampPoint(E,E);const M=Hn.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(M),this._changedZoom-=h,li(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!li(this._focalOffset.x)||!li(this._focalOffset.y)||!li(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),al.setFromMatrixColumn(this._camera.matrix,0),ll.setFromMatrixColumn(this._camera.matrix,1),kh.setFromMatrixColumn(this._camera.matrix,2),al.multiplyScalar(this._focalOffset.x),ll.multiplyScalar(-this._focalOffset.y),kh.multiplyScalar(this._focalOffset.z),mn.copy(al).add(ll).add(kh),this._camera.position.add(mn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),mn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),li(t,this.restThreshold)&&li(i,this.restThreshold)&&li(r,this.restThreshold)&&li(s.x,this.restThreshold)&&li(s.y,this.restThreshold)&&li(s.z,this.restThreshold)&&li(o.x,this.restThreshold)&&li(o.y,this.restThreshold)&&li(o.z,this.restThreshold)&&li(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:v1(this.maxDistance),minZoom:this.minZoom,maxZoom:v1(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:v1(this.maxPolarAngle),minAzimuthAngle:v1(this.minAzimuthAngle),maxAzimuthAngle:v1(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:mn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=y1(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=y1(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=y1(i.maxPolarAngle),this.minAzimuthAngle=y1(i.minAzimuthAngle),this.maxAzimuthAngle=y1(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this.verticalDragToForward=i.verticalDragToForward,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),Uo.setFromVector3(mn.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Uo.theta,Uo.phi,t),this.dollyTo(Uo.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Qxe),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=Hn.copy(t).add(e),a=this._boundary.clampPoint(s,Xd).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(i===0)return e.add(t).add(a);{const c=1+i*l/t.dot(a);return e.add(Hn.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(zh(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*A1,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(tu(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||I4(this._camera,"_collisionTest"))return e;const i=this._getTargetDirection(x1);L4.lookAt(NO,i,this._camera.up);for(let r=0;r<4;r++){const s=Hn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(L4);const o=Xd.addVectors(this._target,s);G2.set(o,i),G2.far=this._spherical.radius+1;const a=G2.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const i=()=>{this.removeEventListener("rest",i),t()};this.addEventListener("rest",i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new nn.Sphere){const i=t,r=i.center;Yd.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&Yd.expandByObject(o)}),Yd.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let h=0,f=u.count;h<f;h++)mn.fromBufferAttribute(u,h),s=Math.max(s,r.distanceToSquared(mn))}),i.radius=Math.sqrt(s),i}};const Wxe=w.forwardRef((n,e)=>{w.useMemo(()=>{const S={Box3:Bn,MathUtils:{clamp:Dt.clamp},Matrix4:Oe,Quaternion:St,Raycaster:rh,Sphere:vi,Spherical:bf,Vector2:Ee,Vector3:D,Vector4:Yt};F4.install({THREE:S}),si({CameraControlsImpl:F4})},[]);const{camera:t,domElement:i,makeDefault:r,onStart:s,onEnd:o,onChange:a,regress:l,...c}=n,u=Se(S=>S.camera),h=Se(S=>S.gl),f=Se(S=>S.invalidate),d=Se(S=>S.events),m=Se(S=>S.setEvents),A=Se(S=>S.set),y=Se(S=>S.get),p=Se(S=>S.performance),g=t||u,v=i||d.connected||h.domElement,E=w.useMemo(()=>new F4(g),[g]);return yt((S,C)=>{E.enabled&&E.update(C)},-1),w.useEffect(()=>(E.connect(v),()=>void E.disconnect()),[v,E]),w.useEffect(()=>{const S=b=>{f(),l&&p.regress(),a&&a(b)},C=b=>{s&&s(b)},M=b=>{o&&o(b)};return E.addEventListener("update",S),E.addEventListener("controlstart",C),E.addEventListener("controlend",M),E.addEventListener("control",S),E.addEventListener("transitionstart",S),E.addEventListener("wake",S),()=>{E.removeEventListener("update",S),E.removeEventListener("controlstart",C),E.removeEventListener("controlend",M),E.removeEventListener("control",S),E.removeEventListener("transitionstart",S),E.removeEventListener("wake",S)}},[E,s,o,f,m,l,a]),w.useEffect(()=>{if(r){const S=y().controls;return A({controls:E}),()=>A({controls:S})}},[r,E]),w.createElement("primitive",Ye({ref:e,object:E},c))}),jxe=n=>(n==null?void 0:n.current)instanceof kt,bX=w.createContext(null);function TX(){return w.useContext(bX)}function Xxe({points:n=50}){const{path:e}=TX(),[t,i]=w.useState([]),[r]=w.useState(()=>new mr({color:"black"})),[s]=w.useState(()=>new Uf(.025,16,16)),o=w.useRef([]);return w.useEffect(()=>{e.curves!==o.current&&(i(e.getPoints(n)),o.current=e.curves)}),w.createElement(w.Fragment,null,t.map((a,l)=>w.createElement("mesh",{key:l,material:r,geometry:s,position:[a.x,a.y,a.z]})))}const Yxe=w.forwardRef(({children:n,curves:e=[],object:t,debug:i=!1,smooth:r=!1,focus:s,offset:o=void 0,eps:a=1e-5,damping:l=.1,focusDamping:c=.1,maxSpeed:u=1/0,...h},f)=>{const{camera:d}=Se(),m=w.useRef(),[A]=w.useState(()=>new h6),y=w.useRef(o??0),p=w.useMemo(()=>({focus:s,object:(t==null?void 0:t.current)instanceof kt?t:{current:d},path:A,current:y.current,offset:y.current,point:new D,tangent:new D,next:new D}),[s,t]);w.useLayoutEffect(()=>{var E;A.curves=[];const S=e.length>0?e:(E=m.current)==null?void 0:E.__r3f.objects;for(var C=0;C<S.length;C++)A.add(S[C]);if(r){const M=A.getPoints(typeof r=="number"?r:1),b=new Y3(M);A.curves=[b]}A.updateArcLengths()}),w.useImperativeHandle(f,()=>m.current,[]),w.useLayoutEffect(()=>{y.current=XC.repeat(y.current,1)},[o]);let g=0;const[v]=w.useState(()=>new D);return yt((E,S)=>{if(g=p.offset,Tm.damp(y,"current",o!==void 0?o:p.current,l,S,u,void 0,a),p.offset=XC.repeat(y.current,1),A.getCurveLengths().length>0){A.getPointAt(p.offset,p.point),A.getTangentAt(p.offset,p.tangent).normalize(),A.getPointAt(XC.repeat(y.current-(g-p.offset),1),p.next);const C=(t==null?void 0:t.current)instanceof kt?t.current:d;C.position.copy(p.point),s&&Tm.dampLookAt(C,jxe(s)?s.current.getWorldPosition(v):s,c,S,u,void 0,a)}}),w.createElement("group",Ye({ref:m},h),w.createElement(bX.Provider,{value:p},n,i&&w.createElement(Xxe,null)))});function qxe({defaultScene:n,defaultCamera:e,renderPriority:t=1}){const{gl:i,scene:r,camera:s}=Se();let o;return yt(()=>{o=i.autoClear,t===1&&(i.autoClear=!0,i.render(n,e)),i.autoClear=!1,i.clearDepth(),i.render(r,s),i.autoClear=o},t),w.createElement("group",{onPointerOver:()=>null})}function IX({children:n,renderPriority:e=1}){const{scene:t,camera:i}=Se(),[r]=w.useState(()=>new xo);return w.createElement(w.Fragment,null,Bc(w.createElement(w.Fragment,null,n,w.createElement(qxe,{defaultScene:t,defaultCamera:i,renderPriority:e})),r,{events:{priority:e+1}}))}const BX=w.createContext({}),XE=()=>w.useContext(BX),Kxe=2*Math.PI,O4=new kt,WO=new Oe,[qd,U4]=[new St,new St],jO=new D,XO=new D,Jxe=n=>"minPolarAngle"in n,Zxe=({alignment:n="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:i,onTarget:r,children:s})=>{const o=Se(C=>C.size),a=Se(C=>C.camera),l=Se(C=>C.controls),c=Se(C=>C.invalidate),u=w.useRef(null),h=w.useRef(null),f=w.useRef(!1),d=w.useRef(0),m=w.useRef(new D(0,0,0)),A=w.useRef(new D(0,0,0));w.useEffect(()=>{A.current.copy(a.up)},[a]);const y=w.useCallback(C=>{f.current=!0,(l||r)&&(m.current=(l==null?void 0:l.target)||(r==null?void 0:r())),d.current=a.position.distanceTo(jO),qd.copy(a.quaternion),XO.copy(C).multiplyScalar(d.current).add(jO),O4.lookAt(XO),O4.up.copy(a.up),U4.copy(O4.quaternion),c()},[l,a,r,c]);yt((C,M)=>{if(h.current&&u.current){var b;if(f.current)if(qd.angleTo(U4)<.01)f.current=!1,Jxe(l)&&a.up.copy(A.current);else{const T=M*Kxe;qd.rotateTowards(U4,T),a.position.set(0,0,1).applyQuaternion(qd).multiplyScalar(d.current).add(m.current),a.up.set(0,1,0).applyQuaternion(qd).normalize(),a.quaternion.copy(qd),i?i():l&&l.update(),c()}WO.copy(a.matrix).invert(),(b=u.current)==null||b.quaternion.setFromRotationMatrix(WO)}});const p=w.useMemo(()=>({tweenCamera:y}),[y]),[g,v]=e,E=n.endsWith("-center")?0:n.endsWith("-left")?-o.width/2+g:o.width/2-g,S=n.startsWith("center-")?0:n.startsWith("top-")?o.height/2-v:-o.height/2+v;return w.createElement(IX,{renderPriority:t},w.createElement(BX.Provider,{value:p},w.createElement(SX,{makeDefault:!0,ref:h,position:[0,0,200]}),w.createElement("group",{ref:u,position:[E,S,0]},s)))},Y1={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},$xe=["Right","Left","Top","Bottom","Front","Back"],PX=n=>new D(...n).multiplyScalar(.38),e_e=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(PX),t_e=[.25,.25,.25],RX=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(PX),n_e=RX.map(n=>n.toArray().map(e=>e==0?.5:.25)),i_e=({hover:n,index:e,font:t="20px Inter var, Arial, sans-serif",faces:i=$xe,color:r=Y1.bg,hoverColor:s=Y1.hover,textColor:o=Y1.text,strokeColor:a=Y1.stroke,opacity:l=1})=>{const c=Se(h=>h.gl),u=w.useMemo(()=>{const h=document.createElement("canvas");h.width=128,h.height=128;const f=h.getContext("2d");return f.fillStyle=r,f.fillRect(0,0,h.width,h.height),f.strokeStyle=a,f.strokeRect(0,0,h.width,h.height),f.font=t,f.textAlign="center",f.fillStyle=o,f.fillText(i[e].toUpperCase(),64,76),new X3(h)},[e,i,t,r,o,a]);return w.createElement("meshBasicMaterial",{map:u,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:n?s:"white",transparent:!0,opacity:l})},r_e=n=>{const{tweenCamera:e}=XE(),[t,i]=w.useState(null),r=a=>{a.stopPropagation(),i(null)},s=a=>{a.stopPropagation(),e(a.face.normal)},o=a=>{a.stopPropagation(),i(Math.floor(a.faceIndex/2))};return w.createElement("mesh",{onPointerOut:r,onPointerMove:o,onClick:n.onClick||s},[...Array(6)].map((a,l)=>w.createElement(i_e,Ye({key:l,index:l,hover:t===l},n))),w.createElement("boxGeometry",null))},YO=({onClick:n,dimensions:e,position:t,hoverColor:i=Y1.hover})=>{const{tweenCamera:r}=XE(),[s,o]=w.useState(!1),a=u=>{u.stopPropagation(),o(!1)},l=u=>{u.stopPropagation(),o(!0)},c=u=>{u.stopPropagation(),r(t)};return w.createElement("mesh",{scale:1.01,position:t,onPointerOver:l,onPointerOut:a,onClick:n||c},w.createElement("meshBasicMaterial",{color:s?i:"white",transparent:!0,opacity:.6,visible:s}),w.createElement("boxGeometry",{args:e}))},s_e=n=>w.createElement("group",{scale:[60,60,60]},w.createElement(r_e,n),RX.map((e,t)=>w.createElement(YO,Ye({key:t,position:e,dimensions:n_e[t]},n))),e_e.map((e,t)=>w.createElement(YO,Ye({key:t,position:e,dimensions:t_e},n))));function z4({scale:n=[.8,.05,.05],color:e,rotation:t}){return w.createElement("group",{rotation:t},w.createElement("mesh",{position:[.4,0,0]},w.createElement("boxGeometry",{args:n}),w.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Kd({onClick:n,font:e,disabled:t,arcStyle:i,label:r,labelColor:s,axisHeadScale:o=1,...a}){const l=Se(A=>A.gl),c=w.useMemo(()=>{const A=document.createElement("canvas");A.width=64,A.height=64;const y=A.getContext("2d");return y.beginPath(),y.arc(32,32,16,0,2*Math.PI),y.closePath(),y.fillStyle=i,y.fill(),r&&(y.font=e,y.textAlign="center",y.fillStyle=s,y.fillText(r,32,41)),new X3(A)},[i,r,s,e]),[u,h]=w.useState(!1),f=(r?1:.75)*(u?1.2:1)*o,d=A=>{A.stopPropagation(),h(!0)},m=A=>{A.stopPropagation(),h(!1)};return w.createElement("sprite",Ye({scale:f,onPointerOver:t?void 0:d,onPointerOut:t?void 0:n||m},a),w.createElement("spriteMaterial",{map:c,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:r?1:.75,toneMapped:!1}))}const o_e=({hideNegativeAxes:n,hideAxisHeads:e,disabled:t,font:i="18px Inter var, Arial, sans-serif",axisColors:r=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[h,f,d]=r,{tweenCamera:m}=XE(),A={font:i,disabled:t,labelColor:l,onClick:c,axisHeadScale:s,onPointerDown:t?void 0:y=>{m(y.object.position),y.stopPropagation()}};return w.createElement("group",Ye({scale:40},u),w.createElement(z4,{color:h,rotation:[0,0,0],scale:o}),w.createElement(z4,{color:f,rotation:[0,0,Math.PI/2],scale:o}),w.createElement(z4,{color:d,rotation:[0,-Math.PI/2,0],scale:o}),!e&&w.createElement(w.Fragment,null,w.createElement(Kd,Ye({arcStyle:h,position:[1,0,0],label:a[0]},A)),w.createElement(Kd,Ye({arcStyle:f,position:[0,1,0],label:a[1]},A)),w.createElement(Kd,Ye({arcStyle:d,position:[0,0,1],label:a[2]},A)),!n&&w.createElement(w.Fragment,null,w.createElement(Kd,Ye({arcStyle:h,position:[-1,0,0]},A)),w.createElement(Kd,Ye({arcStyle:f,position:[0,-1,0]},A)),w.createElement(Kd,Ye({arcStyle:d,position:[0,0,-1]},A)))))},a_e=wo({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new We,sectionColor:new We,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new D,worldPlanePosition:new D},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),l_e=w.forwardRef(({args:n,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:i=.5,sectionSize:r=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:c=1,cellThickness:u=.5,sectionThickness:h=1,side:f=Ni,...d},m)=>{si({GridMaterial:a_e});const A=w.useRef(null);w.useImperativeHandle(m,()=>A.current,[]);const y=new Br,p=new D(0,1,0),g=new D(0,0,0);yt(S=>{y.setFromNormalAndCoplanarPoint(p,g).applyMatrix4(A.current.matrixWorld);const C=A.current.material,M=C.uniforms.worldCamProjPosition,b=C.uniforms.worldPlanePosition;y.projectPoint(S.camera.position,M.value),b.value.set(0,0,0).applyMatrix4(A.current.matrixWorld)});const v={cellSize:i,sectionSize:r,cellColor:e,sectionColor:t,cellThickness:u,sectionThickness:h},E={fadeDistance:a,fadeStrength:l,fadeFrom:c,infiniteGrid:o,followCamera:s};return w.createElement("mesh",Ye({ref:A,frustumCulled:!1},d),w.createElement("gridMaterial",Ye({transparent:!0,"extensions-derivatives":!0,side:f},v,E)),w.createElement("planeGeometry",{args:n}))});function b8(n,{path:e}){const[t]=hi(lE,[n],i=>i.setPath(e));return t}b8.preload=(n,{path:e})=>hi.preload(lE,[n],t=>t.setPath(e));function c_e({children:n,files:e,...t}){const i=b8(e,{...t});return w.createElement(w.Fragment,null,n==null?void 0:n(i))}function YE(n){return hi(_8,n)}YE.preload=n=>hi.preload(_8,n);YE.clear=n=>hi.clear(_8,n);function u_e({path:n,...e}){const i=YE(n).children[0];return w.createElement(wA,Ye({},e,{object:i}))}const DX="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function qE(n,e=`${DX}/basis/`){const t=Se(r=>r.gl),i=hi(Qf,om(n)?Object.values(n):n,r=>{r.detectSupport(t),r.setTranscoderPath(e)});if(w.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(t.initTexture)},[t,i]),om(n)){const r=Object.keys(n),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}qE.preload=(n,e=`${DX}/basis/`)=>hi.preload(Qf,n,t=>{t.setTranscoderPath(e)});qE.clear=n=>hi.clear(Qf,n);const h_e=({children:n,input:e,basisPath:t})=>{const i=qE(e,t);return w.createElement(w.Fragment,null,n==null?void 0:n(i))},f_e="modulepreload",d_e=function(n){return"/"+n},qO={},LX=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(t.map(a=>{if(a=d_e(a),a in qO)return;qO[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":f_e,l||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var KO,JO;const p_e=typeof window<"u"&&typeof((KO=window.document)==null?void 0:KO.createElement)=="function"&&typeof((JO=window.navigator)==null?void 0:JO.userAgent)=="string";let H2=null;async function m_e(n,e){if(p_e&&n.pathname.endsWith(".m3u8")){var t;if((t=H2)!==null&&t!==void 0||(H2=await LX(()=>import("./hls-DeAJAimi.js").then(i=>i.h),[])),H2.default.isSupported())return new H2.default({...e})}return null}function T8(n,{unsuspend:e="loadedmetadata",start:t=!0,crossOrigin:i="anonymous",muted:r=!0,loop:s=!0,hls:o={},...a}={}){const l=new URL(typeof n=="string"?n:"",window.location.href),c=w.useRef(null),u=w.useRef(null),h=Se(d=>d.gl),f=Ic(()=>new Promise(async d=>{const m=Object.assign(document.createElement("video"),{src:typeof n=="string"&&n||void 0,srcObject:n instanceof MediaStream&&n||void 0,crossOrigin:i,loop:s,muted:r,...a});if(u.current=m,typeof n=="string"){const y=c.current=await m_e(l,o);y?(y.attachMedia(m),y.on("hlsMediaAttached",()=>{y.loadSource(n)})):m.src=n}else n instanceof MediaStream&&(m.srcObject=n);const A=new mQ(m);"colorSpace"in A?A.colorSpace=h.outputColorSpace:A.encoding=h.outputEncoding,m.addEventListener(e,()=>d(A))}),[n]);return w.useEffect(()=>(t&&f.image.play(),()=>{c.current&&(c.current.destroy(),c.current=null)}),[f,t]),f}const g_e=({children:n,src:e,...t})=>{const i=T8(e,t);return w.createElement(w.Fragment,null,n==null?void 0:n(i))},FX=n=>{if(Array.isArray(n))return n[0];if(typeof n=="object"&&n!==null){const e=Object.keys(n);return n[e[0]][0]}else return{w:0,h:0}},OX=n=>{for(let e=3;e<n.length;e+=4)if(n[e]!==0)return!1;return!0},iT=(n,e,t,i)=>{const r=e*(i.aspect>n/e?i.width/n:i.height/e),o=n*(i.aspect>n/e?i.width/n:i.height/e)*t,a=r*t,l=1;let c=Math.min(l,o),u=Math.min(l,a);return o>l&&(c=l,u=a/o*l),new D(c,u,1)};function KE(n,e,t,i,r){const s=Se(M=>M.viewport),o=w.useRef(null),a=w.useRef(0),l=.1,[c,u]=w.useState(null),[h,f]=w.useState(new In),d=new Tl,[m,A]=w.useState(null);w.useLayoutEffect(()=>(e&&n?g(e,n,v):n&&p(),()=>{n&&hi.clear(Tl,n)}),[]);function y(M,b){b&&M?g(b,M,v):p(M)}function p(M){(M||n)&&new Promise(b=>{d.load(M??n,b)}).then(b=>{v(null,b)})}function g(M,b,T){const I=fetch(M).then(R=>R.json()),F=new Promise(R=>{d.load(b,R)});Promise.all([I,F]).then(R=>{T(R[0],R[1])})}const v=(M,b)=>{let T=new D(1,1,1);if(M===null){if(b&&i){const I=b.image.width,F=b.image.height;a.current=i;const{rows:R,columns:z,frameWidth:L,frameHeight:H,emptyFrames:K}=E(b,i);o.current={frames:[],meta:{version:"1.0",size:{w:I,h:F},rows:R,columns:z,frameWidth:L,frameHeight:H,scale:"1"}};for(let J=0;J<R;J++)for(let O=0;O<z;O++)(K??[]).some(V=>V.row===J&&V.col===O)||o.current.frames.push({frame:{x:O*L,y:J*H,w:L,h:H},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:L,h:H},sourceSize:{w:L,h:H}});T=iT(L,H,l,s)}o.current.frames=C(o.current.frames)}else if(b){o.current=M,o.current.frames=S(),a.current=Array.isArray(M.frames)?M.frames.length:Object.keys(M.frames).length;const{w:I,h:F}=FX(M.frames).sourceSize;T=iT(I,F,l,s)}u(o.current),"encoding"in b?b.encoding=3001:b.colorSpace=un,f(b),A({spriteTexture:b,spriteData:o.current,aspect:T})},E=(M,b)=>{if(M.image){const T=document.createElement("canvas"),I=T.getContext("2d");T.width=M.image.width,T.height=M.image.height,I.drawImage(M.image,0,0);const F=M.image.width,R=M.image.height,z=Math.round(Math.sqrt(b*(F/R))),L=Math.round(b/z),H=F/z,K=R/L,J=[];for(let O=0;O<L;O++)for(let W=0;W<z;W++){if(O*z+W>=b){J.push({row:O,col:W});continue}const U=I.getImageData(W*H,O*K,H,K).data;OX(U)&&J.push({row:O,col:W})}return{rows:L,columns:z,frameWidth:H,frameHeight:K,emptyFrames:J}}else return{rows:0,columns:0,frameWidth:0,frameHeight:0,emptyFrames:[]}},S=()=>{const M={},b=o.current,T=t;if(T&&Array.isArray(b.frames)){for(let I=0;I<T.length;I++){M[T[I]]=[];for(const F of b.frames){const R=F.frame,z=R.x,L=R.y,H=R.w,K=R.h,J=F.sourceSize.w,O=F.sourceSize.h;typeof F.filename=="string"&&F.filename.toLowerCase().indexOf(T[I].toLowerCase())!==-1&&M[T[I]].push({x:z,y:L,w:H,h:K,frame:R,sourceSize:{w:J,h:O}})}}for(const I in M)M[I].frame=C(M[I]);return M}else if(T&&typeof b.frames=="object"){for(let I=0;I<T.length;I++){M[T[I]]=[];for(const F in b.frames){const R=b.frames[F],z=R.frame,L=z.x,H=z.y,K=z.w,J=z.h,O=R.sourceSize.w,W=R.sourceSize.h;typeof F=="string"&&F.toLowerCase().indexOf(T[I].toLowerCase())!==-1&&M[T[I]].push({x:L,y:H,w:K,h:J,frame:z,sourceSize:{w:O,h:W}})}}for(const I in M)M[I].frame=C(M[I]);return M}else{let I=[];for(const F in b.frames)I.push(b.frames[F]);return I=C(I),I}},C=M=>{let b=null;for(const F of M){const{w:R,h:z}=F.frame,L=R*z;(!b||L>b.area)&&(b={...F.frame,area:L})}for(const F of M){var T;const{w:R,h:z}=F.frame,L=R*z;if(L===((T=b)==null?void 0:T.area))F.scaleRatio=1;else{var I;F.scaleRatio=Math.sqrt(L/((I=b)==null?void 0:I.area))}}return M};return w.useLayoutEffect(()=>{r==null||r(h,c)},[h,c]),{spriteObj:m,loadJsonAndTexture:y}}KE.preload=n=>hi.preload(Tl,n);KE.clear=n=>hi.clear(Tl,n);function I8(n,e,...t){const i=w.useRef(),r=Se(s=>s.scene);return w.useLayoutEffect(()=>{let s;if(n&&n!=null&&n.current&&e&&(i.current=s=new e(n.current,...t)),s)return s.traverse(o=>o.raycast=()=>null),r.add(s),()=>{i.current=void 0,r.remove(s),s.dispose==null||s.dispose()}},[r,e,n,...t]),yt(()=>{var s;return void((s=i.current)==null||s.update==null?void 0:s.update())}),i}const A_e=({type:n,args:e=[]})=>{const t=w.useRef(null),i=w.useRef(null);return w.useLayoutEffect(()=>{i.current=t.current.parent}),I8(i,n,...e),w.createElement("object3D",{ref:t})};var UX={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Bq,function(){var t=function(){function i(d){return o.appendChild(d.dom),d}function r(d){for(var m=0;m<o.children.length;m++)o.children[m].style.display=m===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),r(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=i(new t.Panel("FPS","#0ff","#002")),h=i(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=i(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:i,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(h.update(d-a,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,f)){var m=performance.memory;f.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:r}};return t.Panel=function(i,r,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,h=48*c,f=3*c,d=2*c,m=3*c,A=15*c,y=74*c,p=30*c,g=document.createElement("canvas");g.width=u,g.height=h,g.style.cssText="width:80px;height:48px";var v=g.getContext("2d");return v.font="bold "+9*c+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=s,v.fillRect(0,0,u,h),v.fillStyle=r,v.fillText(i,f,d),v.fillRect(m,A,y,p),v.fillStyle=s,v.globalAlpha=.9,v.fillRect(m,A,y,p),{dom:g,update:function(E,S){o=Math.min(o,E),a=Math.max(a,E),v.fillStyle=s,v.globalAlpha=1,v.fillRect(0,0,u,A),v.fillStyle=r,v.fillText(l(E)+" "+i+" ("+l(o)+"-"+l(a)+")",f,d),v.drawImage(g,m+c,A,y-c,p,m,A,y-c,p),v.fillRect(m+y-c,A,c,p),v.fillStyle=s,v.globalAlpha=.9,v.fillRect(m+y-c,A,c,l((1-E/S)*p))}}},t})})(UX);var v_e=UX.exports;const y_e=Dm(v_e);function x_e(n,e=[],t){const[i,r]=w.useState();return w.useLayoutEffect(()=>{const s=n();return r(s),()=>void 0},e),i}function __e({showPanel:n=0,className:e,parent:t}){const i=x_e(()=>new y_e,[]);return w.useEffect(()=>{if(i){const r=t&&t.current||document.body;i.showPanel(n),r==null||r.appendChild(i.dom);const s=(e??"").split(" ").filter(l=>l);s.length&&i.dom.classList.add(...s);const o=XA(()=>i.begin()),a=AE(()=>i.end());return()=>{s.length&&i.dom.classList.remove(...s),r==null||r.removeChild(i.dom),o(),a()}}},[t,i,e,n]),null}class E_e{constructor(e,t,i){this.name=e,this.fg=t,this.bg=i,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,t,i,r,s=0){let o=1/0,a=0;this.context&&(o=Math.min(o,e),a=Math.max(i,e),r=Math.max(r,t),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(s)+" "+this.name+" ("+o.toFixed(s)+"-"+parseFloat(a.toFixed(s))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-t/r)*this.GRAPH_HEIGHT))}}const zX=class xp{constructor({logsPerSecond:e=20,samplesLog:t=100,samplesGraph:i=10,precision:r=2,minimal:s=!1,horizontal:o=!0,mode:a=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalGpuDurationCompute=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=a,this.horizontal=o,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",s&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=s,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.averageGpuCompute={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new xp.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new xp.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.gpuPanelCompute=null,this.samplesLog=t,this.samplesGraph=i,this.precision=r,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",l=>{l.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=a,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2),this.gpuPanelCompute&&this.resizePanel(this.gpuPanelCompute,3)})}patchThreeRenderer(e){const t=e.render,i=this;e.render=function(r,s){i.begin(),t.call(this,r,s),i.end()},this.threeRendererPatched=!0}resizePanel(e,t){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=t*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=t*e.HEIGHT/e.PR+"px"))}addPanel(e,t){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,t)),e}showPanel(e){for(let t=0;t<this.dom.children.length;t++){const i=this.dom.children[t];i.style.display=t===e?"block":"none"}this.mode=e}async init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const t=e;this.patchThreeRenderer(t),this.gl=t.getContext()}else!this.gl&&e instanceof WebGL2RenderingContext&&(this.gl=e);if(e.isWebGPURenderer){e.backend.trackTimestamp=!0,await e.hasFeatureAsync("timestamp-query")&&(this.gpuPanel=this.addPanel(new xp.Panel("GPU","#ff0","#220"),2),this.gpuPanelCompute=this.addPanel(new xp.Panel("CPT","#e1e1e1","#212121"),3),this.info=e.info);return}else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new xp.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,t)=>{if(this.gl){const i=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),r=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(i&&!r){const o=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=o,this.gl.deleteQuery(e.query),this.gpuQueries.splice(t,1)}}}))}update(){this.info===void 0?this.processGpuQueries():(this.totalGpuDuration=this.info.render.timestamp,this.totalGpuDurationCompute=this.info.compute.timestamp,this.addToAverage(this.totalGpuDurationCompute,this.averageGpuCompute)),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration===0&&this.beginProfiling("cpu-started"),this.totalCpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.gpuPanelCompute&&this.updatePanel(this.gpuPanelCompute,this.averageGpuCompute),this.prevCpuTime=e),e>=this.prevTime+1e3){const t=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(t,t,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,t){t.logs.push(e),t.logs.length>this.samplesLog&&t.logs.shift(),t.graph.push(e),t.graph.length>this.samplesGraph&&t.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,t,i){if(window.performance&&t&&this.isRunningCPUProfiling){window.performance.mark(t);const r=performance.measure(i,e,t);this.totalCpuDuration+=r.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,t){if(t.logs.length>0){let i=0,r=.01;for(let a=0;a<t.logs.length;a++)i+=t.logs[a],t.logs[a]>r&&(r=t.logs[a]);let s=0,o=.01;for(let a=0;a<t.graph.length;a++)s+=t.graph[a],t.graph[a]>o&&(o=t.graph[a]);e&&e.update(i/Math.min(t.logs.length,this.samplesLog),s/Math.min(t.graph.length,this.samplesGraph),r,o,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};zX.Panel=E_e;let w_e=zX;function S_e({className:n,parent:e,...t}){const i=Se(s=>s.gl),r=w.useMemo(()=>{const s=new w_e({...t});return s.init(i),s},[i]);return w.useEffect(()=>{if(r){const s=e&&e.current||document.body;s==null||s.appendChild(r.dom);const o=(n??"").split(" ").filter(l=>l);o.length&&r.dom.classList.add(...o);const a=AE(()=>r.update());return()=>{o.length&&r.dom.classList.remove(...o),s==null||s.removeChild(r.dom),a()}}},[e,r,n]),null}function C_e({size:n=256,frames:e=1/0}={}){const t=Se(u=>u.viewport.dpr),{width:i,height:r}=Se(u=>u.size),s=n||i*t,o=n||r*t,a=w.useMemo(()=>{const u=new Hm(s,o);return u.format=ka,u.type=$u,{depthTexture:u}},[s,o]);let l=0;const c=Es(s,o,a);return yt(u=>{(e===1/0||l<e)&&(u.gl.setRenderTarget(c),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(null),l++)}),c.depthTexture}function M_e(n,e,t=1){const i=Se(o=>o.viewport),r=e*(i.aspect>n/e?i.width/n:i.height/e);return[n*(i.aspect>n/e?i.width/n:i.height/e)*t,r*t,1]}function b_e(n,e){const t=Se(r=>r.pointer),[i]=w.useState(()=>{const r=new rh;return e&&sr(r,e,{}),function(s,o){r.setFromCamera(t,n instanceof th?n:n.current);const a=this.constructor.prototype.raycast.bind(this);a&&a(r,o)}});return i}function k4(n,e,t,i){return new(t||(t=Promise))(function(r,s){function o(c){try{l(i.next(c))}catch(u){s(u)}}function a(c){try{l(i.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(o,a)}l((i=i.apply(n,[])).next())})}const T_e=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function ZO(n){return n=n.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const kX=typeof window>"u",hl=(()=>{if(kX)return;const{userAgent:n,platform:e,maxTouchPoints:t}=window.navigator,i=/(iphone|ipod|ipad)/i.test(n),r=e==="iPad"||e==="MacIntel"&&t>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(n)||i||r,isSafari12:/Version\/12.+Safari/.test(n),isFirefox:/Firefox/.test(n)}})();function I_e(n,e,t){if(!t)return[e];const i=function(c){const u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,h=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,f=c.createShader(35633),d=c.createShader(35632),m=c.createProgram();if(!(d&&f&&m))return;c.shaderSource(f,u),c.shaderSource(d,h),c.compileShader(f),c.compileShader(d),c.attachShader(m,f),c.attachShader(m,d),c.linkProgram(m),c.detachShader(m,f),c.detachShader(m,d),c.deleteShader(f),c.deleteShader(d),c.useProgram(m);const A=c.createBuffer();c.bindBuffer(34962,A),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const y=c.getAttribLocation(m,"aPosition");c.vertexAttribPointer(y,3,5126,!1,0,0),c.enableVertexAttribArray(y),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);const p=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,p),c.deleteProgram(m),c.deleteBuffer(A),p.join("")}(n),r="801621810",s="8016218135",o="80162181161",a=hl!=null&&hl.isIpad?[["a7",o,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["a15",r,15],["m1",r,15],["m2",r,15]]:[["a7",o,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15],["a15",r,15],["a16",r,15],["a17",r,15]];let l;return i==="80162181255"?l=a.filter(([,,c])=>c>=14):(l=a.filter(([,c])=>c===i),l.length||(l=a)),l.map(([c])=>`apple ${c} gpu`)}let $O=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};const N4=[],eU=[];function B_e(n,e){if(n===e)return 0;const t=n;n.length>e.length&&(n=e,e=t);let i=n.length,r=e.length;for(;i>0&&n.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let s,o=0;for(;o<i&&n.charCodeAt(o)===e.charCodeAt(o);)o++;if(i-=o,r-=o,i===0)return r;let a,l,c=0,u=0,h=0;for(;u<i;)eU[u]=n.charCodeAt(o+u),N4[u]=++u;for(;h<r;)for(s=e.charCodeAt(o+h),a=h++,c=h,u=0;u<i;u++)l=s===eU[u]?a:a+1,a=N4[u],c=N4[u]=a>c?l>c?c+1:l:l>a?a+1:l;return c}function P_e(n){return n!=null}const R_e=({mobileTiers:n=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:t={},glContext:i,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@5.0.42/dist/benchmarks"}={})=>k4(void 0,void 0,void 0,function*(){const o={};if(kX)return{tier:0,type:"SSR"};const{isIpad:a=!!(hl!=null&&hl.isIpad),isMobile:l=!!(hl!=null&&hl.isMobile),screenSize:c=window.screen,loadBenchmarks:u=S=>k4(void 0,void 0,void 0,function*(){const C=yield fetch(`${s}/${S}`).then(M=>M.json());if(parseInt(C.shift().split(".")[0],10)<4)throw new $O("Detect GPU benchmark data is out of date. Please update to version 4x");return C})}=t;let{renderer:h}=t;const f=(S,C,M,b,T)=>({device:T,fps:b,gpu:M,isMobile:l,tier:S,type:C});let d,m="";if(h)h=ZO(h),d=[h];else{const S=i||function(M,b=!1){const T={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:b,powerPreference:"high-performance",stencil:!1};M&&delete T.powerPreference;const I=window.document.createElement("canvas"),F=I.getContext("webgl",T)||I.getContext("experimental-webgl",T);return F??void 0}(hl==null?void 0:hl.isSafari12,r);if(!S)return f(0,"WEBGL_UNSUPPORTED");const C=hl!=null&&hl.isFirefox?null:S.getExtension("WEBGL_debug_renderer_info");if(h=C?S.getParameter(C.UNMASKED_RENDERER_WEBGL):S.getParameter(S.RENDERER),!h)return f(1,"FALLBACK");m=h,h=ZO(h),d=function(M,b,T){return b==="apple gpu"?I_e(M,b,T):[b]}(S,h,l)}const A=(yield Promise.all(d.map(function(S){var C;return k4(this,void 0,void 0,function*(){const M=($=>{const N=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const Q of N)if($.includes(Q))return Q})(S);if(!M)return;const b=`${l?"m":"d"}-${M}${a?"-ipad":""}.json`,T=o[b]=(C=o[b])!==null&&C!==void 0?C:u(b);let I;try{I=yield T}catch($){if($ instanceof $O)throw $;return}const F=function($){var N;const Q=($=$.replace(/\([^)]+\)/,"")).match(/\d+/)||$.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(N=Q==null?void 0:Q.join("").replace(/\W|amd/g,""))!==null&&N!==void 0?N:""}(S);let R=I.filter(([,$])=>$===F);R.length||(R=I.filter(([$])=>$.includes(S)));const z=R.length;if(z===0)return;const L=S.split(/[.,()\[\]/\s]/g).sort().filter(($,N,Q)=>N===0||$!==Q[N-1]).join(" ");let H,[K,,,,J]=z>1?R.map($=>[$,B_e(L,$[2])]).sort(([,$],[,N])=>$-N)[0][0]:R[0],O=Number.MAX_VALUE;const{devicePixelRatio:W}=window,V=c.width*W*c.height*W;for(const $ of J){const[N,Q]=$,j=N*Q,X=Math.abs(V-j);X<O&&(O=X,H=$)}if(!H)return;const[,,U,Y]=H;return[O,U,K,Y]})}))).filter(P_e).sort(([S=Number.MAX_VALUE,C],[M=Number.MAX_VALUE,b])=>S===M?C-b:S-M);if(!A.length){const S=T_e.find(C=>h.includes(C));return S?f(0,"BLOCKLISTED",S):f(1,"FALLBACK",`${h} (${m})`)}const[,y,p,g]=A[0];if(y===-1)return f(0,"BLOCKLISTED",p,y,g);const v=l?n:e;let E=0;for(let S=0;S<v.length;S++)y>=v[S]&&(E=S);return f(E,"BENCHMARK",p,y,g)}),NX=n=>Ic(()=>R_e(n),["useDetectGPU"]);function D_e({children:n,...e}){const t=NX(e);return w.createElement(w.Fragment,null,n==null?void 0:n(t))}const GX=0,L_e=1,JE=2,tU=2,G4=1.25,nU=1,Lu=6*4+4+4,ZE=65535,F_e=Math.pow(2,-24),H4=Symbol("SKIP_GENERATION");function HX(n){return n.index?n.index.count:n.attributes.position.count}function Km(n){return HX(n)/3}function QX(n,e=ArrayBuffer){return n>65535?new Uint32Array(new e(4*n)):new Uint16Array(new e(2*n))}function O_e(n,e){if(!n.index){const t=n.attributes.position.count,i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=QX(t,i);n.setIndex(new zt(r,1));for(let s=0;s<t;s++)r[s]=s}}function VX(n){const e=Km(n),t=n.drawRange,i=t.start/3,r=(t.start+t.count)/3,s=Math.max(0,i),o=Math.min(e,r)-s;return[{offset:Math.floor(s),count:Math.floor(o)}]}function WX(n){if(!n.groups||!n.groups.length)return VX(n);const e=[],t=new Set,i=n.drawRange,r=i.start/3,s=(i.start+i.count)/3;for(const a of n.groups){const l=a.start/3,c=(a.start+a.count)/3;t.add(Math.max(r,l)),t.add(Math.min(s,c))}const o=Array.from(t.values()).sort((a,l)=>a-l);for(let a=0;a<o.length-1;a++){const l=o[a],c=o[a+1];e.push({offset:Math.floor(l),count:Math.floor(c-l)})}return e}function U_e(n){if(n.groups.length===0)return!1;const e=Km(n),t=WX(n).sort((s,o)=>s.offset-o.offset),i=t[t.length-1];i.count=Math.min(e-i.offset,i.count);let r=0;return t.forEach(({count:s})=>r+=s),e!==r}function Q4(n,e,t,i,r){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,h=1/0,f=1/0,d=1/0,m=-1/0,A=-1/0,y=-1/0;for(let p=e*6,g=(e+t)*6;p<g;p+=6){const v=n[p+0],E=n[p+1],S=v-E,C=v+E;S<s&&(s=S),C>l&&(l=C),v<h&&(h=v),v>m&&(m=v);const M=n[p+2],b=n[p+3],T=M-b,I=M+b;T<o&&(o=T),I>c&&(c=I),M<f&&(f=M),M>A&&(A=M);const F=n[p+4],R=n[p+5],z=F-R,L=F+R;z<a&&(a=z),L>u&&(u=L),F<d&&(d=F),F>y&&(y=F)}i[0]=s,i[1]=o,i[2]=a,i[3]=l,i[4]=c,i[5]=u,r[0]=h,r[1]=f,r[2]=d,r[3]=m,r[4]=A,r[5]=y}function z_e(n,e=null,t=null,i=null){const r=n.attributes.position,s=n.index?n.index.array:null,o=Km(n),a=r.normalized;let l;e===null?(l=new Float32Array(o*6*4),t=0,i=o):(l=e,t=t||0,i=i||o);const c=r.array,u=r.offset||0;let h=3;r.isInterleavedBufferAttribute&&(h=r.data.stride);const f=["getX","getY","getZ"];for(let d=t;d<t+i;d++){const m=d*3,A=d*6;let y=m+0,p=m+1,g=m+2;s&&(y=s[y],p=s[p],g=s[g]),a||(y=y*h+u,p=p*h+u,g=g*h+u);for(let v=0;v<3;v++){let E,S,C;a?(E=r[f[v]](y),S=r[f[v]](p),C=r[f[v]](g)):(E=c[y+v],S=c[p+v],C=c[g+v]);let M=E;S<M&&(M=S),C<M&&(M=C);let b=E;S>b&&(b=S),C>b&&(b=C);const T=(b-M)/2,I=v*2;l[A+I+0]=M+T,l[A+I+1]=T+(Math.abs(M)+T)*F_e}}return l}function zi(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function iU(n){let e=-1,t=-1/0;for(let i=0;i<3;i++){const r=n[i+3]-n[i];r>t&&(t=r,e=i)}return e}function rU(n,e){e.set(n)}function sU(n,e,t){let i,r;for(let s=0;s<3;s++){const o=s+3;i=n[s],r=e[s],t[s]=i<r?i:r,i=n[o],r=e[o],t[o]=i>r?i:r}}function Q2(n,e,t){for(let i=0;i<3;i++){const r=e[n+2*i],s=e[n+2*i+1],o=r-s,a=r+s;o<t[i]&&(t[i]=o),a>t[i+3]&&(t[i+3]=a)}}function E1(n){const e=n[3]-n[0],t=n[4]-n[1],i=n[5]-n[2];return 2*(e*t+t*i+i*e)}const $l=32,k_e=(n,e)=>n.candidate-e.candidate,Zc=new Array($l).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),V2=new Float32Array(6);function N_e(n,e,t,i,r,s){let o=-1,a=0;if(s===GX)o=iU(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===L_e)o=iU(n),o!==-1&&(a=G_e(t,i,r,o));else if(s===JE){const l=E1(n);let c=G4*r;const u=i*6,h=(i+r)*6;for(let f=0;f<3;f++){const d=e[f],y=(e[f+3]-d)/$l;if(r<$l/4){const p=[...Zc];p.length=r;let g=0;for(let E=u;E<h;E+=6,g++){const S=p[g];S.candidate=t[E+2*f],S.count=0;const{bounds:C,leftCacheBounds:M,rightCacheBounds:b}=S;for(let T=0;T<3;T++)b[T]=1/0,b[T+3]=-1/0,M[T]=1/0,M[T+3]=-1/0,C[T]=1/0,C[T+3]=-1/0;Q2(E,t,C)}p.sort(k_e);let v=r;for(let E=0;E<v;E++){const S=p[E];for(;E+1<v&&p[E+1].candidate===S.candidate;)p.splice(E+1,1),v--}for(let E=u;E<h;E+=6){const S=t[E+2*f];for(let C=0;C<v;C++){const M=p[C];S>=M.candidate?Q2(E,t,M.rightCacheBounds):(Q2(E,t,M.leftCacheBounds),M.count++)}}for(let E=0;E<v;E++){const S=p[E],C=S.count,M=r-S.count,b=S.leftCacheBounds,T=S.rightCacheBounds;let I=0;C!==0&&(I=E1(b)/l);let F=0;M!==0&&(F=E1(T)/l);const R=nU+G4*(I*C+F*M);R<c&&(o=f,c=R,a=S.candidate)}}else{for(let v=0;v<$l;v++){const E=Zc[v];E.count=0,E.candidate=d+y+v*y;const S=E.bounds;for(let C=0;C<3;C++)S[C]=1/0,S[C+3]=-1/0}for(let v=u;v<h;v+=6){let C=~~((t[v+2*f]-d)/y);C>=$l&&(C=$l-1);const M=Zc[C];M.count++,Q2(v,t,M.bounds)}const p=Zc[$l-1];rU(p.bounds,p.rightCacheBounds);for(let v=$l-2;v>=0;v--){const E=Zc[v],S=Zc[v+1];sU(E.bounds,S.rightCacheBounds,E.rightCacheBounds)}let g=0;for(let v=0;v<$l-1;v++){const E=Zc[v],S=E.count,C=E.bounds,b=Zc[v+1].rightCacheBounds;S!==0&&(g===0?rU(C,V2):sU(C,V2,V2)),g+=S;let T=0,I=0;g!==0&&(T=E1(V2)/l);const F=r-g;F!==0&&(I=E1(b)/l);const R=nU+G4*(T*g+I*F);R<c&&(o=f,c=R,a=E.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function G_e(n,e,t,i){let r=0;for(let s=e,o=e+t;s<o;s++)r+=n[s*6+i*2];return r/t}class V4{constructor(){this.boundingData=new Float32Array(6)}}function H_e(n,e,t,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&t[o*6+c]<l;)o++;for(;o<=a&&t[a*6+c]>=l;)a--;if(o<a){for(let u=0;u<3;u++){let h=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=h}for(let u=0;u<6;u++){let h=t[o*6+u];t[o*6+u]=t[a*6+u],t[a*6+u]=h}o++,a--}else return o}}function Q_e(n,e,t,i,r,s){let o=i,a=i+r-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&t[o*6+c]<l;)o++;for(;o<=a&&t[a*6+c]>=l;)a--;if(o<a){let u=n[o];n[o]=n[a],n[a]=u;for(let h=0;h<6;h++){let f=t[o*6+h];t[o*6+h]=t[a*6+h],t[a*6+h]=f}o++,a--}else return o}}function _s(n,e){return e[n+15]===65535}function Ws(n,e){return e[n+6]}function fo(n,e){return e[n+14]}function na(n){return n+8}function po(n,e){return e[n+6]}function B8(n,e){return e[n+7]}let jX,q1,Yx,XX;const V_e=Math.pow(2,32);function rT(n){return"count"in n?1:1+rT(n.left)+rT(n.right)}function W_e(n,e,t){return jX=new Float32Array(t),q1=new Uint32Array(t),Yx=new Uint16Array(t),XX=new Uint8Array(t),sT(n,e)}function sT(n,e){const t=n/4,i=n/2,r="count"in e,s=e.boundingData;for(let o=0;o<6;o++)jX[t+o]=s[o];if(r)if(e.buffer){const o=e.buffer;XX.set(new Uint8Array(o),n);for(let a=n,l=n+o.byteLength;a<l;a+=Lu){const c=a/2;_s(c,Yx)||(q1[a/4+6]+=t)}return n+o.byteLength}else{const o=e.offset,a=e.count;return q1[t+6]=o,Yx[i+14]=a,Yx[i+15]=ZE,n+Lu}else{const o=e.left,a=e.right,l=e.splitAxis;let c;if(c=sT(n+Lu,o),c/4>V_e)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return q1[t+6]=c/4,c=sT(c,a),q1[t+7]=l,c}}function j_e(n,e){const t=(n.index?n.index.count:n.attributes.position.count)/3,i=t>2**16,r=i?4:2,s=e?new SharedArrayBuffer(t*r):new ArrayBuffer(t*r),o=i?new Uint32Array(s):new Uint16Array(s);for(let a=0,l=o.length;a<l;a++)o[a]=a;return o}function X_e(n,e,t,i,r){const{maxDepth:s,verbose:o,maxLeafTris:a,strategy:l,onProgress:c,indirect:u}=r,h=n._indirectBuffer,f=n.geometry,d=f.index?f.index.array:null,m=u?Q_e:H_e,A=Km(f),y=new Float32Array(6);let p=!1;const g=new V4;return Q4(e,t,i,g.boundingData,y),E(g,t,i,y),g;function v(S){c&&c(S/A)}function E(S,C,M,b=null,T=0){if(!p&&T>=s&&(p=!0,o&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(f))),M<=a||T>=s)return v(C+M),S.offset=C,S.count=M,S;const I=N_e(S.boundingData,b,e,C,M,l);if(I.axis===-1)return v(C+M),S.offset=C,S.count=M,S;const F=m(h,d,e,C,M,I);if(F===C||F===C+M)v(C+M),S.offset=C,S.count=M;else{S.splitAxis=I.axis;const R=new V4,z=C,L=F-C;S.left=R,Q4(e,z,L,R.boundingData,y),E(R,z,L,y,T+1);const H=new V4,K=F,J=M-L;S.right=H,Q4(e,K,J,H.boundingData,y),E(H,K,J,y,T+1)}return S}}function Y_e(n,e){const t=n.geometry;e.indirect&&(n._indirectBuffer=j_e(t,e.useSharedArrayBuffer),U_e(t)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),n._indirectBuffer||O_e(t,e);const i=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,r=z_e(t),s=e.indirect?VX(t):WX(t);n._roots=s.map(o=>{const a=X_e(n,r,o.offset,o.count,e),l=rT(a),c=new i(Lu*l);return W_e(0,a,c),c})}class bc{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][t];i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.dot(a);i=l<i?l:i,r=l>r?l:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}bc.prototype.setFromBox=function(){const n=new D;return function(t,i){const r=i.min,s=i.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){n.x=r.x*l+s.x*(1-l),n.y=r.y*c+s.y*(1-c),n.z=r.z*u+s.z*(1-u);const h=t.dot(n);o=Math.min(h,o),a=Math.max(h,a)}this.min=o,this.max=a}}();const q_e=function(){const n=new D,e=new D,t=new D;return function(r,s,o){const a=r.start,l=n,c=s.start,u=e;t.subVectors(a,c),n.subVectors(r.end,r.start),e.subVectors(s.end,s.start);const h=t.dot(u),f=u.dot(l),d=u.dot(u),m=t.dot(l),y=l.dot(l)*d-f*f;let p,g;y!==0?p=(h*f-m*d)/y:p=0,g=(h+p*f)/d,o.x=p,o.y=g}}(),P8=function(){const n=new Ee,e=new D,t=new D;return function(r,s,o,a){q_e(r,s,n);let l=n.x,c=n.y;if(l>=0&&l<=1&&c>=0&&c<=1){r.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),r.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?r.at(0,o):r.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=r.start:u=r.end;let h;c<0?h=s.start:h=s.end;const f=e,d=t;if(r.closestPointToPoint(h,!0,e),s.closestPointToPoint(u,!0,t),f.distanceToSquared(h)<=d.distanceToSquared(u)){o.copy(f),a.copy(h);return}else{o.copy(u),a.copy(d);return}}}}(),K_e=function(){const n=new D,e=new D,t=new Br,i=new Ga;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:h}=o;if(i.start=c,i.end=u,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(i.start=c,i.end=h,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(i.start=u,i.end=h,i.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const A=o.getPlane(t);if(Math.abs(A.distanceToPoint(l))<=a){const p=A.projectPoint(l,e);if(o.containsPoint(p))return!0}return!1}}(),J_e=1e-15;function W4(n){return Math.abs(n)<J_e}class Wa extends rr{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new D),this.satBounds=new Array(4).fill().map(()=>new bc),this.points=[this.a,this.b,this.c],this.sphere=new vi,this.plane=new Br,this.needsUpdate=!0}intersectsSphere(e){return K_e(e,this)}update(){const e=this.a,t=this.b,i=this.c,r=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,r);const c=s[1],u=o[1];c.subVectors(e,t),u.setFromPoints(c,r);const h=s[2],f=o[2];h.subVectors(t,i),f.setFromPoints(h,r);const d=s[3],m=o[3];d.subVectors(i,e),m.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Wa.prototype.closestPointToSegment=function(){const n=new D,e=new D,t=new Ga;return function(r,s=null,o=null){const{start:a,end:l}=r,c=this.points;let u,h=1/0;for(let f=0;f<3;f++){const d=(f+1)%3;t.start.copy(c[f]),t.end.copy(c[d]),P8(t,r,n,e),u=n.distanceToSquared(e),u<h&&(h=u,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),u=a.distanceToSquared(n),u<h&&(h=u,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(l,n),u=l.distanceToSquared(n),u<h&&(h=u,s&&s.copy(n),o&&o.copy(l)),Math.sqrt(h)}}();Wa.prototype.intersectsTriangle=function(){const n=new Wa,e=new Array(3),t=new Array(3),i=new bc,r=new bc,s=new D,o=new D,a=new D,l=new D,c=new D,u=new Ga,h=new Ga,f=new Ga,d=new D;function m(A,y,p){const g=A.points;let v=0,E=-1;for(let S=0;S<3;S++){const{start:C,end:M}=u;C.copy(g[S]),M.copy(g[(S+1)%3]),u.delta(o);const b=W4(y.distanceToPoint(C));if(W4(y.normal.dot(o))&&b){p.copy(u),v=2;break}const T=y.intersectLine(u,d);if(!T&&b&&d.copy(C),(T||b)&&!W4(d.distanceTo(M))){if(v<=1)(v===1?p.start:p.end).copy(d),b&&(E=v);else if(v>=2){(E===1?p.start:p.end).copy(d),v=2;break}if(v++,v===2&&E===-1)break}}return v}return function(y,p=null,g=!1){this.needsUpdate&&this.update(),y.isExtendedTriangle?y.needsUpdate&&y.update():(n.copy(y),n.update(),y=n);const v=this.plane,E=y.plane;if(Math.abs(v.normal.dot(E.normal))>1-1e-10){const S=this.satBounds,C=this.satAxes;t[0]=y.a,t[1]=y.b,t[2]=y.c;for(let T=0;T<4;T++){const I=S[T],F=C[T];if(i.setFromPoints(F,t),I.isSeparated(i))return!1}const M=y.satBounds,b=y.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let T=0;T<4;T++){const I=M[T],F=b[T];if(i.setFromPoints(F,e),I.isSeparated(i))return!1}for(let T=0;T<4;T++){const I=C[T];for(let F=0;F<4;F++){const R=b[F];if(s.crossVectors(I,R),i.setFromPoints(s,e),r.setFromPoints(s,t),i.isSeparated(r))return!1}}return p&&(g||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const S=m(this,E,h);if(S===1&&y.containsPoint(h.end))return p&&(p.start.copy(h.end),p.end.copy(h.end)),!0;if(S!==2)return!1;const C=m(y,v,f);if(C===1&&this.containsPoint(f.end))return p&&(p.start.copy(f.end),p.end.copy(f.end)),!0;if(C!==2)return!1;if(h.delta(a),f.delta(l),a.dot(l)<0){let z=f.start;f.start=f.end,f.end=z}const M=h.start.dot(a),b=h.end.dot(a),T=f.start.dot(a),I=f.end.dot(a),F=b<T,R=M<I;return M!==I&&T!==b&&F===R?!1:(p&&(c.subVectors(h.start,f.start),c.dot(a)>0?p.start.copy(h.start):p.start.copy(f.start),c.subVectors(h.end,f.end),c.dot(a)<0?p.end.copy(h.end):p.end.copy(f.end)),!0)}}}();Wa.prototype.distanceToPoint=function(){const n=new D;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Wa.prototype.distanceToTriangle=function(){const n=new D,e=new D,t=["a","b","c"],i=new Ga,r=new Ga;return function(o,a=null,l=null){const c=a||l?i:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let h=0;h<3;h++){let f;const d=t[h],m=o[d];this.closestPointToPoint(m,n),f=m.distanceToSquared(n),f<u&&(u=f,a&&a.copy(n),l&&l.copy(m));const A=this[d];o.closestPointToPoint(A,n),f=A.distanceToSquared(n),f<u&&(u=f,a&&a.copy(A),l&&l.copy(n))}for(let h=0;h<3;h++){const f=t[h],d=t[(h+1)%3];i.set(this[f],this[d]);for(let m=0;m<3;m++){const A=t[m],y=t[(m+1)%3];r.set(o[A],o[y]),P8(i,r,n,e);const p=n.distanceToSquared(e);p<u&&(u=p,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(u)}}();class Is{constructor(e,t,i){this.isOrientedBox=!0,this.min=new D,this.max=new D,this.matrix=new Oe,this.invMatrix=new Oe,this.points=new Array(8).fill().map(()=>new D),this.satAxes=new Array(3).fill().map(()=>new D),this.satBounds=new Array(3).fill().map(()=>new bc),this.alignedSatBounds=new Array(3).fill().map(()=>new bc),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Is.prototype.update=function(){return function(){const e=this.matrix,t=this.min,i=this.max,r=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let h=0;h<=1;h++){const f=1*c|2*u|4*h,d=r[f];d.x=c?i.x:t.x,d.y=u?i.y:t.y,d.z=h?i.z:t.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=r[0];for(let c=0;c<3;c++){const u=o[c],h=s[c],f=1<<c,d=r[f];u.subVectors(a,d),h.setFromPoints(u,r)}const l=this.alignedSatBounds;l[0].setFromPointsField(r,"x"),l[1].setFromPointsField(r,"y"),l[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Is.prototype.intersectsBox=function(){const n=new bc;return function(t){this.needsUpdate&&this.update();const i=t.min,r=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=i.x,n.max=r.x,a[0].isSeparated(n)||(n.min=i.y,n.max=r.y,a[1].isSeparated(n))||(n.min=i.z,n.max=r.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(n.setFromBox(c,t),u.isSeparated(n))return!1}return!0}}();Is.prototype.intersectsTriangle=function(){const n=new Wa,e=new Array(3),t=new bc,i=new bc,r=new D;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const d=a[f],m=l[f];if(t.setFromPoints(m,e),d.isSeparated(t))return!1}const c=o.satBounds,u=o.satAxes,h=this.points;for(let f=0;f<3;f++){const d=c[f],m=u[f];if(t.setFromPoints(m,h),d.isSeparated(t))return!1}for(let f=0;f<3;f++){const d=l[f];for(let m=0;m<4;m++){const A=u[m];if(r.crossVectors(d,A),t.setFromPoints(r,e),i.setFromPoints(r,h),t.isSeparated(i))return!1}}return!0}}();Is.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Is.prototype.distanceToPoint=function(){const n=new D;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Is.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new Ga),t=new Array(12).fill().map(()=>new Ga),i=new D,r=new D;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(r),this.closestPointToPoint(r,i),o.closestPointToPoint(i,r),l&&l.copy(i),c&&c.copy(r)),0;const u=a*a,h=o.min,f=o.max,d=this.points;let m=1/0;for(let y=0;y<8;y++){const p=d[y];r.copy(p).clamp(h,f);const g=p.distanceToSquared(r);if(g<m&&(m=g,l&&l.copy(p),c&&c.copy(r),g<u))return Math.sqrt(g)}let A=0;for(let y=0;y<3;y++)for(let p=0;p<=1;p++)for(let g=0;g<=1;g++){const v=(y+1)%3,E=(y+2)%3,S=p<<v|g<<E,C=1<<y|p<<v|g<<E,M=d[S],b=d[C];e[A].set(M,b);const I=n[y],F=n[v],R=n[E],z=t[A],L=z.start,H=z.end;L[I]=h[I],L[F]=p?h[F]:f[F],L[R]=g?h[R]:f[F],H[I]=f[I],H[F]=p?h[F]:f[F],H[R]=g?h[R]:f[F],A++}for(let y=0;y<=1;y++)for(let p=0;p<=1;p++)for(let g=0;g<=1;g++){r.x=y?f.x:h.x,r.y=p?f.y:h.y,r.z=g?f.z:h.z,this.closestPointToPoint(r,i);const v=r.distanceToSquared(i);if(v<m&&(m=v,l&&l.copy(i),c&&c.copy(r),v<u))return Math.sqrt(v)}for(let y=0;y<12;y++){const p=e[y];for(let g=0;g<12;g++){const v=t[g];P8(p,v,i,r);const E=i.distanceToSquared(r);if(E<m&&(m=E,l&&l.copy(i),c&&c.copy(r),E<u))return Math.sqrt(E)}}return Math.sqrt(m)}}();class R8{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class Z_e extends R8{constructor(){super(()=>new Wa)}}const ia=new Z_e;class $_e{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=i=>{t&&e.push(t),t=i,this.float32Array=new Float32Array(i),this.uint16Array=new Uint16Array(i),this.uint32Array=new Uint32Array(i)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Ai=new $_e;let Au,Qp;const Jd=[],W2=new R8(()=>new Bn);function e3e(n,e,t,i,r,s){Au=W2.getPrimitive(),Qp=W2.getPrimitive(),Jd.push(Au,Qp),Ai.setBuffer(n._roots[e]);const o=oT(0,n.geometry,t,i,r,s);Ai.clearBuffer(),W2.releasePrimitive(Au),W2.releasePrimitive(Qp),Jd.pop(),Jd.pop();const a=Jd.length;return a>0&&(Qp=Jd[a-1],Au=Jd[a-2]),o}function oT(n,e,t,i,r=null,s=0,o=0){const{float32Array:a,uint16Array:l,uint32Array:c}=Ai;let u=n*2;if(_s(u,l)){const f=Ws(n,c),d=fo(u,l);return zi(n,a,Au),i(f,d,!1,o,s+n,Au)}else{let I=function(R){const{uint16Array:z,uint32Array:L}=Ai;let H=R*2;for(;!_s(H,z);)R=na(R),H=R*2;return Ws(R,L)},F=function(R){const{uint16Array:z,uint32Array:L}=Ai;let H=R*2;for(;!_s(H,z);)R=po(R,L),H=R*2;return Ws(R,L)+fo(H,z)};const f=na(n),d=po(n,c);let m=f,A=d,y,p,g,v;if(r&&(g=Au,v=Qp,zi(m,a,g),zi(A,a,v),y=r(g),p=r(v),p<y)){m=d,A=f;const R=y;y=p,p=R,g=v}g||(g=Au,zi(m,a,g));const E=_s(m*2,l),S=t(g,E,y,o+1,s+m);let C;if(S===tU){const R=I(m),L=F(m)-R;C=i(R,L,!0,o+1,s+m,g)}else C=S&&oT(m,e,t,i,r,s,o+1);if(C)return!0;v=Qp,zi(A,a,v);const M=_s(A*2,l),b=t(v,M,p,o+1,s+A);let T;if(b===tU){const R=I(A),L=F(A)-R;T=i(R,L,!0,o+1,s+A,v)}else T=b&&oT(A,e,t,i,r,s,o+1);return!!T}}const w1=new D,j4=new D;function t3e(n,e,t={},i=0,r=1/0){const s=i*i,o=r*r;let a=1/0,l=null;if(n.shapecast({boundsTraverseOrder:u=>(w1.copy(e).clamp(u.min,u.max),w1.distanceToSquared(e)),intersectsBounds:(u,h,f)=>f<a&&f<o,intersectsTriangle:(u,h)=>{u.closestPointToPoint(e,w1);const f=e.distanceToSquared(w1);return f<a&&(j4.copy(w1),a=f,l=h),f<s}}),a===1/0)return null;const c=Math.sqrt(a);return t.point?t.point.copy(j4):t.point=j4.clone(),t.distance=c,t.faceIndex=l,t}const Zd=new D,$d=new D,ep=new D,j2=new Ee,X2=new Ee,Y2=new Ee,oU=new D,aU=new D,lU=new D,q2=new D;function n3e(n,e,t,i,r,s,o,a){let l;if(s===Ni?l=n.intersectTriangle(i,t,e,!0,r):l=n.intersectTriangle(e,t,i,s!==Vn,r),l===null)return null;const c=n.origin.distanceTo(r);return c<o||c>a?null:{distance:c,point:r.clone()}}function i3e(n,e,t,i,r,s,o,a,l,c,u){Zd.fromBufferAttribute(e,s),$d.fromBufferAttribute(e,o),ep.fromBufferAttribute(e,a);const h=n3e(n,Zd,$d,ep,q2,l,c,u);if(h){i&&(j2.fromBufferAttribute(i,s),X2.fromBufferAttribute(i,o),Y2.fromBufferAttribute(i,a),h.uv=rr.getInterpolation(q2,Zd,$d,ep,j2,X2,Y2,new Ee)),r&&(j2.fromBufferAttribute(r,s),X2.fromBufferAttribute(r,o),Y2.fromBufferAttribute(r,a),h.uv1=rr.getInterpolation(q2,Zd,$d,ep,j2,X2,Y2,new Ee)),t&&(oU.fromBufferAttribute(t,s),aU.fromBufferAttribute(t,o),lU.fromBufferAttribute(t,a),h.normal=rr.getInterpolation(q2,Zd,$d,ep,oU,aU,lU,new D),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const f={a:s,b:o,c:a,normal:new D,materialIndex:0};rr.getNormal(Zd,$d,ep,f.normal),h.face=f,h.faceIndex=s}return h}function $E(n,e,t,i,r,s,o){const a=i*3;let l=a+0,c=a+1,u=a+2;const h=n.index;n.index&&(l=h.getX(l),c=h.getX(c),u=h.getX(u));const{position:f,normal:d,uv:m,uv1:A}=n.attributes,y=i3e(t,f,d,m,A,l,c,u,e,s,o);return y?(y.faceIndex=i,r&&r.push(y),y):null}function ar(n,e,t,i){const r=n.a,s=n.b,o=n.c;let a=e,l=e+1,c=e+2;t&&(a=t.getX(a),l=t.getX(l),c=t.getX(c)),r.x=i.getX(a),r.y=i.getY(a),r.z=i.getZ(a),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),o.x=i.getX(c),o.y=i.getY(c),o.z=i.getZ(c)}function r3e(n,e,t,i,r,s,o,a){const{geometry:l,_indirectBuffer:c}=n;for(let u=i,h=i+r;u<h;u++)$E(l,e,t,u,s,o,a)}function s3e(n,e,t,i,r,s,o){const{geometry:a,_indirectBuffer:l}=n;let c=1/0,u=null;for(let h=i,f=i+r;h<f;h++){let d;d=$E(a,e,t,h,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function o3e(n,e,t,i,r,s,o){const{geometry:a}=t,{index:l}=a,c=a.attributes.position;for(let u=n,h=e+n;u<h;u++){let f;if(f=u,ar(o,f*3,l,c),o.needsUpdate=!0,i(o,f,r,s))return!0}return!1}function a3e(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,o,a,l,c=0;const u=n._roots;for(let f=0,d=u.length;f<d;f++)s=u[f],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(f,d,m=!1){const A=f*2;if(a[A+15]===ZE){const p=o[f+6],g=a[A+14];let v=1/0,E=1/0,S=1/0,C=-1/0,M=-1/0,b=-1/0;for(let T=3*p,I=3*(p+g);T<I;T++){let F=i[T];const R=r.getX(F),z=r.getY(F),L=r.getZ(F);R<v&&(v=R),R>C&&(C=R),z<E&&(E=z),z>M&&(M=z),L<S&&(S=L),L>b&&(b=L)}return l[f+0]!==v||l[f+1]!==E||l[f+2]!==S||l[f+3]!==C||l[f+4]!==M||l[f+5]!==b?(l[f+0]=v,l[f+1]=E,l[f+2]=S,l[f+3]=C,l[f+4]=M,l[f+5]=b,!0):!1}else{const p=f+8,g=o[f+6],v=p+d,E=g+d;let S=m,C=!1,M=!1;e?S||(C=e.has(v),M=e.has(E),S=!C&&!M):(C=!0,M=!0);const b=S||C,T=S||M;let I=!1;b&&(I=h(p,d,S));let F=!1;T&&(F=h(g,d,S));const R=I||F;if(R)for(let z=0;z<3;z++){const L=p+z,H=g+z,K=l[L],J=l[L+3],O=l[H],W=l[H+3];l[f+z]=K<O?K:O,l[f+z+3]=J>W?J:W}return R}}}function Xu(n,e,t,i,r){let s,o,a,l,c,u;const h=1/t.direction.x,f=1/t.direction.y,d=1/t.direction.z,m=t.origin.x,A=t.origin.y,y=t.origin.z;let p=e[n],g=e[n+3],v=e[n+1],E=e[n+3+1],S=e[n+2],C=e[n+3+2];return h>=0?(s=(p-m)*h,o=(g-m)*h):(s=(g-m)*h,o=(p-m)*h),f>=0?(a=(v-A)*f,l=(E-A)*f):(a=(E-A)*f,l=(v-A)*f),s>l||a>o||((a>s||isNaN(s))&&(s=a),(l<o||isNaN(o))&&(o=l),d>=0?(c=(S-y)*d,u=(C-y)*d):(c=(C-y)*d,u=(S-y)*d),s>u||c>o)?!1:((c>s||s!==s)&&(s=c),(u<o||o!==o)&&(o=u),s<=r&&o>=i)}function l3e(n,e,t,i,r,s,o,a){const{geometry:l,_indirectBuffer:c}=n;for(let u=i,h=i+r;u<h;u++){let f=c?c[u]:u;$E(l,e,t,f,s,o,a)}}function c3e(n,e,t,i,r,s,o){const{geometry:a,_indirectBuffer:l}=n;let c=1/0,u=null;for(let h=i,f=i+r;h<f;h++){let d;d=$E(a,e,t,l?l[h]:h,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function u3e(n,e,t,i,r,s,o){const{geometry:a}=t,{index:l}=a,c=a.attributes.position;for(let u=n,h=e+n;u<h;u++){let f;if(f=t.resolveTriangleIndex(u),ar(o,f*3,l,c),o.needsUpdate=!0,i(o,f,r,s))return!0}return!1}function h3e(n,e,t,i,r,s,o){Ai.setBuffer(n._roots[e]),aT(0,n,t,i,r,s,o),Ai.clearBuffer()}function aT(n,e,t,i,r,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Ai,u=n*2;if(_s(u,l)){const f=Ws(n,c),d=fo(u,l);r3e(e,t,i,f,d,r,s,o)}else{const f=na(n);Xu(f,a,i,s,o)&&aT(f,e,t,i,r,s,o);const d=po(n,c);Xu(d,a,i,s,o)&&aT(d,e,t,i,r,s,o)}}const f3e=["x","y","z"];function d3e(n,e,t,i,r,s){Ai.setBuffer(n._roots[e]);const o=lT(0,n,t,i,r,s);return Ai.clearBuffer(),o}function lT(n,e,t,i,r,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Ai;let c=n*2;if(_s(c,a)){const h=Ws(n,l),f=fo(c,a);return s3e(e,t,i,h,f,r,s)}else{const h=B8(n,l),f=f3e[h],m=i.direction[f]>=0;let A,y;m?(A=na(n),y=po(n,l)):(A=po(n,l),y=na(n));const g=Xu(A,o,i,r,s)?lT(A,e,t,i,r,s):null;if(g){const S=g.point[f];if(m?S<=o[y+h]:S>=o[y+h+3])return g}const E=Xu(y,o,i,r,s)?lT(y,e,t,i,r,s):null;return g&&E?g.distance<=E.distance?g:E:g||E||null}}const K2=new Bn,tp=new Wa,np=new Wa,S1=new Oe,cU=new Is,J2=new Is;function p3e(n,e,t,i){Ai.setBuffer(n._roots[e]);const r=cT(0,n,t,i);return Ai.clearBuffer(),r}function cT(n,e,t,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Ai;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),cU.set(t.boundingBox.min,t.boundingBox.max,i),r=cU),_s(l,o)){const u=e.geometry,h=u.index,f=u.attributes.position,d=t.index,m=t.attributes.position,A=Ws(n,a),y=fo(l,o);if(S1.copy(i).invert(),t.boundsTree)return zi(n,s,J2),J2.matrix.copy(S1),J2.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:g=>J2.intersectsBox(g),intersectsTriangle:g=>{g.a.applyMatrix4(i),g.b.applyMatrix4(i),g.c.applyMatrix4(i),g.needsUpdate=!0;for(let v=A*3,E=(y+A)*3;v<E;v+=3)if(ar(np,v,h,f),np.needsUpdate=!0,g.intersectsTriangle(np))return!0;return!1}});for(let p=A*3,g=(y+A)*3;p<g;p+=3){ar(tp,p,h,f),tp.a.applyMatrix4(S1),tp.b.applyMatrix4(S1),tp.c.applyMatrix4(S1),tp.needsUpdate=!0;for(let v=0,E=d.count;v<E;v+=3)if(ar(np,v,d,m),np.needsUpdate=!0,tp.intersectsTriangle(np))return!0}}else{const u=n+8,h=a[n+6];return zi(u,s,K2),!!(r.intersectsBox(K2)&&cT(u,e,t,i,r)||(zi(h,s,K2),r.intersectsBox(K2)&&cT(h,e,t,i,r)))}}const Z2=new Oe,X4=new Is,C1=new Is,m3e=new D,g3e=new D,A3e=new D,v3e=new D;function y3e(n,e,t,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),X4.set(e.boundingBox.min,e.boundingBox.max,t),X4.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,h=e.index,f=ia.getPrimitive(),d=ia.getPrimitive();let m=m3e,A=g3e,y=null,p=null;r&&(y=A3e,p=v3e);let g=1/0,v=null,E=null;return Z2.copy(t).invert(),C1.matrix.copy(Z2),n.shapecast({boundsTraverseOrder:S=>X4.distanceToBox(S),intersectsBounds:(S,C,M)=>M<g&&M<o?(C&&(C1.min.copy(S.min),C1.max.copy(S.max),C1.needsUpdate=!0),!0):!1,intersectsRange:(S,C)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:b=>C1.distanceToBox(b),intersectsBounds:(b,T,I)=>I<g&&I<o,intersectsRange:(b,T)=>{for(let I=b,F=b+T;I<F;I++){ar(d,3*I,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let R=S,z=S+C;R<z;R++){ar(f,3*R,c,l),f.needsUpdate=!0;const L=f.distanceToTriangle(d,m,y);if(L<g&&(A.copy(m),p&&p.copy(y),g=L,v=R,E=I),L<s)return!0}}}});{const M=Km(e);for(let b=0,T=M;b<T;b++){ar(d,3*b,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let I=S,F=S+C;I<F;I++){ar(f,3*I,c,l),f.needsUpdate=!0;const R=f.distanceToTriangle(d,m,y);if(R<g&&(A.copy(m),p&&p.copy(y),g=R,v=I,E=b),R<s)return!0}}}}}),ia.releasePrimitive(f),ia.releasePrimitive(d),g===1/0?null:(i.point?i.point.copy(A):i.point=A.clone(),i.distance=g,i.faceIndex=v,r&&(r.point?r.point.copy(p):r.point=p.clone(),r.point.applyMatrix4(Z2),A.applyMatrix4(Z2),r.distance=A.sub(r.point).length(),r.faceIndex=E),i)}function x3e(n,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=n.geometry,i=t.index?t.index.array:null,r=t.attributes.position;let s,o,a,l,c=0;const u=n._roots;for(let f=0,d=u.length;f<d;f++)s=u[f],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),h(0,c),c+=s.byteLength;function h(f,d,m=!1){const A=f*2;if(a[A+15]===ZE){const p=o[f+6],g=a[A+14];let v=1/0,E=1/0,S=1/0,C=-1/0,M=-1/0,b=-1/0;for(let T=p,I=p+g;T<I;T++){const F=3*n.resolveTriangleIndex(T);for(let R=0;R<3;R++){let z=F+R;z=i?i[z]:z;const L=r.getX(z),H=r.getY(z),K=r.getZ(z);L<v&&(v=L),L>C&&(C=L),H<E&&(E=H),H>M&&(M=H),K<S&&(S=K),K>b&&(b=K)}}return l[f+0]!==v||l[f+1]!==E||l[f+2]!==S||l[f+3]!==C||l[f+4]!==M||l[f+5]!==b?(l[f+0]=v,l[f+1]=E,l[f+2]=S,l[f+3]=C,l[f+4]=M,l[f+5]=b,!0):!1}else{const p=f+8,g=o[f+6],v=p+d,E=g+d;let S=m,C=!1,M=!1;e?S||(C=e.has(v),M=e.has(E),S=!C&&!M):(C=!0,M=!0);const b=S||C,T=S||M;let I=!1;b&&(I=h(p,d,S));let F=!1;T&&(F=h(g,d,S));const R=I||F;if(R)for(let z=0;z<3;z++){const L=p+z,H=g+z,K=l[L],J=l[L+3],O=l[H],W=l[H+3];l[f+z]=K<O?K:O,l[f+z+3]=J>W?J:W}return R}}}function _3e(n,e,t,i,r,s,o){Ai.setBuffer(n._roots[e]),uT(0,n,t,i,r,s,o),Ai.clearBuffer()}function uT(n,e,t,i,r,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Ai,u=n*2;if(_s(u,l)){const f=Ws(n,c),d=fo(u,l);l3e(e,t,i,f,d,r,s,o)}else{const f=na(n);Xu(f,a,i,s,o)&&uT(f,e,t,i,r,s,o);const d=po(n,c);Xu(d,a,i,s,o)&&uT(d,e,t,i,r,s,o)}}const E3e=["x","y","z"];function w3e(n,e,t,i,r,s){Ai.setBuffer(n._roots[e]);const o=hT(0,n,t,i,r,s);return Ai.clearBuffer(),o}function hT(n,e,t,i,r,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Ai;let c=n*2;if(_s(c,a)){const h=Ws(n,l),f=fo(c,a);return c3e(e,t,i,h,f,r,s)}else{const h=B8(n,l),f=E3e[h],m=i.direction[f]>=0;let A,y;m?(A=na(n),y=po(n,l)):(A=po(n,l),y=na(n));const g=Xu(A,o,i,r,s)?hT(A,e,t,i,r,s):null;if(g){const S=g.point[f];if(m?S<=o[y+h]:S>=o[y+h+3])return g}const E=Xu(y,o,i,r,s)?hT(y,e,t,i,r,s):null;return g&&E?g.distance<=E.distance?g:E:g||E||null}}const $2=new Bn,ip=new Wa,rp=new Wa,M1=new Oe,uU=new Is,ex=new Is;function S3e(n,e,t,i){Ai.setBuffer(n._roots[e]);const r=fT(0,n,t,i);return Ai.clearBuffer(),r}function fT(n,e,t,i,r=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Ai;let l=n*2;if(r===null&&(t.boundingBox||t.computeBoundingBox(),uU.set(t.boundingBox.min,t.boundingBox.max,i),r=uU),_s(l,o)){const u=e.geometry,h=u.index,f=u.attributes.position,d=t.index,m=t.attributes.position,A=Ws(n,a),y=fo(l,o);if(M1.copy(i).invert(),t.boundsTree)return zi(n,s,ex),ex.matrix.copy(M1),ex.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:g=>ex.intersectsBox(g),intersectsTriangle:g=>{g.a.applyMatrix4(i),g.b.applyMatrix4(i),g.c.applyMatrix4(i),g.needsUpdate=!0;for(let v=A,E=y+A;v<E;v++)if(ar(rp,3*e.resolveTriangleIndex(v),h,f),rp.needsUpdate=!0,g.intersectsTriangle(rp))return!0;return!1}});for(let p=A,g=y+A;p<g;p++){const v=e.resolveTriangleIndex(p);ar(ip,3*v,h,f),ip.a.applyMatrix4(M1),ip.b.applyMatrix4(M1),ip.c.applyMatrix4(M1),ip.needsUpdate=!0;for(let E=0,S=d.count;E<S;E+=3)if(ar(rp,E,d,m),rp.needsUpdate=!0,ip.intersectsTriangle(rp))return!0}}else{const u=n+8,h=a[n+6];return zi(u,s,$2),!!(r.intersectsBox($2)&&fT(u,e,t,i,r)||(zi(h,s,$2),r.intersectsBox($2)&&fT(h,e,t,i,r)))}}const tx=new Oe,Y4=new Is,b1=new Is,C3e=new D,M3e=new D,b3e=new D,T3e=new D;function I3e(n,e,t,i={},r={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Y4.set(e.boundingBox.min,e.boundingBox.max,t),Y4.needsUpdate=!0;const a=n.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,h=e.index,f=ia.getPrimitive(),d=ia.getPrimitive();let m=C3e,A=M3e,y=null,p=null;r&&(y=b3e,p=T3e);let g=1/0,v=null,E=null;return tx.copy(t).invert(),b1.matrix.copy(tx),n.shapecast({boundsTraverseOrder:S=>Y4.distanceToBox(S),intersectsBounds:(S,C,M)=>M<g&&M<o?(C&&(b1.min.copy(S.min),b1.max.copy(S.max),b1.needsUpdate=!0),!0):!1,intersectsRange:(S,C)=>{if(e.boundsTree){const M=e.boundsTree;return M.shapecast({boundsTraverseOrder:b=>b1.distanceToBox(b),intersectsBounds:(b,T,I)=>I<g&&I<o,intersectsRange:(b,T)=>{for(let I=b,F=b+T;I<F;I++){const R=M.resolveTriangleIndex(I);ar(d,3*R,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let z=S,L=S+C;z<L;z++){const H=n.resolveTriangleIndex(z);ar(f,3*H,c,l),f.needsUpdate=!0;const K=f.distanceToTriangle(d,m,y);if(K<g&&(A.copy(m),p&&p.copy(y),g=K,v=z,E=I),K<s)return!0}}}})}else{const M=Km(e);for(let b=0,T=M;b<T;b++){ar(d,3*b,h,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let I=S,F=S+C;I<F;I++){const R=n.resolveTriangleIndex(I);ar(f,3*R,c,l),f.needsUpdate=!0;const z=f.distanceToTriangle(d,m,y);if(z<g&&(A.copy(m),p&&p.copy(y),g=z,v=I,E=b),z<s)return!0}}}}}),ia.releasePrimitive(f),ia.releasePrimitive(d),g===1/0?null:(i.point?i.point.copy(A):i.point=A.clone(),i.distance=g,i.faceIndex=v,r&&(r.point?r.point.copy(p):r.point=p.clone(),r.point.applyMatrix4(tx),A.applyMatrix4(tx),r.distance=A.sub(r.point).length(),r.faceIndex=E),i)}function B3e(){return typeof SharedArrayBuffer<"u"}const Bg=new Ai.constructor,i3=new Ai.constructor,ru=new R8(()=>new Bn),sp=new Bn,op=new Bn,q4=new Bn,K4=new Bn;let J4=!1;function P3e(n,e,t,i){if(J4)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");J4=!0;const r=n._roots,s=e._roots;let o,a=0,l=0;const c=new Oe().copy(t).invert();for(let u=0,h=r.length;u<h;u++){Bg.setBuffer(r[u]),l=0;const f=ru.getPrimitive();zi(0,Bg.float32Array,f),f.applyMatrix4(c);for(let d=0,m=s.length;d<m&&(i3.setBuffer(s[u]),o=Ma(0,0,t,c,i,a,l,0,0,f),i3.clearBuffer(),l+=s[d].length,!o);d++);if(ru.releasePrimitive(f),Bg.clearBuffer(),a+=r[u].length,o)break}return J4=!1,o}function Ma(n,e,t,i,r,s=0,o=0,a=0,l=0,c=null,u=!1){let h,f;u?(h=i3,f=Bg):(h=Bg,f=i3);const d=h.float32Array,m=h.uint32Array,A=h.uint16Array,y=f.float32Array,p=f.uint32Array,g=f.uint16Array,v=n*2,E=e*2,S=_s(v,A),C=_s(E,g);let M=!1;if(C&&S)u?M=r(Ws(e,p),fo(e*2,g),Ws(n,m),fo(n*2,A),l,o+e,a,s+n):M=r(Ws(n,m),fo(n*2,A),Ws(e,p),fo(e*2,g),a,s+n,l,o+e);else if(C){const b=ru.getPrimitive();zi(e,y,b),b.applyMatrix4(t);const T=na(n),I=po(n,m);zi(T,d,sp),zi(I,d,op);const F=b.intersectsBox(sp),R=b.intersectsBox(op);M=F&&Ma(e,T,i,t,r,o,s,l,a+1,b,!u)||R&&Ma(e,I,i,t,r,o,s,l,a+1,b,!u),ru.releasePrimitive(b)}else{const b=na(e),T=po(e,p);zi(b,y,q4),zi(T,y,K4);const I=c.intersectsBox(q4),F=c.intersectsBox(K4);if(I&&F)M=Ma(n,b,t,i,r,s,o,a,l+1,c,u)||Ma(n,T,t,i,r,s,o,a,l+1,c,u);else if(I)if(S)M=Ma(n,b,t,i,r,s,o,a,l+1,c,u);else{const R=ru.getPrimitive();R.copy(q4).applyMatrix4(t);const z=na(n),L=po(n,m);zi(z,d,sp),zi(L,d,op);const H=R.intersectsBox(sp),K=R.intersectsBox(op);M=H&&Ma(b,z,i,t,r,o,s,l,a+1,R,!u)||K&&Ma(b,L,i,t,r,o,s,l,a+1,R,!u),ru.releasePrimitive(R)}else if(F)if(S)M=Ma(n,T,t,i,r,s,o,a,l+1,c,u);else{const R=ru.getPrimitive();R.copy(K4).applyMatrix4(t);const z=na(n),L=po(n,m);zi(z,d,sp),zi(L,d,op);const H=R.intersectsBox(sp),K=R.intersectsBox(op);M=H&&Ma(T,z,i,t,r,o,s,l,a+1,R,!u)||K&&Ma(T,L,i,t,r,o,s,l,a+1,R,!u),ru.releasePrimitive(R)}}return M}const nx=new Is,hU=new Bn,R3e={strategy:GX,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0};class ew{static serialize(e,t={}){t={cloneBuffers:!0,...t};const i=e.geometry,r=e._roots,s=e._indirectBuffer,o=i.getIndex();let a;return t.cloneBuffers?a={roots:r.map(l=>l.slice()),index:o?o.array.slice():null,indirectBuffer:s?s.slice():null}:a={roots:r,index:o?o.array:null,indirectBuffer:s},a}static deserialize(e,t,i={}){i={setIndex:!0,indirect:!!e.indirectBuffer,...i};const{index:r,roots:s,indirectBuffer:o}=e,a=new ew(t,{...i,[H4]:!0});if(a._roots=s,a._indirectBuffer=o||null,i.setIndex){const l=t.getIndex();if(l===null){const c=new zt(e.index,1,!1);t.setIndex(c)}else l.array!==r&&(l.array.set(r),l.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({...R3e,[H4]:!1},t),t.useSharedArrayBuffer&&!B3e())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[H4]||(Y_e(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Bn))),this.resolveTriangleIndex=t.indirect?i=>this._indirectBuffer[i]:i=>i}refit(e=null){return(this.indirect?x3e:a3e)(this,e)}traverse(e,t=0){const i=this._roots[t],r=new Uint32Array(i),s=new Uint16Array(i);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===ZE;if(u){const h=r[a+6],f=s[c+14];e(l,u,new Float32Array(i,a*4,6),h,f)}else{const h=a+Lu/4,f=r[a+6],d=r[a+7];e(l,u,new Float32Array(i,a*4,6),d)||(o(h,l+1),o(f,l+1))}}}raycast(e,t=Ss,i=0,r=1/0){const s=this._roots,o=this.geometry,a=[],l=t.isMaterial,c=Array.isArray(t),u=o.groups,h=l?t.side:t,f=this.indirect?_3e:h3e;for(let d=0,m=s.length;d<m;d++){const A=c?t[u[d].materialIndex].side:h,y=a.length;if(f(this,d,A,e,a,i,r),c){const p=u[d].materialIndex;for(let g=y,v=a.length;g<v;g++)a[g].face.materialIndex=p}}return a}raycastFirst(e,t=Ss,i=0,r=1/0){const s=this._roots,o=this.geometry,a=t.isMaterial,l=Array.isArray(t);let c=null;const u=o.groups,h=a?t.side:t,f=this.indirect?w3e:d3e;for(let d=0,m=s.length;d<m;d++){const A=l?t[u[d].materialIndex].side:h,y=f(this,d,A,e,i,r);y!=null&&(c==null||y.distance<c.distance)&&(c=y,l&&(y.face.materialIndex=u[d].materialIndex))}return c}intersectsGeometry(e,t){let i=!1;const r=this._roots,s=this.indirect?S3e:p3e;for(let o=0,a=r.length;o<a&&(i=s(this,o,e,t),!i);o++);return i}shapecast(e){const t=ia.getPrimitive(),i=this.indirect?u3e:o3e;let{boundsTraverseOrder:r,intersectsBounds:s,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const h=o;o=(f,d,m,A,y)=>h(f,d,m,A,y)?!0:i(f,d,this,a,m,A,t)}else o||(a?o=(h,f,d,m)=>i(h,f,this,a,d,m,t):o=(h,f,d)=>d);let l=!1,c=0;const u=this._roots;for(let h=0,f=u.length;h<f;h++){const d=u[h];if(l=e3e(this,h,s,o,r,c),l)break;c+=d.byteLength}return ia.releasePrimitive(t),l}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:s}=i;const o=ia.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?m=>{const A=this.resolveTriangleIndex(m);ar(o,A*3,a,l)}:m=>{ar(o,m*3,a,l)},u=ia.getPrimitive(),h=e.geometry.index,f=e.geometry.attributes.position,d=e.indirect?m=>{const A=e.resolveTriangleIndex(m);ar(u,A*3,h,f)}:m=>{ar(u,m*3,h,f)};if(s){const m=(A,y,p,g,v,E,S,C)=>{for(let M=p,b=p+g;M<b;M++){d(M),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let T=A,I=A+y;T<I;T++)if(c(T),o.needsUpdate=!0,s(o,u,T,M,v,E,S,C))return!0}return!1};if(r){const A=r;r=function(y,p,g,v,E,S,C,M){return A(y,p,g,v,E,S,C,M)?!0:m(y,p,g,v,E,S,C,M)}}else r=m}return P3e(this,e,t,r)}intersectsBox(e,t){return nx.set(e.min,e.max,t),nx.needsUpdate=!0,this.shapecast({intersectsBounds:i=>nx.intersectsBox(i),intersectsTriangle:i=>nx.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},s=0,o=1/0){return(this.indirect?I3e:y3e)(this,e,t,i,r,s,o)}closestPointToPoint(e,t={},i=0,r=1/0){return t3e(this,e,t,i,r)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{zi(0,new Float32Array(i),hU),e.union(hU)}),e}}function fU(n,e,t){return n===null?null:(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n)}const ix=new ha,dU=new D,pU=new Oe,D3e=ct.prototype.raycast,mU=new D;function YX(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;pU.copy(this.matrixWorld).invert(),ix.copy(n.ray).applyMatrix4(pU),L3e(this.matrixWorld,mU),dU.copy(ix.direction).multiply(mU);const t=dU.length(),i=n.near/t,r=n.far/t,s=this.geometry.boundsTree;if(n.firstHitOnly===!0){const o=fU(s.raycastFirst(ix,this.material,i,r),this,n);o&&e.push(o)}else{const o=s.raycast(ix,this.material,i,r);for(let a=0,l=o.length;a<l;a++){const c=fU(o[a],this,n);c&&e.push(c)}}}else D3e.call(this,n,e)}function qX(n){return this.boundsTree=new ew(this,n),this.boundsTree}function KX(){this.boundsTree=null}function L3e(n,e){const t=n.elements,i=e.set(t[0],t[1],t[2]).length(),r=e.set(t[4],t[5],t[6]).length(),s=e.set(t[8],t[9],t[10]).length();return e.set(i,r,s)}function F3e(n){switch(n){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function O3e(n){switch(n){case 1:return ea;case 2:return cu;case 3:return Dn;case 4:return Dn}}function gU(n){switch(n){case 1:return O3;case 2:return FA;case 3:return wf;case 4:return wf}}class JX extends qs{constructor(){super(),this.minFilter=rn,this.magFilter=rn,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const t=this.overrideItemSize,i=e.itemSize,r=e.count;if(t!==null){if(i*r%t!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=t,e.count=r*i/t}const s=e.itemSize,o=e.count,a=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT;let u=this._forcedType,h=s;if(u===null)switch(l){case Float32Array:u=En;break;case Uint8Array:case Uint16Array:case Uint32Array:u=ss;break;case Int8Array:case Int16Array:case Int32Array:u=uf;break}let f,d,m,A,y=F3e(s);switch(u){case En:m=1,d=O3e(s),a&&c===1?(A=l,y+="8",l===Uint8Array?f=$n:(f=tA,y+="_SNORM")):(A=Float32Array,y+="32F",f=En);break;case uf:y+=c*8+"I",m=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=gU(s),c===1?(A=Int8Array,f=tA):c===2?(A=Int16Array,f=F3):(A=Int32Array,f=uf);break;case ss:y+=c*8+"UI",m=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=gU(s),c===1?(A=Uint8Array,f=$n):c===2?(A=Uint16Array,f=$u):(A=Uint32Array,f=ss);break}h===3&&(d===Dn||d===wf)&&(h=4);const p=Math.ceil(Math.sqrt(o))||1,g=h*p*p,v=new A(g),E=e.normalized;e.normalized=!1;for(let S=0;S<o;S++){const C=h*S;v[C]=e.getX(S)/m,s>=2&&(v[C+1]=e.getY(S)/m),s>=3&&(v[C+2]=e.getZ(S)/m,h===4&&(v[C+3]=1)),s>=4&&(v[C+3]=e.getW(S)/m)}e.normalized=E,this.internalFormat=y,this.format=d,this.type=f,this.image.width=p,this.image.height=p,this.image.data=v,this.needsUpdate=!0,this.dispose(),e.itemSize=i,e.count=r}}class U3e extends JX{constructor(){super(),this._forcedType=ss}}class z3e extends JX{constructor(){super(),this._forcedType=En}}class ZX{constructor(){this.index=new U3e,this.position=new z3e,this.bvhBounds=new qs,this.bvhContents=new qs,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(e){const{geometry:t}=e;if(N3e(e,this.bvhBounds,this.bvhContents),this.position.updateFrom(t.attributes.position),e.indirect){const i=e._indirectBuffer;if(this._cachedIndexAttr===null||this._cachedIndexAttr.count!==i.length)if(t.index)this._cachedIndexAttr=t.index.clone();else{const r=QX(HX(t));this._cachedIndexAttr=new zt(r,1,!1)}k3e(t,i,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(t.index)}dispose(){const{index:e,position:t,bvhBounds:i,bvhContents:r}=this;e&&e.dispose(),t&&t.dispose(),i&&i.dispose(),r&&r.dispose()}}function k3e(n,e,t){const i=t.array,r=n.index?n.index.array:null;for(let s=0,o=e.length;s<o;s++){const a=3*s,l=3*e[s];for(let c=0;c<3;c++)i[a+c]=r?r[l+c]:l+c}}function N3e(n,e,t){const i=n._roots;if(i.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const r=i[0],s=new Uint16Array(r),o=new Uint32Array(r),a=new Float32Array(r),l=r.byteLength/Lu,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),h=Math.ceil(Math.sqrt(l)),f=new Uint32Array(2*h*h);for(let d=0;d<l;d++){const m=d*Lu/4,A=m*2,y=m;for(let p=0;p<3;p++)u[8*d+0+p]=a[y+0+p],u[8*d+4+p]=a[y+3+p];if(_s(A,s)){const p=fo(A,s),g=Ws(m,o),v=4294901760|p;f[d*2+0]=v,f[d*2+1]=g}else{const p=4*po(m,o)/Lu,g=B8(m,o);f[d*2+0]=g,f[d*2+1]=p}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=Dn,e.type=En,e.internalFormat="RGBA32F",e.minFilter=rn,e.magFilter=rn,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),t.image.data=f,t.image.width=h,t.image.height=h,t.format=FA,t.type=ss,t.internalFormat="RG32UI",t.minFilter=rn,t.magFilter=rn,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose()}const G3e=`

// A stack of uint32 indices can can store the indices for
// a perfectly balanced tree with a depth up to 31. Lower stack
// depth gets higher performance.
//
// However not all trees are balanced. Best value to set this to
// is the trees max depth.
#ifndef BVH_STACK_DEPTH
#define BVH_STACK_DEPTH 60
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}
`,H3e=`

#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

// Raycasting
bool intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax, out float dist ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	dist = max( t0, 0.0 );

	return t1 >= dist;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	// geometry info and triangle range
	sampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// outputs
	inout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;
		vec3 a = texelFetch1D( positionAttr, indices.x ).rgb;
		vec3 b = texelFetch1D( positionAttr, indices.y ).rgb;
		vec3 c = texelFetch1D( positionAttr, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

bool intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, sampler2D bvhBounds, uint currNodeIndex, out float dist ) {

	uint cni2 = currNodeIndex * 2u;
	vec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;
	vec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax, dist );

}

// use a macro to hide the fact that we need to expand the struct into separate fields
#define	bvhIntersectFirstHit(		bvh,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)	_bvhIntersectFirstHit(		bvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)

bool _bvhIntersectFirstHit(
	// bvh info
	sampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// output variables split into separate variables due to output precision
	inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ BVH_STACK_DEPTH ];
	stack[ 0 ] = 0u;

	float triangleDistance = INFINITY;
	bool found = false;
	while ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance;
		if (
			! intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh_bvhBounds, currNodeIndex, boundsHitDistance )
			|| boundsHitDistance > triangleDistance
		) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh_position, bvh_index, offset, count,
				rayOrigin, rayDirection, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,Q3e=`
struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,V3e=Q3e,W3e=`
	${G3e}
	${H3e}
`,AU=n=>n.isMesh;function j3e(n,e){e={strategy:JE,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10,indirect:!1,...e},w.useEffect(()=>{if(n.current){n.current.raycast=YX;const t=n.current.geometry;return t.computeBoundsTree=qX,t.disposeBoundsTree=KX,t.computeBoundsTree(e),()=>{t.boundsTree&&t.disposeBoundsTree()}}},[n,JSON.stringify(e)])}const X3e=w.forwardRef(({enabled:n=!0,firstHitOnly:e=!1,children:t,strategy:i=JE,verbose:r=!1,setBoundingBox:s=!0,maxDepth:o=40,maxLeafTris:a=10,indirect:l=!1,...c},u)=>{const h=w.useRef(null),f=Se(d=>d.raycaster);return w.useImperativeHandle(u,()=>h.current,[]),w.useEffect(()=>{if(n){const d={strategy:i,verbose:r,setBoundingBox:s,maxDepth:o,maxLeafTris:a,indirect:l},m=h.current;return f.firstHitOnly=e,m.traverse(A=>{AU(A)&&!A.geometry.boundsTree&&A.raycast===ct.prototype.raycast&&(A.raycast=YX,A.geometry.computeBoundsTree=qX,A.geometry.disposeBoundsTree=KX,A.geometry.computeBoundsTree(d))}),()=>{delete f.firstHitOnly,m.traverse(A=>{AU(A)&&A.geometry.boundsTree&&(A.geometry.disposeBoundsTree(),A.raycast=ct.prototype.raycast)})}}},[]),w.createElement("group",Ye({ref:h},c),t)});function Y3e(...n){const e=w.useRef([]);return e.current=n.map(t=>w.useContext(t)),w.useMemo(()=>({children:t})=>n.reduceRight((i,r,s)=>w.createElement(r.Provider,{value:e.current[s],children:i}),t),[])}function q3e(n,e){const t=w.useRef(),[i]=w.useState(()=>e?e instanceof kt?{current:e}:e:t),[r]=w.useState(()=>new S6(void 0));w.useLayoutEffect(()=>{e&&(i.current=e instanceof kt?e:e.current),r._root=i.current});const s=w.useRef({}),o=w.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:n,actions:a,names:n.map(l=>l.name),mixer:r}},[n]);return yt((a,l)=>r.update(l)),w.useEffect(()=>{const a=i.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[n]),o}function $X(n){const e=w.useRef(null),t=w.useRef(!1),i=w.useRef(!1),r=w.useRef(n);return w.useLayoutEffect(()=>void(r.current=n),[n]),w.useEffect(()=>{const s=e.current;if(s){const o=XA(()=>(t.current=!1,!0)),a=s.onBeforeRender;s.onBeforeRender=()=>t.current=!0;const l=AE(()=>(t.current!==i.current&&(r.current==null||r.current(i.current=t.current)),!0));return()=>{s.onBeforeRender=a,o(),l()}}},[]),e}const K3e=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,J3e=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,Z3e=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,$3e=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function eEe(n,e,t){n.defines.BOX_PROJECTED_ENV_MAP=!0,n.uniforms.envMapPosition={value:e},n.uniforms.envMapSize={value:t},n.vertexShader=`
  varying vec3 vWorldPosition;
  ${n.vertexShader.replace("#include <worldpos_vertex>",K3e)}`,n.fragmentShader=`
    ${J3e}
    ${n.fragmentShader.replace("#include <envmap_physical_pars_fragment>",Xt.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${Z3e}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${$3e}
        `)}`}function tEe(n=new D,e=new D){const[t]=w.useState(()=>({position:new D,size:new D}));sr(t,{position:n,size:e});const i=w.useRef(null),r=w.useMemo(()=>({ref:i,onBeforeCompile:s=>eEe(s,t.position,t.size),customProgramCacheKey:()=>JSON.stringify(t.position.toArray())+JSON.stringify(t.size.toArray())}),[...t.position.toArray(),...t.size.toArray()]);return w.useLayoutEffect(()=>void(i.current.needsUpdate=!0),[t]),r}const vU=new Bn,rx=new D,nEe=({anchor:n,...e})=>{const t=w.useRef(null),i=w.useRef(null);return w.useEffect(()=>{var r;(r=t.current)!=null&&(r=r.parent)!=null&&r.parent&&(i.current=t.current.parent,t.current.parent.parent.add(t.current))},[]),yt(()=>{i.current&&(vU.setFromObject(i.current),vU.getSize(rx),t.current.position.set(i.current.position.x+rx.x*(Array.isArray(n)?n[0]:n.x)/2,i.current.position.y+rx.y*(Array.isArray(n)?n[1]:n.y)/2,i.current.position.z+rx.z*(Array.isArray(n)?n[2]:n.z)/2))}),w.createElement("group",Ye({ref:t},e))};function iEe(n,e,t=.9){return e*t+n*(1-t)}const rEe=n=>Math.sqrt(1-Math.pow(n-1,2));class sEe{constructor({size:e=256,maxAge:t=750,radius:i=.3,intensity:r=.2,interpolate:s=0,smoothing:o=0,minForce:a=.3,blend:l="screen",ease:c=rEe}={}){this.size=e,this.maxAge=t,this.radius=i,this.intensity=r,this.ease=c,this.interpolate=s,this.smoothing=o,this.minForce=a,this.blend=l,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size;const e=this.canvas.getContext("2d");if(e===null)throw new Error("2D not available");this.ctx=e,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new In(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(e){this.clear(),this.trail.forEach((t,i)=>{t.age+=e*1e3,t.age>this.maxAge&&this.trail.splice(i,1)}),this.trail.length||(this.force=0),this.trail.forEach(t=>{this.drawTouch(t)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(e){const t=this.trail[this.trail.length-1];if(t){const i=t.x-e.x,r=t.y-e.y,s=i*i+r*r,o=Math.max(this.minForce,Math.min(s*1e4,1));if(this.force=iEe(o,this.force,this.smoothing),this.interpolate){const a=Math.ceil(s/Math.pow(this.radius*.5/this.interpolate,2));if(a>1)for(let l=1;l<a;l++)this.trail.push({x:t.x-i/a*l,y:t.y-r/a*l,age:0,force:o})}}this.trail.push({x:e.x,y:e.y,age:0,force:this.force})}drawTouch(e){const t={x:e.x*this.size,y:(1-e.y)*this.size};let i=1;e.age<this.maxAge*.3?i=this.ease(e.age/(this.maxAge*.3)):i=this.ease(1-(e.age-this.maxAge*.3)/(this.maxAge*.7)),i*=e.force,this.ctx.globalCompositeOperation=this.blend;const r=this.size*this.radius*i,s=this.ctx.createRadialGradient(t.x,t.y,Math.max(0,r*.25),t.x,t.y,Math.max(0,r));s.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),s.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=s,this.ctx.arc(t.x,t.y,Math.max(0,r),0,Math.PI*2),this.ctx.fill()}}function eY(n={}){const{size:e,maxAge:t,radius:i,intensity:r,interpolate:s,smoothing:o,minForce:a,blend:l,ease:c}=n,u=w.useMemo(()=>new sEe(n),[e,t,i,r,s,o,a,l,c]);yt((f,d)=>void u.update(d));const h=w.useCallback(f=>u.addTouch(f.uv),[u]);return[u.texture,h]}const oEe=({children:n,...e})=>{const t=eY(e);return w.createElement(w.Fragment,null,n==null?void 0:n(t))},D8=w.forwardRef(function({children:e,disable:t,disableX:i,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:h,onCentered:f,precise:d=!0,cacheKey:m=0,...A},y){const p=w.useRef(null),g=w.useRef(null),v=w.useRef(null);return w.useLayoutEffect(()=>{g.current.matrixWorld.identity();const E=new Bn().setFromObject(v.current,d),S=new D,C=new vi,M=E.max.x-E.min.x,b=E.max.y-E.min.y,T=E.max.z-E.min.z;E.getCenter(S),E.getBoundingSphere(C);const I=l?b/2:c?-b/2:0,F=o?-M/2:a?M/2:0,R=u?T/2:h?-T/2:0;g.current.position.set(t||i?0:-S.x+F,t||r?0:-S.y+I,t||s?0:-S.z+R),typeof f<"u"&&f({parent:p.current.parent,container:p.current,width:M,height:b,depth:T,boundingBox:E,boundingSphere:C,center:S,verticalAlignment:I,horizontalAlignment:F,depthAlignment:R})},[m,f,l,o,u,t,i,r,s,d,a,c,h]),w.useImperativeHandle(y,()=>p.current,[]),w.createElement("group",Ye({ref:p},A),w.createElement("group",{ref:g},w.createElement("group",{ref:v},e)))}),aEe=w.forwardRef(({font:n,color:e="#cbcbcb",bevelSize:t=.04,debug:i=!1,children:r,...s},o)=>{const[a,l]=w.useState(0),c=w.useCallback((f=1)=>l(a+f),[a]),u=w.useCallback((f=1)=>l(a-f),[a]),h=w.useMemo(()=>({incr:c,decr:u}),[c,u]);return w.useImperativeHandle(o,()=>h,[h]),w.createElement("group",s,w.createElement(w.Suspense,{fallback:null},w.createElement(D8,{top:!0,cacheKey:JSON.stringify({counter:a,font:n})},w.createElement(gX,{bevelEnabled:!0,bevelSize:t,font:n},i?w.createElement("meshNormalMaterial",{wireframe:!0}):w.createElement("meshStandardMaterial",{color:e}),a))),r)});var tY={exports:{}},lEe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cEe=lEe,uEe=cEe;function nY(){}function iY(){}iY.resetWarningCache=nY;var hEe=function(){function n(i,r,s,o,a,l){if(l!==uEe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:iY,resetWarningCache:nY};return t.PropTypes=t,t};tY.exports=hEe();var fEe=tY.exports;const T1=Dm(fEe);function rY(n){return sY(n.children,n.components)}rY.propTypes={children:T1.func.isRequired,components:T1.arrayOf(T1.oneOfType([T1.element,T1.func])).isRequired};function sY(n,e,t){if(t=t||[],!e[0])return n(t);function i(r){return sY(n,e.slice(1),t.concat([r]))}return typeof e[0]=="function"?e[0]({results:t,render:i}):w.cloneElement(e[0],{children:i})}const Pg=(n,e)=>{"updateRanges"in n?n.updateRanges[0]=e:n.updateRange=e},dEe=3e3,pEe=3001;function mEe(n){return typeof n=="function"}const yU=new Oe,xU=new Oe,sx=[],I1=new ct;class gEe extends Gs{constructor(){super(),this.color=new We("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;I1.geometry=i.geometry;const r=i.matrixWorld,s=i.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>i.count)){i.getMatrixAt(s,yU),xU.multiplyMatrices(r,yU),I1.matrixWorld=xU,i.material instanceof Ji?I1.material.side=i.material.side:I1.material.side=i.material[0].side,I1.raycast(e,sx);for(let o=0,a=sx.length;o<a;o++){const l=sx[o];l.instanceId=s,l.object=this,t.push(l)}sx.length=0}}}const oY=w.createContext(null),_U=new Oe,EU=new Oe,AEe=new Oe,wU=new D,SU=new St,CU=new D,L8=w.forwardRef(({context:n,children:e,...t},i)=>{w.useMemo(()=>si({PositionMesh:gEe}),[]);const r=w.useRef();w.useImperativeHandle(i,()=>r.current,[]);const{subscribe:s,getParent:o}=w.useContext(n||oY);return w.useLayoutEffect(()=>s(r),[]),w.createElement("positionMesh",Ye({instance:o(),instanceKey:r,ref:r},t),e)}),F8=w.forwardRef(({children:n,range:e,limit:t=1e3,frames:i=1/0,...r},s)=>{const[{context:o,instance:a}]=w.useState(()=>{const y=w.createContext(null);return{context:y,instance:w.forwardRef((p,g)=>w.createElement(L8,Ye({context:y},p,{ref:g})))}}),l=w.useRef(null);w.useImperativeHandle(s,()=>l.current,[]);const[c,u]=w.useState([]),[[h,f]]=w.useState(()=>{const y=new Float32Array(t*16);for(let p=0;p<t;p++)AEe.identity().toArray(y,p*16);return[y,new Float32Array([...new Array(t*3)].map(()=>1))]});w.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let d=0,m=0;yt(()=>{if(i===1/0||d<i){l.current.updateMatrix(),l.current.updateMatrixWorld(),_U.copy(l.current.matrixWorld).invert(),m=Math.min(t,e!==void 0?e:t,c.length),l.current.count=m,Pg(l.current.instanceMatrix,{offset:0,count:m*16}),Pg(l.current.instanceColor,{offset:0,count:m*3});for(let y=0;y<c.length;y++){const p=c[y].current;p.matrixWorld.decompose(wU,SU,CU),EU.compose(wU,SU,CU).premultiply(_U),EU.toArray(h,y*16),l.current.instanceMatrix.needsUpdate=!0,p.color.toArray(f,y*3),l.current.instanceColor.needsUpdate=!0}d++}});const A=w.useMemo(()=>({getParent:()=>l,subscribe:y=>(u(p=>[...p,y]),()=>u(p=>p.filter(g=>g.current!==y.current)))}),[]);return w.createElement("instancedMesh",Ye({userData:{instances:c},matrixAutoUpdate:!1,ref:l,args:[null,null,0],raycast:()=>null},r),w.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:h.length/16,array:h,itemSize:16,usage:os}),w.createElement("instancedBufferAttribute",{attach:"instanceColor",count:f.length/3,array:f,itemSize:3,usage:os}),mEe(n)?w.createElement(o.Provider,{value:A},n(a)):w.createElement(oY.Provider,{value:A},n))}),vEe=w.forwardRef(function({meshes:e,children:t,...i},r){const s=Array.isArray(e);if(!s)for(const o of Object.keys(e))e[o].isMesh||delete e[o];return w.createElement("group",{ref:r},w.createElement(rY,{components:(s?e:Object.values(e)).map(({geometry:o,material:a})=>w.createElement(F8,Ye({key:o.uuid,geometry:o,material:a},i)))},o=>s?t(...o):t(Object.keys(e).filter(a=>e[a].isMesh).reduce((a,l,c)=>({...a,[l]:o[c]}),{}))))}),aY=w.createContext(null);function yEe(){return w.useContext(aY)}const xEe=w.forwardRef(({startFrame:n,endFrame:e,fps:t,frameName:i,textureDataURL:r,textureImageURL:s,loop:o,numberOfFrames:a,autoPlay:l,animationNames:c,onStart:u,onEnd:h,onLoopEnd:f,onFrame:d,play:m,pause:A,flipX:y,alphaTest:p,children:g,asSprite:v,offset:E,playBackwards:S,resetOnEnd:C,maxItems:M,instanceItems:b,spriteDataset:T,...I},F)=>{var R;const z=w.useRef(),L=w.useRef(null),H=w.useRef(),K=w.useRef(),J=w.useRef(window.performance.now()),O=w.useRef(n||0),W=w.useRef(i||""),V=1e3/(t||30),[U,Y]=w.useState(new In),$=w.useRef(0),[N,Q]=w.useState([1,1,1]),j=y?-1:1,[X,se]=w.useState(v??!0),ve=w.useRef(A),de=w.useRef(E),he=w.useRef(!1),te=w.useRef([]),{spriteObj:xe,loadJsonAndTexture:ce}=KE(null,null,c,a);function me(){}const ye=w.useMemo(()=>({current:de.current,offset:de.current,imageUrl:s,reset:me,hasEnded:!1,ref:F}),[s,T]);w.useImperativeHandle(F,()=>z.current,[]),w.useLayoutEffect(()=>{de.current=E},[E]);const Me=(Z,ge)=>{const Fe=ge/Z;return K.current&&K.current.scale.set(1,Fe,1),[1,Fe,1]};w.useEffect(()=>{if(T){var Z;oe(T==null||(Z=T.spriteTexture)==null?void 0:Z.clone(),T.spriteData)}else ce(s,r)},[T]),w.useEffect(()=>{if(xe){var Z;oe(xe==null||(Z=xe.spriteTexture)==null?void 0:Z.clone(),xe==null?void 0:xe.spriteData)}},[xe]),w.useEffect(()=>{se(v??!0)},[v]),w.useEffect(()=>{ye.hasEnded=!1,L.current&&S===!0?O.current=L.current.frames.length-1:O.current=0},[S]),w.useLayoutEffect(()=>{ne()},[U,y]),w.useEffect(()=>{l&&(ve.current=!1)},[l]),w.useLayoutEffect(()=>{if(W.current!==i&&i&&(O.current=0,W.current=i,ye.hasEnded=!1,L.current)){const{w:Z,h:ge}=st(L.current.frames).sourceSize,Fe=Me(Z,ge);Q(Fe)}},[i]);const oe=(Z,ge=null)=>{if(ge===null){if(a){const Ce=Z.image.width,Le=Z.image.height;$.current=a,S&&(O.current=a-1),L.current={frames:[],meta:{version:"1.0",size:{w:Ce,h:Le},scale:"1"}},L.current.frames=ge}}else{L.current=ge,$.current=L.current.frames.length,S&&(O.current=$.current-1);const{w:Ce,h:Le}=st(L.current.frames).sourceSize,Qe=Me(Ce,Le);Q(Qe),H.current&&(H.current.map=Z)}if(b)for(var Fe=0;Fe<b.length;Fe++){const Ce=Object.keys(L.current.frames),Le=Ce[Math.floor(Math.random()*Ce.length)];te.current.push({key:Fe,frames:L.current.frames,selectedFrame:Le,offset:{x:0,y:0}})}Y(Z)},ne=()=>{if(!L.current)return;const{meta:{size:Z},frames:ge}=L.current,{w:Fe,h:Ce}=Array.isArray(ge)?ge[0].sourceSize:i?ge[i]?ge[i][0].sourceSize:{w:0,h:0}:{w:0,h:0};H.current.map.wrapS=H.current.map.wrapT=Fr,H.current.map.center.set(0,0),H.current.map.repeat.set(1*j/(Z.w/Fe),1/(Z.h/Ce));const Qe=1/((Z.h-1)/Ce);H.current.map.offset.x=0,H.current.map.offset.y=1-Qe,u&&u({currentFrameName:i,currentFrame:O.current})},we=()=>{const Z=window.performance.now(),ge=Z-J.current,{meta:{size:Fe},frames:Ce}=L.current,{w:Le,h:Qe}=st(Ce).sourceSize,He=Array.isArray(Ce)?Ce:i?Ce[i]:[],De=e||He.length-1;var at=E===void 0?ye.current:E,tt=S?O.current<0:O.current>De,et=S?O.current===De:O.current===0,le=S?O.current<0:O.current>=De;if(tt){if(O.current=o?n??0:0,S&&(O.current=De),o?f==null||f({currentFrameName:i,currentFrame:O.current}):(h==null||h({currentFrameName:i,currentFrame:O.current}),ye.hasEnded=!C,C&&(ve.current=!0)),!o)return}else et&&(u==null||u({currentFrameName:i,currentFrame:O.current}));at!==void 0&&le?he.current===!1&&(h==null||h({currentFrameName:i,currentFrame:O.current}),he.current=!0):he.current=!1,!(ge<=V)&&(J.current=Z-ge%V,be(Le,Qe,Fe,He))},be=(Z,ge,Fe,Ce)=>{var Le=E===void 0?ye.current:E;const Qe=O.current;let He=0,De=0;Me(Z,ge);const at=Math.round((Fe.w-1)/Z),tt=Math.round((Fe.h-1)/ge);if(!Ce[Qe])return;const{frame:{x:et,y:le},sourceSize:{w:Re,h:qe}}=Ce[Qe],it=1/at,Ae=1/tt;if(He=j>0?it*(et/Re):it*(et/Re)-H.current.map.repeat.x,De=Math.abs(1-Ae)-Ae*(le/qe),H.current.map.offset.x=He,H.current.map.offset.y=De,Le!=null){let _e=Math.floor(Le*Ce.length);_e=Math.max(0,Math.min(_e,Ce.length-1)),isNaN(_e)&&(_e=0),O.current=_e}else S?O.current-=1:O.current+=1};yt((Z,ge)=>{var Fe,Ce;!((Fe=L.current)!=null&&Fe.frames)||!((Ce=H.current)!=null&&Ce.map)||ve.current||!ye.hasEnded&&(l||m)&&(we(),d&&d({currentFrameName:W.current,currentFrame:O.current}))});const st=Z=>{if(Array.isArray(Z))return Z[0];if(typeof Z=="object"&&Z!==null){const ge=Object.keys(Z);return i?Z[i][0]:Z[ge[0]][0]}else return{w:0,h:0}};function re(Z,ge){let Fe=[];return typeof ge=="number"?Fe=[ge,ge,ge]:Array.isArray(ge)?Fe=ge:ge instanceof D&&(Fe=[ge.x,ge.y,ge.z]),Z.map((Le,Qe)=>Le*Fe[Qe])}return w.createElement("group",Ye({},I,{ref:z,scale:re(N??[1,1,1],(R=I.scale)!==null&&R!==void 0?R:1)}),w.createElement(aY.Provider,{value:ye},w.createElement(w.Suspense,{fallback:null},X&&w.createElement("sprite",{ref:K,scale:1},w.createElement("spriteMaterial",{premultipliedAlpha:!1,toneMapped:!1,ref:H,map:U,transparent:!0,alphaTest:p??0})),!X&&w.createElement(F8,{limit:M??1},w.createElement("planeGeometry",{args:[1,1]}),w.createElement("meshBasicMaterial",{premultipliedAlpha:!1,toneMapped:!1,side:Vn,ref:H,map:U,transparent:!0,alphaTest:p??0}),(b??[0]).map((Z,ge)=>w.createElement(L8,{key:ge,ref:(b==null?void 0:b.length)===1?K:null,position:Z,scale:1})))),g))}),_Ee=w.forwardRef(({children:n,curve:e},t)=>{const[i]=w.useState(()=>new xo),[r,s]=w.useState(),o=w.useRef();return w.useEffect(()=>{o.current=new wge(i.children[0]),s(o.current.object3D)},[n]),w.useEffect(()=>{var a;e&&((a=o.current)==null||a.updateCurve(0,e))},[e]),w.useImperativeHandle(t,()=>({moveAlongCurve:a=>{var l;(l=o.current)==null||l.moveAlongCurve(a)}})),w.createElement(w.Fragment,null,Bc(n,i),r&&w.createElement("primitive",{object:r}))});var EEe=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class wEe extends bs{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${EEe}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const SEe=w.forwardRef(({speed:n=1,...e},t)=>{const[i]=w.useState(()=>new wEe);return yt(r=>i&&(i.time=r.clock.getElapsedTime()*n)),w.createElement("primitive",Ye({object:i,ref:t,attach:"material"},e))});class CEe extends zf{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const MEe=w.forwardRef(({speed:n=1,...e},t)=>{const[i]=w.useState(()=>new CEe);return yt(r=>i&&(i.time=r.clock.getElapsedTime()*n)),w.createElement("primitive",Ye({object:i,ref:t,attach:"material"},e))});class bEe extends Fn{constructor(e=new Ee){super({uniforms:{inputBuffer:new Qr(null),depthBuffer:new Qr(null),resolution:new Qr(new Ee),texelSize:new Qr(new Ee),halfTexelSize:new Qr(new Ee),kernel:new Qr(0),scale:new Qr(1),cameraNear:new Qr(0),cameraFar:new Qr(1),minDepthThreshold:new Qr(0),maxDepthThreshold:new Qr(1),depthScale:new Qr(0),depthToBlurRatioBias:new Qr(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:sa,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class lY{constructor({gl:e,resolution:t,width:i=500,height:r=500,minDepthThreshold:s=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new Rn(t,t,{minFilter:Ut,magFilter:Ut,stencilBuffer:!1,depthBuffer:!1,type:Ln}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new bEe,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Ee(i,r)),this.scene=new xo,this.camera=new th,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=a>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),h=new It;h.setAttribute("position",new zt(c,3)),h.setAttribute("uv",new zt(u,2)),this.screen=new ct(h,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,t,i){const r=this.scene,s=this.camera,o=this.renderTargetA,a=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=t.depthTexture;const u=l.kernel;let h=t,f,d,m;for(d=0,m=u.length-1;d<m;++d)f=d&1?a:o,c.kernel.value=u[d],c.inputBuffer.value=h.texture,e.setRenderTarget(f),e.render(r,s),h=f;c.kernel.value=u[d],c.inputBuffer.value=h.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,s)}}let cY=class extends zf{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var t;(t=e.defines)!=null&&t.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const TEe=w.forwardRef(({mixBlur:n=0,mixStrength:e=1,resolution:t=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:a=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:h,reflectorOffset:f=0,...d},m)=>{si({MeshReflectorMaterialImpl:cY});const A=Se(({gl:U})=>U),y=Se(({camera:U})=>U),p=Se(({scene:U})=>U);i=Array.isArray(i)?i:[i,i];const g=i[0]+i[1]>0,v=w.useRef(null);w.useImperativeHandle(m,()=>v.current,[]);const[E]=w.useState(()=>new Br),[S]=w.useState(()=>new D),[C]=w.useState(()=>new D),[M]=w.useState(()=>new D),[b]=w.useState(()=>new Oe),[T]=w.useState(()=>new D(0,0,-1)),[I]=w.useState(()=>new Yt),[F]=w.useState(()=>new D),[R]=w.useState(()=>new D),[z]=w.useState(()=>new Yt),[L]=w.useState(()=>new Oe),[H]=w.useState(()=>new on),K=w.useCallback(()=>{var U;const Y=v.current.parent||((U=v.current)==null?void 0:U.__r3f.parent);if(!Y||(C.setFromMatrixPosition(Y.matrixWorld),M.setFromMatrixPosition(y.matrixWorld),b.extractRotation(Y.matrixWorld),S.set(0,0,1),S.applyMatrix4(b),C.addScaledVector(S,f),F.subVectors(C,M),F.dot(S)>0))return;F.reflect(S).negate(),F.add(C),b.extractRotation(y.matrixWorld),T.set(0,0,-1),T.applyMatrix4(b),T.add(M),R.subVectors(C,T),R.reflect(S).negate(),R.add(C),H.position.copy(F),H.up.set(0,1,0),H.up.applyMatrix4(b),H.up.reflect(S),H.lookAt(R),H.far=y.far,H.updateMatrixWorld(),H.projectionMatrix.copy(y.projectionMatrix),L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),L.multiply(H.projectionMatrix),L.multiply(H.matrixWorldInverse),L.multiply(Y.matrixWorld),E.setFromNormalAndCoplanarPoint(S,C),E.applyMatrix4(H.matrixWorldInverse),I.set(E.normal.x,E.normal.y,E.normal.z,E.constant);const $=H.projectionMatrix;z.x=(Math.sign(I.x)+$.elements[8])/$.elements[0],z.y=(Math.sign(I.y)+$.elements[9])/$.elements[5],z.z=-1,z.w=(1+$.elements[10])/$.elements[14],I.multiplyScalar(2/I.dot(z)),$.elements[2]=I.x,$.elements[6]=I.y,$.elements[10]=I.z+1,$.elements[14]=I.w},[y,f]),[J,O,W,V]=w.useMemo(()=>{const U={minFilter:Ut,magFilter:Ut,type:Ln},Y=new Rn(t,t,U);Y.depthBuffer=!0,Y.depthTexture=new Hm(t,t),Y.depthTexture.format=ka,Y.depthTexture.type=$u;const $=new Rn(t,t,U),N=new lY({gl:A,resolution:t,width:i[0],height:i[1],minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a}),Q={mirror:l,textureMatrix:L,mixBlur:n,tDiffuse:Y.texture,tDepth:Y.depthTexture,tDiffuseBlur:$.texture,hasBlur:g,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a,distortion:c,distortionMap:h,mixContrast:u,"defines-USE_BLUR":g?"":void 0,"defines-USE_DEPTH":o>0?"":void 0,"defines-USE_DISTORTION":h?"":void 0};return[Y,$,N,Q]},[A,i,L,t,l,g,n,e,r,s,o,a,c,h,u]);return yt(()=>{var U;const Y=v.current.parent||((U=v.current)==null?void 0:U.__r3f.parent);if(!Y)return;Y.visible=!1;const $=A.xr.enabled,N=A.shadowMap.autoUpdate;K(),A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(J),A.state.buffers.depth.setMask(!0),A.autoClear||A.clear(),A.render(p,H),g&&W.render(A,J,O),A.xr.enabled=$,A.shadowMap.autoUpdate=N,Y.visible=!0,A.setRenderTarget(null)}),w.createElement("meshReflectorMaterialImpl",Ye({attach:"material",key:"key"+V["defines-USE_BLUR"]+V["defines-USE_DEPTH"]+V["defines-USE_DISTORTION"],ref:v},V,d))}),IEe=wo({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new ZX,color:new We("white"),opacity:1,resolution:new Ee,viewMatrixInverse:new Oe,projectionMatrixInverse:new Oe},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #include <color_pars_vertex>

  void main() {
    #include <color_vertex>

    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #include <color_pars_fragment>

  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif

  uniform float bounces;
  ${V3e}
  ${W3e}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  uniform float opacity;

  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }

  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }

  #include <common>
  #include <cube_uv_reflection_fragment>

  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif

  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);

    vec4 diffuseColor = vec4(color, opacity);
    #include <color_fragment>

    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      diffuseColor.rgb *= vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      diffuseColor.rgb *= textureGradient(envMap, rayDirection, directionCamPerfect).rgb;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(diffuseColor.rgb, vec3(1.0), nFresnel), diffuseColor.a);

    #include <tonemapping_fragment>
    #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
  }`),BEe=n=>n&&n.isCubeTexture;function PEe({aberrationStrength:n=0,fastChroma:e=!0,envMap:t,...i}){si({MeshRefractionMaterial:IEe});const r=w.useRef(),{size:s}=Se(),o=w.useMemo(()=>{var a,l;const c={},u=BEe(t),f=((a=u?(l=t.image[0])==null?void 0:l.width:t.image.width)!==null&&a!==void 0?a:1024)/4,d=Math.floor(Math.log2(f)),m=Math.pow(2,d),A=3*Math.max(m,16*7),y=4*m;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/A}`,c.CUBEUV_TEXEL_HEIGHT=`${1/y}`,c.CUBEUV_MAX_MIP=`${d}.0`,n>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[n,e]);return w.useLayoutEffect(()=>{var a;const l=(a=r.current)==null||(a=a.__r3f)==null||(a=a.parent)==null?void 0:a.geometry;l&&(r.current.bvh=new ZX,r.current.bvh.updateFrom(new ew(l.clone().toNonIndexed(),{strategy:JE})))},[]),yt(({camera:a})=>{r.current.viewMatrixInverse=a.matrixWorld,r.current.projectionMatrixInverse=a.projectionMatrixInverse}),w.createElement("meshRefractionMaterial",Ye({key:JSON.stringify(o),defines:o,ref:r,resolution:[s.width,s.height],aberrationStrength:n,envMap:t},i))}const O8=wo({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class REe extends bs{constructor(e=6,t=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new We("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=i=>{i.uniforms={...i.uniforms,...this.uniforms},this.anisotropy>0&&(i.defines.USE_ANISOTROPY=""),t?i.defines.USE_SAMPLER="":i.defines.USE_TRANSMISSION="",i.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float randomBase( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float randomBase( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float rand(float seed) {
        float result = randomBase(vec3(gl_FragCoord.xy, seed));
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+i.fragmentShader,i.fragmentShader=i.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),i.fragmentShader=i.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        float runningSeed = 0.0;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand(runningSeed++);
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${e}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5)) * pow(rand(runningSeed++), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${e}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(i=>Object.defineProperty(this,i,{get:()=>this.uniforms[i].value,set:r=>this.uniforms[i].value=r}))}}const DEe=w.forwardRef(({buffer:n,transmissionSampler:e=!1,backside:t=!1,side:i=Ss,transmission:r=1,thickness:s=0,backsideThickness:o=0,backsideEnvMapIntensity:a=1,samples:l=10,resolution:c,backsideResolution:u,background:h,anisotropy:f,anisotropicBlur:d,...m},A)=>{si({MeshTransmissionMaterial:REe});const y=w.useRef(null),[p]=w.useState(()=>new O8),g=Es(u||c),v=Es(c);let E,S,C,M;return yt(b=>{y.current.time=b.clock.getElapsedTime(),y.current.buffer===v.texture&&!e&&(M=y.current.__r3f.parent,M&&(C=b.gl.toneMapping,E=b.scene.background,S=y.current.envMapIntensity,b.gl.toneMapping=oa,h&&(b.scene.background=h),M.material=p,t&&(b.gl.setRenderTarget(g),b.gl.render(b.scene,b.camera),M.material=y.current,M.material.buffer=g.texture,M.material.thickness=o,M.material.side=Ni,M.material.envMapIntensity=a),b.gl.setRenderTarget(v),b.gl.render(b.scene,b.camera),M.material=y.current,M.material.thickness=s,M.material.side=i,M.material.buffer=v.texture,M.material.envMapIntensity=S,b.scene.background=E,b.gl.setRenderTarget(null),b.gl.toneMapping=C))}),w.useImperativeHandle(A,()=>y.current,[]),w.createElement("meshTransmissionMaterial",Ye({args:[l,e],ref:y},m,{buffer:n||v.texture,_transmission:r,anisotropicBlur:d??f,transmission:e?r:0,thickness:s,side:i}))}),LEe=w.forwardRef((n,e)=>(si({DiscardMaterialImpl:O8}),w.createElement("discardMaterialImpl",Ye({ref:e},n)))),Z4=Ts>=154?"opaque_fragment":"output_fragment";class uY extends GA{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${Z4}>`,`
        ${r?`#include <${Z4}>`:`#extension GL_OES_standard_derivatives : enable
#include <${Z4}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const FEe=w.forwardRef((n,e)=>{const[t]=w.useState(()=>new uY(null));return w.createElement("primitive",Ye({},n,{object:t,ref:e,attach:"material"}))}),OEe=({focus:n=0,size:e=25,samples:t=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${n});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${t}; i ++) {
    offset = (vogelDiskSample(j, ${t}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${t}; i++) {
    vogelSample = vogelDiskSample(j, ${t}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${t}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function MU(n,e,t){e.traverse(i=>{i.material&&(n.properties.remove(i.material),i.material.dispose==null||i.material.dispose())}),n.info.programs.length=0,n.compile(e,t)}function UEe({focus:n=0,samples:e=10,size:t=25}){const i=Se(o=>o.gl),r=Se(o=>o.scene),s=Se(o=>o.camera);return w.useEffect(()=>{const o=Xt.shadowmap_pars_fragment;return Xt.shadowmap_pars_fragment=Xt.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+OEe({size:t,samples:e,focus:n})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),MU(i,r,s),()=>{Xt.shadowmap_pars_fragment=o,MU(i,r,s)}},[n,t,e]),null}function yr(n,e){const t=n+"Geometry";return w.forwardRef(({args:i,children:r,...s},o)=>{const a=w.useRef(null);return w.useImperativeHandle(o,()=>a.current),w.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),w.createElement("mesh",Ye({ref:a},s),w.createElement(t,{attach:"geometry",args:i}),r)})}const zEe=yr("box"),kEe=yr("circle"),NEe=yr("cone"),GEe=yr("cylinder"),HEe=yr("sphere"),QEe=yr("plane"),VEe=yr("tube"),WEe=yr("torus"),jEe=yr("torusKnot"),XEe=yr("tetrahedron"),YEe=yr("ring"),qEe=yr("polyhedron"),KEe=yr("icosahedron"),JEe=yr("octahedron"),ZEe=yr("dodecahedron"),$Ee=yr("extrude"),ewe=yr("lathe"),twe=yr("capsule"),nwe=yr("shape",({geometry:n})=>{const e=n.attributes.position,t=new Bn().setFromBufferAttribute(e),i=new D;t.getSize(i);const r=[];let s=0,o=0,a=0,l=0;for(let c=0;c<e.count;c++)s=e.getX(c),o=e.getY(c),a=(s-t.min.x)/i.x,l=(o-t.min.y)/i.y,r.push(a,l);n.setAttribute("uv",new ft(r,2))}),cl=1e-5;function iwe(n,e,t){const i=new gc,r=t-cl;return i.absarc(cl,cl,cl,-Math.PI/2,-Math.PI,!0),i.absarc(cl,e-r*2,cl,Math.PI,Math.PI/2,!0),i.absarc(n-r*2,e-r*2,cl,Math.PI/2,0,!0),i.absarc(n-r*2,cl,cl,0,-Math.PI/2,!0),i}const rwe=w.forwardRef(function({args:[e=1,t=1,i=1]=[],radius:r=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:c,...u},h){const f=w.useMemo(()=>iwe(e,t,r),[e,t,r]),d=w.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:r-cl,bevelThickness:r,curveSegments:o}),[i,r,o]),m=w.useRef(null);return w.useLayoutEffect(()=>{m.current&&(m.current.center(),fj(m.current,l))},[f,d]),w.createElement("mesh",Ye({ref:h},u),w.createElement("extrudeGeometry",{ref:m,args:[f,d]}),c)});function swe(){const n=new It,e=new Float32Array([-1,-1,3,-1,-1,3]);return n.boundingSphere=new vi,n.boundingSphere.set(new D,1/0),n.setAttribute("position",new zt(e,2)),n}const owe=w.forwardRef(function({children:e,...t},i){const r=w.useMemo(swe,[]);return w.createElement("mesh",Ye({ref:i,geometry:r,frustumCulled:!1},t),e)}),awe=w.forwardRef(({children:n,width:e,height:t,depth:i,box3:r,precise:s=!0,...o},a)=>{const l=w.useRef(null),c=w.useRef(null),u=w.useRef(null);return w.useLayoutEffect(()=>{c.current.matrixWorld.identity();let h=r||new Bn().setFromObject(u.current,s);const f=h.max.x-h.min.x,d=h.max.y-h.min.y,m=h.max.z-h.min.z;let A=Math.max(f,d,m);e&&(A=f),t&&(A=d),i&&(A=m),c.current.scale.setScalar(1/A)},[e,t,i,r,s]),w.useImperativeHandle(a,()=>l.current,[]),w.createElement("group",Ye({ref:l},o),w.createElement("group",{ref:c},w.createElement("group",{ref:u},n)))});var ko=function(n){return n[n.NONE=0]="NONE",n[n.START=1]="START",n[n.ACTIVE=2]="ACTIVE",n}(ko||{});const ap=n=>n&&n.isOrthographicCamera,lwe=n=>n&&n.isBox3,cwe=n=>1-Math.exp(-5*n)+.007*n,hY=w.createContext(null);function fY({children:n,maxDuration:e=1,margin:t=1.2,observe:i,fit:r,clip:s,interpolateFunc:o=cwe,onFit:a}){const l=w.useRef(null),{camera:c,size:u,invalidate:h}=Se(),f=Se(S=>S.controls),d=w.useRef(a);d.current=a;const m=w.useRef({camPos:new D,camRot:new St,camZoom:1}),A=w.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),y=w.useRef(ko.NONE),p=w.useRef(0),[g]=w.useState(()=>new Bn),v=w.useMemo(()=>{function S(){const C=g.getSize(new D),M=g.getCenter(new D),b=Math.max(C.x,C.y,C.z),T=ap(c)?b*4:b/(2*Math.atan(Math.PI*c.fov/360)),I=ap(c)?b*4:T/c.aspect,F=t*Math.max(T,I);return{box:g,size:C,center:M,distance:F}}return{getSize:S,refresh(C){if(lwe(C))g.copy(C);else{const M=C||l.current;if(!M)return this;M.updateWorldMatrix(!0,!0),g.setFromObject(M)}if(g.isEmpty()){const M=c.position.length()||10;g.setFromCenterAndSize(new D,new D(M,M,M))}return m.current.camPos.copy(c.position),m.current.camRot.copy(c.quaternion),ap(c)&&(m.current.camZoom=c.zoom),A.current.camPos=void 0,A.current.camRot=void 0,A.current.camZoom=void 0,A.current.camUp=void 0,A.current.target=void 0,this},reset(){const{center:C,distance:M}=S(),b=c.position.clone().sub(C).normalize();A.current.camPos=C.clone().addScaledVector(b,M),A.current.target=C.clone();const T=new Oe().lookAt(A.current.camPos,A.current.target,c.up);return A.current.camRot=new St().setFromRotationMatrix(T),y.current=ko.START,p.current=0,this},moveTo(C){return A.current.camPos=Array.isArray(C)?new D(...C):C.clone(),y.current=ko.START,p.current=0,this},lookAt({target:C,up:M}){A.current.target=Array.isArray(C)?new D(...C):C.clone(),M?A.current.camUp=Array.isArray(M)?new D(...M):M.clone():A.current.camUp=c.up.clone();const b=new Oe().lookAt(A.current.camPos||c.position,A.current.target,A.current.camUp);return A.current.camRot=new St().setFromRotationMatrix(b),y.current=ko.START,p.current=0,this},to({position:C,target:M}){return this.moveTo(C).lookAt({target:M})},fit(){if(!ap(c))return this.reset();let C=0,M=0;const b=[new D(g.min.x,g.min.y,g.min.z),new D(g.min.x,g.max.y,g.min.z),new D(g.min.x,g.min.y,g.max.z),new D(g.min.x,g.max.y,g.max.z),new D(g.max.x,g.max.y,g.max.z),new D(g.max.x,g.max.y,g.min.z),new D(g.max.x,g.min.y,g.max.z),new D(g.max.x,g.min.y,g.min.z)],T=A.current.camPos||c.position,I=A.current.target||(f==null?void 0:f.target),F=A.current.camUp||c.up,R=I?new Oe().lookAt(T,I,F).setPosition(T).invert():c.matrixWorldInverse;for(const H of b)H.applyMatrix4(R),C=Math.max(C,Math.abs(H.y)),M=Math.max(M,Math.abs(H.x));C*=2,M*=2;const z=(c.top-c.bottom)/C,L=(c.right-c.left)/M;return A.current.camZoom=Math.min(z,L)/t,y.current=ko.START,p.current=0,d.current&&d.current(this.getSize()),this},clip(){const{distance:C}=S();return c.near=C/100,c.far=C*100,c.updateProjectionMatrix(),f&&(f.maxDistance=C*10,f.update()),h(),this}}},[g,c,f,t,h]);w.useLayoutEffect(()=>{if(f){const S=()=>{if(f&&A.current.target&&y.current!==ko.NONE){const C=new D().setFromMatrixColumn(c.matrix,2),M=m.current.camPos.distanceTo(f.target),b=(A.current.camPos||m.current.camPos).distanceTo(A.current.target),T=(1-p.current)*M+p.current*b;f.target.copy(c.position).addScaledVector(C,-T),f.update()}y.current=ko.NONE};return f.addEventListener("start",S),()=>f.removeEventListener("start",S)}},[f]);const E=w.useRef(0);return w.useLayoutEffect(()=>{(i||E.current++===0)&&(v.refresh(),r&&v.reset().fit(),s&&v.clip())},[u,s,r,i,c,f]),yt((S,C)=>{if(y.current===ko.START)y.current=ko.ACTIVE,h();else if(y.current===ko.ACTIVE){if(p.current+=C/e,p.current>=1)A.current.camPos&&c.position.copy(A.current.camPos),A.current.camRot&&c.quaternion.copy(A.current.camRot),A.current.camUp&&c.up.copy(A.current.camUp),A.current.camZoom&&ap(c)&&(c.zoom=A.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),f&&A.current.target&&(f.target.copy(A.current.target),f.update()),y.current=ko.NONE;else{const M=o(p.current);A.current.camPos&&c.position.lerpVectors(m.current.camPos,A.current.camPos,M),A.current.camRot&&c.quaternion.slerpQuaternions(m.current.camRot,A.current.camRot,M),A.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),A.current.camZoom&&ap(c)&&(c.zoom=(1-M)*m.current.camZoom+M*A.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}h()}}),w.createElement("group",{ref:l},w.createElement(hY.Provider,{value:v},n))}function dY(){return w.useContext(hY)}const uwe=w.forwardRef(({intensity:n=1,decay:e,decayRate:t=.65,maxYaw:i=.1,maxPitch:r=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1},c)=>{const u=Se(g=>g.camera),h=Se(g=>g.controls),f=w.useRef(n),d=w.useRef(u.rotation.clone()),[m]=w.useState(()=>new n4),[A]=w.useState(()=>new n4),[y]=w.useState(()=>new n4),p=()=>{(f.current<0||f.current>1)&&(f.current=f.current<0?0:1)};return w.useImperativeHandle(c,()=>({getIntensity:()=>f.current,setIntensity:g=>{f.current=g,p()}}),[]),w.useEffect(()=>{if(h){const g=()=>void(d.current=u.rotation.clone());return h.addEventListener("change",g),g(),()=>void h.removeEventListener("change",g)}},[u,h]),yt((g,v)=>{const E=Math.pow(f.current,2),S=i*E*m.noise(g.clock.elapsedTime*o,1),C=r*E*A.noise(g.clock.elapsedTime*a,1),M=s*E*y.noise(g.clock.elapsedTime*l,1);u.rotation.set(d.current.x+C,d.current.y+S,d.current.z+M),e&&f.current>0&&(f.current-=t*v,p())}),null}),hwe=w.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...a},l)=>{const c=w.useRef(null);w.useImperativeHandle(l,()=>c.current,[]);const u=w.useRef(Math.random()*1e4);return yt(h=>{var f,d;if(!e||t===0)return;o&&h.invalidate();const m=u.current+h.clock.getElapsedTime();c.current.rotation.x=Math.cos(m/4*t)/8*i,c.current.rotation.y=Math.sin(m/4*t)/8*i,c.current.rotation.z=Math.sin(m/4*t)/20*i;let A=Math.sin(m/4*t)/10;A=Dt.mapLinear(A,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(d=s==null?void 0:s[1])!==null&&d!==void 0?d:.1),c.current.position.y=A*r,c.current.updateMatrix()}),w.createElement("group",a,w.createElement("group",{ref:c,matrixAutoUpdate:!1},n))}),pY=(n,e,t)=>{let i;switch(n){case $n:i=new Uint8ClampedArray(e*t*4);break;case Ln:i=new Uint16Array(e*t*4);break;case ss:i=new Uint32Array(e*t*4);break;case tA:i=new Int8Array(e*t*4);break;case F3:i=new Int16Array(e*t*4);break;case uf:i=new Int32Array(e*t*4);break;case En:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let ox;const fwe=(n,e,t,i)=>{if(ox!==void 0)return ox;const r=new Rn(1,1,i);e.setRenderTarget(r);const s=new ct(new dr,new mr({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=pY(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),ox=o[0]!==0,ox};class U8{constructor(e){var t,i,r,s,o,a,l,c,u,h,f,d,m,A,y,p;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(v){throw this._renderer.setRenderTarget(null),v}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const g={format:Dn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Ut,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Ut,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS:qn,wrapT:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapT)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT:qn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=U8.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new xo,this._camera=new Qn,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!fwe(this._type,this._renderer,this._camera,g)){let v;switch(this._type){case Ln:v=this._renderer.extensions.has("EXT_color_buffer_float")?En:void 0;break}v!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${En}`),this._type=v):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ct(new dr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Rn(this.width,this.height,g),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.mapping:Nu}static instantiateRenderer(){const e=new V3;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=pY(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new qs(this.toArray(),this.width,this.height,Dn,this._type,(e==null?void 0:e.mapping)||Nu,(e==null?void 0:e.wrapS)||qn,(e==null?void 0:e.wrapT)||qn,(e==null?void 0:e.magFilter)||Ut,(e==null?void 0:e.minFilter)||Ut,(e==null?void 0:e.anisotropy)||1,Ks);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Fn&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof In&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof In&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const dwe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,pwe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class mwe extends Fn{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:dwe,fragmentShader:pwe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new D(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new D().fromArray(t)},offsetSdr:{value:new D().fromArray(i)},gainMapMin:{value:new D().fromArray(r)},gainMapMax:{value:new D().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:sa,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class mY extends Error{}class gY extends Error{}const B1=(n,e,t)=>{var i;let r;const s=(i=n.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},gwe=n=>{var e,t;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(n):i=n.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=B1(c,"hdrgm:GainMapMin","0"),h=B1(c,"hdrgm:GainMapMax"),f=B1(c,"hdrgm:Gamma","1"),d=B1(c,"hdrgm:OffsetSDR","0.015625"),m=B1(c,"hdrgm:OffsetHDR","0.015625");let A=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;A||(A="0");const y=(t=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!y)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(p=>parseFloat(p)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(h)?h.map(p=>parseFloat(p)):[parseFloat(h),parseFloat(h),parseFloat(h)],gamma:Array.isArray(f)?f.map(p=>parseFloat(p)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetSdr:Array.isArray(d)?d.map(p=>parseFloat(p)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(m)?m.map(p=>parseFloat(p)):[parseFloat(m),parseFloat(m),parseFloat(m)],hdrCapacityMin:parseFloat(A),hdrCapacityMax:parseFloat(y)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class Awe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),r&&console.log(`Marker: ${c.toString(16)}`),c===226){r&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const h=u+4;let f;if(s.getUint16(h)===18761)f=!1;else if(s.getUint16(h)===19789)f=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!f)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const d=s.getUint32(h+4,!f);if(d<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const m=h+d,A=s.getUint16(m,!f),y=m+2;let p=0;for(let S=y;S<y+12*A;S+=12)s.getUint16(S,!f)===45057&&(p=s.getUint32(S+8,!f));const v=m+2+A*12+4,E=[];for(let S=v;S<v+p*16;S+=16){const C={MPType:s.getUint32(S,!f),size:s.getUint32(S+4,!f),dataOffset:s.getUint32(S+8,!f),dependantImages:s.getUint32(S+12,!f),start:-1,end:-1,isFII:!1};C.dataOffset?(C.start=h+C.dataOffset,C.isFII=!1):(C.start=0,C.isFII=!0),C.end=C.start+C.size,E.push(C)}if(this.options.extractNonFII&&E.length){const S=new Blob([s]),C=[];for(const M of E){if(M.isFII&&!this.options.extractFII)continue;const b=S.slice(M.start,M.end+1,"image/jpeg");C.push(b)}t(C)}}}a+=2+s.getUint16(a+2)}})}}const vwe=async n=>{const e=gwe(n);if(!e)throw new gY("Gain map XMP metadata not found");const i=await new Awe({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new mY("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},bU=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class AY extends Hi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new aE}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new mwe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new In,sdr:new In});return new U8({width:16,height:16,type:Ln,colorSpace:Ks,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([s?bU(s):Promise.resolve(void 0),bU(o)]);l=f[0],a=f[1],c=!0}else{const f=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=f[0],a=f[1]}const u=new In(l||new ImageData(2,2),Nu,qn,qn,Ut,R5,Dn,$n,1,Ks);u.flipY=c,u.needsUpdate=!0;const h=new In(a,Nu,qn,qn,Ut,R5,Dn,$n,1,un);h.flipY=c,h.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class ywe extends AY{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,c,u;const h=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(T){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(T),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let f=!0,d=0,m=0,A=!0,y=0,p=0,g=!0,v=0,E=0;const S=()=>{if(typeof s=="function"){const T=d+y+v,I=m+p+E,F=f&&A&&g;s(new ProgressEvent("progress",{lengthComputable:F,loaded:I,total:T}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const C=new Ri(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async T=>{if(typeof T=="string")throw new Error("Invalid sdr buffer");l=T,await h()},T=>{f=T.lengthComputable,m=T.loaded,d=T.total,S()},T=>{this.manager.itemError(e),typeof o=="function"&&o(T)});const M=new Ri(this._internalLoadingManager);M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(t,async T=>{if(typeof T=="string")throw new Error("Invalid gainmap buffer");c=T,await h()},T=>{A=T.lengthComputable,p=T.loaded,y=T.total,S()},T=>{this.manager.itemError(t),typeof o=="function"&&o(T)});const b=new Ri(this._internalLoadingManager);return b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(i,async T=>{if(typeof T!="string")throw new Error("Invalid metadata string");u=JSON.parse(T),await h()},T=>{g=T.lengthComputable,E=T.loaded,v=T.total,S()},T=>{this.manager.itemError(i),typeof o=="function"&&o(T)}),a}}class xwe extends AY{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new Ri(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,h;try{const f=await vwe(l);c=f.sdr,u=f.gainMap,h=f.metadata}catch(f){if(f instanceof gY||f instanceof mY)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw f}try{await this.render(s,h,c,u)}catch(f){this.manager.itemError(e),typeof r=="function"&&r(f),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const $4={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},_we="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",ax=n=>Array.isArray(n);function z8({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1;if(t){if(!(t in $4))throw new Error("Preset must be one of: "+Object.keys($4).join(", "));n=$4[t],e=_we}const l=ax(n)&&n.length===6,c=ax(n)&&n.length===3&&n.some(y=>y.endsWith("json")),u=ax(n)?n[0]:n;a=ax(n);const h=l?"cube":c?"webp":u.startsWith("data:application/exr")?"exr":u.startsWith("data:application/hdr")?"hdr":u.startsWith("data:image/jpeg")?"jpg":(s=u.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase();if(o=h==="cube"?lE:h==="hdr"?xye:h==="exr"?_ye:h==="jpg"||h==="jpeg"?xwe:h==="webp"?ywe:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const f=Se(y=>y.gl);w.useLayoutEffect(()=>{if(h!=="webp"&&h!=="jpg"&&h!=="jpeg")return;function y(){hi.clear(o,a?[n]:n)}f.domElement.addEventListener("webglcontextlost",y,{once:!0})},[n,f.domElement]);const d=hi(o,a?[n]:n,y=>{(h==="webp"||h==="jpg"||h==="jpeg")&&y.setRenderer(f),y.setPath==null||y.setPath(e),r&&r(y)});let m=a?d[0]:d;if(h==="jpg"||h==="jpeg"||h==="webp"){var A;m=(A=m.renderTarget)==null?void 0:A.texture}return m.mapping=l?Ml:Hu,"colorSpace"in m?m.colorSpace=i??l?"srgb":"srgb-linear":m.encoding=i??l?pEe:dEe,m}const Ewe=n=>n.current&&n.current.isScene,wwe=n=>Ewe(n)?n.current:n;function k8(n,e,t,i,r={}){var s,o,a,l,c;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=wwe(e||t),h=u.background,f=u.environment,d={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(u.environment=i),n&&(u.background=i),sr(u,r),()=>{n!=="only"&&(u.environment=f),n&&(u.background=h),sr(u,d)}}function tw({scene:n,background:e=!1,map:t,...i}){const r=Se(s=>s.scene);return w.useLayoutEffect(()=>{if(t)return k8(e,n,r,t,i)}),null}function N8({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=z8(l),u=Se(h=>h.scene);return w.useLayoutEffect(()=>k8(n,e,u,c,{blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function vY({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:f,scene:d,files:m,path:A,preset:y=void 0,extensions:p}){const g=Se(b=>b.gl),v=Se(b=>b.scene),E=w.useRef(null),[S]=w.useState(()=>new xo),C=w.useMemo(()=>{const b=new km(i);return b.texture.type=Ln,b},[i]);w.useLayoutEffect(()=>(r===1&&E.current.update(g,S),k8(o,d,v,C.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:h,environmentRotation:f})),[n,S,C.texture,d,v,o,r,g]);let M=1;return yt(()=>{(r===1/0||M<r)&&(E.current.update(g,S),M++)}),w.createElement(w.Fragment,null,Bc(w.createElement(w.Fragment,null,n,w.createElement("cubeCamera",{ref:E,args:[e,t,C]}),m||y?w.createElement(N8,{background:!0,files:m,preset:y,path:A,extensions:p}):s?w.createElement(tw,{background:!0,map:s,extensions:p}):null),S))}function Swe(n){var e,t,i,r;const s=z8(n),o=n.map||s;w.useMemo(()=>si({GroundProjectedEnvImpl:Wge}),[]);const a=w.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,u=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return w.createElement(w.Fragment,null,w.createElement(tw,Ye({},n,{map:o})),w.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function yY(n){return n.ground?w.createElement(Swe,n):n.map?w.createElement(tw,n):n.children?w.createElement(vY,n):w.createElement(N8,n)}const xY=w.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:h=!1,renderOrder:f,...d},m)=>{const A=w.useRef(null),y=Se(L=>L.scene),p=Se(L=>L.gl),g=w.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[v,E,S,C,M,b,T]=w.useMemo(()=>{const L=new Rn(l,l),H=new Rn(l,l);H.texture.generateMipmaps=L.texture.generateMipmaps=!1;const K=new dr(i,r).rotateX(Math.PI/2),J=new ct(K),O=new UA;O.depthTest=O.depthWrite=!1,O.onBeforeCompile=U=>{U.uniforms={...U.uniforms,ucolor:{value:new We(u)}},U.fragmentShader=U.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),U.fragmentShader=U.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const W=new Fn(Sve),V=new Fn(Cve);return V.depthTest=W.depthTest=!1,[L,K,O,J,W,V,H]},[l,i,r,n,u]),I=L=>{C.visible=!0,C.material=M,M.uniforms.tDiffuse.value=v.texture,M.uniforms.h.value=L*1/256,p.setRenderTarget(T),p.render(C,g.current),C.material=b,b.uniforms.tDiffuse.value=T.texture,b.uniforms.v.value=L*1/256,p.setRenderTarget(v),p.render(C,g.current),C.visible=!1};let F=0,R,z;return yt(()=>{g.current&&(e===1/0||F<e)&&(F++,R=y.background,z=y.overrideMaterial,A.current.visible=!1,y.background=null,y.overrideMaterial=S,p.setRenderTarget(v),p.render(y,g.current),I(s),c&&I(s*.4),p.setRenderTarget(null),A.current.visible=!0,y.overrideMaterial=z,y.background=R)}),w.useImperativeHandle(m,()=>A.current,[]),w.createElement("group",Ye({"rotation-x":Math.PI/2},d,{ref:A}),w.createElement("mesh",{renderOrder:f,geometry:E,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},w.createElement("meshBasicMaterial",{transparent:!0,map:v.texture,opacity:t,depthWrite:h})),w.createElement("orthographicCamera",{ref:g,args:[-i/2,i/2,r/2,-r/2,o,a]}))});function Cwe(n){return n.isLight}function Mwe(n){return!!n.geometry}const G8=w.createContext(null),bwe=wo({color:new We,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),_Y=w.forwardRef(({children:n,temporal:e,frames:t=40,limit:i=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:h=!0,...f},d)=>{si({SoftShadowMaterial:bwe});const m=Se(C=>C.gl),A=Se(C=>C.scene),y=Se(C=>C.camera),p=Se(C=>C.invalidate),g=w.useRef(null),v=w.useRef(null),[E]=w.useState(()=>new Twe(m,A,u));w.useLayoutEffect(()=>{E.configure(g.current)},[]);const S=w.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?r:t),count:0,getMesh:()=>g.current,reset:()=>{E.clear();const C=g.current.material;C.opacity=0,C.alphaTest=0,S.count=0},update:(C=1)=>{const M=g.current.material;S.temporal?(M.opacity=Math.min(o,M.opacity+o/S.blend),M.alphaTest=Math.min(a,M.alphaTest+a/S.blend)):(M.opacity=o,M.alphaTest=a),v.current.visible=!0,E.prepare();for(let b=0;b<C;b++)S.lights.forEach(T=>T.update()),E.update(y,S.blend);v.current.visible=!1,E.finish()}}),[E,y,A,e,t,r,o,a]);return w.useLayoutEffect(()=>{S.reset(),!S.temporal&&S.frames!==1/0&&S.update(S.blend)}),w.useImperativeHandle(d,()=>S,[S]),yt(()=>{(S.temporal||S.frames===1/0)&&S.count<S.frames&&S.count<i&&(p(),S.update(),S.count++)}),w.createElement("group",f,w.createElement("group",{traverse:()=>null,ref:v},w.createElement(G8.Provider,{value:S},n)),w.createElement("mesh",{receiveShadow:!0,ref:g,scale:s,rotation:[-Math.PI/2,0,0]},w.createElement("planeGeometry",null),w.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:h,color:l,blend:c,map:E.progressiveLightMap2.texture})))}),EY=w.forwardRef(({castShadow:n=!0,bias:e=.001,mapSize:t=512,size:i=5,near:r=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=Ts>=155?Math.PI:1,ambient:h=.5,...f},d)=>{const m=w.useRef(null),A=new D(...a).length(),y=w.useContext(G8),p=w.useCallback(()=>{let v;if(m.current)for(let E=0;E<m.current.children.length;E++)if(v=m.current.children[E],Math.random()>h)v.position.set(a[0]+Dt.randFloatSpread(l),a[1]+Dt.randFloatSpread(l),a[2]+Dt.randFloatSpread(l));else{let S=Math.acos(2*Math.random()-1)-Math.PI/2,C=2*Math.PI*Math.random();v.position.set(Math.cos(S)*Math.cos(C)*A,Math.abs(Math.cos(S)*Math.sin(C)*A),Math.sin(S)*A)}},[l,h,A,...a]),g=w.useMemo(()=>({update:p}),[p]);return w.useImperativeHandle(d,()=>g,[g]),w.useLayoutEffect(()=>{var v;const E=m.current;return y&&((v=y.lights)==null||v.set(E.uuid,g)),()=>{var S;return void(y==null||(S=y.lights)==null?void 0:S.delete(E.uuid))}},[y,g]),w.createElement("group",Ye({ref:m},f),Array.from({length:c},(v,E)=>w.createElement("directionalLight",{key:E,castShadow:n,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:u/c},w.createElement("orthographicCamera",{attach:"shadow-camera",args:[-i,i,i,-i,r,s]}))))});class Twe{constructor(e,t,i=1024){this.renderer=e,this.res=i,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new We,this.clearAlpha=0;const r={type:Ln,magFilter:rn,minFilter:rn};this.progressiveLightMap1=new Rn(this.res,this.res,r),this.progressiveLightMap2=new Rn(this.res,this.res,r),this.discardMat=new O8,this.targetMat=new WA({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{Mwe(e)?this.meshes.push({object:e,material:e.material}):Cwe(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(i),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const Iwe={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function Bwe({radius:n,adjustCamera:e}){const t=dY();return w.useEffect(()=>{e&&t.refresh().clip().fit()},[n,e]),null}function Pwe({children:n,center:e,adjustCamera:t=!0,intensity:i=.5,shadows:r="contact",environment:s="city",preset:o="rembrandt",...a}){var l,c,u,h,f,d,m,A;const y=typeof o=="string"?Iwe[o]:o,[{radius:p,height:g},v]=w.useState({radius:0,width:0,height:0,depth:0}),E=(l=r==null?void 0:r.bias)!==null&&l!==void 0?l:-1e-4,S=(c=r==null?void 0:r.normalBias)!==null&&c!==void 0?c:0,C=(u=r==null?void 0:r.size)!==null&&u!==void 0?u:1024,M=(h=r==null?void 0:r.offset)!==null&&h!==void 0?h:0,b=r==="contact"||(r==null?void 0:r.type)==="contact",T=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",I={...typeof r=="object"?r:{}},F=s?typeof s=="string"?{preset:s}:s:null,R=w.useCallback(z=>{const{width:L,height:H,depth:K,boundingSphere:J}=z;v({radius:J.radius,width:L,height:H,depth:K}),e!=null&&e.onCentered&&e.onCentered(z)},[]);return w.createElement(w.Fragment,null,w.createElement("ambientLight",{intensity:i/3}),w.createElement("spotLight",{penumbra:1,position:[y.main[0]*p,y.main[1]*p,y.main[2]*p],intensity:i*2,castShadow:!!r,"shadow-bias":E,"shadow-normalBias":S,"shadow-mapSize":C}),w.createElement("pointLight",{position:[y.fill[0]*p,y.fill[1]*p,y.fill[2]*p],intensity:i}),w.createElement(fY,Ye({fit:!!t,clip:!!t,margin:Number(t),observe:!0},a),w.createElement(Bwe,{radius:p,adjustCamera:t}),w.createElement(D8,Ye({},e,{position:[0,M/2,0],onCentered:R}),n)),w.createElement("group",{position:[0,-g/2-M/2,0]},b&&w.createElement(xY,Ye({scale:p*4,far:p,blur:2},I)),T&&w.createElement(_Y,Ye({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:p*4},I),w.createElement(EY,{amount:(f=I.amount)!==null&&f!==void 0?f:8,radius:(d=I.radius)!==null&&d!==void 0?d:p,ambient:(m=I.ambient)!==null&&m!==void 0?m:.5,intensity:(A=I.intensity)!==null&&A!==void 0?A:1,position:[y.main[0]*p,y.main[1]*p,y.main[2]*p],size:p*4,bias:-E,mapSize:C}))),s&&w.createElement(yY,F))}const Rwe=n=>n===0?0:Math.pow(2,10*n-10);function Dwe({children:n,floor:e=.25,segments:t=20,receiveShadow:i,...r}){const s=w.useRef(null);return w.useLayoutEffect(()=>{let o=0;const a=t/t/2,l=s.current.attributes.position;for(let c=0;c<t+1;c++)for(let u=0;u<t+1;u++)l.setXYZ(o++,c/t-a+(c===0?-e:0),u/t-a,Rwe(c/t));l.needsUpdate=!0,s.current.computeVertexNormals()},[t,e]),w.createElement("group",r,w.createElement("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2]},w.createElement("planeGeometry",{ref:s,args:[1,1,t,t]}),n))}const Lwe=w.forwardRef(({fog:n=!1,renderOrder:e,depthWrite:t=!1,colorStop:i=0,color:r="black",opacity:s=.5,...o},a)=>{const l=w.useMemo(()=>{const c=document.createElement("canvas");c.width=128,c.height=128;const u=c.getContext("2d"),h=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return h.addColorStop(i,new We(r).getStyle()),h.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=h,u.fillRect(0,0,c.width,c.height),c},[r,i]);return w.createElement("mesh",Ye({renderOrder:e,ref:a,"rotation-x":-Math.PI/2},o),w.createElement("planeGeometry",null),w.createElement("meshBasicMaterial",{transparent:!0,opacity:s,fog:n,depthWrite:t,side:Vn},w.createElement("canvasTexture",{attach:"map",args:[l]})))});function TU(n=Ss){const e={value:new Oe};return Object.assign(new p6({side:n}),{viewMatrix:e,onBeforeCompile:t=>{t.uniforms.viewMatrix=e,t.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+t.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const Fwe=wo({causticsTexture:null,causticsTextureB:null,color:new We,lightProjMatrix:new Oe,lightViewMatrix:new Oe},`varying vec3 vWorldPosition;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture;
  uniform sampler2D causticsTextureB;
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5;
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),Owe=wo({cameraMatrixWorld:new Oe,cameraProjectionMatrixInv:new Oe,normalTexture:null,depthTexture:null,lightDir:new D(0,1,0),lightPlaneNormal:new D(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new Oe,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),IU={depth:!0,minFilter:Ut,magFilter:Ut,type:$n},BU={minFilter:yo,magFilter:Ut,type:En,generateMipmaps:!0},Uwe=w.forwardRef(({debug:n,children:e,frames:t=1,ior:i=1.1,color:r="white",causticsOnly:s=!1,backside:o=!1,backsideIOR:a=1.1,worldRadius:l=.3125,intensity:c=.05,resolution:u=2024,lightSource:h=[5,5,5],...f},d)=>{si({CausticsProjectionMaterial:Fwe});const m=w.useRef(null),A=w.useRef(null),y=w.useRef(null),p=w.useRef(null),g=Se(j=>j.gl),v=I8(n&&A,VQ),E=Es(u,u,IU),S=Es(u,u,IU),C=Es(u,u,BU),M=Es(u,u,BU),[b]=w.useState(()=>TU()),[T]=w.useState(()=>TU(Ni)),[I]=w.useState(()=>new Owe),[F]=w.useState(()=>new lc(I));w.useLayoutEffect(()=>{m.current.updateWorldMatrix(!1,!0)});let R=0;const z=new D,L=new Nm,H=new Oe,K=new Br,J=new D,O=new D,W=new Bn,V=new D,U=[],Y=[],$=[],N=[],Q=new D;for(let j=0;j<8;j++)U.push(new D),Y.push(new D),$.push(new D),N.push(new D);return yt(()=>{if(t===1/0||R++<t){var j,X;Array.isArray(h)?J.fromArray(h).normalize():J.copy(m.current.worldToLocal(h.current.getWorldPosition(z)).normalize()),O.copy(J).multiplyScalar(-1),(j=y.current.parent)==null||j.matrixWorld.identity(),W.setFromObject(y.current,!0),U[0].set(W.min.x,W.min.y,W.min.z),U[1].set(W.min.x,W.min.y,W.max.z),U[2].set(W.min.x,W.max.y,W.min.z),U[3].set(W.min.x,W.max.y,W.max.z),U[4].set(W.max.x,W.min.y,W.min.z),U[5].set(W.max.x,W.min.y,W.max.z),U[6].set(W.max.x,W.max.y,W.min.z),U[7].set(W.max.x,W.max.y,W.max.z);for(let ne=0;ne<8;ne++)Y[ne].copy(U[ne]);W.getCenter(V),U.map(ne=>ne.sub(V));const se=K.set(O,0);U.map((ne,we)=>se.projectPoint(ne,$[we]));const ve=$.reduce((ne,we)=>ne.add(we),z.set(0,0,0)).divideScalar($.length),de=$.map(ne=>ne.distanceTo(ve)).reduce((ne,we)=>Math.max(ne,we)),he=U.map(ne=>ne.dot(J)).reduce((ne,we)=>Math.max(ne,we));A.current.position.copy(Q.copy(J).multiplyScalar(he).add(V)),A.current.lookAt(y.current.localToWorld(V));const te=H.lookAt(A.current.position,V,z.set(0,1,0));A.current.left=-de,A.current.right=de,A.current.top=de,A.current.bottom=-de;const xe=z.set(0,de,0).applyMatrix4(te),ce=(A.current.position.y+xe.y)/J.y;A.current.near=.1,A.current.far=ce,A.current.updateProjectionMatrix(),A.current.updateMatrixWorld();const me=Y.map((ne,we)=>ne.add(N[we].copy(J).multiplyScalar(-ne.y/J.y))),ye=me.reduce((ne,we)=>ne.add(we),z.set(0,0,0)).divideScalar(me.length),Me=2*me.map(ne=>Math.hypot(ne.x-ye.x,ne.z-ye.z)).reduce((ne,we)=>Math.max(ne,we));p.current.scale.setScalar(Me),p.current.position.copy(ye),n&&((X=v.current)==null||X.update()),T.viewMatrix.value=b.viewMatrix.value=A.current.matrixWorldInverse;const oe=L.setFromProjectionMatrix(H.multiplyMatrices(A.current.projectionMatrix,A.current.matrixWorldInverse)).planes[4];I.cameraMatrixWorld=A.current.matrixWorld,I.cameraProjectionMatrixInv=A.current.projectionMatrixInverse,I.lightDir=O,I.lightPlaneNormal=oe.normal,I.lightPlaneConstant=oe.constant,I.near=A.current.near,I.far=A.current.far,I.resolution=u,I.size=de,I.intensity=c,I.worldRadius=l,y.current.visible=!0,g.setRenderTarget(E),g.clear(),y.current.overrideMaterial=b,g.render(y.current,A.current),g.setRenderTarget(S),g.clear(),o&&(y.current.overrideMaterial=T,g.render(y.current,A.current)),y.current.overrideMaterial=null,I.ior=i,p.current.material.lightProjMatrix=A.current.projectionMatrix,p.current.material.lightViewMatrix=A.current.matrixWorldInverse,I.normalTexture=E.texture,I.depthTexture=E.depthTexture,g.setRenderTarget(C),g.clear(),F.render(g),I.ior=a,I.normalTexture=S.texture,I.depthTexture=S.depthTexture,g.setRenderTarget(M),g.clear(),o&&F.render(g),g.setRenderTarget(null),s&&(y.current.visible=!1)}}),w.useImperativeHandle(d,()=>m.current,[]),w.createElement("group",Ye({ref:m},f),w.createElement("scene",{ref:y},w.createElement("orthographicCamera",{ref:A,up:[0,1,0]}),e),w.createElement("mesh",{renderOrder:2,ref:p,"rotation-x":-Math.PI/2},w.createElement("planeGeometry",null),w.createElement("causticsProjectionMaterial",{transparent:!0,color:r,causticsTexture:C.texture,causticsTextureB:M.texture,blending:P3,blendSrc:R3,blendDst:D3,depthWrite:!1}),n&&w.createElement(vX,null,w.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))}),zwe=w.forwardRef(({mixBlur:n=0,mixStrength:e=.5,resolution:t=256,blur:i=[0,0],args:r=[1,1],minDepthThreshold:s=.9,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:c=0,children:u,debug:h=0,distortion:f=1,mixContrast:d=1,distortionMap:m,...A},y)=>{si({MeshReflectorMaterial:cY}),w.useEffect(()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const p=Se(({gl:$})=>$),g=Se(({camera:$})=>$),v=Se(({scene:$})=>$);i=Array.isArray(i)?i:[i,i];const E=i[0]+i[1]>0,S=w.useRef(null);w.useImperativeHandle(y,()=>S.current,[]);const[C]=w.useState(()=>new Br),[M]=w.useState(()=>new D),[b]=w.useState(()=>new D),[T]=w.useState(()=>new D),[I]=w.useState(()=>new Oe),[F]=w.useState(()=>new D(0,0,-1)),[R]=w.useState(()=>new Yt),[z]=w.useState(()=>new D),[L]=w.useState(()=>new D),[H]=w.useState(()=>new Yt),[K]=w.useState(()=>new Oe),[J]=w.useState(()=>new on),O=w.useCallback(()=>{if(b.setFromMatrixPosition(S.current.matrixWorld),T.setFromMatrixPosition(g.matrixWorld),I.extractRotation(S.current.matrixWorld),M.set(0,0,1),M.applyMatrix4(I),z.subVectors(b,T),z.dot(M)>0)return;z.reflect(M).negate(),z.add(b),I.extractRotation(g.matrixWorld),F.set(0,0,-1),F.applyMatrix4(I),F.add(T),L.subVectors(b,F),L.reflect(M).negate(),L.add(b),J.position.copy(z),J.up.set(0,1,0),J.up.applyMatrix4(I),J.up.reflect(M),J.lookAt(L),J.far=g.far,J.updateMatrixWorld(),J.projectionMatrix.copy(g.projectionMatrix),K.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),K.multiply(J.projectionMatrix),K.multiply(J.matrixWorldInverse),K.multiply(S.current.matrixWorld),C.setFromNormalAndCoplanarPoint(M,b),C.applyMatrix4(J.matrixWorldInverse),R.set(C.normal.x,C.normal.y,C.normal.z,C.constant);const $=J.projectionMatrix;H.x=(Math.sign(R.x)+$.elements[8])/$.elements[0],H.y=(Math.sign(R.y)+$.elements[9])/$.elements[5],H.z=-1,H.w=(1+$.elements[10])/$.elements[14],R.multiplyScalar(2/R.dot(H)),$.elements[2]=R.x,$.elements[6]=R.y,$.elements[10]=R.z+1,$.elements[14]=R.w},[]),[W,V,U,Y]=w.useMemo(()=>{const $={type:Ln,minFilter:Ut,magFilter:Ut},N=new Rn(t,t,$);N.depthBuffer=!0,N.depthTexture=new Hm(t,t),N.depthTexture.format=ka,N.depthTexture.type=$u;const Q=new Rn(t,t,$),j=new lY({gl:p,resolution:t,width:i[0],height:i[1],minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l}),X={mirror:c,textureMatrix:K,mixBlur:n,tDiffuse:N.texture,tDepth:N.depthTexture,tDiffuseBlur:Q.texture,hasBlur:E,mixStrength:e,minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l,transparent:!0,debug:h,distortion:f,distortionMap:m,mixContrast:d,"defines-USE_BLUR":E?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":m?"":void 0};return[N,Q,j,X]},[p,i,K,t,c,E,n,e,s,o,a,l,h,f,m,d]);return yt(()=>{if(!(S!=null&&S.current))return;S.current.visible=!1;const $=p.xr.enabled,N=p.shadowMap.autoUpdate;O(),p.xr.enabled=!1,p.shadowMap.autoUpdate=!1,p.setRenderTarget(W),p.state.buffers.depth.setMask(!0),p.autoClear||p.clear(),p.render(v,J),E&&U.render(p,W,V),p.xr.enabled=$,p.shadowMap.autoUpdate=N,S.current.visible=!0,p.setRenderTarget(null)}),w.createElement("mesh",Ye({ref:S},A),w.createElement("planeGeometry",{args:r}),u?u("meshReflectorMaterial",Y):w.createElement("meshReflectorMaterial",Y))});class kwe extends Fn{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new D(0,0,0)},lightColor:{value:new We("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new Ee(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;
        uniform vec3 spotPosition;
        uniform float attenuation;

        #include <common>
        #include <logdepthbuf_pars_vertex>

        void main() {
          // compute intensity
          vNormal = normalize(normalMatrix * normal);
          vec4 worldPosition = modelMatrix * vec4(position, 1);
          vec4 viewPosition = viewMatrix * worldPosition;
          vViewZ = viewPosition.z;

          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);

          gl_Position = projectionMatrix * viewPosition;

          #include <logdepthbuf_vertex>
        }
      `,fragmentShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;

        uniform vec3 lightColor;
        uniform float anglePower;
        uniform sampler2D depth;
        uniform vec2 resolution;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float opacity;

        #include <packing>
        #include <logdepthbuf_pars_fragment>

        float readDepth(sampler2D depthSampler, vec2 uv) {
          float fragCoordZ = texture(depthSampler, uv).r;

          // https://github.com/mrdoob/three.js/issues/23072
          #ifdef USE_LOGDEPTHBUF
            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));
          #else
            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
          #endif

          return viewZ;
        }

        void main() {
          #include <logdepthbuf_fragment>

          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));
          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);
          float intensity = vIntensity * angleIntensity;

          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
          if (isSoft) {
            vec2 uv = gl_FragCoord.xy / resolution;
            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));
          }

          gl_FragColor = vec4(lightColor, intensity * opacity);

          #include <tonemapping_fragment>
          #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}}var Nwe=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const Gwe=n=>n==null?void 0:n.isSpotLight;function Hwe({opacity:n=1,radiusTop:e,radiusBottom:t,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5}){const c=w.useRef(null),u=Se(y=>y.size),h=Se(y=>y.camera),f=Se(y=>y.viewport.dpr),[d]=w.useState(()=>new kwe),[m]=w.useState(()=>new D);e=e===void 0?.1:e,t=t===void 0?o*7:t,yt(()=>{d.uniforms.spotPosition.value.copy(c.current.getWorldPosition(m)),c.current.lookAt(c.current.parent.target.getWorldPosition(m))});const A=w.useMemo(()=>{const y=new Tr(e,t,s,128,64,!0);return y.applyMatrix4(new Oe().makeTranslation(0,-s/2,0)),y.applyMatrix4(new Oe().makeRotationX(-Math.PI/2)),y},[s,e,t]);return w.createElement(w.Fragment,null,w.createElement("mesh",{ref:c,geometry:A,raycast:()=>null},w.createElement("primitive",{object:d,attach:"material","uniforms-opacity-value":n,"uniforms-lightColor-value":r,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":i,"uniforms-cameraNear-value":h.near,"uniforms-cameraFar-value":h.far,"uniforms-resolution-value":i?[u.width*f,u.height*f]:[0,0]})))}function wY(n,e,t,i,r){const[[s,o]]=w.useState(()=>[new D,new D]);w.useLayoutEffect(()=>{if(Gwe(n.current))n.current.shadow.mapSize.set(t,i),n.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[n,t,i]),yt(()=>{if(!n.current)return;const a=n.current.position,l=n.current.target.position;o.copy(l).sub(a);var c=o.length();o.normalize().multiplyScalar(c*r),s.copy(a).add(o),e.current.position.copy(s),e.current.lookAt(n.current.target.position)})}function Qwe({distance:n=.4,alphaTest:e=.5,map:t,shader:i=Nwe,width:r=512,height:s=512,scale:o=1,children:a,...l}){const c=w.useRef(null),u=l.spotlightRef,h=l.debug;wY(u,c,r,s,n);const f=w.useMemo(()=>new Rn(r,s,{format:Dn,stencilBuffer:!1}),[r,s]),d=w.useRef({uShadowMap:{value:t},uTime:{value:0}});w.useEffect(()=>void(d.current.uShadowMap.value=t),[t]);const m=w.useMemo(()=>new lc(new Fn({uniforms:d.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:i})),[i]);return w.useEffect(()=>()=>{m.material.dispose(),m.dispose()},[m]),w.useEffect(()=>()=>f.dispose(),[f]),yt(({gl:A},y)=>{d.current.uTime.value+=y,A.setRenderTarget(f),m.render(A),A.setRenderTarget(null)}),w.createElement(w.Fragment,null,w.createElement("mesh",{ref:c,scale:o,castShadow:!0},w.createElement("planeGeometry",null),w.createElement("meshBasicMaterial",{transparent:!0,side:Vn,alphaTest:e,alphaMap:f.texture,"alphaMap-wrapS":Fr,"alphaMap-wrapT":Fr,opacity:h?1:0},a)))}function Vwe({distance:n=.4,alphaTest:e=.5,map:t,width:i=512,height:r=512,scale:s,children:o,...a}){const l=w.useRef(null),c=a.spotlightRef,u=a.debug;return wY(c,l,i,r,n),w.createElement(w.Fragment,null,w.createElement("mesh",{ref:l,scale:s,castShadow:!0},w.createElement("planeGeometry",null),w.createElement("meshBasicMaterial",{transparent:!0,side:Vn,alphaTest:e,alphaMap:t,"alphaMap-wrapS":Fr,"alphaMap-wrapT":Fr,opacity:u?1:0},o)))}function Wwe(n){return n.shader?w.createElement(Qwe,n):w.createElement(Vwe,n)}const jwe=w.forwardRef(({opacity:n=1,radiusTop:e,radiusBottom:t,depthBuffer:i,color:r="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,volumetric:c=!0,debug:u=!1,children:h,...f},d)=>{const m=w.useRef(null);return w.useImperativeHandle(d,()=>m.current,[]),w.createElement("group",null,u&&m.current&&w.createElement("spotLightHelper",{args:[m.current]}),w.createElement("spotLight",Ye({ref:m,angle:o,color:r,distance:s,castShadow:!0},f),c&&w.createElement(Hwe,{debug:u,opacity:n,radiusTop:e,radiusBottom:t,depthBuffer:i,color:r,distance:s,angle:o,attenuation:a,anglePower:l})),h&&w.cloneElement(h,{spotlightRef:m,debug:u}))}),Xwe=w.forwardRef(({args:n,map:e,toneMapped:t=!1,color:i="white",form:r="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const h=w.useRef(null);return w.useImperativeHandle(u,()=>h.current,[]),w.useLayoutEffect(()=>{!l&&!c.material&&(sr(h.current.material,{color:i}),h.current.material.color.multiplyScalar(s))},[i,s,l,c.material]),w.useLayoutEffect(()=>{a&&h.current.lookAt(Array.isArray(a)?new D(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,w.createElement("mesh",Ye({ref:h,scale:o},c),r==="circle"?w.createElement("ringGeometry",{args:[0,1,64]}):r==="ring"?w.createElement("ringGeometry",{args:[.5,1,64]}):r==="rect"?w.createElement("planeGeometry",null):w.createElement(r,{args:n}),l||(c.material?null:w.createElement("meshBasicMaterial",{toneMapped:t,map:e,side:Vn})))});function SY(n,e,t=new D){const i=Math.PI*(n-.5),r=2*Math.PI*(e-.5);return t.x=Math.cos(r),t.y=Math.sin(i),t.z=Math.sin(r),t}const Ywe=w.forwardRef(({inclination:n=.6,azimuth:e=.1,distance:t=1e3,mieCoefficient:i=.005,mieDirectionalG:r=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=SY(n,e),...l},c)=>{const u=w.useMemo(()=>new D().setScalar(t),[t]),[h]=w.useState(()=>new y8);return w.createElement("primitive",Ye({object:h,ref:c,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":r,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u},l))});class qwe extends Fn{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Kwe=n=>new D().setFromSpherical(new bf(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Jwe=w.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:o=1},a)=>{const l=w.useRef(),[c,u,h]=w.useMemo(()=>{const d=[],m=[],A=Array.from({length:t},()=>(.5+.5*Math.random())*r),y=new We;let p=n+e;const g=e/t;for(let v=0;v<t;v++)p-=g*Math.random(),d.push(...Kwe(p).toArray()),y.setHSL(v/t,i,.9),m.push(y.r,y.g,y.b);return[new Float32Array(d),new Float32Array(m),new Float32Array(A)]},[t,e,r,n,i]);yt(d=>l.current&&(l.current.uniforms.time.value=d.clock.getElapsedTime()*o));const[f]=w.useState(()=>new qwe);return w.createElement("points",{ref:a},w.createElement("bufferGeometry",null,w.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),w.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),w.createElement("bufferAttribute",{attach:"attributes-size",args:[h,1]})),w.createElement("primitive",{ref:l,object:f,attach:"material",blending:M_,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});let lx;const Zwe=new Uint8Array(16);function $we(){if(!lx&&(lx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lx(Zwe)}const Hr=[];for(let n=0;n<256;++n)Hr.push((n+256).toString(16).slice(1));function eSe(n,e=0){return Hr[n[e+0]]+Hr[n[e+1]]+Hr[n[e+2]]+Hr[n[e+3]]+"-"+Hr[n[e+4]]+Hr[n[e+5]]+"-"+Hr[n[e+6]]+Hr[n[e+7]]+"-"+Hr[n[e+8]]+Hr[n[e+9]]+"-"+Hr[n[e+10]]+Hr[n[e+11]]+Hr[n[e+12]]+Hr[n[e+13]]+Hr[n[e+14]]+Hr[n[e+15]]}const tSe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),PU={randomUUID:tSe};function nSe(n,e,t){if(PU.randomUUID&&!e&&!n)return PU.randomUUID();n=n||{};const i=n.random||(n.rng||$we)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,eSe(i)}const iSe="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",RU=new Oe,cx=new D,ux=new St,DU=new D,LU=new St,P1=new D,H8=w.createContext(null),CY=w.forwardRef(({children:n,material:e=WA,texture:t=iSe,range:i,limit:r=200,frustumCulled:s,...o},a)=>{var l,c;const u=w.useMemo(()=>class extends e{constructor(){super();const b=parseInt(ja.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=T=>{T.vertexShader=`attribute float opacity;
               varying float vOpacity;
              `+T.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = opacity;
                `),T.fragmentShader=`varying float vOpacity;
              `+T.fragmentShader.replace(`#include <${b}>`,`#include <${b}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[e]);si({CloudMaterial:u});const h=w.useRef(null),f=w.useRef([]),d=w.useMemo(()=>new Float32Array(Array.from({length:r},()=>1)),[r]),m=w.useMemo(()=>new Float32Array(Array.from({length:r},()=>[1,1,1]).flat()),[r]),A=sh(t);let y=0,p=0,g;const v=new St,E=new D(0,0,1),S=new D;yt((b,T)=>{for(y=b.clock.getElapsedTime(),RU.copy(h.current.matrixWorld).invert(),b.camera.matrixWorld.decompose(DU,LU,P1),p=0;p<f.current.length;p++)g=f.current[p],g.ref.current.matrixWorld.decompose(cx,ux,P1),cx.add(S.copy(g.position).applyQuaternion(ux).multiply(P1)),ux.copy(LU).multiply(v.setFromAxisAngle(E,g.rotation+=T*g.rotationFactor)),P1.multiplyScalar(g.volume+(1+Math.sin(y*g.density*g.speed))/2*g.growth),g.matrix.compose(cx,ux,P1).premultiply(RU),g.dist=cx.distanceTo(DU);for(f.current.sort((I,F)=>F.dist-I.dist),p=0;p<f.current.length;p++)g=f.current[p],d[p]=g.opacity*(g.dist<g.fade-1?g.dist/g.fade:1),h.current.setMatrixAt(p,g.matrix),h.current.setColorAt(p,g.color);h.current.geometry.attributes.opacity.needsUpdate=!0,h.current.instanceMatrix.needsUpdate=!0,h.current.instanceColor&&(h.current.instanceColor.needsUpdate=!0)}),w.useLayoutEffect(()=>{const b=Math.min(r,i!==void 0?i:r,f.current.length);h.current.count=b,Pg(h.current.instanceMatrix,{offset:0,count:b*16}),h.current.instanceColor&&Pg(h.current.instanceColor,{offset:0,count:b*3}),Pg(h.current.geometry.attributes.opacity,{offset:0,count:b})});let C=[(l=A.image.width)!==null&&l!==void 0?l:1,(c=A.image.height)!==null&&c!==void 0?c:1],M=Math.max(C[0],C[1]);return C=[C[0]/M,C[1]/M],w.createElement("group",Ye({ref:a},o),w.createElement(H8.Provider,{value:f},n,w.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:h,args:[null,null,r],frustumCulled:s},w.createElement("instancedBufferAttribute",{usage:os,attach:"instanceColor",args:[m,3]}),w.createElement("planeGeometry",{args:[...C]},w.createElement("instancedBufferAttribute",{usage:os,attach:"attributes-opacity",args:[d,1]})),w.createElement("cloudMaterial",{key:e.name,map:A,transparent:!0,depthWrite:!1}))))}),dT=w.forwardRef(({opacity:n=1,speed:e=0,bounds:t=[5,1,1],segments:i=20,color:r="#ffffff",fade:s=10,volume:o=6,smallestVolume:a=.25,distribute:l=null,growth:c=4,concentrate:u="inside",seed:h=Math.random(),...f},d)=>{function m(){const v=Math.sin(h++)*1e4;return v-Math.floor(v)}const A=w.useContext(H8),y=w.useRef(null),[p]=w.useState(()=>nSe()),g=w.useMemo(()=>[...new Array(i)].map((v,E)=>({segments:i,bounds:new D(1,1,1),position:new D,uuid:p,index:E,ref:y,dist:0,matrix:new Oe,color:new We,rotation:E*(Math.PI/i)})),[i,p]);return w.useLayoutEffect(()=>{g.forEach((v,E)=>{var S;sr(v,{volume:o,color:r,speed:e,growth:c,opacity:n,fade:s,bounds:t,density:Math.max(.5,m()),rotationFactor:Math.max(.2,.5*m())*e});const C=l==null?void 0:l(v,E);(C||i>1)&&v.position.copy(v.bounds).multiply((S=C==null?void 0:C.point)!==null&&S!==void 0?S:{x:m()*2-1,y:m()*2-1,z:m()*2-1});const M=Math.abs(v.position.x),b=Math.abs(v.position.y),T=Math.abs(v.position.z),I=Math.max(M,b,T);v.length=1,M===I&&(v.length-=M/v.bounds.x),b===I&&(v.length-=b/v.bounds.y),T===I&&(v.length-=T/v.bounds.z),v.volume=((C==null?void 0:C.volume)!==void 0?C.volume:Math.max(Math.max(0,a),u==="random"?m():u==="inside"?v.length:1-v.length))*o})},[u,t,s,r,n,c,o,h,i,e]),w.useLayoutEffect(()=>{const v=g;return A.current=[...A.current,...v],()=>{A.current=A.current.filter(E=>E.uuid!==p)}},[g]),w.useImperativeHandle(d,()=>y.current,[]),w.createElement("group",Ye({ref:y},f))}),rSe=w.forwardRef((n,e)=>w.useContext(H8)?w.createElement(dT,Ye({ref:e},n)):w.createElement(CY,null,w.createElement(dT,Ye({ref:e},n)))),sSe=wo({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),MY=n=>n&&n.constructor===Float32Array,oSe=n=>[n.r,n.g,n.b],bY=n=>n instanceof Ee||n instanceof D||n instanceof Yt,TY=n=>Array.isArray(n)?n:bY(n)?n.toArray():[n,n,n];function R1(n,e,t){return w.useMemo(()=>{if(e!==void 0){if(MY(e))return e;if(e instanceof We){const i=Array.from({length:n*3},()=>oSe(e)).flat();return Float32Array.from(i)}else if(bY(e)||Array.isArray(e)){const i=Array.from({length:n*3},()=>TY(e)).flat();return Float32Array.from(i)}return Float32Array.from({length:n},()=>e)}return Float32Array.from({length:n},t)},[e])}const aSe=w.forwardRef(({noise:n=1,count:e=100,speed:t=1,opacity:i=1,scale:r=1,size:s,color:o,children:a,...l},c)=>{w.useMemo(()=>si({SparklesImplMaterial:sSe}),[]);const u=w.useRef(null),h=Se(v=>v.viewport.dpr),f=TY(r),d=w.useMemo(()=>Float32Array.from(Array.from({length:e},()=>f.map(Dt.randFloatSpread)).flat()),[e,...f]),m=R1(e,s,Math.random),A=R1(e,i),y=R1(e,t),p=R1(e*3,n),g=R1(o===void 0?e*3:e,MY(o)?o:new We(o),()=>1);return yt(v=>{u.current&&u.current.material&&(u.current.material.time=v.clock.elapsedTime)}),w.useImperativeHandle(c,()=>u.current,[]),w.createElement("points",Ye({key:`particle-${e}-${JSON.stringify(r)}`},l,{ref:u}),w.createElement("bufferGeometry",null,w.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),w.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1]}),w.createElement("bufferAttribute",{attach:"attributes-opacity",args:[A,1]}),w.createElement("bufferAttribute",{attach:"attributes-speed",args:[y,1]}),w.createElement("bufferAttribute",{attach:"attributes-color",args:[g,3]}),w.createElement("bufferAttribute",{attach:"attributes-noise",args:[p,3]})),a||w.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:h,depthWrite:!1}))});function lSe(n){switch(n){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const cSe="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",uSe="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function IY(n=0,e=1024,t){const i=Ic(()=>fetch(cSe).then(u=>u.json()),["matcapList"]),r=i[0],s=w.useMemo(()=>Object.keys(i).length,[]),a=`${w.useMemo(()=>typeof n=="string"?n:typeof n=="number"?i[n]:null,[n])||r}${lSe(e)}.png`,l=`${uSe}/${e}/${a}`;return[sh(l,t),l,s]}const hSe=({children:n,id:e,format:t,onLoad:i})=>{const r=IY(e,t,i);return w.createElement(w.Fragment,null,n==null?void 0:n(r))},fSe="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",dSe="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function BY(n=0,e={},t){const{repeat:i=[1,1],anisotropy:r=1,offset:s=[0,0]}=e,o=Ic(()=>fetch(dSe).then(f=>f.json()),["normalsList"]),a=w.useMemo(()=>Object.keys(o).length,[]),l=o[0],c=o[n]||l,u=`${fSe}/normals/${c}`,h=sh(u,t);return w.useLayoutEffect(()=>{h&&(h.wrapS=h.wrapT=Fr,h.repeat=new Ee(i[0],i[1]),h.offset=new Ee(s[0],s[1]),h.anisotropy=r)},[h,r,i,s]),[h,u,a]}const pSe=({children:n,id:e,onLoad:t,...i})=>{const r=BY(e,i,t);return w.createElement(w.Fragment,null,n==null?void 0:n(r))},Fu={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new We("#ff0000"),backfaceStroke:new We("#0000ff"),fill:new We("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},mSe=wo(Fu.uniforms,Fu.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Fu.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function gSe(n,e){n.onBeforeCompile=t=>{t.uniforms={...t.uniforms,...e},t.vertexShader=t.vertexShader.replace("void main() {",`
		  ${Fu.vertex}
		  void main() {
			initWireframe();
		`),t.fragmentShader=t.fragmentShader.replace("void main() {",`
		  ${Fu.fragment}
		  void main() {
		`),t.fragmentShader=t.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},n.side=Vn,n.transparent=!0}function ASe(n,e){w.useEffect(()=>{var t;return void(n.fillOpacity.value=(t=e.fillOpacity)!==null&&t!==void 0?t:n.fillOpacity.value)},[e.fillOpacity]),w.useEffect(()=>{var t;return void(n.fillMix.value=(t=e.fillMix)!==null&&t!==void 0?t:n.fillMix.value)},[e.fillMix]),w.useEffect(()=>{var t;return void(n.strokeOpacity.value=(t=e.strokeOpacity)!==null&&t!==void 0?t:n.strokeOpacity.value)},[e.strokeOpacity]),w.useEffect(()=>{var t;return void(n.thickness.value=(t=e.thickness)!==null&&t!==void 0?t:n.thickness.value)},[e.thickness]),w.useEffect(()=>void(n.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),w.useEffect(()=>void(n.dash.value=!!e.dash),[e.dash]),w.useEffect(()=>void(n.dashInvert.value=!!e.dashInvert),[e.dashInvert]),w.useEffect(()=>{var t;return void(n.dashRepeats.value=(t=e.dashRepeats)!==null&&t!==void 0?t:n.dashRepeats.value)},[e.dashRepeats]),w.useEffect(()=>{var t;return void(n.dashLength.value=(t=e.dashLength)!==null&&t!==void 0?t:n.dashLength.value)},[e.dashLength]),w.useEffect(()=>void(n.squeeze.value=!!e.squeeze),[e.squeeze]),w.useEffect(()=>{var t;return void(n.squeezeMin.value=(t=e.squeezeMin)!==null&&t!==void 0?t:n.squeezeMin.value)},[e.squeezeMin]),w.useEffect(()=>{var t;return void(n.squeezeMax.value=(t=e.squeezeMax)!==null&&t!==void 0?t:n.squeezeMax.value)},[e.squeezeMax]),w.useEffect(()=>void(n.stroke.value=e.stroke?new We(e.stroke):n.stroke.value),[e.stroke]),w.useEffect(()=>void(n.fill.value=e.fill?new We(e.fill):n.fill.value),[e.fill]),w.useEffect(()=>void(n.backfaceStroke.value=e.backfaceStroke?new We(e.backfaceStroke):n.backfaceStroke.value),[e.backfaceStroke])}function vSe(n){return!!(n!=null&&n.geometry)}function ySe(n){return!!(n!=null&&n.isBufferGeometry)}function xSe(n){return!!(n!=null&&n.current)}function FU(n){return(n==null?void 0:n.current)!==void 0}function OU(n){return n.type==="WireframeGeometry"}function _Se(){const n={};for(const e in Fu.uniforms)n[e]={value:Fu.uniforms[e]};return n}function ESe(n,e){const i=n.getAttribute("position").count,r=[];for(let s=0;s<i;s++){const o=s%2===0,a=e?1:0;o?r.push(0,0,1,0,1,0,1,0,a):r.push(0,1,0,0,0,1,1,0,a)}return new zt(Float32Array.from(r),3)}function PY(n){const e=xSe(n)?n.current:n;if(ySe(e))return e;{if(OU(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const t=e.parent;if(vSe(t)){if(OU(t.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return t.geometry}}}function RY(n,e){if(n.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const i=n.toNonIndexed();n.copy(i),n.setIndex(null)}const t=ESe(n,e);n.setAttribute("barycentric",t)}function wSe({geometry:n,simplify:e=!1,...t}){si({MeshWireframeMaterial:mSe});const[i,r]=w.useState(null);w.useLayoutEffect(()=>{const o=PY(n);if(!o)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");RY(o,e),FU(n)&&r(o)},[e,n]);const s=FU(n)?i:n;return w.createElement(w.Fragment,null,s&&w.createElement("mesh",{geometry:s},w.createElement("meshWireframeMaterial",Ye({attach:"material",transparent:!0,side:Vn,polygonOffset:!0,polygonOffsetFactor:-4},t,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function SSe({simplify:n=!1,...e}){const t=w.useRef(null),i=w.useMemo(()=>_Se(),[Fu.uniforms]);return ASe(i,e),w.useLayoutEffect(()=>{const r=PY(t);if(!r)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=r.clone();return RY(r,n),()=>{r.copy(s),s.dispose()}},[n]),w.useLayoutEffect(()=>{const r=t.current.parent,s=r.material.clone();return gSe(r.material,i),()=>{r.material.dispose(),r.material=s}},[]),w.createElement("object3D",{ref:t})}function CSe({geometry:n,...e}){return n?w.createElement(wSe,Ye({geometry:n},e)):w.createElement(SSe,e)}function MSe({opacity:n,alphaMap:e}){const t=w.useRef(null),i=w.useRef(null),r=w.useRef({value:1}),s=w.useRef({value:null}),o=w.useRef({value:!1});return w.useLayoutEffect(()=>{t.current.onBeforeCompile=i.current.onBeforeCompile=a=>{const l=a.fragmentShader.indexOf("void main");let c="",u,h=l;for(;u!==`
`&&h<l+100;)u=a.fragmentShader.charAt(h),c+=u,h++;c=c.trim(),a.vertexShader=a.vertexShader.replace("void main() {",`
        varying vec2 custom_vUv;

        void main() {
          custom_vUv = uv;
          
        `),a.fragmentShader=a.fragmentShader.replace(c,`
          uniform float uShadowOpacity;
          uniform sampler2D uAlphaMap;
          uniform bool uHasAlphaMap;

          varying vec2 custom_vUv;
  
          float bayerDither2x2( vec2 v ) {
            return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );
          }
    
          float bayerDither4x4( vec2 v ) {
            vec2 P1 = mod( v, 2.0 );
            vec2 P2 = mod( floor( 0.5  * v ), 2.0 );
            return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );
          }
  
          void main() {
            float alpha = 
              uHasAlphaMap ? 
                uShadowOpacity * texture2D(uAlphaMap, custom_vUv).x
              : uShadowOpacity;

            if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= alpha ) discard;
            
          `),a.uniforms.uShadowOpacity=r.current,a.uniforms.uAlphaMap=s.current,a.uniforms.uHasAlphaMap=o.current}},[]),yt(()=>{var a;const l=(a=t.current.__r3f)==null?void 0:a.parent;if(l){const c=l.material;c&&(r.current.value=n??c.opacity,e===!1?(s.current.value=null,o.current.value=!1):(s.current.value=e||c.alphaMap,o.current.value=!!s.current.value))}}),w.createElement(w.Fragment,null,w.createElement("meshDepthMaterial",{ref:t,attach:"customDepthMaterial",depthPacking:z3}),w.createElement("meshDistanceMaterial",{ref:i,attach:"customDistanceMaterial"}))}const UU=new Oe,eM=new ha,zU=new vi,bSe=new D;class DY extends Gs{constructor(){super(),this.size=0,this.color=new We("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){var i,r;const s=this.instance.current;if(!s||!s.geometry)return;const o=s.userData.instances.indexOf(this.instanceKey);if(o===-1||o>s.geometry.drawRange.count)return;const a=(i=(r=e.params.Points)==null?void 0:r.threshold)!==null&&i!==void 0?i:1;if(zU.set(this.getWorldPosition(bSe),a),e.ray.intersectsSphere(zU)===!1)return;UU.copy(s.matrixWorld).invert(),eM.copy(e.ray).applyMatrix4(UU);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=eM.distanceSqToPoint(this.position);if(u<c){const h=new D;eM.closestPointToPoint(this.position,h),h.applyMatrix4(this.matrixWorld);const f=e.ray.origin.distanceTo(h);if(f<e.near||f>e.far)return;t.push({distance:f,distanceToRay:Math.sqrt(u),point:h,index:o,face:null,object:this})}}}let Nh,D1;const LY=w.createContext(null),kU=new Oe,NU=new D,TSe=w.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=w.useRef(null);w.useImperativeHandle(r,()=>s.current,[]);const[o,a]=w.useState([]),[[l,c,u]]=w.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);w.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),yt(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),kU.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),Nh=0;Nh<o.length;Nh++)D1=o[Nh].current,D1.getWorldPosition(NU).applyMatrix4(kU),NU.toArray(l,Nh*3),s.current.geometry.attributes.position.needsUpdate=!0,D1.matrixWorldNeedsUpdate=!0,D1.color.toArray(c,Nh*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([D1.size],Nh),s.current.geometry.attributes.size.needsUpdate=!0});const h=w.useMemo(()=>({getParent:()=>s,subscribe:f=>(a(d=>[...d,f]),()=>a(d=>d.filter(m=>m.current!==f.current)))}),[]);return w.createElement("points",Ye({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),w.createElement("bufferGeometry",null,w.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:os}),w.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:os}),w.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:os})),w.createElement(LY.Provider,{value:h},n))}),ISe=w.forwardRef(({children:n,...e},t)=>{w.useMemo(()=>si({PositionPoint:DY}),[]);const i=w.useRef(null);w.useImperativeHandle(t,()=>i.current,[]);const{subscribe:r,getParent:s}=w.useContext(LY);return w.useLayoutEffect(()=>r(i),[]),w.createElement("positionPoint",Ye({instance:s(),instanceKey:i,ref:i},e),n)}),FY=w.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=w.useRef(null);return w.useImperativeHandle(o,()=>a.current,[]),yt(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),w.createElement("points",Ye({ref:a},s),w.createElement("bufferGeometry",null,w.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:os}),t&&w.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:os}),i&&w.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:os})),n)}),BSe=w.forwardRef((n,e)=>n.positions instanceof Float32Array?w.createElement(FY,Ye({},n,{ref:e})):w.createElement(TSe,Ye({},n,{ref:e}))),OY=w.createContext(null),PSe=w.forwardRef((n,e)=>{w.useMemo(()=>si({SegmentObject:UY}),[]);const{limit:t=1e3,lineWidth:i=1,children:r,...s}=n,[o,a]=w.useState([]),[l]=w.useState(()=>new nX),[c]=w.useState(()=>new QE),[u]=w.useState(()=>new HE),[h]=w.useState(()=>new Ee(512,512)),[f]=w.useState(()=>Array(t*6).fill(0)),[d]=w.useState(()=>Array(t*6).fill(0)),m=w.useMemo(()=>({subscribe:A=>(a(y=>[...y,A]),()=>a(y=>y.filter(p=>p.current!==A.current)))}),[]);return yt(()=>{for(let y=0;y<t;y++){var A;const p=(A=o[y])==null?void 0:A.current;p&&(f[y*6+0]=p.start.x,f[y*6+1]=p.start.y,f[y*6+2]=p.start.z,f[y*6+3]=p.end.x,f[y*6+4]=p.end.y,f[y*6+5]=p.end.z,d[y*6+0]=p.color.r,d[y*6+1]=p.color.g,d[y*6+2]=p.color.b,d[y*6+3]=p.color.r,d[y*6+4]=p.color.g,d[y*6+5]=p.color.b)}u.setColors(d),u.setPositions(f),l.computeLineDistances()}),w.createElement("primitive",{object:l,ref:e},w.createElement("primitive",{object:u,attach:"geometry"}),w.createElement("primitive",Ye({object:c,attach:"material",vertexColors:!0,resolution:h,linewidth:i},s)),w.createElement(OY.Provider,{value:m},r))});class UY{constructor(){this.color=new We("white"),this.start=new D(0,0,0),this.end=new D(0,0,0)}}const GU=n=>n instanceof D?n:new D(...typeof n=="number"?[n,n,n]:n),RSe=w.forwardRef(({color:n,start:e,end:t},i)=>{const r=w.useContext(OY);if(!r)throw"Segment must used inside Segments component.";const s=w.useRef(null);return w.useImperativeHandle(i,()=>s.current,[]),w.useLayoutEffect(()=>r.subscribe(s),[]),w.createElement("segmentObject",{ref:s,color:n,start:GU(e),end:GU(t)})}),DSe=w.forwardRef(({children:n,hysteresis:e=0,distances:t,...i},r)=>{const s=w.useRef(null);return w.useImperativeHandle(r,()=>s.current,[]),w.useLayoutEffect(()=>{const{current:o}=s;o.levels.length=0,o.children.forEach((a,l)=>o.levels.push({object:a,hysteresis:e,distance:t[l]}))}),yt(o=>{var a;return(a=s.current)==null?void 0:a.update(o.camera)}),w.createElement("lOD",Ye({ref:s},i),n)});function LSe({all:n,scene:e,camera:t}){const i=Se(({gl:o})=>o),r=Se(({camera:o})=>o),s=Se(({scene:o})=>o);return w.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new km(128);new G3(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function FSe(){const n=Se(e=>e.gl);return w.useEffect(()=>(n.shadowMap.autoUpdate=!1,n.shadowMap.needsUpdate=!0,()=>{n.shadowMap.autoUpdate=n.shadowMap.needsUpdate=!0}),[n.shadowMap]),null}const HU=new Oe,QU=new ha,tM=new vi,nM=new D;function OSe(n,e){const t=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(t.boundingSphere===null&&t.computeBoundingSphere(),tM.copy(t.boundingSphere),tM.applyMatrix4(r),n.ray.intersectsSphere(tM)!==!1&&(HU.copy(r).invert(),QU.copy(n.ray).applyMatrix4(HU),!(t.boundingBox!==null&&QU.intersectBox(t.boundingBox,nM)===null)&&e.push({distance:nM.distanceTo(n.ray.origin),point:nM.clone(),object:this})))}function USe({pixelated:n}){const e=Se(o=>o.gl),t=Se(o=>o.internal.active),i=Se(o=>o.performance.current),r=Se(o=>o.viewport.initialDpr),s=Se(o=>o.setDpr);return w.useEffect(()=>{const o=e.domElement;return()=>{t&&s(r),n&&o&&(o.style.imageRendering="auto")}},[]),w.useEffect(()=>{s(i*r),n&&e.domElement&&(e.domElement.style.imageRendering=i===1?"auto":"pixelated")},[i]),null}function zSe(){const n=Se(i=>i.get),e=Se(i=>i.setEvents),t=Se(i=>i.performance.current);return w.useEffect(()=>{const i=n().events.enabled;return()=>e({enabled:i})},[]),w.useEffect(()=>e({enabled:t===1}),[t]),null}const zY=w.createContext(null);function kSe({iterations:n=10,ms:e=250,threshold:t=.75,step:i=.1,factor:r=.5,flipflops:s=1/0,bounds:o=f=>f>100?[60,100]:[40,60],onIncline:a,onDecline:l,onChange:c,onFallback:u,children:h}){const f=Math.pow(10,0),[d,m]=w.useState(()=>({fps:0,index:0,factor:r,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:y=>{const p=Symbol();return d.subscriptions.set(p,y.current),()=>void d.subscriptions.delete(p)}}));let A=0;return yt(()=>{const{frames:y,averages:p}=d;if(!d.fallback&&p.length<n){y.push(performance.now());const g=y[y.length-1]-y[0];if(g>=e){if(d.fps=Math.round(y.length/g*1e3*f)/f,d.refreshrate=Math.max(d.refreshrate,d.fps),p[d.index++%n]=d.fps,p.length===n){const[v,E]=o(d.refreshrate),S=p.filter(M=>M>=E),C=p.filter(M=>M<v);S.length>n*t&&(d.factor=Math.min(1,d.factor+i),d.flipped++,a&&a(d),d.subscriptions.forEach(M=>M.onIncline&&M.onIncline(d))),C.length>n*t&&(d.factor=Math.max(0,d.factor-i),d.flipped++,l&&l(d),d.subscriptions.forEach(M=>M.onDecline&&M.onDecline(d))),A!==d.factor&&(A=d.factor,c&&c(d),d.subscriptions.forEach(M=>M.onChange&&M.onChange(d))),d.flipped>s&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(M=>M.onFallback&&M.onFallback(d))),d.averages=[]}d.frames=[]}}}),w.createElement(zY.Provider,{value:d},h)}function NSe({onIncline:n,onDecline:e,onChange:t,onFallback:i}){const r=w.useContext(zY),s=w.useRef({onIncline:n,onDecline:e,onChange:t,onFallback:i});w.useLayoutEffect(()=>{s.current.onIncline=n,s.current.onDecline=e,s.current.onChange=t,s.current.onFallback=i},[n,e,t,i]),w.useLayoutEffect(()=>r.subscribe(s),[r])}const kY=w.forwardRef(({children:n,compute:e,width:t,height:i,samples:r=8,renderPriority:s=0,eventPriority:o=0,frames:a=1/0,stencilBuffer:l=!1,depthBuffer:c=!0,generateMipmaps:u=!1,...h},f)=>{const{size:d,viewport:m}=Se(),A=Es((t||d.width)*m.dpr,(i||d.height)*m.dpr,{samples:r,stencilBuffer:l,depthBuffer:c,generateMipmaps:u}),[y]=w.useState(()=>new xo),p=w.useCallback((g,v,E)=>{var S,C;let M=(S=A.texture)==null?void 0:S.__r3f.parent;for(;M&&!(M instanceof kt);)M=M.__r3f.parent;if(!M)return!1;E.raycaster.camera||E.events.compute(g,E,(C=E.previousRoot)==null?void 0:C.getState());const[b]=E.raycaster.intersectObject(M);if(!b)return!1;const T=b.uv;if(!T)return!1;v.raycaster.setFromCamera(v.pointer.set(T.x*2-1,T.y*2-1),v.camera)},[]);return w.useImperativeHandle(f,()=>A.texture,[A]),w.createElement(w.Fragment,null,Bc(w.createElement(GSe,{renderPriority:s,frames:a,fbo:A},n,w.createElement("group",{onPointerOver:()=>null})),y,{events:{compute:e||p,priority:o}}),w.createElement("primitive",Ye({object:A.texture},h)))});function GSe({frames:n,renderPriority:e,children:t,fbo:i}){let r=0,s,o,a,l;return yt(c=>{(n===1/0||r<n)&&(s=c.gl.autoClear,o=c.gl.xr.enabled,a=c.gl.getRenderTarget(),l=c.gl.xr.isPresenting,c.gl.autoClear=!0,c.gl.xr.enabled=!1,c.gl.xr.isPresenting=!1,c.gl.setRenderTarget(i),c.gl.render(c.scene,c.camera),c.gl.setRenderTarget(a),c.gl.autoClear=s,c.gl.xr.enabled=o,c.gl.xr.isPresenting=l,r++)},e),w.createElement(w.Fragment,null,t)}const NY=w.forwardRef(({children:n,compute:e,renderPriority:t=-1,eventPriority:i=0,frames:r=1/0,stencilBuffer:s=!1,depthBuffer:o=!0,generateMipmaps:a=!1,resolution:l=896,near:c=.1,far:u=1e3,flip:h=!1,position:f,rotation:d,scale:m,quaternion:A,matrix:y,matrixAutoUpdate:p,...g},v)=>{const{size:E,viewport:S}=Se(),C=w.useRef(null),M=w.useMemo(()=>{const T=new km(Math.max((l||E.width)*S.dpr,(l||E.height)*S.dpr),{stencilBuffer:s,depthBuffer:o,generateMipmaps:a});return T.texture.isRenderTargetTexture=!h,T.texture.flipY=!0,T.texture.type=Ln,T},[l,h]);w.useEffect(()=>()=>M.dispose(),[M]);const[b]=w.useState(()=>new xo);return w.useImperativeHandle(v,()=>({scene:b,fbo:M,camera:C.current}),[M]),w.createElement(w.Fragment,null,Bc(w.createElement(HSe,{renderPriority:t,frames:r,camera:C},n,w.createElement("group",{onPointerOver:()=>null})),b,{events:{compute:e,priority:i}}),w.createElement("primitive",Ye({object:M.texture},g)),w.createElement("cubeCamera",{ref:C,args:[c,u,M],position:f,rotation:d,scale:m,quaternion:A,matrix:y,matrixAutoUpdate:p}))});function HSe({frames:n,renderPriority:e,children:t,camera:i}){let r=0;return yt(s=>{(n===1/0||r<n)&&(i.current.update(s.gl,s.scene),r++)},e),w.createElement(w.Fragment,null,t)}const QSe=w.forwardRef(({id:n=1,colorWrite:e=!1,depthWrite:t=!1,...i},r)=>{const s=w.useRef(null),o=w.useMemo(()=>({colorWrite:e,depthWrite:t,stencilWrite:!0,stencilRef:n,stencilFunc:KI,stencilFail:Fx,stencilZFail:Fx,stencilZPass:Fx}),[n,e,t]);return w.useLayoutEffect(()=>{Object.assign(s.current.material,o)}),w.useImperativeHandle(r,()=>s.current,[]),w.createElement("mesh",Ye({ref:s,renderOrder:-n},i))});function VSe(n,e=!1){return{stencilWrite:!0,stencilRef:n,stencilFunc:e?WH:VH,stencilFail:hf,stencilZFail:hf,stencilZPass:hf}}function WSe({renderPriority:n=1,zoom:e=0,segments:t=64,children:i,resolution:r=896,...s}){const o=w.useRef(null),a=w.useRef(null),{width:l,height:c}=Se(y=>y.size),[u]=w.useState(()=>new Qn);w.useLayoutEffect(()=>{u.position.set(0,0,100),u.zoom=100,u.left=l/-2,u.right=l/2,u.top=c/2,u.bottom=c/-2,u.updateProjectionMatrix()},[l,c]);const h=Math.sqrt(l*l+c*c)/100*(.5+e/2),f=new D,d=new vi(new D,h),m=new Wt,A=w.useCallback((y,p,g)=>{if(p.pointer.set(y.offsetX/p.size.width*2-1,-(y.offsetY/p.size.height)*2+1),p.raycaster.setFromCamera(p.pointer,u),p.raycaster.ray.intersectSphere(d,f))f.normalize();else return;m.getNormalMatrix(a.current.camera.matrixWorld),a.current.camera.getWorldPosition(p.raycaster.ray.origin),p.raycaster.ray.direction.set(0,0,1).reflect(f),p.raycaster.ray.direction.x*=-1,p.raycaster.ray.direction.applyNormalMatrix(m).multiplyScalar(-1)},[]);return yt(y=>{n&&y.gl.render(o.current,u)},n),w.createElement(w.Fragment,null,w.createElement("mesh",Ye({ref:o},s,{scale:h}),w.createElement("sphereGeometry",{args:[1,t,t]}),w.createElement("meshBasicMaterial",null,w.createElement(NY,{compute:A,attach:"envMap",flip:!0,resolution:r,ref:a},i,w.createElement(jSe,{api:a})))))}function jSe({api:n}){const e=new D,t=new St,i=new D,r=new Rr(0,Math.PI,0);return yt(s=>{s.camera.matrixWorld.decompose(e,t,i),n.current.camera.position.copy(e),n.current.camera.quaternion.setFromEuler(r).premultiply(t)}),null}const XSe=wo({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new Ee},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),YSe=w.forwardRef(({children:n,events:e=void 0,blur:t=0,eventPriority:i=0,renderPriority:r=0,worldUnits:s=!1,resolution:o=512,...a},l)=>{si({PortalMaterialImpl:XSe});const c=w.useRef(null),{scene:u,gl:h,size:f,viewport:d,setEvents:m}=Se(),A=Es(o,o),[y,p]=w.useState(0);yt(()=>{const C=c.current.blend>0?Math.max(1,r):0;y!==C&&p(C)}),w.useEffect(()=>{e!==void 0&&m({enabled:!e})},[e]);const[g,v]=w.useState(!0),E=$X(v);w.useLayoutEffect(()=>{var C;E.current=(C=c.current)==null?void 0:C.__r3f.parent},[]),w.useLayoutEffect(()=>{if(E.current&&t&&c.current.sdf===null){const C=new ct(E.current.geometry,new mr),M=new Bn().setFromBufferAttribute(C.geometry.attributes.position),b=new Qn(M.min.x*(1+2/o),M.max.x*(1+2/o),M.max.y*(1+2/o),M.min.y*(1+2/o),.1,1e3);b.position.set(0,0,1),b.lookAt(0,0,0),h.setRenderTarget(A),h.render(C,b);const I=KSe(o,o,h)(A.texture),F=new Float32Array(o*o);h.readRenderTargetPixels(I,0,0,o,o,F);let R=1/0;for(let z=0;z<F.length;z++)F[z]<R&&(R=F[z]);R=-R,c.current.size=R,c.current.sdf=I.texture,h.setRenderTarget(null)}},[o,t]),w.useImperativeHandle(l,()=>c.current);const S=w.useCallback((C,M,b)=>{var T;if(!E.current)return!1;if(M.pointer.set(C.offsetX/M.size.width*2-1,-(C.offsetY/M.size.height)*2+1),M.raycaster.setFromCamera(M.pointer,M.camera),((T=c.current)==null?void 0:T.blend)===0){const[I]=M.raycaster.intersectObject(E.current);if(!I)return M.raycaster.camera=void 0,!1}},[]);return w.createElement("portalMaterialImpl",Ye({ref:c,blur:t,blend:0,resolution:[f.width*d.dpr,f.height*d.dpr],attach:"material"},a),w.createElement(kY,{attach:"map",frames:g?1/0:0,eventPriority:i,renderPriority:r,compute:S},n,w.createElement(qSe,{events:e,rootScene:u,priority:y,material:c,worldUnits:s})))});function qSe({events:n=void 0,rootScene:e,material:t,priority:i,worldUnits:r}){const s=Se(h=>h.scene),o=Se(h=>h.setEvents),a=Es(),l=Es();w.useLayoutEffect(()=>{s.matrixAutoUpdate=!1},[]),w.useEffect(()=>{n!==void 0&&o({enabled:n})},[n]);const[c,u]=w.useMemo(()=>{const h={value:0};return[new lc(new Fn({uniforms:{a:{value:a.texture},b:{value:l.texture},blend:h},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <tonemapping_fragment>
            #include <${Ts>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),h]},[]);return yt(h=>{var f;let d=t==null||(f=t.current)==null?void 0:f.__r3f.parent;if(d){if(r)s.matrixWorld.identity();else{var m;i&&((m=t.current)==null?void 0:m.blend)===1&&d.updateWorldMatrix(!0,!1),s.matrixWorld.copy(d.matrixWorld)}if(i){var A,y,p;((A=t.current)==null?void 0:A.blend)>0&&((y=t.current)==null?void 0:y.blend)<1?(u.value=t.current.blend,h.gl.setRenderTarget(a),h.gl.render(s,h.camera),h.gl.setRenderTarget(l),h.gl.render(e,h.camera),h.gl.setRenderTarget(null),c.render(h.gl)):((p=t.current)==null?void 0:p.blend)===1&&h.gl.render(s,h.camera)}}},i),w.createElement(w.Fragment,null)}const KSe=(n,e,t)=>{let i=new Rn(n,e,{minFilter:yo,magFilter:Ut,type:En,format:ea,generateMipmaps:!0}),r=new Rn(n,e,{minFilter:rn,magFilter:rn}),s=new Rn(n,e,{minFilter:rn,magFilter:rn}),o=new Rn(n,e,{minFilter:rn,magFilter:rn}),a=new Rn(n,e,{minFilter:rn,magFilter:rn}),l=new Rn(n,e,{minFilter:rn,magFilter:rn,type:En,format:ea}),c=new Rn(n,e,{minFilter:rn,magFilter:rn,type:En,format:ea});const u=new lc(new Fn({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),h=new lc(new Fn({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),f=new lc(new Fn({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/n}, ${1/e}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),d=new lc(new Fn({uniforms:{tex:{value:null},size:{value:new Ee(n,e)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),m=new lc(new Fn({uniforms:{inside:{value:c.texture},outside:{value:l.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return A=>{let y=i;A.minFilter=rn,A.magFilter=rn,u.material.uniforms.tex.value=A,t.setRenderTarget(r),u.render(t);const p=Math.ceil(Math.log(Math.max(n,e))/Math.log(2));let g=r,v=null;for(let E=0;E<p;E++){const S=Math.pow(2,p-E-1);v=g===r?o:r,f.material.uniforms.level.value=E,f.material.uniforms.maxSteps.value=p,f.material.uniforms.offset.value=S,f.material.uniforms.tex.value=g.texture,t.setRenderTarget(v),f.render(t),g=v}t.setRenderTarget(l),d.material.uniforms.tex.value=v.texture,d.render(t),h.material.uniforms.tex.value=A,t.setRenderTarget(s),h.render(t),g=s;for(let E=0;E<p;E++){const S=Math.pow(2,p-E-1);v=g===s?a:s,f.material.uniforms.level.value=E,f.material.uniforms.maxSteps.value=p,f.material.uniforms.offset.value=S,f.material.uniforms.tex.value=g.texture,t.setRenderTarget(v),f.render(t),g=v}return t.setRenderTarget(c),d.material.uniforms.tex.value=v.texture,d.render(t),t.setRenderTarget(y),m.material.uniforms.tex.value=A,m.render(t),t.setRenderTarget(null),y}};var JSe={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const VU=n=>{let e;const t=new Set,i=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const d=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(m=>m(e,d))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{(JSe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=n(i,r,l);return l},ZSe=n=>n?VU(n):VU;var GY={exports:{}},HY={},QY={exports:{}},VY={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=w;function $Se(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var eCe=typeof Object.is=="function"?Object.is:$Se,tCe=Rm.useState,nCe=Rm.useEffect,iCe=Rm.useLayoutEffect,rCe=Rm.useDebugValue;function sCe(n,e){var t=e(),i=tCe({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return iCe(function(){r.value=t,r.getSnapshot=e,iM(r)&&s({inst:r})},[n,t,e]),nCe(function(){return iM(r)&&s({inst:r}),n(function(){iM(r)&&s({inst:r})})},[n]),rCe(t),t}function iM(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!eCe(n,t)}catch{return!0}}function oCe(n,e){return e()}var aCe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oCe:sCe;VY.useSyncExternalStore=Rm.useSyncExternalStore!==void 0?Rm.useSyncExternalStore:aCe;QY.exports=VY;var lCe=QY.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw=w,cCe=lCe;function uCe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var hCe=typeof Object.is=="function"?Object.is:uCe,fCe=cCe.useSyncExternalStore,dCe=nw.useRef,pCe=nw.useEffect,mCe=nw.useMemo,gCe=nw.useDebugValue;HY.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=dCe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=mCe(function(){function l(d){if(!c){if(c=!0,u=d,d=i(d),r!==void 0&&o.hasValue){var m=o.value;if(r(m,d))return h=m}return h=d}if(m=h,hCe(u,d))return m;var A=i(d);return r!==void 0&&r(m,A)?m:(u=d,h=A)}var c=!1,u,h,f=t===void 0?null:t;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,t,i,r]);var a=fCe(n,s[0],s[1]);return pCe(function(){o.hasValue=!0,o.value=a},[a]),gCe(a),a};GY.exports=HY;var ACe=GY.exports;const vCe=Dm(ACe);var WY={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:yCe}=xl,{useSyncExternalStoreWithSelector:xCe}=vCe;let WU=!1;const _Ce=n=>n;function ECe(n,e=_Ce,t){(WY?"production":void 0)!=="production"&&t&&!WU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),WU=!0);const i=xCe(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return yCe(i),i}const jU=n=>{(WY?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?ZSe(n):n,t=(i,r)=>ECe(e,i,r);return Object.assign(t,e),t},wCe=n=>n?jU(n):jU;var XU,YU;const qU=typeof window<"u"&&((XU=window.document)!=null&&XU.createElement||((YU=window.navigator)==null?void 0:YU.product)==="ReactNative")?xl.useLayoutEffect:xl.useEffect;function SCe(){const n=wCe(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const t=n(r=>r.set),i=n(r=>r.version);return qU(()=>{t(r=>({version:r.version+1}))},[]),qU(()=>(t(({current:r})=>({current:[...r,e]})),()=>t(({current:r})=>({current:r.filter(s=>s!==e)}))),[e,i]),null},Out:()=>{const e=n(t=>t.current);return xl.createElement(xl.Fragment,null,e)}}}const CCe=n=>n&&n.isOrthographicCamera,KU=new We,jY=SCe();function XY(n){return"top"in n}function rM(n,e){const{right:t,top:i,left:r,bottom:s,width:o,height:a}=e,l=e.bottom<0||i>n.height||t<0||e.left>n.width;if(XY(n)){const h=n.top+n.height-s,f=r-n.left;return{position:{width:o,height:a,left:f,top:i,bottom:h,right:t},isOffscreen:l}}const c=n.height-s;return{position:{width:o,height:a,top:i,left:r,bottom:c,right:t},isOffscreen:l}}function sM(n,{left:e,bottom:t,width:i,height:r}){let s;const o=i/r;return CCe(n.camera)?(n.camera.left!==i/-2||n.camera.right!==i/2||n.camera.top!==r/2||n.camera.bottom!==r/-2)&&(Object.assign(n.camera,{left:i/-2,right:i/2,top:r/2,bottom:r/-2}),n.camera.updateProjectionMatrix()):n.camera.aspect!==o&&(n.camera.aspect=o,n.camera.updateProjectionMatrix()),s=n.gl.autoClear,n.gl.autoClear=!1,n.gl.setViewport(e,t,i,r),n.gl.setScissor(e,t,i,r),n.gl.setScissorTest(!0),s}function oM(n,e){n.gl.setScissorTest(!1),n.gl.autoClear=e}function JU(n){n.gl.getClearColor(KU),n.gl.setClearColor(KU,n.gl.getClearAlpha()),n.gl.clear(!0,!0)}function MCe({visible:n=!0,canvasSize:e,scene:t,index:i,children:r,frames:s,rect:o,track:a}){const l=Se(),[c,u]=w.useState(!1);let h=0;return yt(f=>{if(s===1/0||h<=s){var d;a&&(o.current=(d=a.current)==null?void 0:d.getBoundingClientRect()),h++}if(o.current){const{position:m,isOffscreen:A}=rM(e,o.current);if(c!==A&&u(A),n&&!c&&o.current){const y=sM(f,m);f.gl.render(r?f.scene:t,f.camera),oM(f,y)}}},i),w.useLayoutEffect(()=>{const f=o.current;if(f&&(!n||!c)){const{position:d}=rM(e,f),m=sM(l,d);JU(l),oM(l,m)}},[n,c]),w.useEffect(()=>{if(!a)return;const f=o.current,d=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(f){const{position:m}=rM(e,f),A=sM(l,m);JU(l),oM(l,A)}l.setEvents({connected:d})}},[a]),w.useEffect(()=>{XY(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),w.createElement(w.Fragment,null,r,w.createElement("group",{onPointerOver:()=>null}))}const YY=w.forwardRef(({track:n,visible:e=!0,index:t=1,id:i,style:r,className:s,frames:o=1/0,children:a,...l},c)=>{var u,h,f,d;const m=w.useRef(null),{size:A,scene:y}=Se(),[p]=w.useState(()=>new xo),[g,v]=w.useReducer(()=>!0,!1),E=w.useCallback((S,C)=>{if(m.current&&n&&n.current&&S.target===n.current){const{width:M,height:b,left:T,top:I}=m.current,F=S.clientX-T,R=S.clientY-I;C.pointer.set(F/M*2-1,-(R/b)*2+1),C.raycaster.setFromCamera(C.pointer,C.camera)}},[m,n]);return w.useEffect(()=>{var S;n&&(m.current=(S=n.current)==null?void 0:S.getBoundingClientRect()),v()},[n]),w.createElement("group",Ye({ref:c},l),g&&Bc(w.createElement(MCe,{visible:e,canvasSize:A,frames:o,scene:y,track:n,rect:m,index:t},a),p,{events:{compute:E,priority:t},size:{width:(u=m.current)==null?void 0:u.width,height:(h=m.current)==null?void 0:h.height,top:(f=m.current)==null?void 0:f.top,left:(d=m.current)==null?void 0:d.left}}))}),bCe=w.forwardRef(({as:n="div",id:e,visible:t,className:i,style:r,index:s=1,track:o,frames:a=1/0,children:l,...c},u)=>{const h=w.useId(),f=w.useRef(null);return w.useImperativeHandle(u,()=>f.current),w.createElement(w.Fragment,null,w.createElement(n,Ye({ref:f,id:e,className:i,style:r},c)),w.createElement(jY.In,null,w.createElement(YY,{visible:t,key:h,track:f,frames:a,index:s},l)))}),qY=w.forwardRef((n,e)=>w.useContext(Tf)?w.createElement(YY,Ye({ref:e},n)):w.createElement(bCe,Ye({ref:e},n)));qY.Port=()=>w.createElement(jY.Out,null);const cv=w.createContext(null),hx=new D,ZU=new D,TCe=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(i);return o===0?-s/r:(hx.copy(i).multiplyScalar(r/o).sub(e),ZU.copy(i).multiplyScalar(s/o).add(t).sub(n),-hx.dot(ZU)/hx.dot(hx))},ICe=new D(0,1,0),$U=new Oe,aM=({direction:n,axis:e})=>{const{translation:t,translationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:h,opacity:f,onDragStart:d,onDrag:m,onDragEnd:A,userData:y}=w.useContext(cv),p=Se(J=>J.controls),g=w.useRef(null),v=w.useRef(null),E=w.useRef(null),S=w.useRef(0),[C,M]=w.useState(!1),b=w.useCallback(J=>{r&&(g.current.innerText=`${t.current[e].toFixed(2)}`,g.current.style.display="block"),J.stopPropagation();const O=new Oe().extractRotation(v.current.matrixWorld),W=J.point.clone(),V=new D().setFromMatrixPosition(v.current.matrixWorld),U=n.clone().applyMatrix4(O).normalize();E.current={clickPoint:W,dir:U},S.current=t.current[e],d({component:"Arrow",axis:e,origin:V,directions:[U]}),p&&(p.enabled=!1),J.target.setPointerCapture(J.pointerId)},[r,n,p,d,t,e]),T=w.useCallback(J=>{if(J.stopPropagation(),C||M(!0),E.current){const{clickPoint:O,dir:W}=E.current,[V,U]=(i==null?void 0:i[e])||[void 0,void 0];let Y=TCe(O,W,J.ray.origin,J.ray.direction);V!==void 0&&(Y=Math.max(Y,V-S.current)),U!==void 0&&(Y=Math.min(Y,U-S.current)),t.current[e]=S.current+Y,r&&(g.current.innerText=`${t.current[e].toFixed(2)}`),$U.makeTranslation(W.x*Y,W.y*Y,W.z*Y),m($U)}},[r,m,C,t,i,e]),I=w.useCallback(J=>{r&&(g.current.style.display="none"),J.stopPropagation(),E.current=null,A(),p&&(p.enabled=!0),J.target.releasePointerCapture(J.pointerId)},[r,p,A]),F=w.useCallback(J=>{J.stopPropagation(),M(!1)},[]),{cylinderLength:R,coneWidth:z,coneLength:L,matrixL:H}=w.useMemo(()=>{const J=c?l/a*1.6:a/20,O=c?.2:a/5,W=c?1-O:a-O,V=new St().setFromUnitVectors(ICe,n.clone().normalize()),U=new Oe().makeRotationFromQuaternion(V);return{cylinderLength:W,coneWidth:J,coneLength:O,matrixL:U}},[n,a,l,c]),K=C?h:u[e];return w.createElement("group",{ref:v},w.createElement("group",{matrix:H,matrixAutoUpdate:!1,onPointerDown:b,onPointerMove:T,onPointerUp:I,onPointerOut:F},r&&w.createElement(tv,{position:[0,-L,0]},w.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:g})),w.createElement("mesh",{visible:!1,position:[0,(R+L)/2,0],userData:y},w.createElement("cylinderGeometry",{args:[z*1.4,z*1.4,R+L,8,1]})),w.createElement(Va,{transparent:!0,raycast:()=>null,depthTest:o,points:[0,0,0,0,R,0],lineWidth:l,side:Vn,color:K,opacity:f,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),w.createElement("mesh",{raycast:()=>null,position:[0,R+L/2,0],renderOrder:500},w.createElement("coneGeometry",{args:[z,L,24,1]}),w.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:K,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},lM=new D,cM=new D,uM=n=>n*180/Math.PI,BCe=n=>n*Math.PI/180,PCe=(n,e,t,i,r)=>{lM.copy(n).sub(t),cM.copy(e).sub(t);const s=i.dot(i),o=r.dot(r),a=lM.dot(i)/s,l=lM.dot(r)/o,c=cM.dot(i)/s,u=cM.dot(r)/o,h=Math.atan2(l,a);return Math.atan2(u,c)-h},RCe=(n,e)=>{let t=Math.floor(n/e);return t=t<0?t+1:t,n-t*e},ez=n=>{let e=RCe(n,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},fx=new Oe,tz=new D,dx=new ha,hM=new D,fM=({dir1:n,dir2:e,axis:t})=>{const{rotationLimits:i,annotations:r,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:h,opacity:f,onDragStart:d,onDrag:m,onDragEnd:A,userData:y}=w.useContext(cv),p=Se(K=>K.controls),g=w.useRef(null),v=w.useRef(null),E=w.useRef(0),S=w.useRef(0),C=w.useRef(null),[M,b]=w.useState(!1),T=w.useCallback(K=>{r&&(g.current.innerText=`${uM(S.current).toFixed(0)}`,g.current.style.display="block"),K.stopPropagation();const J=K.point.clone(),O=new D().setFromMatrixPosition(v.current.matrixWorld),W=new D().setFromMatrixColumn(v.current.matrixWorld,0).normalize(),V=new D().setFromMatrixColumn(v.current.matrixWorld,1).normalize(),U=new D().setFromMatrixColumn(v.current.matrixWorld,2).normalize(),Y=new Br().setFromNormalAndCoplanarPoint(U,O);C.current={clickPoint:J,origin:O,e1:W,e2:V,normal:U,plane:Y},d({component:"Rotator",axis:t,origin:O,directions:[W,V,U]}),p&&(p.enabled=!1),K.target.setPointerCapture(K.pointerId)},[r,p,d,t]),I=w.useCallback(K=>{if(K.stopPropagation(),M||b(!0),C.current){const{clickPoint:J,origin:O,e1:W,e2:V,normal:U,plane:Y}=C.current,[$,N]=(i==null?void 0:i[t])||[void 0,void 0];dx.copy(K.ray),dx.intersectPlane(Y,hM),dx.direction.negate(),dx.intersectPlane(Y,hM);let Q=PCe(J,hM,O,W,V),j=uM(Q);K.shiftKey&&(j=Math.round(j/10)*10,Q=BCe(j)),$!==void 0&&N!==void 0&&N-$<2*Math.PI?(Q=ez(Q),Q=Q>Math.PI?Q-2*Math.PI:Q,Q=Dt.clamp(Q,$-E.current,N-E.current),S.current=E.current+Q):(S.current=ez(E.current+Q),S.current=S.current>Math.PI?S.current-2*Math.PI:S.current),r&&(j=uM(S.current),g.current.innerText=`${j.toFixed(0)}`),fx.makeRotationAxis(U,Q),tz.copy(O).applyMatrix4(fx).sub(O).negate(),fx.setPosition(tz),m(fx)}},[r,m,M,i,t]),F=w.useCallback(K=>{r&&(g.current.style.display="none"),K.stopPropagation(),E.current=S.current,C.current=null,A(),p&&(p.enabled=!0),K.target.releasePointerCapture(K.pointerId)},[r,p,A]),R=w.useCallback(K=>{K.stopPropagation(),b(!1)},[]),z=w.useMemo(()=>{const K=n.clone().normalize(),J=e.clone().normalize();return new Oe().makeBasis(K,J,K.clone().cross(J))},[n,e]),L=c?.65:a*.65,H=w.useMemo(()=>{const J=[];for(let O=0;O<=32;O++){const W=O*(Math.PI/2)/32;J.push(new D(Math.cos(W)*L,Math.sin(W)*L,0))}return J},[L]);return w.createElement("group",{ref:v,onPointerDown:T,onPointerMove:I,onPointerUp:F,onPointerOut:R,matrix:z,matrixAutoUpdate:!1},r&&w.createElement(tv,{position:[L,L,0]},w.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:g})),w.createElement(Va,{points:H,lineWidth:l*4,visible:!1,userData:y}),w.createElement(Va,{transparent:!0,raycast:()=>null,depthTest:o,points:H,lineWidth:l,side:Vn,color:M?h:u[t],opacity:f,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},DCe=(n,e,t)=>{const i=Math.abs(n.x)>=Math.abs(n.y)&&Math.abs(n.x)>=Math.abs(n.z)?0:Math.abs(n.y)>=Math.abs(n.x)&&Math.abs(n.y)>=Math.abs(n.z)?1:2,r=[0,1,2].sort((m,A)=>Math.abs(e.getComponent(A))-Math.abs(e.getComponent(m))),s=i===r[0]?r[1]:r[0],o=n.getComponent(i),a=n.getComponent(s),l=e.getComponent(i),c=e.getComponent(s),u=t.getComponent(i),f=(t.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-f*l)/o,f]},px=new ha,mx=new D,nz=new Oe,dM=({dir1:n,dir2:e,axis:t})=>{const{translation:i,translationLimits:r,annotations:s,annotationsClass:o,depthTest:a,scale:l,lineWidth:c,fixed:u,axisColors:h,hoveredColor:f,opacity:d,onDragStart:m,onDrag:A,onDragEnd:y,userData:p}=w.useContext(cv),g=Se(W=>W.controls),v=w.useRef(null),E=w.useRef(null),S=w.useRef(null),C=w.useRef(0),M=w.useRef(0),[b,T]=w.useState(!1),I=w.useCallback(W=>{s&&(v.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`,v.current.style.display="block"),W.stopPropagation();const V=W.point.clone(),U=new D().setFromMatrixPosition(E.current.matrixWorld),Y=new D().setFromMatrixColumn(E.current.matrixWorld,0).normalize(),$=new D().setFromMatrixColumn(E.current.matrixWorld,1).normalize(),N=new D().setFromMatrixColumn(E.current.matrixWorld,2).normalize(),Q=new Br().setFromNormalAndCoplanarPoint(N,U);S.current={clickPoint:V,e1:Y,e2:$,plane:Q},C.current=i.current[(t+1)%3],M.current=i.current[(t+2)%3],m({component:"Slider",axis:t,origin:U,directions:[Y,$,N]}),g&&(g.enabled=!1),W.target.setPointerCapture(W.pointerId)},[s,g,m,t]),F=w.useCallback(W=>{if(W.stopPropagation(),b||T(!0),S.current){const{clickPoint:V,e1:U,e2:Y,plane:$}=S.current,[N,Q]=(r==null?void 0:r[(t+1)%3])||[void 0,void 0],[j,X]=(r==null?void 0:r[(t+2)%3])||[void 0,void 0];px.copy(W.ray),px.intersectPlane($,mx),px.direction.negate(),px.intersectPlane($,mx),mx.sub(V);let[se,ve]=DCe(U,Y,mx);N!==void 0&&(se=Math.max(se,N-C.current)),Q!==void 0&&(se=Math.min(se,Q-C.current)),j!==void 0&&(ve=Math.max(ve,j-M.current)),X!==void 0&&(ve=Math.min(ve,X-M.current)),i.current[(t+1)%3]=C.current+se,i.current[(t+2)%3]=M.current+ve,s&&(v.current.innerText=`${i.current[(t+1)%3].toFixed(2)}, ${i.current[(t+2)%3].toFixed(2)}`),nz.makeTranslation(se*U.x+ve*Y.x,se*U.y+ve*Y.y,se*U.z+ve*Y.z),A(nz)}},[s,A,b,i,r,t]),R=w.useCallback(W=>{s&&(v.current.style.display="none"),W.stopPropagation(),S.current=null,y(),g&&(g.enabled=!0),W.target.releasePointerCapture(W.pointerId)},[s,g,y]),z=w.useCallback(W=>{W.stopPropagation(),T(!1)},[]),L=w.useMemo(()=>{const W=n.clone().normalize(),V=e.clone().normalize();return new Oe().makeBasis(W,V,W.clone().cross(V))},[n,e]),H=u?1/7:l/7,K=u?.225:l*.225,J=b?f:h[t],O=w.useMemo(()=>[new D(0,0,0),new D(0,K,0),new D(K,K,0),new D(K,0,0),new D(0,0,0)],[K]);return w.createElement("group",{ref:E,matrix:L,matrixAutoUpdate:!1},s&&w.createElement(tv,{position:[0,0,0]},w.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:v})),w.createElement("group",{position:[H*1.7,H*1.7,0]},w.createElement("mesh",{visible:!0,onPointerDown:I,onPointerMove:F,onPointerUp:R,onPointerOut:z,scale:K,userData:p},w.createElement("planeGeometry",null),w.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:J,polygonOffset:!0,polygonOffsetFactor:-10,side:Vn,fog:!1})),w.createElement(Va,{position:[-K/2,-K/2,0],transparent:!0,depthTest:a,points:O,lineWidth:c,color:J,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:p,fog:!1})))},K1=new D,iz=new D,LCe=(n,e,t,i)=>{const r=e.dot(e),s=e.dot(n)-e.dot(t),o=e.dot(i);return o===0?-s/r:(K1.copy(i).multiplyScalar(r/o).sub(e),iz.copy(i).multiplyScalar(s/o).add(t).sub(n),-K1.dot(iz)/K1.dot(K1))},FCe=new D(0,1,0),L1=new D,rz=new Oe,pM=({direction:n,axis:e})=>{const{scaleLimits:t,annotations:i,annotationsClass:r,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,opacity:h,onDragStart:f,onDrag:d,onDragEnd:m,userData:A}=w.useContext(cv),y=Se(O=>O.size),p=Se(O=>O.controls),g=w.useRef(null),v=w.useRef(null),E=w.useRef(null),S=w.useRef(1),C=w.useRef(1),M=w.useRef(null),[b,T]=w.useState(!1),I=l?1.2:1.2*o,F=w.useCallback(O=>{i&&(g.current.innerText=`${C.current.toFixed(2)}`,g.current.style.display="block"),O.stopPropagation();const W=new Oe().extractRotation(v.current.matrixWorld),V=O.point.clone(),U=new D().setFromMatrixPosition(v.current.matrixWorld),Y=n.clone().applyMatrix4(W).normalize(),$=v.current.matrixWorld.clone(),N=$.clone().invert(),Q=l?1/VE(v.current.getWorldPosition(K1),o,O.camera,y):1;M.current={clickPoint:V,dir:Y,mPLG:$,mPLGInv:N,offsetMultiplier:Q},f({component:"Sphere",axis:e,origin:U,directions:[Y]}),p&&(p.enabled=!1),O.target.setPointerCapture(O.pointerId)},[i,p,n,f,e,l,o,y]),R=w.useCallback(O=>{if(O.stopPropagation(),b||T(!0),M.current){const{clickPoint:W,dir:V,mPLG:U,mPLGInv:Y,offsetMultiplier:$}=M.current,[N,Q]=(t==null?void 0:t[e])||[1e-5,void 0],X=LCe(W,V,O.ray.origin,O.ray.direction)*$,se=l?X:X/o;let ve=Math.pow(2,se*.2);O.shiftKey&&(ve=Math.round(ve*10)/10),ve=Math.max(ve,N/S.current),Q!==void 0&&(ve=Math.min(ve,Q/S.current)),C.current=S.current*ve,E.current.position.set(0,I+X,0),i&&(g.current.innerText=`${C.current.toFixed(2)}`),L1.set(1,1,1),L1.setComponent(e,ve),rz.makeScale(L1.x,L1.y,L1.z).premultiply(U).multiply(Y),d(rz)}},[i,I,d,b,t,e]),z=w.useCallback(O=>{i&&(g.current.style.display="none"),O.stopPropagation(),S.current=C.current,M.current=null,E.current.position.set(0,I,0),m(),p&&(p.enabled=!0),O.target.releasePointerCapture(O.pointerId)},[i,p,m,I]),L=w.useCallback(O=>{O.stopPropagation(),T(!1)},[]),{radius:H,matrixL:K}=w.useMemo(()=>{const O=l?a/o*1.8:o/22.5,W=new St().setFromUnitVectors(FCe,n.clone().normalize()),V=new Oe().makeRotationFromQuaternion(W);return{radius:O,matrixL:V}},[n,o,a,l]),J=b?u:c[e];return w.createElement("group",{ref:v},w.createElement("group",{matrix:K,matrixAutoUpdate:!1,onPointerDown:F,onPointerMove:R,onPointerUp:z,onPointerOut:L},i&&w.createElement(tv,{position:[0,I/2,0]},w.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:r,ref:g})),w.createElement("mesh",{ref:E,position:[0,I,0],renderOrder:500,userData:A},w.createElement("sphereGeometry",{args:[H,12,12]}),w.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:J,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10}))))},sz=new Oe,oz=new Oe,az=new Oe,gx=new Oe,mM=new Oe,lp=new Oe,lz=new Oe,cz=new Oe,uz=new Oe,cp=new Bn,gM=new Bn,hz=new D,fz=new D,dz=new D,pz=new D,F1=new D,up=new D(1,0,0),hp=new D(0,1,0),fp=new D(0,0,1),OCe=w.forwardRef(({enabled:n=!0,matrix:e,onDragStart:t,onDrag:i,onDragEnd:r,autoTransform:s=!0,anchor:o,disableAxes:a=!1,disableSliders:l=!1,disableRotations:c=!1,disableScaling:u=!1,activeAxes:h=[!0,!0,!0],offset:f=[0,0,0],rotation:d=[0,0,0],scale:m=1,lineWidth:A=4,fixed:y=!1,translationLimits:p,rotationLimits:g,scaleLimits:v,depthTest:E=!0,axisColors:S=["#ff2060","#20df80","#2080ff"],hoveredColor:C="#ffff40",annotations:M=!1,annotationsClass:b,opacity:T=1,visible:I=!0,userData:F,children:R,...z},L)=>{const H=Se(Q=>Q.invalidate),K=w.useRef(null),J=w.useRef(null),O=w.useRef(null),W=w.useRef(null),V=w.useRef([0,0,0]),U=w.useRef(new D(1,1,1)),Y=w.useRef(new D(1,1,1));w.useLayoutEffect(()=>{o&&(W.current.updateWorldMatrix(!0,!0),gx.copy(W.current.matrixWorld).invert(),cp.makeEmpty(),W.current.traverse(Q=>{Q.geometry&&(Q.geometry.boundingBox||Q.geometry.computeBoundingBox(),lp.copy(Q.matrixWorld).premultiply(gx),gM.copy(Q.geometry.boundingBox),gM.applyMatrix4(lp),cp.union(gM))}),hz.copy(cp.max).add(cp.min).multiplyScalar(.5),fz.copy(cp.max).sub(cp.min).multiplyScalar(.5),dz.copy(fz).multiply(new D(...o)).add(hz),pz.set(...f).add(dz),O.current.position.copy(pz),H())});const $=w.useMemo(()=>({onDragStart:Q=>{sz.copy(J.current.matrix),oz.copy(J.current.matrixWorld),t&&t(Q),H()},onDrag:Q=>{az.copy(K.current.matrixWorld),gx.copy(az).invert(),mM.copy(oz).premultiply(Q),lp.copy(mM).premultiply(gx),lz.copy(sz).invert(),cz.copy(lp).multiply(lz),s&&J.current.matrix.copy(lp),i&&i(lp,cz,mM,Q),H()},onDragEnd:()=>{r&&r(),H()},translation:V,translationLimits:p,rotationLimits:g,axisColors:S,hoveredColor:C,opacity:T,scale:m,lineWidth:A,fixed:y,depthTest:E,userData:F,annotations:M,annotationsClass:b}),[t,i,r,V,p,g,v,E,m,A,y,...S,C,T,F,s,M,b]),N=new D;return yt(Q=>{if(y){const j=VE(O.current.getWorldPosition(N),m,Q.camera,Q.size);U.current.setScalar(j)}e&&e instanceof Oe&&(J.current.matrix=e),J.current.updateWorldMatrix(!0,!0),uz.makeRotationFromEuler(O.current.rotation).setPosition(O.current.position).premultiply(J.current.matrixWorld),Y.current.setFromMatrixScale(uz),F1.copy(U.current).divide(Y.current),(Math.abs(O.current.scale.x-F1.x)>1e-4||Math.abs(O.current.scale.y-F1.y)>1e-4||Math.abs(O.current.scale.z-F1.z)>1e-4)&&(O.current.scale.copy(F1),Q.invalidate())}),w.useImperativeHandle(L,()=>J.current,[]),w.createElement(cv.Provider,{value:$},w.createElement("group",{ref:K},w.createElement("group",Ye({ref:J,matrix:e,matrixAutoUpdate:!1},z),w.createElement("group",{visible:I,ref:O,position:f,rotation:d},n&&w.createElement(w.Fragment,null,!a&&h[0]&&w.createElement(aM,{axis:0,direction:up}),!a&&h[1]&&w.createElement(aM,{axis:1,direction:hp}),!a&&h[2]&&w.createElement(aM,{axis:2,direction:fp}),!l&&h[0]&&h[1]&&w.createElement(dM,{axis:2,dir1:up,dir2:hp}),!l&&h[0]&&h[2]&&w.createElement(dM,{axis:1,dir1:fp,dir2:up}),!l&&h[2]&&h[1]&&w.createElement(dM,{axis:0,dir1:hp,dir2:fp}),!c&&h[0]&&h[1]&&w.createElement(fM,{axis:2,dir1:up,dir2:hp}),!c&&h[0]&&h[2]&&w.createElement(fM,{axis:1,dir1:fp,dir2:up}),!c&&h[2]&&h[1]&&w.createElement(fM,{axis:0,dir1:hp,dir2:fp}),!u&&h[0]&&w.createElement(pM,{axis:0,direction:up}),!u&&h[1]&&w.createElement(pM,{axis:1,direction:hp}),!u&&h[2]&&w.createElement(pM,{axis:2,direction:fp}))),w.createElement("group",{ref:W},R))))}),UCe=new D(0,0,-1),zCe=function(){const n=new D,e=new D,t=new D,i=new D,r=new D;return function(s,o,a,l){return n.copy(s),e.copy(o),t.copy(a),i.copy(e).sub(n),r.copy(t).sub(n),l.crossVectors(r,i).normalize()}}();function kCe(n,e){return n.clone().add(e).multiplyScalar(.5)}const KY=w.forwardRef(({points:n=qx.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:e,facialTransformationMatrix:t,faceBlendshapes:i,offset:r,offsetScalar:s=80,width:o,height:a,depth:l=1,verticalTri:c=[159,386,152],origin:u,eyes:h=!0,eyesAsOrigin:f=!1,debug:d=!1,children:m,...A},y)=>{var p;e&&(n=e.keypoints,console.warn("Facemesh `face` prop is deprecated: use `points` instead"));const g=w.useRef(null),v=w.useRef(null),E=w.useRef(null),S=w.useRef(null),C=w.useRef(null),M=w.useRef(null),b=w.useRef(null),[T]=w.useState(()=>new D),[I]=w.useState(()=>new kt),[F]=w.useState(()=>new St),[R]=w.useState(()=>new D),{invalidate:z}=Se();w.useEffect(()=>{var W;(W=C.current)==null||W.geometry.setIndex(qx.TRIANGULATION)},[]);const[L]=w.useState(()=>new D);w.useEffect(()=>{var W,V;const U=(W=C.current)==null?void 0:W.geometry;if(!U)return;if(U.setFromPoints(n),U.setDrawRange(0,qx.TRIANGULATION.length),t)if(I.matrix.fromArray(t.data),I.matrix.decompose(I.position,I.quaternion,I.scale),I.rotation.y*=-1,I.rotation.z*=-1,F.setFromEuler(I.rotation),r){var Y;I.position.y*=-1,I.position.z*=-1,(Y=g.current)==null||Y.position.copy(I.position.divideScalar(s))}else{var $;($=g.current)==null||$.position.set(0,0,0)}else zCe(n[c[0]],n[c[1]],n[c[2]],T),F.setFromUnitVectors(UCe,T);const N=F.clone().invert();if(U.computeBoundingBox(),d&&z(),U.center(),U.applyQuaternion(N),(V=S.current)==null||V.setRotationFromQuaternion(F),h){if(!i)console.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(M.current&&b.current&&E.current)if(f){const Q=M.current._computeSphere(U),j=b.current._computeSphere(U);u=kCe(Q.center,j.center).negate(),M.current._update(U,i,Q),b.current._update(U,i,j)}else M.current._update(U,i),b.current._update(U,i)}if(E.current){if(u!==void 0)if(typeof u=="number"){const Q=U.getAttribute("position");R.set(-Q.getX(u),-Q.getY(u),-Q.getZ(u))}else u.isVector3&&R.copy(u);else R.setScalar(0);E.current.position.copy(R)}if(v.current){let Q=1;(o||a||l)&&(U.boundingBox.getSize(L),o&&(Q=o/L.x),a&&(Q=a/L.y),l&&(Q=l/L.z)),v.current.scale.setScalar(Q!==1?Q:1)}U.computeVertexNormals(),U.attributes.position.needsUpdate=!0},[n,t,i,I,r,s,o,a,l,c,u,h,d,z,T,F,L,R]);const H=w.useMemo(()=>({outerRef:S,meshRef:C,eyeRightRef:M,eyeLeftRef:b}),[]);w.useImperativeHandle(y,()=>H,[H]);const[K]=w.useState(()=>new D),J=(p=C.current)==null?void 0:p.geometry.boundingBox,O=(J==null?void 0:J.getSize(K).z)||1;return w.createElement("group",A,w.createElement("group",{ref:g},w.createElement("group",{ref:S},w.createElement("group",{ref:v},d?w.createElement(w.Fragment,null,w.createElement("axesHelper",{args:[O]}),w.createElement(Va,{points:[[0,0,0],[0,0,-O]],color:65535})):null,w.createElement("group",{ref:E},h&&i&&w.createElement("group",{name:"eyes"},w.createElement(pT,{side:"left",ref:M,debug:d}),w.createElement(pT,{side:"right",ref:b,debug:d})),w.createElement("mesh",{ref:C,name:"face"},m,d?w.createElement(w.Fragment,null,J&&w.createElement("box3Helper",{args:[J]})):null))))))}),_p={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},pT=w.forwardRef(({side:n,debug:e=!0},t)=>{const i=w.useRef(null),r=w.useRef(null),[s]=w.useState(()=>new vi),o=w.useCallback(h=>{const f=h.getAttribute("position"),m=_p.contourLandmarks[n].map(A=>new D(f.getX(A),f.getY(A),f.getZ(A)));return s.center.set(0,0,0),m.forEach(A=>s.center.add(A)),s.center.divideScalar(m.length),s.radius=m[0].sub(m[1]).length()/2,s},[s,n]),[a]=w.useState(()=>new Rr),l=w.useCallback((h,f,d)=>{if(i.current){var m;(m=d)!==null&&m!==void 0||(d=o(h)),i.current.position.copy(d.center),i.current.scale.setScalar(d.radius)}if(f&&r.current){const A=_p.blendshapes[n],y=f.categories[A[0]].score,p=f.categories[A[1]].score,g=f.categories[A[2]].score,v=f.categories[A[3]].score,E=_p.fov.horizontal*Dt.DEG2RAD,S=_p.fov.vertical*Dt.DEG2RAD,C=E*.5*(v-g),M=S*.5*(y-p)*(n==="left"?1:-1);a.set(C,M,0),r.current.setRotationFromEuler(a)}},[o,n,a]),c=w.useMemo(()=>({eyeMeshRef:i,irisDirRef:r,_computeSphere:o,_update:l}),[o,l]);w.useImperativeHandle(t,()=>c,[c]);const u=_p.color[n];return w.createElement("group",null,w.createElement("group",{ref:i},e&&w.createElement("axesHelper",null),w.createElement("group",{ref:r},w.createElement(w.Fragment,null,e&&w.createElement(Va,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:u})))))}),qx={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}},JY=w.createContext({}),mT={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function NCe({basePath:n=mT.basePath,options:e=mT.options,children:t}){const i=JSON.stringify(e),r=Ic(async()=>{const{FilesetResolver:s,FaceLandmarker:o}=await LX(async()=>{const{FilesetResolver:l,FaceLandmarker:c}=await import("./vision_bundle-DAfdqQjW.js");return{FilesetResolver:l,FaceLandmarker:c}},[]),a=await s.forVisionTasks(n);return o.createFromOptions(a,e)},[n,i]);return w.useEffect(()=>()=>{r==null||r.close(),gE([n,i])},[r,n,i]),w.createElement(JY.Provider,{value:r},t)}function ZY(){return w.useContext(JY)}function mz(n,e){return n.clone().add(e).multiplyScalar(.5)}function dp(n,e,t){const i=n.localToWorld(e);return t.worldToLocal(i)}const $Y=w.createContext({}),GCe=w.forwardRef(({camera:n,autostart:e=!0,webcam:t=!0,webcamVideoTextureSrc:i,manualUpdate:r=!1,manualDetect:s=!1,onVideoFrame:o,smoothTime:a=.25,offset:l=!0,offsetScalar:c=80,eyes:u=!1,eyesAsOrigin:h=!0,depth:f=.15,debug:d=!1,facemesh:m,makeDefault:A},y)=>{var p,g;const v=Se(j=>j.scene),E=Se(j=>j.camera),S=Se(j=>j.set),C=Se(j=>j.get),M=n||E,b=w.useRef(null),T=w.useRef(null),[I]=w.useState(()=>new kt),[F]=w.useState(()=>new D),[R]=w.useState(()=>new D),[z]=w.useState(()=>new D),[L]=w.useState(()=>new D),H=w.useCallback(()=>{I.parent=M.parent;const j=T.current;if(j){const{outerRef:X,eyeRightRef:se,eyeLeftRef:ve}=j;if(se.current&&ve.current){const{irisDirRef:de}=se.current,{irisDirRef:he}=ve.current;de.current&&he.current&&X.current&&(F.copy(dp(de.current,new D(0,0,0),X.current)),R.copy(dp(he.current,new D(0,0,0),X.current)),I.position.copy(dp(X.current,mz(F,R),M.parent||v)),z.copy(dp(de.current,new D(0,0,1),X.current)),L.copy(dp(he.current,new D(0,0,1),X.current)),I.lookAt(X.current.localToWorld(mz(z,L))))}else X.current&&(I.position.copy(dp(X.current,new D(0,0,0),M.parent||v)),I.lookAt(X.current.localToWorld(new D(0,0,1))))}return I},[M,R,L,F,z,v,I]),[K]=w.useState(()=>new kt),J=w.useCallback(function(j,X){if(M){var se;(se=X)!==null&&se!==void 0||(X=H()),a>0?(Tm.damp3(K.position,X.position,a,j,void 0,void 0,1e-9),Tm.dampE(K.rotation,X.rotation,a,j,void 0,void 0,1e-9)):(K.position.copy(X.position),K.rotation.copy(X.rotation)),M.position.copy(K.position),M.rotation.copy(K.rotation)}},[M,H,a,K.position,K.rotation]),[O,W]=w.useState(),V=ZY(),U=w.useCallback((j,X)=>{const se=V==null?void 0:V.detectForVideo(j,X);W(se)},[V]);yt((j,X)=>{r||J(X)});const Y=w.useMemo(()=>Object.assign(Object.create(Or.prototype),{detect:U,computeTarget:H,update:J,facemeshApiRef:T,webcamApiRef:b,play:()=>{var j;(j=b.current)==null||(j=j.videoTextureApiRef.current)==null||j.texture.source.data.play()},pause:()=>{var j;(j=b.current)==null||(j=j.videoTextureApiRef.current)==null||j.texture.source.data.pause()}}),[U,H,J]);w.useImperativeHandle(y,()=>Y,[Y]),w.useEffect(()=>{const j=X=>{s||U(X.texture.source.data,X.time),o&&o(X)};return Y.addEventListener("videoFrame",j),()=>{Y.removeEventListener("videoFrame",j)}},[Y,U,V,s,o]),w.useEffect(()=>{if(A){const j=C().controls;return S({controls:Y}),()=>S({controls:j})}},[A,Y,C,S]);const $=O==null?void 0:O.faceLandmarks[0],N=O==null||(p=O.facialTransformationMatrixes)==null?void 0:p[0],Q=O==null||(g=O.faceBlendshapes)==null?void 0:g[0];return w.createElement($Y.Provider,{value:Y},t&&w.createElement(w.Suspense,{fallback:null},w.createElement(HCe,{ref:b,autostart:e,videoTextureSrc:i})),w.createElement(KY,Ye({ref:T},m,{points:$,depth:f,facialTransformationMatrix:N,faceBlendshapes:Q,eyes:u,eyesAsOrigin:h,offset:l,offsetScalar:c,debug:d,"rotation-z":Math.PI,visible:d}),w.createElement("meshBasicMaterial",{side:Vn})))}),Q8=()=>w.useContext($Y),HCe=w.forwardRef(({videoTextureSrc:n,autostart:e=!0},t)=>{const i=w.useRef(null),r=Q8(),s=Ic(async()=>n?Promise.resolve(null):await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}),[n]);w.useEffect(()=>(r.dispatchEvent({type:"stream",stream:s}),()=>{s==null||s.getTracks().forEach(a=>a.stop()),gE([n])}),[s,r,n]);const o=w.useMemo(()=>({videoTextureApiRef:i}),[]);return w.useImperativeHandle(t,()=>o,[o]),w.createElement(w.Suspense,{fallback:null},w.createElement(QCe,{ref:i,src:n||s,start:e}))}),QCe=w.forwardRef(({src:n,start:e},t)=>{const i=T8(n,{start:e}),r=i.source.data,s=Q8(),o=w.useCallback(l=>{s.dispatchEvent({type:"videoFrame",texture:i,time:l})},[i,s]);VCe(r,o);const a=w.useMemo(()=>({texture:i}),[i]);return w.useImperativeHandle(t,()=>a,[a]),w.createElement(w.Fragment,null)}),VCe=(n,e)=>{w.useEffect(()=>{if(!n||!n.requestVideoFrameCallback)return;let t;function i(...r){e(...r),t=n.requestVideoFrameCallback(i)}return n.requestVideoFrameCallback(i),()=>n.cancelVideoFrameCallback(t)},[n,e])},WCe=Object.freeze(Object.defineProperty({__proto__:null,AccumulativeShadows:_Y,AdaptiveDpr:USe,AdaptiveEvents:zSe,ArcballControls:zxe,AsciiRenderer:xxe,BBAnchor:nEe,Backdrop:Dwe,BakeShadows:FSe,Billboard:Bye,Bounds:fY,Box:zEe,Bvh:X3e,CameraControls:Wxe,CameraShake:uwe,Capsule:twe,CatmullRomLine:Hye,Caustics:Uwe,Center:D8,Circle:kEe,Clone:wA,Cloud:rSe,CloudInstance:dT,Clouds:CY,ComputedAttribute:hxe,Cone:NEe,ContactShadows:xY,CubeCamera:Rxe,CubeTexture:c_e,CubicBezierLine:Gye,CurveModifier:_Ee,CycleRaycast:Rpe,Cylinder:GEe,Decal:Axe,Detailed:DSe,DetectGPU:D_e,DeviceOrientationControls:Dxe,Dodecahedron:ZEe,DragControls:qme,Edges:vX,Effects:W2e,Environment:yY,EnvironmentCube:N8,EnvironmentMap:tw,EnvironmentPortal:vY,Example:aEe,Extrude:$Ee,FaceControls:GCe,FaceLandmarker:NCe,FaceLandmarkerDefaults:mT,Facemesh:KY,FacemeshDatas:qx,FacemeshEye:pT,FacemeshEyeDefaults:_p,Fbo:Txe,Fbx:u_e,FirstPersonControls:Gxe,Fisheye:WSe,Float:hwe,FlyControls:Lxe,GizmoHelper:Zxe,GizmoViewcube:s_e,GizmoViewport:o_e,Gltf:yxe,GradientTexture:j2e,GradientType:tT,Grid:l_e,Helper:A_e,Html:tv,Hud:IX,Icosahedron:KEe,Image:J2e,Instance:L8,Instances:F8,IsObject:om,KeyboardControls:mge,Ktx2:h_e,Lathe:ewe,Lightformer:Xwe,Line:Va,Loader:Ope,MapControls:Fxe,MarchingCube:pxe,MarchingCubes:dxe,MarchingPlane:mxe,Mask:QSe,MatcapTexture:hSe,Merged:vEe,MeshDiscardMaterial:LEe,MeshDistortMaterial:SEe,MeshPortalMaterial:YSe,MeshReflectorMaterial:TEe,MeshRefractionMaterial:PEe,MeshTransmissionMaterial:DEe,MeshWobbleMaterial:MEe,MotionPathControls:Yxe,NormalTexture:pSe,Octahedron:JEe,OrbitControls:Oxe,OrthographicCamera:SX,Outlines:Z2e,PerformanceMonitor:kSe,PerspectiveCamera:Pxe,PivotControls:OCe,Plane:QEe,Point:ISe,PointMaterial:FEe,PointMaterialImpl:uY,PointerLockControls:Nxe,Points:BSe,PointsBuffer:FY,Polyhedron:qEe,PositionPoint:DY,PositionalAudio:Qye,Preload:LSe,PresentationControls:dge,Progress:Lpe,QuadraticBezierLine:Nye,RandomizedLight:EY,Reflector:zwe,RenderCubeTexture:NY,RenderTexture:kY,Resize:awe,Ring:YEe,RoundedBox:rwe,Sampler:uxe,ScreenQuad:owe,ScreenSizer:zye,ScreenSpace:Pye,Scroll:K0e,ScrollControls:X0e,Segment:RSe,SegmentObject:UY,Segments:PSe,Select:Tye,Shadow:Lwe,ShadowAlpha:MSe,Shape:nwe,Sky:Ywe,SoftShadows:UEe,Sparkles:aSe,Sphere:HEe,Splat:bxe,SpotLight:jwe,SpotLightShadow:Wwe,SpriteAnimator:xEe,Stage:Pwe,Stars:Jwe,Stats:__e,StatsGl:S_e,Svg:vxe,Tetrahedron:XEe,Text:k2e,Text3D:gX,Texture:X2e,Torus:WEe,TorusKnot:jEe,TrackballControls:Uxe,Trail:cxe,TrailTexture:oEe,TransformControls:kxe,Tube:VEe,VideoTexture:g_e,View:qY,Wireframe:CSe,accumulativeContext:G8,calcPosFromAngles:SY,calculateAspectRatio:iT,calculateScaleFactor:VE,checkIfFrameIsEmpty:OX,getFirstItem:FX,isWebGL2Available:V2e,meshBounds:OSe,shaderMaterial:wo,useAnimations:q3e,useAspect:M_e,useBVH:j3e,useBounds:dY,useBoxProjectedEnv:tEe,useCamera:b_e,useContextBridge:Y3e,useCubeCamera:CX,useCubeTexture:b8,useCursor:Dpe,useDepthBuffer:C_e,useDetectGPU:NX,useEnvironment:z8,useFBO:Es,useFBX:YE,useFaceControls:Q8,useFaceLandmarker:ZY,useFont:jE,useGLTF:lv,useGizmoContext:XE,useHelper:I8,useIntersect:$X,useKTX2:qE,useKeyboardControls:gge,useMask:VSe,useMatcapTexture:IY,useMotion:TX,useNormalTexture:BY,usePerformanceMonitor:NSe,useProgress:$6,useScroll:n8,useSelect:Iye,useSpriteAnimator:yEe,useSpriteLoader:KE,useSurfaceSampler:_X,useTexture:sh,useTrail:xX,useTrailTexture:eY,useVideoTexture:T8},Symbol.toStringTag,{value:"Module"})),jCe="/assets/advice-generator-app-main-DUVIpOHY.jpg",XCe="/assets/blog-preview-card-main-D3a7D5F9.jpg",YCe="/assets/chat-app-css-illustration-master-C9zCm1PP.jpg",qCe="/assets/clipboard-landing-page-master-FEAv0IWQ.jpg",KCe="/assets/contact-form-main-knyZLLfp.jpg",JCe="/assets/ecommerce-product-page-main-B5CPARtN.jpg",ZCe="/assets/faq-accordion-main-CPanjEYa.jpg",$Ce="/assets/fylo-data-storage-component-master-BOSZ7vrU.jpg",e4e="/assets/fylo-landing-page-with-two-column-layout-master-DPQCBq9J.jpg",t4e="/assets/interactive-rating-component-main-BPTBjZ7y.jpg",n4e="/assets/intro-component-with-signup-form-master-ZHRDHFr8.jpg",i4e="/assets/ip-address-tracker-master-B2Smdd2M.jpg",r4e="/assets/loopstudios-landing-page-main-CRzMCQjO.jpg",s4e="/assets/newsletter-sign-up-with-success-message-main-BCV9F9xL.jpg",o4e="/assets/nft-preview-card-component-main-B3hVmNn3.jpg",a4e="/assets/order-summary-component-main-vgcOUGjV.jpg",l4e="/assets/product-preview-card-component-main-C1ZHmWsD.jpg",c4e="/assets/qr-code-component-main-Squ9koef.jpg",u4e="/assets/recipe-page-main-DsALuMRW.jpg",h4e="/assets/results-summary-component-main-q0q8B8vE.jpg",f4e="/assets/room-homepage-master-Blzev_qm.jpg",d4e="/assets/social-links-profile-main-BhM8blVI.jpg",p4e="/assets/social-proof-section-master-DcZDW7Ia.jpg",m4e="/assets/space-tourism-website-main-B6r_Gm_7.png",g4e="/assets/testimonials-grid-section-main-T9qiBxj9.jpg",A4e="/assets/Screenshot05-BwG8TnX9.png",AM=[{id:1,image:jCe,repo:"https://github.com/chaithawat21/frontendmentor-advice-generator-app-main",liveSite:"https://chaithawat21.github.io/frontendmentor-advice-generator-app-main/"},{id:2,image:XCe,repo:"https://github.com/chaithawat21/frontendmentor-blog-preview-card-main",liveSite:"https://chaithawat21.github.io/frontendmentor-blog-preview-card-main/"},{id:3,image:YCe,repo:"https://github.com/chaithawat21/frontendmentor-chat-app-css-illustration-master",liveSite:"https://chaithawat21.github.io/frontendmentor-chat-app-css-illustration-master/"},{id:4,image:qCe,repo:"https://github.com/chaithawat21/frontendmentor-clipboard-landing-page-master",liveSite:"https://chaithawat21.github.io/frontendmentor-clipboard-landing-page-master/"},{id:5,image:KCe,repo:"https://github.com/chaithawat21/frontendmentor-contact-form-main",liveSite:"https://chaithawat21.github.io/frontendmentor-contact-form-main/"},{id:6,image:JCe,repo:"https://github.com/chaithawat21/frontendmentor-ecommerce-product-page-main",liveSite:"https://chaithawat21.github.io/frontendmentor-ecommerce-product-page-main/"},{id:7,image:ZCe,repo:"https://github.com/chaithawat21/frontendmentor-faq-accordion-main",liveSite:"https://chaithawat21.github.io/frontendmentor-faq-accordion-main/"},{id:8,image:$Ce,repo:"https://github.com/chaithawat21/frontendmentor-fylo-data-storage-component-master",liveSite:"https://chaithawat21.github.io/frontendmentor-fylo-data-storage-component-master/"},{id:9,image:e4e,repo:"https://github.com/chaithawat21/frontendmentor-fylo-landing-page-with-two-column-layout-master",liveSite:"https://chaithawat21.github.io/frontendmentor-fylo-landing-page-with-two-column-layout-master/"},{id:10,image:t4e,repo:"https://github.com/chaithawat21/frontendmentor-interactive-rating-component-main",liveSite:"https://chaithawat21.github.io/frontendmentor-interactive-rating-component-main/"},{id:11,image:n4e,repo:"https://github.com/chaithawat21/frontendmentor-intro-component-with-signup-form-master",liveSite:"https://chaithawat21.github.io/frontendmentor-intro-component-with-signup-form-master/"},{id:12,image:i4e,repo:"https://github.com/chaithawat21/frontendmentor-ip-address-tracker-master",liveSite:"https://chaithawat21.github.io/frontendmentor-ip-address-tracker-master/"},{id:13,image:r4e,repo:"https://github.com/chaithawat21/frontendmentor-loopstudios-landing-page-main",liveSite:"https://chaithawat21.github.io/frontendmentor-loopstudios-landing-page-main/"},{id:14,image:s4e,repo:"https://github.com/chaithawat21/frontendmentor-newsletter-sign-up-with-success-message-main",liveSite:"https://chaithawat21.github.io/frontendmentor-newsletter-sign-up-with-success-message-main/"},{id:15,image:o4e,repo:"https://github.com/chaithawat21/frontendmentor-nft-preview-card-component-main",liveSite:"https://chaithawat21.github.io/frontendmentor-nft-preview-card-component-main/"},{id:16,image:a4e,repo:"https://github.com/chaithawat21/frontendmentor-order-summary-component-main",liveSite:"https://chaithawat21.github.io/frontendmentor-order-summary-component-main/"},{id:17,image:l4e,repo:"https://github.com/chaithawat21/frontendmentor-product-preview-card-component-main",liveSite:"https://chaithawat21.github.io/frontendmentor-product-preview-card-component-main/"},{id:18,image:c4e,repo:"https://github.com/chaithawat21/frontendmentor-qr-code-component-main",liveSite:"https://chaithawat21.github.io/frontendmentor-qr-code-component-main/"},{id:19,image:u4e,repo:"https://github.com/chaithawat21/frontendmentor-recipe-page-main",liveSite:"https://chaithawat21.github.io/frontendmentor-recipe-page-main/"},{id:20,image:h4e,repo:"https://github.com/chaithawat21/frontendmentor-results-summary-component-main",liveSite:"https://chaithawat21.github.io/frontendmentor-results-summary-component-main/"},{id:21,image:f4e,repo:"https://github.com/chaithawat21/frontendmentor-room-homepage-master",liveSite:"https://chaithawat21.github.io/frontendmentor-room-homepage-master/"},{id:22,image:d4e,repo:"https://github.com/chaithawat21/frontendmentor-social-links-profile-main",liveSite:"https://chaithawat21.github.io/frontendmentor-social-links-profile-main/"},{id:23,image:p4e,repo:"https://github.com/chaithawat21/frontendmentor-social-proof-section-master",liveSite:"https://chaithawat21.github.io/frontendmentor-social-proof-section-master/"},{id:24,image:m4e,repo:"https://github.com/chaithawat21/frontendmentor-space-tourism-website-main",liveSite:"https://chaithawat21.github.io/frontendmentor-space-tourism-website-main/"},{id:25,image:g4e,repo:"https://github.com/chaithawat21/frontendmentor-testimonials-grid-section-main",liveSite:"https://chaithawat21.github.io/frontendmentor-testimonials-grid-section-main/"}];function v4e(){const n="CHAITHAWAT",e="PINSUWAN",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",[i,r]=w.useState(""),[s,o]=w.useState(null),a=50,l=100,[c,u]=w.useState(a),h=Ane(0),[f,d]=w.useState(!1),[m,A]=w.useState(!1),p=180*AM.length;w.useEffect(()=>{const M=(b,T,I=!1)=>{if(b>=T.length){I||(r(H=>H+" "),M(0,e,!0));return}const F=T[b],R=t.indexOf(F);let z=0;const L=setInterval(()=>{r(H=>H.slice(0,b+(I?n.length+1:0))+t[z]+H.slice(b+(I?n.length+1:0)+1)),z===R?(clearInterval(L),M(b+1,T,I)):z++},50)};r(n.replace(/[^ ]/g," ")),M(0,n)},[]),w.useEffect(()=>{let M;const b=-p;return f?M=HR(h,[h.get(),b],{ease:"linear",duration:c*(1-h.get()/b),onComplete:()=>{d(!1),A(!m)}}):M=HR(h,[0,b],{ease:"linear",duration:c,repeat:1/0,repeatType:"loop",repeatDelay:0}),M==null?void 0:M.stop},[m,h,c,p]);const g=M=>{o(AM.find(b=>b.id===M))},v=()=>{o(null),S(!1)},[E,S]=w.useState(!1),C=()=>{S(!0)};return Ge.jsx(Ge.Fragment,{children:Ge.jsxs("main",{children:[Ge.jsxs("div",{className:"content",children:[Ge.jsxs("div",{className:"top",children:[Ge.jsxs("div",{className:"top-name",children:[Ge.jsx(vm.h1,{className:"name",children:i}),Ge.jsx("p",{className:"name-detail",children:"I'm UI/UX Design and Front End Developer."})]}),Ge.jsxs("div",{className:"icon-link",children:[Ge.jsx("a",{href:"https://www.linkedin.com/in/chaithawat/",target:"_blank",children:Ge.jsx("img",{className:"icon",src:Fne,alt:"Linkedin"})}),Ge.jsx("a",{href:"https://github.com/chaithawat21",target:"_blank",children:Ge.jsx("img",{className:"icon",src:One,alt:"Github"})}),Ge.jsx("a",{className:"resume",href:"https://www.canva.com/design/DAGMh2JsQSE/vZzxGNJR5mwARaZl-Rrm7Q/view?utm_content=DAGMh2JsQSE&utm_campaign=designshare&utm_medium=link&utm_source=editor",target:"_blank",children:"RESUME"})]})]}),Ge.jsxs("div",{className:"middle",children:[Ge.jsx("h2",{className:"o2o",children:Ge.jsx("a",{href:"https://o2o-project.vercel.app",target:"_blank",children:"O2O Project"})}),Ge.jsx("img",{className:"o2o-img",src:A4e,alt:"screenshot",onClick:C}),E&&Ge.jsx($ne,{onClose:v}),Ge.jsxs("ul",{className:"o2o-list",children:[Ge.jsx("li",{children:Ge.jsx("a",{className:"o2o-text",href:"https://www.figma.com/design/7pjpUvA80UlvUp0nj9eonQ/Design?node-id=0-1&t=YZwNx7rLROd5bFgP-1",target:"_blank",children:"FIGMA"})}),Ge.jsx("li",{children:Ge.jsx("a",{className:"o2o-text",href:"https://github.com/chaithawat21/o2o-frontend",target:"_blank",children:"REPOSITORY(Frontend)"})}),Ge.jsx("li",{children:Ge.jsx("a",{className:"o2o-text",href:"https://github.com/chaithawat21/o2o-backend",target:"_blank",children:"REPOSITORY(Backend)"})})]}),Ge.jsx("h2",{className:"frontendmentor",children:Ge.jsx("a",{href:"https://www.frontendmentor.io/profile/chaithawat21",target:"_blank",children:"Frontend Mentor"})}),Ge.jsx(vm.div,{className:"container-cards",style:{x:h},onHoverStart:()=>{d(!0),u(l)},onHoverEnd:()=>{d(!0),u(a)},children:AM.map(M=>Ge.jsx(Une,{identifier:M.id,image:M.image,repo:M.repo,liveSite:M.liveSite,onClick:g},M.id))})]}),Ge.jsx(sH,{children:s&&Ge.jsx(zne,{image:s.image,repo:s.repo,liveSite:s.liveSite,onClose:v})})]}),Ge.jsx(nde,{importedFiber:{...she,...WCe,...Ffe},style:{position:"absolute",top:0,height:1e3},children:Ge.jsx(Epe,{control:"query",urlString:"https://www.shadergradient.co/customize?animate=on&axesHelper=off&bgColor1=%23000000&bgColor2=%23000000&brightness=1.4&cAzimuthAngle=180&cDistance=3.1&cPolarAngle=120&cameraZoom=1&color1=%23a8c7ca&color2=%23df7a61&color3=%23e7ad6b&destination=onCanvas&embedMode=off&envPreset=lobby&format=gif&fov=50&frameRate=10&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1&positionX=0&positionY=1.8&positionZ=0&range=enabled&rangeEnd=40&rangeStart=0&reflection=0.1&rotationX=0&rotationY=0&rotationZ=-90&shader=defaults&type=waterPlane&uDensity=1&uFrequency=5.5&uSpeed=0.3&uStrength=3&uTime=0.2&wireframe=false"})})]})})}vM.createRoot(document.getElementById("root")).render(Ge.jsx(xl.StrictMode,{children:Ge.jsx(v4e,{})}));export{Bq as c,Dm as g};
